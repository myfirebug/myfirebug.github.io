(this["webpackJsonpreact-text"]=this["webpackJsonpreact-text"]||[]).push([[7],{154:function(e,t,n){"use strict";n(88);var a=n(34),r=n.n(a),c=n(157),o=n.n(c),i={development:{api:"https://cnodejs.org/api/v1"},production:{api:"https://cnodejs.org/api/v1"}},s=n(158),u=n.n(s),l=function(e){o.a.defaults.baseURL=i.production[e]};function m(e,t,n,a){return n&&l(n),new Promise((function(n,r){o.a.get(e,{params:t,header:a}).then((function(e){n(e)})).catch((function(e){r(e)}))}))}function f(e,t,n,a,r){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return n&&l(n),new Promise((function(n,i){o.a.post(e,c?u.a.stringify(t):t,{headers:a||{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}},r).then((function(e){n(e)})).catch((function(e){i(e)}))}))}o.a.defaults.timeout=6e4,o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",o.a.interceptors.request.use((function(e){return r.a.loading("loading...",0),e}),(function(e){return Promise.error(e)})),o.a.interceptors.response.use((function(e){return r.a.hide(),200===e.status?Promise.resolve(e.data):Promise.reject(e)}),(function(e){r.a.hide();var t=e.response;if(!t)return Promise.reject(e);t.status;return Promise.reject(e)}));t.a={getTopics:function(e){return m("/topics",e,"api")},getDetails:function(e){return m("/topic/".concat(e),{},"api")},login:function(e){return f("/accesstoken",e,"api")},user:function(e){return m("/user/".concat(e),"","api")},collect:function(e){return f("/topic_collect/collect",e,"api")},de_collect:function(e){return f("/topic_collect/de_collect ",e,"api")},myCollect:function(e){return m("/topic_collect/".concat(e),"","api")},messages:function(e){return m("messages",e,"api")},markOne:function(e,t){return f("/message/mark_one/".concat(e),t,"api")}}},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(67);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(s){r=!0,c=s}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return n}}(e,t)||Object(a.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},156:function(e,t,n){"use strict";function a(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.href.split("?").length>1&&window.location.href.split("?")[1].match(t);return n?decodeURIComponent(n[2]):null}function r(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c}));var c=function(e){if(!e)return"";var t=new Date(e),n=(new Date).getTime()-t.getTime();return n<0?"":n/1e3<30?"\u521a\u521a":n/1e3<60?parseInt(n/1e3)+"\u79d2\u524d":n/6e4<60?parseInt(n/6e4)+"\u5206\u949f\u524d":n/36e5<24?parseInt(n/36e5)+"\u5c0f\u65f6\u524d":n/864e5<31?parseInt(n/864e5)+"\u5929\u524d":n/2592e6<12?parseInt(n/2592e6)+"\u6708\u524d":parseInt(n/31536e6)+"\u5e74\u524d"}},160:function(e,t,n){"use strict";var a=n(155),r=n(0),c=n.n(r),o=n(48),i=(n(161),Object(r.memo)((function(e){var t=e.hash,n=Object(r.useState)([{icon:"&#xe729;",name:"\u9996\u9875",path:"/home"},{icon:"&#xe68a;",name:"\u6d88\u606f",path:"/message"},{icon:"&#xe6a1;",name:"\u6211\u7684",path:"/my"}]),i=Object(a.a)(n,1)[0];return c.a.createElement("div",{className:"cn-footer"},c.a.createElement("ul",{className:"cn-nav"},i.map((function(e,n){return c.a.createElement("li",{className:["cn-nav__item",-1!==t.indexOf(e.path)?"is-active":""].join(" "),key:n},c.a.createElement(o.b,{to:{pathname:e.path}},c.a.createElement("span",{dangerouslySetInnerHTML:{__html:"".concat(e.icon)},className:"ued-mobile"}),c.a.createElement("span",{className:"text"},e.name)))}))))})));t.a=i},161:function(e,t,n){},180:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var a=n(4),r=n(154),c=n(9),o=function(e){return{type:a.l,data:e}},i=function(e,t){return function(n){r.a.login({accesstoken:e}).then((function(a){!0===a.success&&(n(o({avatar_url:a.avatar_url,loginname:a.loginname,id:a.id,token:e})),Object(c.b)().push({pathname:t}))}))}},s=function(){return function(e){e(o({}))}}},204:function(e,t,n){},205:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);n(88);var a=n(34),r=n.n(a),c=n(155),o=n(0),i=n.n(o),s=n(35),u=n(180),l=n(9),m=(n(205),Object(o.memo)((function(e){var t=e.accessToken,n=e.getUserInfo,a=e.location,s=Object(o.useState)(""),u=Object(c.a)(s,2),m=u[0],f=u[1];Object(o.useEffect)((function(){t&&Object(l.b)().push({pathname:"/home"})}),[]);var p=Object(o.useCallback)((function(e){f(e.target.value)}),[]),d=Object(o.useCallback)((function(){m?n(m,a.state&&a.state.from?a.state.from:"/home"):r.a.info("\u8bf7\u8f93\u5165token",100)}),[m]);return i.a.createElement("div",{className:"cn-login"},i.a.createElement("div",{className:"cn-login__wrapper"},i.a.createElement("h1",{className:"title"},"\u6b22\u8fce\u6765\u5230CNODE\u793e\u533a"),i.a.createElement("div",{className:"cn-login__form"},i.a.createElement("div",{className:"cn-login__item ui-border-radius",style:{background:"#fff"}},i.a.createElement("input",{autoFocus:!0,type:"text",onChange:p,placeholder:"\u8bf7\u8f93\u5165accessToken",value:m})),i.a.createElement("div",{className:"cn-login__item"},i.a.createElement("button",{onClick:d},"\u767b\u5f55")))))})));t.default=Object(s.b)((function(e){return{accessToken:e.userInfo.token}}),{getUserInfo:u.a})(m)},213:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=(n(204),n(48)),o=n(35),i=n(4),s=n(154),u=function(e){return{type:i.m,data:e}},l=n(180),m=n(160),f=n(156),p=Object(a.memo)((function(e){var t=e.user,n=e.getUserCenterInfo,o=e.userInfo,i=e.loginOut,s=t.loginname,u=t.avatar_url,l=t.score,p=t.recent_replies,d=t.recent_topics;return Object(a.useEffect)((function(){n(Object(f.b)("username"))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cn-my"},r.a.createElement("div",{className:"cn-my__hd ui-border-b"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{src:u,alt:s})),r.a.createElement("div",{className:"user-info"},s?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"user-name"},s),r.a.createElement("p",{className:"integral"},"\u79ef\u5206\uff1a",l||0)):r.a.createElement(c.b,{className:"user-name",to:{pathname:"/login",state:{from:"/my"}}},"\u767b\u5f55"))),s?r.a.createElement("ul",{className:"cn-my__bd ui-border-t"},r.a.createElement("li",{className:"cn-my__item ui-border-b"},r.a.createElement(c.b,{to:{pathname:"/my-list",state:{data:p}}},"\u6700\u65b0\u521b\u5efa\u7684\u8bdd\u9898")),r.a.createElement("li",{className:"cn-my__item ui-border-b"},r.a.createElement(c.b,{to:{pathname:"/my-list",state:{data:d}}},"\u6700\u8fd1\u53c2\u4e0e\u7684\u8bdd\u9898")),r.a.createElement("li",{className:"cn-my__item ui-border-b"},r.a.createElement(c.b,{to:{pathname:"/collect",search:"username=".concat(s)}},"\u6536\u85cf\u7684"))):null,o.loginname&&s===o.loginname?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cn-my__ft ui-border-tb",onClick:function(){return i()}},"\u9000\u51fa\u767b\u5f55")):null),o.loginname&&s===o.loginname?r.a.createElement(m.a,{hash:"/my"}):null)}));t.default=Object(o.b)((function(e){return{user:e.user,userInfo:e.userInfo}}),{getUserCenterInfo:function(e){return function(t,n){var a=n();e||a.userInfo.loginname?(e||(e=a.userInfo.loginname),s.a.user(e).then((function(e){e.success&&t(u(e.data))}))):t(u({}))}},loginOut:l.b})(p)}}]);
//# sourceMappingURL=my.e6408eab.chunk.js.map