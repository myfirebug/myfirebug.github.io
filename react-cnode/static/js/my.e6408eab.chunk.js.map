{"version":3,"sources":["service/config.js","service/fetch.js","service/index.js","../node_modules/_@babel_runtime@7.10.0@@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/_@babel_runtime@7.10.0@@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/_@babel_runtime@7.10.0@@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/_@babel_runtime@7.10.0@@babel/runtime/helpers/esm/nonIterableRest.js","util/index.js","components/footer/index.js","store/actions/userInfo.js","page/login/index.js","store/actions/my.js","page/my/index.js"],"names":["development","api","production","getService","serviceUrl","axios","defaults","baseURL","config","get","url","params","header","Promise","resolve","reject","then","res","catch","err","post","data","qs","Qs","stringify","headers","timeout","interceptors","request","use","loading","error","response","hide","status","getTopics","getDetails","id","login","user","username","collect","de_collect","myCollect","messages","markOne","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","unsupportedIterableToArray","TypeError","getUrl","name","reg","RegExp","result","window","location","href","split","match","decodeURIComponent","fmtDate","date","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","k","test","replace","$1","getFullYear","substr","timeAgo","str","Date","time","getTime","parseInt","Footer","memo","hash","useState","icon","path","navList","className","map","item","index","indexOf","join","key","to","pathname","dangerouslySetInnerHTML","__html","userInfo","type","types","getUserInfo","token","dispatch","Ajax","accesstoken","success","avatar_url","loginname","createHashHistory","loginOut","Login","accessToken","setToken","useEffect","getToken","useCallback","e","target","submitHanlder","state","from","info","style","background","autoFocus","onChange","placeholder","onClick","connect","userCenter","My","getUserCenterInfo","score","recent_replies","recent_topics","src","alt","search","getState"],"mappings":"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","file":"static/js/my.e6408eab.chunk.js","sourcesContent":["/*\r\n * @Author: hejp\r\n * @Date:   16:26\r\n * @Last Modified by:   hejp\r\n * @Last Modified time: 16:26\r\n */\r\nexport default {\r\n    development: {\r\n        api: 'https://cnodejs.org/api/v1'\r\n    },\r\n    production: {\r\n        api: 'https://cnodejs.org/api/v1'\r\n    }\r\n}\r\n","/*\r\n * @Author: hejp\r\n * @Date:   10:39\r\n * @Last Modified by:   hejp\r\n * @Last Modified time: 10:39\r\n */\r\nimport axios from 'axios'\r\nimport config from './config'\r\nimport Qs from 'qs'\r\nimport { Toast } from 'antd-mobile'\r\nconst ENV = process.env.NODE_ENV;\r\n\r\nconst getService = (serviceUrl) => {\r\n    // 环境切换(开发，正式环境)\r\n    if (ENV === 'development') {\r\n        axios.defaults.baseURL = config.development[serviceUrl]\r\n    } else if (ENV === 'production') {\r\n        // production, online\r\n        axios.defaults.baseURL = config.production[serviceUrl]\r\n    }\r\n}\r\n// 请求超时\r\naxios.defaults.timeout = 60000\r\n\r\n// post 请求头的设置\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8'\r\n\r\n// 请求拦截器\r\naxios.interceptors.request.use(\r\n    config => {\r\n        Toast.loading('loading...', 0)\r\n        // document.getElementById('js_loading').style.display = 'block';\r\n        return config\r\n    },\r\n    error => {\r\n        return Promise.error(error)\r\n    }\r\n)\r\n\r\n// 响应拦截器\r\naxios.interceptors.response.use(\r\n    response => {\r\n        // document.getElementById('js_loading').style.display = 'none'\r\n        Toast.hide()\r\n        if (response.status === 200) {\r\n            return Promise.resolve(response.data)\r\n        } else {\r\n            return Promise.reject(response)\r\n        }\r\n    },\r\n    error => {\r\n        // document.getElementById('js_loading').style.display = 'none'\r\n        Toast.hide()\r\n        let response = error.response\r\n        if (!response) {\r\n            return Promise.reject(error)\r\n        }\r\n        let code = response.status\r\n        if (code) {\r\n            switch (code) {\r\n                case 401:\r\n                    break\r\n                // token过期\r\n                case 403:\r\n                    break\r\n                // 404请求不存在\r\n                case 404:\r\n                    break\r\n                case 500:\r\n                    break\r\n                default:\r\n                    break\r\n            }\r\n        }\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\n/**\r\n * get方法\r\n * @param url [请求的url地址]\r\n * @param params [请求的参数]\r\n * @returns {Promise<any>}\r\n */\r\nexport function get (url, params, serviceUrl, header) {\r\n    if (serviceUrl) {\r\n        getService(serviceUrl)\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n        axios.get(url, {\r\n            params: params,\r\n            header: header\r\n        }).then(res => {\r\n            resolve(res)\r\n        }).catch(err => {\r\n            reject(err)\r\n        })\r\n    })\r\n}\r\n/**\r\n * post方法\r\n * @param url [请求的url地址]\r\n * @param params [请求的参数]\r\n * @returns {Promise<any>}\r\n */\r\nexport function post (url, params, serviceUrl, header, data, qs = true) {\r\n    if (serviceUrl) {\r\n        getService(serviceUrl)\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n        axios.post(url,\r\n            qs ? Qs.stringify(params) : params,\r\n            {\r\n                headers: header ? header : {\r\n                    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\r\n                }\r\n            },\r\n            data\r\n            ).then(res => {\r\n            resolve(res)\r\n        }).catch(err => {\r\n            reject(err)\r\n        })\r\n    })\r\n}\r\n","/*\r\n * @Author: hejp\r\n * @Date:   16:43\r\n * @Last Modified by:   hejp\r\n * @Last Modified time: 16:43\r\n */\r\nimport {\r\n    get,\r\n    post\r\n} from './fetch'\r\n\r\nexport default {\r\n    getTopics(params) {\r\n        return get('/topics', params, 'api')\r\n    },\r\n    getDetails(id) {\r\n        return get(`/topic/${id}`, {},'api')\r\n    },\r\n    login(params) {\r\n        return post('/accesstoken', params,'api')\r\n    },\r\n    user(username) {\r\n        return get(`/user/${username}`, '','api')\r\n    },\r\n    collect(params) {\r\n        return post('/topic_collect/collect', params,'api')\r\n    },\r\n    de_collect(params) {\r\n        return post('/topic_collect/de_collect ', params,'api')\r\n    },\r\n    myCollect(username) {\r\n        return get(`/topic_collect/${username}`, '','api')\r\n    },\r\n    messages(params) {\r\n        return get('messages', params,'api')\r\n    },\r\n    markOne(id, params) {\r\n        return post(`/message/mark_one/${id}`, params,'api')\r\n    }\r\n}\r\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","/*\r\n * @Author: hejp\r\n * @Date:   11:10\r\n * @Last Modified by:   hejp\r\n * @Last Modified time: 11:10\r\n */\r\n/**\r\n * 获取参数值\r\n * @param name\r\n * @returns {any}\r\n */\r\nexport function getUrl (name) {\r\n    let reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)')\r\n    let result = window.location.href.split('?').length > 1 && window.location.href.split('?')[1].match(reg)\r\n    return result ? decodeURIComponent(result[2]) : null\r\n}\r\n\r\n/**\r\n *格式化日期\r\n * @param date\r\n * @param fmt\r\n * @returns {*}\r\n */\r\nexport function fmtDate (date, fmt) {\r\n    var o = {\r\n        'M+': date.getMonth() + 1,\r\n        'd+': date.getDate(),\r\n        'h+': date.getHours(),\r\n        'm+': date.getMinutes(),\r\n        's+': date.getSeconds(),\r\n        'q+': Math.floor((date.getMonth() + 3) / 3),\r\n        'S': date.getMilliseconds()\r\n    }\r\n    if (/(y+)/.test(fmt)) {\r\n        fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length))\r\n    }\r\n    for (var k in o) {\r\n        if (new RegExp('(' + k + ')').test(fmt)) {\r\n            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (('00' + o[k]).substr(('' + o[k]).length)))\r\n        }\r\n    }\r\n    return fmt\r\n}\r\n\r\nexport const timeAgo =  function (str) {\r\n    if (!str) return ''\r\n    var date = new Date(str)\r\n    var time = new Date().getTime() - date.getTime()\r\n    if (time < 0) {\r\n        return ''\r\n    } else if ((time / 1000 < 30)) {\r\n        return '刚刚'\r\n    } else if (time / 1000 < 60) {\r\n        return parseInt((time / 1000)) + '秒前'\r\n    } else if ((time / 60000) < 60) {\r\n        return parseInt((time / 60000)) + '分钟前'\r\n    } else if ((time / 3600000) < 24) {\r\n        return parseInt(time / 3600000) + '小时前'\r\n    } else if ((time / 86400000) < 31) {\r\n        return parseInt(time / 86400000) + '天前'\r\n    } else if ((time / 2592000000) < 12) {\r\n        return parseInt(time / 2592000000) + '月前'\r\n    } else {\r\n        return parseInt(time / 31536000000) + '年前'\r\n    }\r\n}\r\n\r\n\r\n","/*\r\n * @Author: hejp\r\n * @Date:   14:10\r\n * @Last Modified by:   hejp\r\n * @Last Modified time: 14:10\r\n */\r\nimport React, {\r\n    useState,\r\n    memo\r\n} from 'react'\r\nimport {\r\n    Link\r\n} from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport './index.scss'\r\n\r\nconst Footer = memo(({ hash }) => {\r\n    const [navList] = useState([\r\n        {\r\n            icon: '&#xe729;',\r\n            name: '首页',\r\n            path: '/home'\r\n        },\r\n        {\r\n            icon: '&#xe68a;',\r\n            name: '消息',\r\n            path: '/message'\r\n        },\r\n        {\r\n            icon: '&#xe6a1;',\r\n            name: '我的',\r\n            path: '/my'\r\n        }\r\n    ])\r\n    return (\r\n        <div className=\"cn-footer\">\r\n            <ul className=\"cn-nav\">\r\n                {\r\n                    navList.map((item, index) => (\r\n                        <li className={['cn-nav__item', hash.indexOf(item.path) !== -1 ? 'is-active' : ''].join(' ')}\r\n                            key={index}>\r\n                            <Link\r\n                                to={{\r\n                                    pathname: item.path\r\n                                }}\r\n                            >\r\n                                    <span\r\n                                        dangerouslySetInnerHTML={{__html: `${item.icon}`}}\r\n                                        className=\"ued-mobile\"></span>\r\n                                <span className=\"text\">{item.name}</span>\r\n                            </Link>\r\n                        </li>\r\n                    ))\r\n                }\r\n            </ul>\r\n        </div>\r\n    )\r\n})\r\n\r\nFooter.propTypes = {\r\n    hash: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Footer\r\n","/*\r\n * @Author: hejp\r\n * @Date:   17:28\r\n * @Last Modified by:   hejp\r\n * @Last Modified time: 17:28\r\n */\r\nimport * as types from '../actionType'\r\nimport Ajax from '../../service'\r\nimport {createHashHistory} from 'history';\r\n\r\nconst userInfo = data => ({\r\n    type: types.USERINFO,\r\n    data\r\n})\r\n\r\nexport const getUserInfo = (token, pathname) => (dispatch) => {\r\n    Ajax.login({\r\n        accesstoken: token\r\n    })\r\n        .then(res => {\r\n            if (res.success === true) {\r\n                dispatch(userInfo({\r\n                    avatar_url: res.avatar_url,\r\n                    loginname: res.loginname,\r\n                    id: res.id,\r\n                    token: token\r\n                }))\r\n                createHashHistory().push({\r\n                    pathname: pathname\r\n                })\r\n            }\r\n        })\r\n}\r\n\r\nexport const loginOut = () => dispatch => {\r\n    dispatch(userInfo({}))\r\n}\r\n","/*\r\n * @Author: hejp\r\n * @Date:   17:56\r\n * @Last Modified by:   hejp\r\n * @Last Modified time: 17:56\r\n */\r\nimport React, {\r\n    useState,\r\n    useCallback,\r\n    useEffect,\r\n    memo\r\n} from 'react'\r\nimport {connect} from 'react-redux';\r\nimport { getUserInfo } from '../../store/actions/userInfo'\r\nimport {createHashHistory} from 'history';\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n    Toast\r\n} from 'antd-mobile'\r\nimport './index.scss'\r\n\r\nconst Login = memo(({ accessToken, getUserInfo, location }) => {\r\n    const [token, setToken] = useState('')\r\n    useEffect(() => {\r\n        if (accessToken) {\r\n            createHashHistory().push({\r\n                pathname: '/home'\r\n            })\r\n        }\r\n    }, [])\r\n\r\n    const getToken = useCallback((e) => {\r\n        setToken(e.target.value)\r\n    }, [])\r\n\r\n    const submitHanlder = useCallback(() => {\r\n        if (token) {\r\n            getUserInfo(token, (location.state && location.state.from) ? location.state.from : '/home')\r\n        } else {\r\n            Toast.info('请输入token', 100)\r\n        }\r\n    }, [token])\r\n\r\n    return (\r\n        <div className=\"cn-login\">\r\n            <div className=\"cn-login__wrapper\">\r\n                <h1 className=\"title\">欢迎来到CNODE社区</h1>\r\n                <div className=\"cn-login__form\">\r\n                    <div className=\"cn-login__item ui-border-radius\" style={{\r\n                        background: '#fff'\r\n                    }}>\r\n                        <input\r\n                            autoFocus\r\n                            type=\"text\"\r\n                            onChange={getToken}\r\n                            placeholder=\"请输入accessToken\"\r\n                            value={token}/>\r\n                    </div>\r\n                    <div className=\"cn-login__item\">\r\n                        <button\r\n                            onClick={submitHanlder}\r\n                        >登录</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n\r\nLogin.propTypes = {\r\n    accessToken: PropTypes.string,\r\n    getUserInfo: PropTypes.func.isRequired,\r\n    location: PropTypes.object\r\n}\r\n\r\n\r\nconst topics = state => ({\r\n    accessToken: state.userInfo.token\r\n})\r\n\r\nexport default connect(\r\n    topics,\r\n    {\r\n        getUserInfo\r\n    }\r\n)(Login)\r\n\r\n\r\n","/*\r\n * @Author: hejp\r\n * @Date:   13:46\r\n * @Last Modified by:   hejp\r\n * @Last Modified time: 13:46\r\n */\r\nimport * as types from '../actionType'\r\nimport Ajax from '../../service'\r\n\r\nconst userCenter = data => ({\r\n    type: types.USER_CENTER,\r\n    data\r\n})\r\n\r\nexport const getUserCenterInfo = username => (dispatch, getState) => {\r\n    const state = getState()\r\n    if (!username && !state.userInfo.loginname) {\r\n        dispatch(userCenter({}))\r\n        return\r\n    }\r\n    if (!username) {\r\n        username = state.userInfo.loginname\r\n    }\r\n    Ajax.user(username)\r\n        .then(res => {\r\n            if (res.success) {\r\n                dispatch(userCenter(res.data))\r\n            }\r\n        })\r\n}\r\n","/*\r\n * @Author: hejp\r\n * @Date:   17:56\r\n * @Last Modified by:   hejp\r\n * @Last Modified time: 17:56\r\n */\r\nimport React, {\r\n    useEffect,\r\n    memo\r\n} from 'react'\r\nimport './index.scss'\r\nimport {\r\n    Link\r\n} from 'react-router-dom'\r\nimport {connect} from 'react-redux';\r\nimport { getUserCenterInfo } from '../../store/actions/my'\r\nimport {\r\n    loginOut\r\n} from '../../store/actions/userInfo'\r\nimport Footer from \"../../components/footer\"\r\nimport {\r\n    getUrl\r\n} from '../../util'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst My = memo(({ user, getUserCenterInfo, userInfo, loginOut }) => {\r\n    const {\r\n        loginname,\r\n        avatar_url,\r\n        score,\r\n        recent_replies,\r\n        recent_topics\r\n    } = user\r\n\r\n    useEffect(() => {\r\n        getUserCenterInfo(getUrl('username'))\r\n    }, [])\r\n    return (\r\n        <>\r\n            <div className=\"cn-my\">\r\n            <div className=\"cn-my__hd ui-border-b\">\r\n                <div className=\"user-avatar\">\r\n                    <img src={avatar_url} alt={loginname}/>\r\n                </div>\r\n                <div className=\"user-info\">\r\n                    {\r\n                        loginname ?\r\n                        <>\r\n                            <p className=\"user-name\">{loginname}</p>\r\n                            <p className=\"integral\">积分：{score || 0}</p>\r\n                        </> :\r\n                        <Link className=\"user-name\" to={{\r\n                            pathname: '/login',\r\n                            state: { from: '/my' }\r\n                        }}>登录</Link>\r\n                    }\r\n                </div>\r\n            </div>\r\n            {\r\n                loginname ?\r\n                    <ul className=\"cn-my__bd ui-border-t\">\r\n                        <li className=\"cn-my__item ui-border-b\">\r\n                            <Link to={{\r\n                                pathname: '/my-list',\r\n                                state: {\r\n                                    data: recent_replies\r\n                                }\r\n                            }}>最新创建的话题</Link>\r\n                        </li>\r\n                        <li className=\"cn-my__item ui-border-b\">\r\n                            <Link to={{\r\n                                pathname: '/my-list',\r\n                                state: {\r\n                                    data: recent_topics\r\n                                }\r\n                            }}>最近参与的话题</Link>\r\n                        </li>\r\n                        <li className=\"cn-my__item ui-border-b\">\r\n                            <Link to={{\r\n                                pathname: '/collect',\r\n                                search: `username=${loginname}`}}>收藏的</Link>\r\n                        </li>\r\n                    </ul> : null\r\n            }\r\n            {\r\n                !!userInfo.loginname &&\r\n                loginname === userInfo.loginname ?\r\n                <>\r\n                    <div className=\"cn-my__ft ui-border-tb\" onClick={() => loginOut()}>退出登录</div>\r\n                </> :\r\n                null\r\n            }\r\n        </div>\r\n            {\r\n                !!userInfo.loginname &&\r\n                loginname === userInfo.loginname ?\r\n                <Footer hash='/my' /> : null\r\n            }\r\n        </>\r\n    )\r\n})\r\n\r\nMy.propTypes = {\r\n    user: PropTypes.object.isRequired,\r\n    getUserCenterInfo: PropTypes.func.isRequired,\r\n    userInfo: PropTypes.object.isRequired,\r\n    loginOut: PropTypes.func.isRequired\r\n}\r\n\r\nconst userProps = state => ({\r\n    user: state.user,\r\n    userInfo: state.userInfo\r\n})\r\n\r\nexport default connect(\r\n    userProps,\r\n    {\r\n        getUserCenterInfo,\r\n        loginOut\r\n    }\r\n)(My)\r\n\r\n"],"sourceRoot":""}