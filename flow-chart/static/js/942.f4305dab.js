"use strict";(self.webpackChunkflow_chart=self.webpackChunkflow_chart||[]).push([[942,124,262,601,664,32,428],{39233:function(e,a,t){t.d(a,{JX:function(){return o},K$:function(){return c},Qf:function(){return l},aZ:function(){return i},cu:function(){return s},d:function(){return n},eE:function(){return d},tr:function(){return r}});var n=8,r=6,l=40,i=14,d=10,o=10,c=16,s=24},84805:function(e,a,t){t.r(a);var n=t(1413),r=t(29439),l=t(72791),i=t(84124),d=t(19942),o=t(80184);a.default=function(){var e=(0,l.useContext)(d.CardConfigurationContext),a=(0,l.useState)(i.CONTROL_DATAS),t=(0,r.Z)(a,1)[0],c=(0,l.useCallback)((function(a){var t=e.data,r=e.dispatch,l=t.card;if(!a.disabled&&e&&r){var i=l?l.inParams.filter((function(e){return e.formType===a.data.formType})):[];r({type:"ADD_CARD_FROM_ITEM",data:(0,n.Z)((0,n.Z)({},a.data),{},{label:"".concat(a.name).concat(i.length),field:"".concat(a.data.formType.toLocaleLowerCase()).concat(i.length)})})}}),[e]);return(0,o.jsxs)("ul",{className:"app-card-configuration-form__composite",children:[(0,o.jsx)("div",{className:"app-card-configuration-form__composite--header",children:"\u7ec4\u4ef6"}),(0,o.jsx)("div",{className:"app-card-configuration-form__composite--list",children:t.map((function(e){return(0,o.jsx)("li",{onClick:function(){return c(e)},className:"app-card-configuration-form__composite--item ".concat(e.disabled?"is-disabled":""),children:e.value},e.value)}))})]})}},84124:function(e,a,t){t.r(a),t.d(a,{CONTROL_DATAS:function(){return i}});var n=t(1413),r={field:"test",formType:"Input",label:"label",placeholder:"\u8bf7\u8f93\u5165",value:"",disabled:!1,required:!1,tooltip:""},l={dataType:"mock",mock:[{label:"",value:""}],url:"",method:"GET",isHeader:!1,headerField:"",headerValue:"",correspondField:"",dependency:void 0},i=[{value:"Input",name:"\u8f93\u5165\u6846",disabled:!1,data:(0,n.Z)((0,n.Z)({},r),{},{formType:"Input"})},{value:"TextArea",name:"\u591a\u884c\u8f93\u5165",data:(0,n.Z)((0,n.Z)({},r),{},{formType:"TextArea"})},{value:"Number",name:"\u6570\u5b57\u8f93\u5165",data:(0,n.Z)((0,n.Z)({},r),{},{formType:"InputNumber"})},{value:"Password",name:"\u5bc6\u7801\u8f93\u5165",data:(0,n.Z)((0,n.Z)({},r),{},{formType:"Password"})},{value:"Select",name:"\u9009\u62e9\u6846",data:(0,n.Z)((0,n.Z)((0,n.Z)({},r),{},{formType:"Select"},l),{},{mock:[{label:"\u9009\u62e9\u68461",value:"select1"}]})},{value:"Checkbox Group",name:"\u590d\u9009\u6846",data:(0,n.Z)((0,n.Z)((0,n.Z)({},r),{},{formType:"CheckboxGroup"},l),{},{mock:[{label:"\u590d\u9009\u68461",value:"checkbox1"}]})},{value:"Radio Group",name:"\u5355\u9009\u6846",data:(0,n.Z)((0,n.Z)((0,n.Z)({},r),{},{formType:"RadioGroup"},l),{},{mock:[{label:"\u5355\u9009\u68461",value:"radio1"}]})},{value:"Cascader",name:"\u8054\u7ea7\u6846",data:(0,n.Z)((0,n.Z)((0,n.Z)({},r),{},{formType:"Cascader"},l),{},{dataType:"dynamic",url:window.location.href.split("#")[0]+"mock/tree.json",mock:[],correspondField:"datas",expandTrigger:"click",changeOnSelect:!1,multiple:!1,fieldNames:{label:"label",value:"value",children:"children"}})},{value:"Date",name:"\u65e5\u671f\u9009\u62e9",disabled:!0,data:(0,n.Z)((0,n.Z)({},r),{},{formType:"Input"})},{value:"Date Range",name:"\u65e5\u671f\u8303\u56f4",disabled:!0,data:(0,n.Z)((0,n.Z)({},r),{},{formType:"Input"})},{value:"Time",name:"\u65f6\u95f4\u9009\u62e9",disabled:!0,data:(0,n.Z)((0,n.Z)({},r),{},{formType:"Input"})},{value:"Time Range",name:"\u65f6\u95f4\u8303\u56f4",disabled:!0,data:(0,n.Z)((0,n.Z)({},r),{},{formType:"Input"})},{value:"Switch",name:"\u5f00\u5173",data:(0,n.Z)((0,n.Z)({},r),{},{formType:"Switch"})},{value:"TreeSelect",name:"\u6811\u9009\u62e9",disabled:!0,data:(0,n.Z)((0,n.Z)({},r),{},{formType:"Input"})}]},66262:function(e,a,t){t.r(a);var n=t(1413),r=t(29439),l=t(72791),i=t(6362),d=t(80184);a.default=function(e){var a=e.drawerConf,t=e.setDrawerConf,o=i.l0.useForm(),c=(0,r.Z)(o,1)[0];return(0,l.useEffect)((function(){a.details&&c.setFieldsValue(a.details)}),[a.details,c]),(0,l.useEffect)((function(){c&&t((function(e){return(0,n.Z)((0,n.Z)({},e),{},{form:c})}))}),[t,c]),(0,d.jsxs)(i.l0,{style:{padding:10},name:"dynamic_form_item",form:c,labelCol:{span:7},wrapperCol:{span:17},colon:!1,labelAlign:"left",children:[(0,d.jsx)(i.l0.Item,{name:"label",label:"label",rules:[{required:!0,message:"\u8bf7\u8f93\u5165label"}],children:(0,d.jsx)(i.II,{placeholder:"\u8bf7\u8f93\u5165label"})}),(0,d.jsx)(i.l0.Item,{name:"value",label:"value",rules:[{required:!0,message:"\u8bf7\u8f93\u5165value"}],children:(0,d.jsx)(i.II,{placeholder:"\u8bf7\u8f93\u5165value"})}),(0,d.jsx)(i.l0.Item,{name:"children",label:"children",rules:[{required:!0,message:"\u8bf7\u8f93\u5165children"}],children:(0,d.jsx)(i.II,{placeholder:"\u8bf7\u8f93\u5165children"})})]})}},18892:function(e,a,t){t.r(a);t(72791),t(65601);var n=t(84805),r=t(79628),l=t(14628),i=t(80184);a.default=function(){return(0,i.jsxs)("div",{className:"app-card-configuration-form",children:[(0,i.jsx)(n.default,{}),(0,i.jsx)(r.default,{}),(0,i.jsx)(l.default,{})]})}},24199:function(e,a,t){t.r(a);var n=t(1413),r=t(29439),l=t(72791),i=t(6362),d=t(59044),o=t(80184);a.default=function(e){var a=e.drawerConf,t=e.setDrawerConf,c=i.l0.useForm(),s=(0,r.Z)(c,1)[0];return(0,l.useEffect)((function(){a.details&&a.details.length&&s.setFieldsValue({mock:a.details})}),[a.details,s]),(0,l.useEffect)((function(){s&&t((function(e){return(0,n.Z)((0,n.Z)({},e),{},{form:s})}))}),[t,s]),(0,o.jsx)(i.l0,{name:"dynamic_form_item",form:s,children:(0,o.jsx)(i.l0.List,{name:"mock",children:function(e,a,t){var n=a.add,r=a.remove;t.errors;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.X2,{style:{background:"#eee",lineHeight:"30px",color:"#999",fontWeight:"bold",marginBottom:20},children:[(0,o.jsx)(i.JX,{span:11,style:{padding:"0 10px"},children:"\u952e\u540d"}),(0,o.jsx)(i.JX,{span:11,style:{padding:"0 10px"},children:"\u952e\u503c"}),(0,o.jsx)(i.JX,{span:2,style:{padding:"0 10px"},children:"\u64cd\u4f5c"})]}),e.map((function(a){return(0,o.jsxs)(i.X2,{children:[(0,o.jsx)(i.JX,{span:11,style:{paddingLeft:10},children:(0,o.jsx)(i.l0.Item,{name:[a.name,"label"],validateTrigger:["onBlur"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u952e\u540d"}],children:(0,o.jsx)(i.II,{placeholder:"\u8bf7\u8f93\u5165\u952e\u540d"})})}),(0,o.jsx)(i.JX,{span:11,style:{paddingLeft:10},children:(0,o.jsx)(i.l0.Item,{name:[a.name,"value"],validateTrigger:["onBlur"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u952e\u503c"}],children:(0,o.jsx)(i.II,{placeholder:"\u8bf7\u8f93\u5165\u952e\u503c"})})}),(0,o.jsx)(i.JX,{span:2,style:{padding:"5px 0 0 10px"},children:e.length>1?(0,o.jsx)(d.MinusCircleOutlined,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null})]},a.key)})),(0,o.jsx)(i.l0.Item,{style:{padding:"0 10px"},children:(0,o.jsx)(i.zx,{type:"dashed",onClick:function(){return n()},block:!0,icon:(0,o.jsx)(d.PlusOutlined,{}),children:"\u6dfb\u52a0"})})]})}})})}},14628:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});var n=t(1413),r=t(4942),l=t(29439),i=t(72791),d=t(6362),o=t(93433),c=[{componentName:"Input",label:"\u6807\u7b7e\u540d",name:"label",required:!1,disabled:!1,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d"},{componentName:"Input",label:"\u5b57\u6bb5\u540d",name:"field",required:!1,disabled:!1,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d"},{componentName:"Input",label:"\u5b57\u6bb5\u503c",name:"value",required:!1,disabled:!1,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u503c"},{componentName:"Input",label:"\u5360\u4f4d\u63d0\u793a",name:"placeholder",required:!1,disabled:!1,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u63d0\u793a"},{componentName:"Switch",label:"\u662f\u5426\u5fc5\u586b",name:"required",required:!1,disabled:!1,tooltip:"",placeholder:"\u8bf7\u9009\u62e9"},{componentName:"Switch",label:"\u662f\u5426\u7981\u7528",name:"disabled",required:!1,disabled:!1,tooltip:"",placeholder:"\u8bf7\u9009\u62e9"},{componentName:"TextArea",label:"\u63d0\u793a\u4fe1\u606f",name:"tooltip",required:!1,disabled:!1,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u63d0\u793a\u4fe1\u606f"}],s={configureValue:{useInterface:!1,dataType:"mock",mock:{value:"\u6587\u672c\u6846"},url:"",method:"get",field:"value"},configure:[{componentName:"Select",label:"\u8bf7\u6c42\u7c7b\u578b",name:"dataType",required:!1,placeholder:"",options:[{code:"mock",name:"mock\u6570\u636e"},{code:"dynamic",name:"\u63a5\u53e3\u6570\u636e"}]},{componentName:"MockButton",label:"mock\u6570\u636e",name:"mock",required:!1,placeholder:"",relationFields:"dataType",relationValues:"mock"},{componentName:"TextArea",label:"\u63a5\u53e3\u5730\u5740",name:"url",required:!1,placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u5730\u5740",relationFields:"dataType",relationValues:"dynamic"},{componentName:"Dependency",label:"\u4f9d\u8d56\u9879",name:"dependency",required:!1,placeholder:"\u8bf7\u9009\u62e9",relationFields:"dataType",relationValues:"dynamic"},{componentName:"Select",label:"\u8bf7\u6c42\u65b9\u5f0f",name:"method",required:!1,placeholder:"",relationFields:"dataType",relationValues:"dynamic",options:[{code:"GET",name:"GET"},{code:"POST",name:"POST"}]},{componentName:"Switch",label:"\u8bf7\u6c42\u5934",name:"isHeader",required:!1,disabled:!1,tooltip:"",relationFields:"dataType",relationValues:"dynamic",placeholder:"\u8bf7\u9009\u62e9"},{componentName:"Input",label:"\u5934\u5b57\u6bb5\u540d",name:"headerField",required:!1,relationFields:"dataType,isHeader",relationValues:"dynamic,true",placeholder:"\u8bf7\u8f93\u5165"},{componentName:"Input",label:"\u5934\u5b57\u6bb5\u503c",name:"headerValue",required:!1,relationFields:"dataType,isHeader",relationValues:"dynamic,true",placeholder:"\u8bf7\u8f93\u5165"},{componentName:"Input",label:"\u5bf9\u5e94\u5b57\u6bb5",name:"correspondField",required:!1,relationFields:"dataType",relationValues:"dynamic",placeholder:"\u8bf7\u8f93\u5165"}]},u={Input:{configure:[[{name:"\u5b57\u6bb5\u5c5e\u6027",list:[].concat((0,o.Z)(c),[{componentName:"Switch",label:"\u5c55\u793a\u5b57\u6570",name:"showCount",required:!1,disabled:!1,tooltip:"",placeholder:""},{componentName:"InputNumber",label:"\u6700\u5927\u957f\u5ea6",name:"maxLength",required:!1,disabled:!1,min:0,max:20,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u6700\u5927\u957f\u5ea6"}])}]]},InputNumber:{configure:[[{name:"\u5b57\u6bb5\u5c5e\u6027",list:[].concat((0,o.Z)(c),[{componentName:"InputNumber",label:"\u6700\u5c0f\u503c",name:"min",required:!1,disabled:!1,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u6700\u5c0f\u503c"},{componentName:"InputNumber",label:"\u6700\u5927\u503c",name:"max",required:!1,disabled:!1,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u6700\u5c0f\u503c"}])}]]},TextArea:{configure:[[{name:"\u5b57\u6bb5\u5c5e\u6027",list:[].concat((0,o.Z)(c),[{componentName:"Switch",label:"\u5c55\u793a\u5b57\u6570",name:"showCount",required:!1,disabled:!1,tooltip:"",placeholder:""},{componentName:"InputNumber",label:"\u6700\u5927\u957f\u5ea6",name:"maxLength",required:!1,disabled:!1,min:0,max:20,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u6700\u5927\u957f\u5ea6"}])}]]},Password:{configure:[[{name:"\u5b57\u6bb5\u5c5e\u6027",list:[].concat((0,o.Z)(c),[{componentName:"InputNumber",label:"\u6700\u5927\u957f\u5ea6",name:"maxLength",required:!1,disabled:!1,min:0,max:20,tooltip:"",placeholder:"\u8bf7\u8f93\u5165\u6700\u5927\u957f\u5ea6"}])}]]},Switch:{configure:[[{name:"\u5b57\u6bb5\u5c5e\u6027",list:(0,o.Z)(c)}]]},Select:{configure:[[{name:"\u5b57\u6bb5\u5c5e\u6027",list:(0,o.Z)(c.filter((function(e){return"value"!==e.name})))}],[{name:"\u6570\u636e",list:(0,o.Z)(s.configure)}]]},CheckboxGroup:{configure:[[{name:"\u5b57\u6bb5\u5c5e\u6027",list:(0,o.Z)(c.filter((function(e){return"value"!==e.name&&"placeholder"!==e.name})))}],[{name:"\u6570\u636e",list:(0,o.Z)(s.configure)}]]},RadioGroup:{configure:[[{name:"\u5b57\u6bb5\u5c5e\u6027",list:(0,o.Z)(c.filter((function(e){return"value"!==e.name&&"placeholder"!==e.name})))}],[{name:"\u6570\u636e",list:(0,o.Z)(s.configure)}]]},Cascader:{configure:[[{name:"\u5b57\u6bb5\u5c5e\u6027",list:[].concat((0,o.Z)(c.filter((function(e){return"value"!==e.name}))),[{componentName:"Select",label:"\u5c55\u5f00\u65b9\u5f0f",name:"expandTrigger",required:!1,placeholder:"",allowClear:!1,tooltip:"\u6b21\u7ea7\u83dc\u5355\u7684\u5c55\u5f00\u65b9\u5f0f\uff0c\u53ef\u9009 'click' \u548c 'hover'",options:[{code:"click",name:"click"},{code:"hover",name:"hover"}]},{componentName:"Switch",label:"\u5355\u9009\u751f\u6548",name:"changeOnSelect",required:!1,disabled:!1,tooltip:"\uff08\u5355\u9009\u65f6\u751f\u6548\uff09\u5f53\u6b64\u9879\u4e3a true \u65f6\uff0c\u70b9\u9009\u6bcf\u7ea7\u83dc\u5355\u9009\u9879\u503c\u90fd\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u5177\u4f53\u89c1\u4e0a\u9762\u7684\u6f14\u793a",placeholder:"\u8bf7\u9009\u62e9",relationFields:"expandTrigger",relationValues:"click"},{componentName:"Switch",label:"\u662f\u5426\u591a\u9009",name:"multiple",required:!1,disabled:!1,tooltip:"\u652f\u6301\u591a\u9009\u8282\u70b9",placeholder:"\u8bf7\u9009\u62e9"},{componentName:"FieldNamesButton",label:"\u81ea\u5b9a\u4e49",name:"fieldNames",tooltip:"\u81ea\u5b9a\u4e49 options \u4e2d label value children \u7684\u5b57\u6bb5",required:!1,placeholder:""}])}],[{name:"\u6570\u636e",list:(0,o.Z)(s.configure.map((function(e){return"dataType"===e.name?(0,n.Z)((0,n.Z)({},e),{},{disabled:!0}):e})))}]]}},m=t(19942),p=t(24199),f=t(66262),h=t(80184),x=d.II.TextArea,v=d.Ph.Option,I=d.UO.Panel,b=function(){var e=(0,i.useContext)(m.CardConfigurationContext),a=d.l0.useForm(),t=(0,l.Z)(a,1)[0],o=(0,i.useState)({title:"",width:600,visible:!1,type:"mock",details:[]}),c=(0,l.Z)(o,2),s=c[0],b=c[1];(0,i.useEffect)((function(){var a=e.data,n=a.card,r=a.selectFormItemId;if(a&&r&&n){var l=null===n||void 0===n?void 0:n.inParams.findIndex((function(e){return e.id===r}));-1!==l&&t.setFieldsValue(null===n||void 0===n?void 0:n.inParams[l])}}),[e,t]);var j=(0,i.useCallback)((function(a,t){e.dispatch({type:"MODIFY_CARD_FROM_ITEM",data:(0,r.Z)({},a,t)})}),[e]),g=function(a,r){var l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,h.jsxs)(h.Fragment,{children:["Input"===a.componentName&&(0,h.jsx)(d.l0.Item,{label:a.label,name:a.name,tooltip:a.tooltip,rules:[{required:a.require}],children:(0,h.jsx)(d.II,{allowClear:!0,disabled:a.disabled,onBlur:function(e){return l&&j(a.name,e.target.value)},placeholder:a.placeholder})}),"InputNumber"===a.componentName&&(0,h.jsx)(d.l0.Item,{label:a.label,name:a.name,tooltip:a.tooltip,rules:[{required:a.require}],children:(0,h.jsx)(d.Rn,{disabled:a.disabled,min:a.min,max:a.max,onBlur:function(e){return l&&j(a.name,e.target.value?Number(e.target.value):0)},style:{width:"100%"},placeholder:a.placeholder})}),"TextArea"===a.componentName&&(0,h.jsx)(d.l0.Item,{label:a.label,name:a.name,tooltip:a.tooltip,rules:[{required:a.require}],children:(0,h.jsx)(x,{allowClear:!0,disabled:a.disabled,onBlur:function(e){return l&&j(a.name,e.target.value)},rows:8,placeholder:a.placeholder})}),"Switch"===a.componentName&&(0,h.jsx)(d.l0.Item,{label:a.label,name:a.name,tooltip:a.tooltip,valuePropName:"checked",rules:[{required:a.require}],children:(0,h.jsx)(d.rs,{onChange:function(e){return l&&j(a.name,e)}})}),"Slider"===a.componentName&&(0,h.jsx)(d.l0.Item,{label:a.label,name:a.name,tooltip:a.tooltip,rules:[{required:a.require}],children:(0,h.jsx)(d.iR,{min:a.min||0,max:a.max||100,disabled:a.disabled,step:a.step||1,onAfterChange:function(e){return l&&j(a.name,e)}})}),"Select"===a.componentName&&(0,h.jsx)(d.l0.Item,{label:a.label,name:a.name,tooltip:a.tooltip,rules:[{required:a.require}],children:(0,h.jsx)(d.Ph,{allowClear:"undefined"===typeof a.allowClear||a.allowClear,disabled:a.disabled,onChange:function(e){return l&&j(a.name,e)},placeholder:a.placeholder,children:a.options.map((function(e){return(0,h.jsx)(v,{value:e.code,children:e.name},e.code)}))})}),"Dependency"===a.componentName&&(0,h.jsx)(d.l0.Item,{label:a.label,name:a.name,tooltip:a.tooltip,rules:[{required:a.require}],children:(0,h.jsx)(d.Ph,{allowClear:!0,disabled:a.disabled,onChange:function(e){return l&&j(a.name,e)},mode:"multiple",placeholder:a.placeholder,children:e.data&&e.data.card&&e.data.card.inParams?e.data.card.inParams.map((function(a,t){return a.id!==e.data.selectFormItemId?(0,h.jsx)(v,{value:a.field,children:a.label},t):null})):null})}),"MockButton"===a.componentName&&(0,h.jsx)(d.l0.Item,{label:a.label,name:a.name,tooltip:a.tooltip,rules:[{required:a.require}],children:(0,h.jsx)(d.zx,{type:"primary",style:{width:"100%"},onClick:function(){return b((function(e){return(0,n.Z)((0,n.Z)({},e),{},{title:"\u914d\u7f6emock\u6570\u636e",width:600,type:"mock",visible:!0,details:t.getFieldValue("mock")})}))},children:"\u914d\u7f6emock\u6570\u636e"})}),"FieldNamesButton"===a.componentName&&(0,h.jsx)(d.l0.Item,{label:a.label,name:a.name,tooltip:a.tooltip,rules:[{required:a.require}],children:(0,h.jsx)(d.zx,{type:"primary",style:{width:"100%"},onClick:function(){return b((function(e){return(0,n.Z)((0,n.Z)({},e),{},{title:"\u914d\u7f6e\u81ea\u5b9a\u4e49\u5b57\u6bb5",width:300,type:"fieldNames",visible:!0,details:t.getFieldValue("fieldNames")})}))},children:"\u81ea\u5b9a\u4e49\u5b57\u6bb5"})})]})},y=function(e,a){return Object.prototype.toString.call(e)===a},C=(0,i.useMemo)((function(){var a=e.data,t=a.card,n=a.selectFormItemId,r="";if(t&&n){var l=t.inParams.findIndex((function(e){return e.id===n}));-1!==l&&(r=t.inParams[l].formType)}return r}),[e.data]);return(0,h.jsxs)("div",{className:"app-card-configuration-form__settings",children:[(0,h.jsx)("div",{className:"header",children:"\u5c5e\u6027\u914d\u7f6e"}),(0,h.jsx)("div",{className:"body",children:e.data.selectFormItemId?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.l0,{form:t,labelCol:{span:7},wrapperCol:{span:17},autoComplete:"off",colon:!1,labelAlign:"left",children:C&&u[C]?function e(a,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return a.map((function(a,r){if(y(a,"[object Object]")){var l=void 0!==a.relationFields?a.relationFields.split(","):[];return(0,h.jsx)("div",{children:l.length?(0,h.jsx)(d.l0.Item,{noStyle:!0,shouldUpdate:!0,children:function(e){var r=e.getFieldValue;if(l.every((function(e){return a.relationValues.includes(String(r(e)))})))return g(a,t,n)}}):g(a,t,n)},r)}if(y(a,"[object Array]"))return(0,h.jsx)("div",{children:a.map((function(a,r){var l=void 0!==a.relationFields?a.relationFields.split(","):[];return(0,h.jsx)(d.UO,{defaultActiveKey:0,accordion:!0,children:void 0===a.relationFields?(0,h.jsx)(I,{header:a.name,children:e(a.list,t,n)},r):(0,h.jsx)(d.l0.Item,{noStyle:!0,shouldUpdate:!0,children:function(i){var o=i.getFieldValue;if(l.every((function(e){return a.relationValues.includes(String(o(e)))})))return(0,h.jsx)(d.UO,{accordion:!0,children:(0,h.jsx)(I,{header:a.name,children:e(a.list,t,n)},a+r)},r)}})},r)}))},r)}))}(u[C].configure,t,!0):null}),(0,h.jsxs)(d.dy,{title:s.title,width:s.width,bodyStyle:{padding:0},headerStyle:{borderBottom:"1px solid #ddd",padding:"10px"},onClose:function(){return b((function(e){return(0,n.Z)((0,n.Z)({},e),{},{visible:!1})}))},extra:(0,h.jsx)(d.T,{children:(0,h.jsx)(d.zx,{type:"primary",onClick:function(){s.form&&s.form.validateFields().then((function(e){switch(b((function(e){return(0,n.Z)((0,n.Z)({},e),{},{visible:!1})})),s.type){case"mock":j("mock",e.mock);break;case"fieldNames":j("fieldNames",e)}}))},children:"\u786e\u5b9a"})}),open:s.visible,children:["mock"===s.type?(0,h.jsx)(p.default,{drawerConf:s,setDrawerConf:b}):null,"fieldNames"===s.type?(0,h.jsx)(f.default,{drawerConf:s,setDrawerConf:b}):null]})]}):(0,h.jsx)(d.HY,{image:d.HY.PRESENTED_IMAGE_SIMPLE})})]})}},79628:function(e,a,t){t.r(a),t.d(a,{default:function(){return T}});var n=t(1413),r=t(29439),l=t(72791),i=t(6362),d=t(19942),o=t(80184),c=function(e){var a=e.children,t=e.selectHandler,n=e.id,r=e.selectId;return(0,o.jsxs)("div",{className:"app-custom-form-item",children:[t?(0,o.jsx)("div",{className:"edit ".concat(r===n?"is-selected":""),onClick:function(e){return t(n,e)},"data-type":"wrap",children:r===n?(0,o.jsxs)("div",{className:"tools",children:[(0,o.jsx)(i.u,{placement:"top",title:"\u590d\u5236",children:(0,o.jsx)("span",{className:"app-icon ".concat(r?"":"is-disabled"),"data-type":"copy",children:"\ue765"})}),(0,o.jsx)(i.u,{placement:"top",title:"\u5220\u9664",children:(0,o.jsx)("span",{className:"app-icon ".concat(r?"":"is-disabled"),"data-type":"delete",children:"\ue7c3"})})]}):null}):null,a]})},s=function(e){var a=e.item,t=e.selectHandler,n=e.selectId,r=e.type;return(0,o.jsx)(c,{selectHandler:t,id:a.id,selectId:n,children:(0,o.jsx)(i.l0.Item,{label:a.label,name:a.field,tooltip:a.tooltip,required:a.required,rules:[{required:a.require}],children:(0,o.jsxs)(o.Fragment,{children:["Input"===r?(0,o.jsx)(i.II,{allowClear:!0,showCount:a.showCount,maxLength:a.maxLength,disabled:a.disabled,placeholder:a.placeholder}):null,"TextArea"===r?(0,o.jsx)(i.II.TextArea,{allowClear:!0,showCount:a.showCount,maxLength:a.maxLength,disabled:a.disabled,placeholder:a.placeholder}):null,"Password"===r?(0,o.jsx)(i.II.Password,{allowClear:!0,maxLength:a.maxLength,disabled:a.disabled,placeholder:a.placeholder}):null]})})})},u=function(e){var a=e.item,t=e.selectHandler,n=e.selectId;return(0,o.jsx)(c,{selectHandler:t,id:a.id,selectId:n,children:(0,o.jsx)(i.l0.Item,{label:a.label,name:a.field,tooltip:a.tooltip,required:a.required,rules:[{required:a.require}],children:(0,o.jsx)(i.Rn,{style:{width:"100%"},min:a.min,max:a.max,disabled:a.disabled,placeholder:a.placeholder})})})},m=function(e){var a=e.item,t=e.selectHandler,n=e.selectId;return(0,o.jsx)(c,{selectHandler:t,id:a.id,selectId:n,children:(0,o.jsx)(i.l0.Item,{label:a.label,name:a.field,valuePropName:"checked",tooltip:a.tooltip,required:a.required,rules:[{required:a.require}],children:(0,o.jsx)(i.rs,{disabled:a.disabled})})})},p=t(74569),f=t.n(p);var h=function(e){var a=(0,l.useState)([]),t=(0,r.Z)(a,2),n=t[0],i=t[1];return(0,l.useEffect)((function(){var a=JSON.parse(e);if("mock"===a.dataType)i(a.mock);else if(a.url&&a.method){var t={};a.isHeader&&a.headerField&&a.headerValue&&(t[a.headerField]=a.headerValue),f()({url:a.url,method:a.method,headers:t,params:"GET"===a.method?a.params:null,data:"POST"===a.method?a.params:null}).then((function(e){a.correspondField&&e.data[a.correspondField]?i(e.data[a.correspondField]):i(e.data)}))}}),[e]),n},x=i.Ph.Option,v=function(e){var a=e.item,t=e.selectHandler,n=e.selectId,r=h(JSON.stringify({dataType:a.dataType,mock:a.mock,url:a.url,method:a.method,isHeader:a.isHeader,headerField:a.headerField,headerValue:a.headerValue,params:a.params,correspondField:a.correspondField}));return(0,o.jsx)(c,{selectHandler:t,id:a.id,selectId:n,children:(0,o.jsx)(i.l0.Item,{label:a.label,name:a.field,tooltip:a.tooltip,required:a.required,rules:[{required:a.require}],children:(0,o.jsx)(i.Ph,{allowClear:!0,disabled:a.disabled,placeholder:a.placeholder,children:r instanceof Array?r.map((function(e,a){return(0,o.jsx)(x,{value:e.value,children:e.label},a)})):null})})})},I=function(e){var a=e.item,t=e.selectHandler,n=e.selectId,r=h(JSON.stringify({dataType:a.dataType,mock:a.mock,url:a.url,method:a.method,isHeader:a.isHeader,headerField:a.headerField,headerValue:a.headerValue,params:a.params,correspondField:a.correspondField}));return(0,o.jsx)(c,{selectHandler:t,id:a.id,selectId:n,children:(0,o.jsx)(i.l0.Item,{label:a.label,name:a.field,tooltip:a.tooltip,required:a.required,rules:[{required:a.require}],children:(0,o.jsx)(i.XZ.Group,{disabled:a.disabled,children:r instanceof Array?r.map((function(e,a){return(0,o.jsx)(i.XZ,{value:e.value,children:e.label},a)})):null})})})},b=function(e){var a=e.item,t=e.selectHandler,n=e.selectId,r=h(JSON.stringify({dataType:a.dataType,mock:a.mock,url:a.url,method:a.method,isHeader:a.isHeader,headerField:a.headerField,headerValue:a.headerValue,params:a.params,correspondField:a.correspondField}));return(0,o.jsx)(c,{selectHandler:t,id:a.id,selectId:n,children:(0,o.jsx)(i.l0.Item,{label:a.label,name:a.field,tooltip:a.tooltip,required:a.required,rules:[{required:a.require}],children:(0,o.jsx)(i.Y8.Group,{disabled:a.disabled,children:r instanceof Array?r.map((function(e,a){return(0,o.jsx)(i.Y8,{value:e.value,children:e.label},a)})):null})})})},j=function(e){var a=e.item,t=e.selectHandler,n=e.selectId,r=h(JSON.stringify({dataType:a.dataType,mock:a.mock,url:a.url,method:a.method,isHeader:a.isHeader,headerField:a.headerField,headerValue:a.headerValue,params:a.params,correspondField:a.correspondField}));return(0,o.jsx)(c,{selectHandler:t,id:a.id,selectId:n,children:(0,o.jsx)(i.l0.Item,{label:a.label,name:a.field,tooltip:a.tooltip,required:a.required,rules:[{required:a.require}],children:(0,o.jsx)(i.vT,{allowClear:!0,expandTrigger:a.expandTrigger,changeOnSelect:"click"===a.expandTrigger&&a.changeOnSelect,fieldNames:a.fieldNames,multiple:a.multiple,options:r&&Array.isArray(r)?r:[],disabled:a.disabled,placeholder:a.placeholder})})})},g=function(e){var a=e.list,t=e.selectHandler,d=e.selectId,c=i.l0.useForm(),p=(0,r.Z)(c,1)[0];(0,l.useEffect)((function(){if(a){var e={};a.forEach((function(a){e[a.field]=a.value||void 0})),p.setFieldsValue(e)}}),[p,a]);var f=(0,l.useCallback)((function(e){var t={};return e&&e.forEach((function(e){var n=a.findIndex((function(a){return a.field===e}));-1!==n&&(t[e]=a[n].value)})),t}),[a]);return(0,o.jsx)(i.l0,{labelCol:{span:7},wrapperCol:{span:17},autoComplete:"off",colon:!1,className:"app-configuration-form",labelAlign:"left",form:p,children:a.map((function(e){return"Input"===e.formType||"TextArea"===e.formType||"Password"===e.formType?(0,o.jsx)(s,{type:e.formType,item:e,selectHandler:t,selectId:d},e.id):"InputNumber"===e.formType?(0,o.jsx)(u,{item:e,selectHandler:t,selectId:d},e.id):"Switch"===e.formType?(0,o.jsx)(m,{item:e,selectHandler:t,selectId:d},e.id):"Select"===e.formType?(0,o.jsx)(v,{item:(0,n.Z)((0,n.Z)({},e),{},{params:f(e.dependency)}),selectHandler:t,selectId:d},e.id):"CheckboxGroup"===e.formType?(0,o.jsx)(I,{item:(0,n.Z)((0,n.Z)({},e),{},{params:f(e.dependency)}),selectHandler:t,selectId:d},e.id):"RadioGroup"===e.formType?(0,o.jsx)(b,{item:(0,n.Z)((0,n.Z)({},e),{},{params:f(e.dependency)}),selectHandler:t,selectId:d},e.id):"Cascader"===e.formType?(0,o.jsx)(j,{item:(0,n.Z)((0,n.Z)({},e),{},{params:f(e.dependency)}),selectHandler:t,selectId:d},e.id):null}))})},y=t(92403),C=t.n(y),A=(t(93059),function(e){var a=e.value,t=e.onChange,r=e.options,i=void 0===r?{}:r,d=(0,l.useRef)(null),c=(0,l.useRef)(null),s=(0,l.useCallback)((function(){if(!c.current){var e=(0,n.Z)({mode:"code",onChange:function(){var e;t&&t(null===(e=c.current)||void 0===e?void 0:e.get())}},i);c.current=new(C())(d.current,e,a)}}),[t,i,a]);return(0,l.useEffect)((function(){s()}),[s]),(0,l.useEffect)((function(){return c.current,function(){c.current&&c.current.destroy()}}),[c,a]),(0,o.jsx)("div",{ref:d,className:"app-json-editor"})}),T=function(){var e,a,t,c,s,u,m,p=(0,l.useContext)(d.CardConfigurationContext),f=(0,l.useState)({top:!0,bottom:!0,moveUp:!0,moveDown:!0,copy:!0,delete:!0}),h=(0,r.Z)(f,2),x=h[0],v=h[1],I=(0,l.useState)(0),b=(0,r.Z)(I,2),j=b[0],y=b[1];(0,l.useEffect)((function(){var e=p.data,a=e.card,t=e.selectFormItemId;if(a&&t){var r=a.inParams.findIndex((function(e){return e.id===t}));-1!==r&&v((function(e){return(0,n.Z)((0,n.Z)({},e),{},{top:0===r,bottom:r===a.inParams.length-1,moveUp:0===r||!a.inParams.length,moveDown:r===a.inParams.length-1||!a.inParams.length})})),v((function(e){return(0,n.Z)((0,n.Z)({},e),{},{copy:!1,delete:!1})}))}t||v({top:!0,bottom:!0,moveUp:!0,moveDown:!0,copy:!0,delete:!0})}),[p]);var C=(0,l.useCallback)((function(e,a){var t=a.target.dataset.type,n=p.dispatch,r=p.data,l=r.card,i=r.selectFormItemId;if(l)switch(t){case"wrap":i!==e&&n({type:"SELECT_CARD_FROM_ITEM",id:e});break;case"top":!x.top&&n({type:"TOP_CARD_FROM_ITEM"});break;case"bottom":!x.bottom&&n({type:"BOTTOM_CARD_FROM_ITEM"});break;case"moveUp":!x.moveUp&&n({type:"MOVEUP_CARD_FROM_ITEM"});break;case"moveDown":!x.moveDown&&n({type:"MOVEDOWN_CARD_FROM_ITEM"});break;case"copy":!x.copy&&n({type:"COPY_CARD_FROM_ITEM"});break;case"delete":!x.delete&&n({type:"DELETE_CARD_FROM_ITEM"})}}),[p,x]);return(0,o.jsxs)("div",{className:"app-card-configuration-form__workspace",children:[(0,o.jsxs)("div",{className:"app-card-configuration-form__workspace--menu",onClick:function(e){return C(p.data.selectFormItemId,e)},children:[(0,o.jsxs)("div",{className:"left",children:[(0,o.jsx)(i.u,{placement:"top",title:"\u64a4\u9500",children:(0,o.jsx)("span",{className:"app-icon is-disabled",children:"\ue61e"})}),(0,o.jsx)(i.u,{placement:"top",title:"\u91cd\u505a",children:(0,o.jsx)("span",{className:"app-icon is-disabled",children:"\ue60f"})}),(0,o.jsx)(i.u,{placement:"top",title:"\u7f6e\u9876",children:(0,o.jsx)("span",{"data-type":"top",className:"app-icon ".concat(x.top?"is-disabled":""),children:"\ue786"})}),(0,o.jsx)(i.u,{placement:"top",title:"\u7f6e\u5e95",children:(0,o.jsx)("span",{"data-type":"bottom",className:"app-icon ".concat(x.bottom?"is-disabled":""),children:"\ue742"})}),(0,o.jsx)(i.u,{placement:"top",title:"\u4e0a\u79fb",children:(0,o.jsx)("span",{"data-type":"moveUp",className:"app-icon ".concat(x.moveUp?"is-disabled":""),children:"\ue7ef"})}),(0,o.jsx)(i.u,{placement:"top",title:"\u4e0b\u79fb",children:(0,o.jsx)("span",{"data-type":"moveDown",className:"app-icon ".concat(x.moveDown?"is-disabled":""),children:"\ue7f1"})}),(0,o.jsx)(i.u,{placement:"top",title:"\u590d\u5236",children:(0,o.jsx)("span",{"data-type":"copy",className:"app-icon ".concat(x.copy?"is-disabled":""),children:"\ue765"})}),(0,o.jsx)(i.u,{placement:"top",title:"\u5220\u9664",children:(0,o.jsx)("span",{"data-type":"delete",className:"app-icon ".concat(x.delete?"is-disabled":""),children:"\ue7c3"})})]}),(0,o.jsxs)("div",{className:"right",children:[(0,o.jsx)(i.u,{placement:"top",title:"\u7f16\u8f91",children:(0,o.jsx)("span",{className:"app-icon ".concat(0===j?"is-selected":""),onClick:function(){return y(0)},children:"\uec88"})}),(0,o.jsx)(i.u,{placement:"top",title:"JSON",children:(0,o.jsx)("span",{className:"app-icon ".concat(1===j?"is-selected":""),onClick:function(){return y(1)},children:"\ue7bd"})}),(0,o.jsx)(i.u,{placement:"top",title:"\u8fd0\u884c",children:(0,o.jsx)("span",{className:"app-icon ".concat(2===j?"is-selected":""),onClick:function(){return y(2)},children:"\ue65d"})})]})]}),(0,o.jsx)("div",{className:"app-card-configuration-form__workspace--body",children:null!==(e=p.data.card)&&void 0!==e&&e.inParams&&0===(null===(a=p.data.card)||void 0===a?void 0:a.inParams.length)?(0,o.jsx)(i.x4,{style:{paddingTop:100},status:"404",title:"\u6682\u65e0\u6570\u636e",subTitle:"\u8bf7\u70b9\u51fb\u5de6\u4fa7\u7684\u7ec4\u4ef6\u6dfb\u52a0\u8868\u5355\u5143\u7d20"}):(0,o.jsxs)(o.Fragment,{children:[0===j?(0,o.jsx)(g,{list:(null===(t=p.data.card)||void 0===t?void 0:t.inParams)||[],selectHandler:C,selectId:p.data.selectFormItemId}):null,1===j?(0,o.jsx)(A,{value:null!==(c=p.data)&&void 0!==c&&c.card&&null!==(s=p.data)&&void 0!==s&&s.card.inParams?null===(u=p.data)||void 0===u?void 0:u.card.inParams:{}}):null,2===j?(0,o.jsx)(g,{list:(null===(m=p.data.card)||void 0===m?void 0:m.inParams)||[]}):null]})})]})}},59599:function(e,a,t){t.r(a);var n=t(72791),r=t(6362),l=t(10133),i=t(80542),d=t(19942),o=t(80184);a.default=function(){var e=(0,n.useContext)(d.CardConfigurationContext),a=(0,i.k6)(),t=(0,n.useCallback)((function(){var a;e&&(null!==(a=e.data.card)&&void 0!==a&&a.ports.some((function(e){return e.visible}))||r.yw.error("\u5fc5\u987b\u9009\u62e9\u4e00\u4e2a\u8fde\u63a5\u70b9"))}),[e]);return(0,o.jsxs)("div",{className:"app-card-configuration__header",children:[(0,o.jsxs)("div",{className:"left",children:[(0,o.jsx)(r.u,{placement:"bottom",title:"\u8fd4\u56de",children:(0,o.jsx)("div",{className:"return app-icon",onClick:function(){return a.goBack()},children:"\ue720"})}),(0,o.jsx)("div",{className:"app-icon logo",children:"\ue605"}),(0,o.jsx)("div",{className:"title",children:(0,l.Gr)("id")?"\u7f16\u8f91\u5361\u7247":"\u65b0\u589e\u5361\u7247"})]}),(0,o.jsx)("div",{className:"right",children:(0,o.jsx)(r.zx,{type:"primary",onClick:t,children:"\u4fdd\u5b58"})})]})}},73669:function(e,a,t){t.r(a);var n=t(29439),r=t(72791),l=t(6362),i=t(18892),d=t(19942),o=t(80184);a.default=function(){var e=l.l0.useForm(),a=(0,n.Z)(e,1)[0],t=(0,r.useContext)(d.CardConfigurationContext),c=(0,r.useState)(!1),s=(0,n.Z)(c,2),u=s[0],m=s[1];(0,r.useEffect)((function(){if(t.data.card){var e=t.data.card,n=e.title,r=e.width,l=e.ports;a.setFieldsValue({title:n,width:r,ports:l.filter((function(e){return e.visible})).map((function(e){return e.group}))})}}),[t.data.card,a]);var p=(0,r.useCallback)((function(e,a){switch(a){case"title":t.dispatch({type:"MODIFY_CARD_TITLE",title:e});break;case"ports":t.dispatch({type:"MODIFY_CARD_PORTS",data:e})}}),[t]);return(0,o.jsxs)("div",{className:"app-card-configuration__aside",children:[(0,o.jsx)("div",{className:"header",children:"\u5361\u7247\u914d\u7f6e"}),(0,o.jsx)("div",{className:"body",children:(0,o.jsxs)(l.l0,{form:a,name:"basic",labelAlign:"left",colon:!1,labelCol:{span:9},wrapperCol:{span:15},requiredMark:!1,autoComplete:"off",children:[(0,o.jsx)(l.l0.Item,{label:"\u5361\u7247\u540d\u79f0",name:"title",children:(0,o.jsx)(l.II,{onBlur:function(e){return p(e.target.value,"title")}})}),(0,o.jsx)(l.l0.Item,{label:"\u5361\u7247\u5bbd\u5ea6",name:"width",children:(0,o.jsx)(l.II,{disabled:!0})}),(0,o.jsx)(l.l0.Item,{name:"ports",label:"\u8fde\u63a5\u70b9",children:(0,o.jsxs)(l.XZ.Group,{onChange:function(e){return p(e,"ports")},children:[(0,o.jsx)(l.XZ,{value:"left",style:{lineHeight:"32px"},children:"\u5de6\u8fde\u63a5\u70b9"}),(0,o.jsx)(l.XZ,{value:"right",style:{lineHeight:"32px"},children:"\u53f3\u8fde\u63a5\u70b9"})]})}),(0,o.jsx)(l.l0.Item,{name:"inParams",label:"\u5165\u53c2\u914d\u7f6e",children:(0,o.jsx)(l.zx,{type:"primary",style:{width:"100%"},onClick:function(){return m(!0)},children:"\u914d\u7f6e"})})]})}),(0,o.jsx)(l.dy,{title:"\u53c2\u6570\u914d\u7f6e",width:"70%",open:u,maskClosable:!1,closable:!1,bodyStyle:{padding:0},headerStyle:{borderBottom:"1px solid #ddd",padding:"10px"},extra:(0,o.jsx)(l.T,{children:(0,o.jsx)(l.zx,{type:"primary",onClick:function(){return m(!1)},children:"\u5173\u95ed"})}),children:(0,o.jsx)(i.default,{})})]})}},19942:function(e,a,t){t.r(a),t.d(a,{CardConfigurationContext:function(){return v},default:function(){return b}});var n=t(1413),r=t(29439),l=t(72791),i=t(89982),d=(t(39032),t(39233)),o=t(80184),c=function(e){var a=e.config,t=(0,l.useState)(),c=(0,r.Z)(t,2),s=c[0],u=c[1],m=(0,l.useState)(),p=(0,r.Z)(m,2),f=p[0],h=p[1];return(0,l.useEffect)((function(){u({x:0,y:0,width:a.width,height:a.height,fill:"#f9f9f9",shadowColor:"rgba(0,0,0,.3)",cornerRadius:d.d,shadowBlur:10}),h({x:-d.tr,y:-d.tr,width:a.width+2*d.tr,height:a.height+2*d.tr,stroke:"#40a9ff",strokeWidth:2,cornerRadius:d.d})}),[a]),(0,o.jsxs)(i.Group,{children:[(0,o.jsx)(i.Rect,(0,n.Z)({},f)),(0,o.jsx)(i.Rect,(0,n.Z)({},s))]})},s=function(e){var a=e.config,c=(0,l.useState)(),s=(0,r.Z)(c,2),u=s[0],m=s[1],p=(0,l.useState)(),f=(0,r.Z)(p,2),h=f[0],x=f[1],v=(0,l.useState)(),I=(0,r.Z)(v,2),b=I[0],j=I[1],g=(0,l.useState)(),y=(0,r.Z)(g,2),C=y[0],A=y[1];return(0,l.useEffect)((function(){m({x:0,y:0,width:a.width,height:d.Qf,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:0,y:a.width},fillLinearGradientColorStops:[0,"#e1f2ff",.15,"#f9f9f9"],cornerRadius:[d.d,d.d,0,0]}),j({x:0,y:d.Qf,width:a.width,height:1,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:a.width,y:0},fillLinearGradientColorStops:[0,"#ddd",1,"#fff"]}),x({text:a.title,fontSize:d.aZ,fill:"#666",x:d.K$+2*d.JX,fontStyle:"bold",lineHeight:d.Qf/d.aZ})}),[a]),(0,l.useEffect)((function(){var e=new Image;e.src=t(15270),e.onload=function(){A({x:d.JX,y:12,image:e,width:d.K$,height:d.K$})}}),[]),(0,o.jsxs)(i.Group,{children:[(0,o.jsx)(i.Rect,(0,n.Z)({},u)),(0,o.jsx)(i.Text,(0,n.Z)({},h)),C?(0,o.jsx)(i.Image,(0,n.Z)({},C)):null,(0,o.jsx)(i.Rect,(0,n.Z)({},b))]})},u=t(10133),m=function(e){var a=e.config,t=(0,l.useState)(),c=(0,r.Z)(t,2),s=c[0],m=c[1],p=(0,l.useState)(),f=(0,r.Z)(p,2),h=f[0],x=f[1];(0,l.useEffect)((function(){var e={x:d.JX-3,y:d.Qf+d.eE-3};m((0,n.Z)((0,n.Z)({},e),{},{scaleX:.03,scaleY:.03,fill:"#1890ff",data:"M514 114.3c-219.9 0-398.8 178.9-398.8 398.8 0 220 178.9 398.9 398.8 398.9s398.8-178.9 398.8-398.9c0-219.8-178.9-398.8-398.8-398.8z m232.1 440.4L582 718.8c-22.9 22.9-60.2 22.9-83.1 0-11.5-11.5-17.2-26.5-17.2-41.5s5.7-30.1 17.2-41.5l63.8-63.8H334c-32.5 0-58.8-26.3-58.8-58.8s26.3-58.8 58.8-58.8h228.7l-63.8-63.8c-22.9-22.9-22.9-60.2 0-83.1 22.9-22.9 60.2-22.9 83.1 0l164.1 164.1c22.9 23 22.9 60.2 0 83.1z"})),x((0,n.Z)((0,n.Z)({},e),{},{width:d.cu,height:d.cu}))}),[a]);return(0,o.jsxs)(i.Group,{x:a.x,children:[(0,o.jsx)(i.Path,(0,n.Z)({},s)),(0,o.jsx)(i.Rect,(0,n.Z)((0,n.Z)({type:"port"},h),{},{onMouseEnter:function(e){m((function(e){return(0,n.Z)((0,n.Z)({},e),{},{fill:"#40a9ff"})})),(0,u.Oh)("js_stage","pointer")},onMouseLeave:function(e){m((function(e){return(0,n.Z)((0,n.Z)({},e),{},{fill:"#1890ff"})})),(0,u.Oh)("js_stage","default")}}))]})},p=function(e){var a=e.config,t=(0,l.useState)(),p=(0,r.Z)(t,2),f=p[0],h=p[1];(0,l.useEffect)((function(){h({x:d.JX,lineHeight:d.cu/14,fontSize:12,fill:"#999"})}),[a]);return(0,o.jsxs)(i.Group,{x:a.x,y:a.y,width:a.width,height:a.height,children:[(0,o.jsx)(c,{config:a}),(0,o.jsx)(s,{config:a}),(0,o.jsx)(i.Rect,{type:"move","data-id":a.id,width:a.width,height:a.height,onMouseEnter:function(e){(0,u.Oh)("js_stage","move")},onMouseLeave:function(e){(0,u.Oh)("js_stage","default")}}),a.ports?a.ports.map((function(e){return"left"===e.group&&e.visible?(0,o.jsx)(m,{config:(0,n.Z)((0,n.Z)({},a),{},{x:0})},e.id):"right"===e.group&&e.visible?(0,o.jsx)(m,{config:(0,n.Z)((0,n.Z)({},a),{},{x:a.width-d.cu-2*d.JX})},e.id):null})):null,a.inParams.map((function(e,t){return(0,l.createElement)(i.Text,(0,n.Z)((0,n.Z)({},f),{},{key:e.id,text:"".concat(e.field,"\uff1a").concat(e.value||'""'),y:d.Qf+(a.ports.some((function(e){return e.visible}))?d.cu+2*d.JX:d.JX)+t*d.cu}))}))]})},f=t(59599),h=t(73669),x=t(48893),v=l.createContext({data:x.initialState,dispatch:function(){}}),I={x:0,y:0,width:window.innerWidth-300,height:window.innerHeight-62},b=function(){var e=(0,l.useReducer)(x.counter,x.initialState),a=(0,r.Z)(e,2),t=a[0],d=a[1];return(0,l.useEffect)((function(){(0,u.Gr)("id")||d({type:"CARD",data:{id:(0,u.M8)(),width:200,height:80,title:"\u672a\u547d\u540d\u5361\u7247",x:10,y:10,ports:[{id:(0,u.M8)(),group:"left",visible:!0},{id:(0,u.M8)(),group:"right",visible:!0}],inParams:[]}})}),[]),(0,o.jsx)(v.Provider,{value:{dispatch:d,data:t},children:(0,o.jsxs)("div",{className:"app-card-configuration",children:[(0,o.jsx)(f.default,{}),(0,o.jsxs)("div",{className:"app-card-configuration__body",children:[(0,o.jsx)("div",{className:"app-card-configuration__container",id:"js_stage",children:(0,o.jsx)(i.Stage,(0,n.Z)((0,n.Z)({},I),{},{children:(0,o.jsx)(i.Layer,{children:t.card?(0,o.jsx)(p,{config:t.card}):null})}))}),(0,o.jsx)(h.default,{})]}),(0,o.jsx)("div",{className:"app-card-configuration__footer"})]})})}},48893:function(e,a,t){t.r(a),t.d(a,{counter:function(){return s},initialState:function(){return c}});var n=t(93433),r=t(1413),l=t(10133),i=t(39233),d=t(29428),o=function(e){var a=i.Qf;return e.ports.some((function(e){return e.visible}))&&(a+=i.cu+i.eE),e.inParams.forEach((function(){a+=i.cu})),a+=i.eE},c={card:null,selectFormItemId:""},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0,t=JSON.parse(JSON.stringify(e));switch(a.type){case d.CARD:return{card:(0,r.Z)((0,r.Z)({},a.data),{},{height:o(a.data)}),selectFormItemId:""};case d.MODIFY_CARD_TITLE:return t.card.title=a.title,t;case d.MODIFY_CARD_PORTS:return t.card.ports=t.card.ports.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{visible:a.data.includes(e.group)})})),t.card.height=o(t.card),t;case d.ADD_CARD_FROM_ITEM:var i=(0,l.M8)();return t.card.inParams=[].concat((0,n.Z)(t.card.inParams),[(0,r.Z)((0,r.Z)({},a.data),{},{id:i})]),t.card.height=o(t.card),t.selectFormItemId=i,t;case d.MODIFY_CARD_FROM_ITEM:if(t.selectFormItemId){var s=t.card.inParams.findIndex((function(e){return e.id===t.selectFormItemId}));-1!==s&&t.card.inParams.splice(s,1,(0,r.Z)((0,r.Z)({},t.card.inParams[s]),a.data))}return t;case d.SELECT_CARD_FROM_ITEM:return t.selectFormItemId=a.id,t;case d.DELETE_CARD_FROM_ITEM:if(t.selectFormItemId){var u=t.card.inParams.findIndex((function(e){return e.id===t.selectFormItemId}));-1!==u&&(t.card.inParams.splice(u,1),t.card.inParams.length?t.selectFormItemId=t.card.inParams[0].id:t.selectFormItemId="",t.card.height=o(t.card))}return t;case d.COPY_CARD_FROM_ITEM:if(t.selectFormItemId){var m=t.card.inParams.findIndex((function(e){return e.id===t.selectFormItemId}));if(-1!==m){var p=(0,l.M8)();t.card.inParams.push((0,r.Z)((0,r.Z)({},t.card.inParams[m]),{},{id:p})),t.selectFormItemId=p,t.card.height=o(t.card)}}return t;case d.TOP_CARD_FROM_ITEM:if(t.selectFormItemId){var f=t.card.inParams.findIndex((function(e){return e.id===t.selectFormItemId}));if(-1!==f){var h=t.card.inParams.splice(f,1);t.card.inParams.unshift(h[0])}}return t;case d.BOTTOM_CARD_FROM_ITEM:if(t.selectFormItemId){var x=t.card.inParams.findIndex((function(e){return e.id===t.selectFormItemId}));if(-1!==x){var v=t.card.inParams.splice(x,1);t.card.inParams.push(v[0])}}return t;case d.MOVEUP_CARD_FROM_ITEM:if(t.selectFormItemId){var I=t.card.inParams.findIndex((function(e){return e.id===t.selectFormItemId}));if(I>0){var b,j=t.card.inParams.splice(I,1);(b=t.card.inParams).splice.apply(b,[I-1,0].concat((0,n.Z)(j)))}}return t;case d.MOVEDOWN_CARD_FROM_ITEM:if(t.selectFormItemId){var g=t.card.inParams.findIndex((function(e){return e.id===t.selectFormItemId}));if(-1!==g&&g<t.card.inParams.length-1){var y,C=t.card.inParams.splice(g,1);(y=t.card.inParams).splice.apply(y,[g+1,0].concat((0,n.Z)(C)))}}return t;default:return e}}},29428:function(e,a,t){t.r(a),t.d(a,{ADD_CARD_FROM_ITEM:function(){return i},BOTTOM_CARD_FROM_ITEM:function(){return m},CARD:function(){return n},COPY_CARD_FROM_ITEM:function(){return s},DELETE_CARD_FROM_ITEM:function(){return c},MODIFY_CARD_FROM_ITEM:function(){return d},MODIFY_CARD_PORTS:function(){return l},MODIFY_CARD_TITLE:function(){return r},MOVEDOWN_CARD_FROM_ITEM:function(){return f},MOVEUP_CARD_FROM_ITEM:function(){return p},SELECT_CARD_FROM_ITEM:function(){return o},TOP_CARD_FROM_ITEM:function(){return u}});var n="CARD",r="MODIFY_CARD_TITLE",l="MODIFY_CARD_PORTS",i="ADD_CARD_FROM_ITEM",d="MODIFY_CARD_FROM_ITEM",o="SELECT_CARD_FROM_ITEM",c="DELETE_CARD_FROM_ITEM",s="COPY_CARD_FROM_ITEM",u="TOP_CARD_FROM_ITEM",m="BOTTOM_CARD_FROM_ITEM",p="MOVEUP_CARD_FROM_ITEM",f="MOVEDOWN_CARD_FROM_ITEM"},65601:function(e,a,t){t.r(a),a.default={}},39032:function(e,a,t){t.r(a),a.default={}},15270:function(e){e.exports="data:image/png;base64,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"}}]);