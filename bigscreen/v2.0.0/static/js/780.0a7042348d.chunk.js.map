{"version":3,"file":"static/js/780.0a7042348d.chunk.js","mappings":"qPAcO,MAAMA,EAA0B,CACrCC,KAAM,CACJC,KAAM,QACNC,GAAI,GACJC,WAAY,GACZC,MAAO,EACPC,cAAe,CAAC,EAChBC,QAAS,GACTC,OAAQ,GACRC,YAAa,IAEfC,eAAWC,EACXC,cAAUD,EACVH,YAAQG,EACRE,aAAc,IAGHC,EAAc,WAAiD,IAAhDC,EAAKC,UAAAC,OAAA,QAAAN,IAAAK,UAAA,GAAAA,UAAA,GAAGhB,EAAckB,EAAqBF,UAAAC,OAAA,EAAAD,UAAA,QAAAL,EACrE,MAAMQ,EAAkBC,KAAKC,MAAMD,KAAKE,UAAUP,IAElD,OAAQG,EAAOK,MAEb,KAAKC,EAAAA,KAGH,OAFAL,EAAKlB,KAAOiB,EAAOO,KACnBN,EAAKX,OAASU,EAAOO,KAAKjB,OACnBW,EAET,KAAKO,EAAAA,YAKH,OAJAP,EAAKlB,KAAO,IACPc,EAAMd,QACNiB,EAAOO,MAELN,EAET,KAAKQ,EAAAA,cAGH,OAFAR,EAAKP,SAAWM,EAAON,SACvBO,EAAKT,UAAY,GACVS,EAET,KAAKS,EAAAA,WAIH,OAHAT,EAAKlB,KAAKM,QAAU,IAAIY,EAAKlB,KAAKM,QAASW,EAAOO,MAClDN,EAAKP,SAAWM,EAAOO,KAAKb,SAC5BO,EAAKT,UAAY,GACVS,EAET,KAAKU,EAAAA,cAAe,CAClB,MAAMC,EAAQX,EAAKlB,KAAKM,QAAQwB,WAC7BC,GAASA,EAAKpB,WAAaM,EAAOO,KAAKb,WAQ1C,OANe,IAAXkB,IACFX,EAAKlB,KAAKM,QAAQuB,GAAS,IACtBX,EAAKlB,KAAKM,QAAQuB,MAClBZ,EAAOO,OAGPN,CACT,CACA,KAAKc,EAAAA,cAOH,OANAd,EAAKlB,KAAKM,QAAUY,EAAKlB,KAAKM,QAAQ2B,QACnCF,GAASA,EAAKpB,WAAaM,EAAOf,KAEjCe,EAAOf,KAAOgB,EAAKP,WACrBO,EAAKP,SAAW,IAEXO,EAET,KAAKgB,EAAAA,eAGH,OAFAhB,EAAKP,SAAWM,EAAON,SACvBO,EAAKT,UAAYQ,EAAOR,UACjBS,EAET,KAAKiB,EAAAA,eAAgB,CACnB,MAAMC,EAAqBlB,EAAKlB,KAAKM,QAAQwB,WAC1CC,GAASA,EAAKpB,WAAaO,EAAKP,WAEnC,IAA4B,IAAxByB,EAA2B,CAC7B,MAAMC,EAAsBnB,EAAKlB,KAAKM,QACpC8B,GACAE,SAASR,WAAWC,GAASA,EAAKtB,YAAcS,EAAKT,aAC1B,IAAzB4B,IACFnB,EAAKlB,KAAKM,QAAQ8B,GAAoBE,SAASD,GAC7CpB,EAAOO,KAEb,CACA,OAAON,CACT,CACA,KAAKqB,EAAAA,cAEH,OADArB,EAAKN,aAAeK,EAAOO,KACpBN,EAMb,C,uVCzGO,MAAMK,EAAO,OAIPE,EAAc,cAIdC,EAAgB,gBAIhBC,EAAa,aAIbK,EAAgB,gBAIhBJ,EAAgB,gBAIhBM,EAAiB,iBAIjBC,EAAiB,iBAIjBI,EAAgB,e","sources":["webpack://large-screen-configuration/./src/pages/web/pageList/edit/store/reducers.ts","webpack://large-screen-configuration/./src/pages/web/pageList/edit/store/type.ts"],"sourcesContent":["import { ModifyActions } from \"./action\";\r\nimport {\r\n  ALL_STATE,\r\n  PAGE,\r\n  MODIFY_PAGE,\r\n  SELECT_WIDGET,\r\n  SELECT_ELEMENT,\r\n  ADD_WIDGET,\r\n  MODIFY_WIDGET,\r\n  MODIFY_ELEMENT,\r\n  DELETE_WIDGET,\r\n  SELECTED_TYPE,\r\n} from \"./type\";\r\n\r\nexport const initialState: ALL_STATE = {\r\n  page: {\r\n    name: \"未命名页面\",\r\n    id: \"\",\r\n    createTime: \"\",\r\n    count: 0,\r\n    configuration: {},\r\n    widgets: [],\r\n    pageId: \"\",\r\n    screenRatio: \"\",\r\n  },\r\n  elementId: undefined,\r\n  widgetId: undefined,\r\n  pageId: undefined,\r\n  selectedType: \"\",\r\n};\r\n\r\nexport const pageReducer = (state = initialState, action: ModifyActions) => {\r\n  const copy: ALL_STATE = JSON.parse(JSON.stringify(state));\r\n  console.log(state, action);\r\n  switch (action.type) {\r\n    // 获取页面\r\n    case PAGE: {\r\n      copy.page = action.data;\r\n      copy.pageId = action.data.pageId;\r\n      return copy;\r\n    }\r\n    case MODIFY_PAGE: {\r\n      copy.page = {\r\n        ...state.page,\r\n        ...action.data,\r\n      };\r\n      return copy;\r\n    }\r\n    case SELECT_WIDGET: {\r\n      copy.widgetId = action.widgetId;\r\n      copy.elementId = \"\";\r\n      return copy;\r\n    }\r\n    case ADD_WIDGET: {\r\n      copy.page.widgets = [...copy.page.widgets, action.data];\r\n      copy.widgetId = action.data.widgetId;\r\n      copy.elementId = \"\";\r\n      return copy;\r\n    }\r\n    case MODIFY_WIDGET: {\r\n      const index = copy.page.widgets.findIndex(\r\n        (item) => item.widgetId === action.data.widgetId\r\n      );\r\n      if (index !== -1) {\r\n        copy.page.widgets[index] = {\r\n          ...copy.page.widgets[index],\r\n          ...action.data,\r\n        };\r\n      }\r\n      return copy;\r\n    }\r\n    case DELETE_WIDGET: {\r\n      copy.page.widgets = copy.page.widgets.filter(\r\n        (item) => item.widgetId !== action.id\r\n      );\r\n      if (action.id === copy.widgetId) {\r\n        copy.widgetId = \"\";\r\n      }\r\n      return copy;\r\n    }\r\n    case SELECT_ELEMENT: {\r\n      copy.widgetId = action.widgetId;\r\n      copy.elementId = action.elementId;\r\n      return copy;\r\n    }\r\n    case MODIFY_ELEMENT: {\r\n      const currentWidgetIndex = copy.page.widgets.findIndex(\r\n        (item) => item.widgetId === copy.widgetId\r\n      );\r\n      if (currentWidgetIndex !== -1) {\r\n        const currentElementIndex = copy.page.widgets[\r\n          currentWidgetIndex\r\n        ].elements.findIndex((item) => item.elementId === copy.elementId);\r\n        if (currentElementIndex !== -1) {\r\n          copy.page.widgets[currentWidgetIndex].elements[currentElementIndex] =\r\n            action.data;\r\n        }\r\n      }\r\n      return copy;\r\n    }\r\n    case SELECTED_TYPE: {\r\n      copy.selectedType = action.data;\r\n      return copy;\r\n    }\r\n    default: {\r\n      console.log(\"你访问的类型不对，请自行检查\");\r\n    }\r\n  }\r\n};\r\n","import { IPage } from \"@src/service\";\r\n\r\n// 获取页面\r\nexport const PAGE = \"PAGE\";\r\nexport type PAGE_TYPE = typeof PAGE;\r\n\r\n// 修改页面\r\nexport const MODIFY_PAGE = \"MODIFY_PAGE\";\r\nexport type MODIFY_PAGE_TYPE = typeof MODIFY_PAGE;\r\n\r\n// 选中微件\r\nexport const SELECT_WIDGET = \"SELECT_WIDGET\";\r\nexport type SELECT_WIDGET_TYPE = typeof SELECT_WIDGET;\r\n\r\n// 添加微件\r\nexport const ADD_WIDGET = \"ADD_WIDGET\";\r\nexport type ADD_WIDGET_TYPE = typeof ADD_WIDGET;\r\n\r\n// 删除微件\r\nexport const DELETE_WIDGET = \"DELETE_WIDGET\";\r\nexport type DELETE_WIDGET_TYPE = typeof DELETE_WIDGET;\r\n\r\n// 修改微件\r\nexport const MODIFY_WIDGET = \"MODIFY_WIDGET\";\r\nexport type MODIFY_WIDGET_TYPE = typeof MODIFY_WIDGET;\r\n\r\n// 选中组件\r\nexport const SELECT_ELEMENT = \"SELECT_ELEMENT\";\r\nexport type SELECT_ELEMENT_TYPE = typeof SELECT_ELEMENT;\r\n\r\n// 修改微件\r\nexport const MODIFY_ELEMENT = \"MODIFY_ELEMENT\";\r\nexport type MODIFY_ELEMENT_TYPE = typeof MODIFY_ELEMENT;\r\n\r\n// 修改选中类型\r\nexport const SELECTED_TYPE = \"SELECTED_TYPE\";\r\nexport type SELECTED_TYPE_TYPE = typeof SELECTED_TYPE;\r\n\r\nexport interface ALL_STATE {\r\n  page: IPage;\r\n  elementId: string | undefined;\r\n  widgetId: string | undefined;\r\n  pageId: string | undefined;\r\n  selectedType: PageType | \"\";\r\n}\r\n"],"names":["initialState","page","name","id","createTime","count","configuration","widgets","pageId","screenRatio","elementId","undefined","widgetId","selectedType","pageReducer","state","arguments","length","action","copy","JSON","parse","stringify","type","PAGE","data","MODIFY_PAGE","SELECT_WIDGET","ADD_WIDGET","MODIFY_WIDGET","index","findIndex","item","DELETE_WIDGET","filter","SELECT_ELEMENT","MODIFY_ELEMENT","currentWidgetIndex","currentElementIndex","elements","SELECTED_TYPE"],"sourceRoot":""}