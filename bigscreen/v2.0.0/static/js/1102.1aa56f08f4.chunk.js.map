{"version":3,"file":"static/js/1102.1aa56f08f4.chunk.js","mappings":"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","sources":["webpack://large-screen-configuration/./src/pages/web/projectList/edit/store/reducers.ts","webpack://large-screen-configuration/./src/pages/web/projectList/edit/store/type.ts"],"sourcesContent":["import { IElement, IPage, IWidget } from \"@src/service\";\r\nimport { ModifyActions } from \"./action\";\r\nimport {\r\n  ALL_STATE,\r\n  PROJECT,\r\n  MODIFY_PROJECT,\r\n  ADD_WIDGET,\r\n  DELETE_WIDGET,\r\n  MODIFY_WIDGET,\r\n  SELECT_WIDGET,\r\n  SELECT_ELEMENT,\r\n  ADD_PAGE,\r\n  MODIFY_PAGE,\r\n  SELECT_PAGE,\r\n  DELETE_PAGE,\r\n  MODIFY_PROJECT_CONFIGUREVALUE,\r\n  MODIFY_ELEMENT,\r\n} from \"./type\";\r\nimport { getPrefixStyle } from \"@src/utils\";\r\n\r\nexport const initialState: ALL_STATE = {\r\n  project: {\r\n    name: \"未命名项目\",\r\n    createTime: \"\",\r\n    url: \"\",\r\n    projectId: \"\",\r\n    configuration: {},\r\n    pages: [],\r\n    screenRatio: \"\",\r\n  },\r\n  elementId: undefined,\r\n  widgetId: undefined,\r\n  pageId: undefined,\r\n  projectId: undefined,\r\n};\r\n\r\nexport const projectReducer = (state = initialState, action: ModifyActions) => {\r\n  const copy: ALL_STATE = JSON.parse(JSON.stringify(state));\r\n  // 当前页面\r\n  let currentPage = copy.project.pages.find(\r\n    (item) => item.pageId === copy.pageId\r\n  );\r\n  // 当前微件\r\n  let currentWidget = currentPage?.widgets.find(\r\n    (item) => item.widgetId === copy.widgetId\r\n  );\r\n  switch (action.type) {\r\n    // 获取页面\r\n    case PROJECT: {\r\n      copy.project = action.data;\r\n      copy.pageId = action.data.pages[0]?.pageId;\r\n      copy.projectId = action.data.projectId;\r\n      return copy;\r\n    }\r\n    case MODIFY_PROJECT: {\r\n      copy.project = {\r\n        ...copy.project,\r\n        ...action.data,\r\n      };\r\n      return copy;\r\n    }\r\n    case MODIFY_PROJECT_CONFIGUREVALUE: {\r\n      let data: IAnyObject = getPrefixStyle(action.data, \"widget\");\r\n      if (JSON.stringify(data) !== \"{}\") {\r\n        for (let i = 0; i < copy.project.pages.length; i++) {\r\n          for (let j = 0; j < copy.project.pages[i].widgets.length; j++) {\r\n            copy.project.pages[i].widgets[j].configuration = {\r\n              ...copy.project.pages[i].widgets[j].configuration,\r\n              configureValue: {\r\n                ...copy.project.pages[i].widgets[j].configuration\r\n                  ?.configureValue,\r\n                ...data,\r\n              },\r\n            };\r\n          }\r\n        }\r\n      }\r\n      copy.project.configuration = {\r\n        ...copy.project.configuration,\r\n        configureValue: {\r\n          ...copy.project.configuration?.configureValue,\r\n          ...action.data,\r\n        },\r\n      };\r\n      return copy;\r\n    }\r\n    case ADD_WIDGET: {\r\n      let data: IAnyObject = getPrefixStyle(\r\n        copy?.project?.configuration?.configureValue || {},\r\n        \"widget\"\r\n      );\r\n      let widgets: IWidget[] = [];\r\n      if (Array.isArray(action.data)) {\r\n        widgets = action.data.map((item) => ({\r\n          ...item,\r\n          configuration: {\r\n            ...item?.configuration,\r\n            configureValue: {\r\n              ...item?.configuration?.configureValue,\r\n              ...data,\r\n            },\r\n          },\r\n        }));\r\n      } else {\r\n        copy.widgetId = action.data.widgetId;\r\n        widgets.push({\r\n          ...action.data,\r\n          configuration: {\r\n            ...action?.data?.configuration,\r\n            configureValue: {\r\n              ...action?.data?.configuration?.configureValue,\r\n              ...data,\r\n            },\r\n          },\r\n        });\r\n      }\r\n      (currentPage as IPage).widgets = (currentPage as IPage).widgets.concat(\r\n        widgets\r\n      );\r\n      copy.elementId = \"\";\r\n      return copy;\r\n    }\r\n    case DELETE_WIDGET: {\r\n      (currentPage as IPage).widgets = (currentPage as IPage).widgets.filter(\r\n        (item) => item.widgetId !== action.id\r\n      );\r\n      if (action.id === copy.widgetId) {\r\n        copy.widgetId = \"\";\r\n        copy.elementId = \"\";\r\n      }\r\n      return copy;\r\n    }\r\n    case MODIFY_WIDGET: {\r\n      const index = (currentPage as IPage).widgets.findIndex(\r\n        (item) => item.widgetId === action.data.widgetId\r\n      );\r\n      if (index !== -1) {\r\n        (currentPage as IPage).widgets[index] = {\r\n          ...(currentPage as IPage).widgets[index],\r\n          ...action.data,\r\n        };\r\n      }\r\n      return copy;\r\n    }\r\n    case SELECT_WIDGET: {\r\n      copy.widgetId = action.widgetId;\r\n      copy.elementId = \"\";\r\n      return copy;\r\n    }\r\n    case SELECT_ELEMENT: {\r\n      copy.widgetId = action.widgetId;\r\n      copy.elementId = action.elementId;\r\n      return copy;\r\n    }\r\n    case ADD_PAGE: {\r\n      copy.project.pages.push(action.data);\r\n      copy.pageId = action.data.pageId;\r\n      copy.elementId = \"\";\r\n      copy.widgetId = \"\";\r\n      return copy;\r\n    }\r\n    case MODIFY_PAGE: {\r\n      const index = copy?.project?.pages?.findIndex(\r\n        (item) => item.pageId === action.data.pageId\r\n      );\r\n      if (index !== -1) {\r\n        copy.project.pages[index] = {\r\n          ...copy.project.pages[index],\r\n          ...action.data,\r\n        };\r\n        if (copy.pageId !== action.data.pageId) {\r\n          copy.pageId = action.data.pageId;\r\n          copy.widgetId = \"\";\r\n          copy.elementId = \"\";\r\n        }\r\n      }\r\n      return copy;\r\n    }\r\n    case SELECT_PAGE: {\r\n      copy.pageId = action.pageId;\r\n      copy.widgetId = \"\";\r\n      copy.elementId = \"\";\r\n      return copy;\r\n    }\r\n    case DELETE_PAGE: {\r\n      copy.project.pages =\r\n        copy.project.pages?.filter((item) => item.pageId !== action.pageId) ||\r\n        [];\r\n      if (copy.pageId === action.pageId) {\r\n        copy.pageId = \"\";\r\n        copy.widgetId = \"\";\r\n        copy.elementId = \"\";\r\n      }\r\n      return copy;\r\n    }\r\n    case MODIFY_ELEMENT: {\r\n      const index = currentWidget?.elements?.findIndex(\r\n        (item) => item.elementId === copy.elementId\r\n      );\r\n      if (index !== -1) {\r\n        (currentWidget?.elements as IElement[])[index as number] = {\r\n          ...(currentWidget?.elements as IElement[])[index as number],\r\n          ...action.data,\r\n        };\r\n      }\r\n      console.log(copy, \"123\");\r\n      return copy;\r\n    }\r\n    default: {\r\n      console.log(\"你访问的类型不对，请自行检查\");\r\n    }\r\n  }\r\n};\r\n","import { IProject } from \"@src/service\";\r\n\r\n// 获取项目\r\nexport const PROJECT = \"PROJECT\";\r\nexport type PROJECT_TYPE = typeof PROJECT;\r\n\r\n// 修改项目\r\nexport const MODIFY_PROJECT = \"MODIFY_PROJECT\";\r\nexport type MODIFY_PROJECT_TYPE = typeof MODIFY_PROJECT;\r\n\r\n// 修改项目的configureValue\r\nexport const MODIFY_PROJECT_CONFIGUREVALUE = \"MODIFY_PROJECT_CONFIGUREVALUE\";\r\nexport type MODIFY_PROJECT_CONFIGUREVALUE_TYPE =\r\n  typeof MODIFY_PROJECT_CONFIGUREVALUE;\r\n\r\n// 添加微件\r\nexport const ADD_WIDGET = \"ADD_WIDGET\";\r\nexport type ADD_WIDGET_TYPE = typeof ADD_WIDGET;\r\n\r\n// 删除微件\r\nexport const DELETE_WIDGET = \"DELETE_WIDGET\";\r\nexport type DELETE_WIDGET_TYPE = typeof DELETE_WIDGET;\r\n\r\n// 修改微件\r\nexport const MODIFY_WIDGET = \"MODIFY_WIDGET\";\r\nexport type MODIFY_WIDGET_TYPE = typeof MODIFY_WIDGET;\r\n\r\n// 选中微件\r\nexport const SELECT_WIDGET = \"SELECT_WIDGET\";\r\nexport type SELECT_WIDGET_TYPE = typeof SELECT_WIDGET;\r\n\r\n// 选中组件\r\nexport const SELECT_ELEMENT = \"SELECT_ELEMENT\";\r\nexport type SELECT_ELEMENT_TYPE = typeof SELECT_ELEMENT;\r\n\r\n// 增加页面\r\nexport const ADD_PAGE = \"ADD_PAGE\";\r\nexport type ADD_PAGE_TYPE = typeof ADD_PAGE;\r\n\r\n// 编辑页面\r\nexport const MODIFY_PAGE = \"MODIFY_PAGE\";\r\nexport type MODIFY_PAGE_TYPE = typeof MODIFY_PAGE;\r\n\r\n// 选中页面\r\nexport const SELECT_PAGE = \"SELECT_PAGE\";\r\nexport type SELECT_PAGE_TYPE = typeof SELECT_PAGE;\r\n// 删除页面\r\nexport const DELETE_PAGE = \"DELETE_PAGE\";\r\nexport type DELETE_PAGE_TYPE = typeof DELETE_PAGE;\r\n\r\n// 修改组件\r\nexport const MODIFY_ELEMENT = \"MODIFY_ELEMENT\";\r\nexport type MODIFY_ELEMENT_TYPE = typeof MODIFY_ELEMENT;\r\n\r\nexport interface ALL_STATE {\r\n  project: IProject;\r\n  elementId: string | undefined;\r\n  widgetId: string | undefined;\r\n  pageId: string | undefined;\r\n  projectId: string | undefined;\r\n}\r\n"],"names":["initialState","project","name","createTime","url","projectId","configuration","pages","screenRatio","elementId","undefined","widgetId","pageId","projectReducer","state","arguments","length","action","copy","JSON","parse","stringify","currentPage","find","item","currentWidget","widgets","type","PROJECT","_action$data$pages$","data","MODIFY_PROJECT","MODIFY_PROJECT_CONFIGUREVALUE","_copy$project$configu","getPrefixStyle","i","j","_copy$project$pages$i","configureValue","ADD_WIDGET","_copy$project","_copy$project$configu2","_action$data","_action$data2","_action$data2$configu","Array","isArray","map","_item$configuration","push","concat","DELETE_WIDGET","filter","id","MODIFY_WIDGET","index","findIndex","SELECT_WIDGET","SELECT_ELEMENT","ADD_PAGE","MODIFY_PAGE","_copy$project2","_copy$project2$pages","SELECT_PAGE","DELETE_PAGE","_copy$project$pages","MODIFY_ELEMENT","_currentWidget$elemen","elements"],"sourceRoot":""}