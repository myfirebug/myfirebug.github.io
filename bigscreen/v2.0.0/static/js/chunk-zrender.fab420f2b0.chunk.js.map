{"version":3,"file":"static/js/chunk-zrender.fab420f2b0.chunk.js","mappings":";oPASWA,EAAyB,gBAChCC,EAAsB,KAAoBC,OAAO,CAAC,WAClDC,GAAyB,QAAO,MAAqB,SAAUC,EAAKC,GAEpE,OADAD,EAAIC,IAAO,EACJD,CACX,GAAG,CAAEE,QAAQ,IACTC,EAAoB,CAAC,EACrBC,EAAkB,IAAI,IAAa,EAAG,EAAG,EAAG,GAC5CC,EAAW,WACX,SAASA,EAAQC,GACbC,KAAKC,IAAK,UACVD,KAAKE,UAAY,GACjBF,KAAKG,cAAgB,GACrBH,KAAKI,OAAS,CAAC,EACfJ,KAAKK,MAAMN,EACf,CAkyBA,OAjyBAD,EAAQQ,UAAUD,MAAQ,SAAUN,GAChCC,KAAKO,KAAKR,EACd,EACAD,EAAQQ,UAAUE,MAAQ,SAAUC,EAAIC,EAAIC,GACxC,OAAQX,KAAKY,WACT,IAAK,aACDF,EAAK,EACL,MACJ,IAAK,WACDD,EAAK,EAGb,IAAII,EAAIb,KAAKc,UACRD,IACDA,EAAIb,KAAKc,UAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAEzCD,EAAE,IAAMJ,EACRI,EAAE,IAAMH,EACRV,KAAKe,qBACLf,KAAKgB,YACT,EACAlB,EAAQQ,UAAUW,aAAe,WAAc,EAC/CnB,EAAQQ,UAAUY,YAAc,WAAc,EAC9CpB,EAAQQ,UAAUa,OAAS,WACvBnB,KAAKoB,kBACDpB,KAAKqB,SACLrB,KAAKsB,iBAEb,EACAxB,EAAQQ,UAAUgB,gBAAkB,SAAUC,GAC1C,IAAIC,EAASxB,KAAKyB,aAClB,GAAID,KAAYA,EAAO7B,QAAU4B,GAAc,CACtCvB,KAAK0B,aACN1B,KAAK0B,WAAa,CAAC,GAEvB,IAAIA,EAAa1B,KAAK0B,WAClBC,EAAUD,EAAWE,MACrBC,EAAqBL,EAAOK,mBAC5BC,OAAY,EACZC,OAAoB,EACpBC,GAAmB,EACvBH,EAAmBI,OAASN,EAAU3B,KAAO,KAC7C,IAAIkC,GAAc,EAElB,GADAL,EAAmBM,cAAcX,GACN,MAAvBE,EAAWU,SAAkB,CAC7B,IAAIC,EAAaxC,EACb6B,EAAWW,WACXA,EAAWC,KAAKZ,EAAWW,YAG3BA,EAAWC,KAAKtC,KAAKuC,mBAEpBZ,GACDU,EAAWG,eAAexC,KAAKc,WAE/Bd,KAAKyC,sBACLzC,KAAKyC,sBAAsB7C,EAAmB8B,EAAYW,IAG1D,QAAsBzC,EAAmB8B,EAAYW,GAEzDR,EAAmBa,EAAI9C,EAAkB8C,EACzCb,EAAmBc,EAAI/C,EAAkB+C,EACzCb,EAAYlC,EAAkBgD,MAC9Bb,EAAoBnC,EAAkBiD,cACtC,IAAIC,EAAapB,EAAWqB,OAC5B,GAAID,GAAqC,MAAvBpB,EAAWsB,SAAkB,CAC3C,IAAIC,OAAa,EACbC,OAAa,EACE,WAAfJ,GACAG,EAAgC,GAAnBZ,EAAWc,MACxBD,EAAiC,GAApBb,EAAWe,SAGxBH,GAAa,QAAaH,EAAW,GAAIT,EAAWc,OACpDD,GAAa,QAAaJ,EAAW,GAAIT,EAAWe,SAExDlB,GAAc,EACdL,EAAmBwB,SAAWxB,EAAmBa,EAAIO,GAActB,EAAU,EAAIU,EAAWK,GAC5Fb,EAAmByB,SAAWzB,EAAmBc,EAAIO,GAAcvB,EAAU,EAAIU,EAAWM,EAChG,CACJ,CAC2B,MAAvBjB,EAAWsB,WACXnB,EAAmBmB,SAAWtB,EAAWsB,UAE7C,IAAIO,EAAa7B,EAAW8B,OACxBD,IACA1B,EAAmBa,GAAKa,EAAW,GACnC1B,EAAmBc,GAAKY,EAAW,GAC9BrB,IACDL,EAAmBwB,SAAWE,EAAW,GACzC1B,EAAmByB,SAAWC,EAAW,KAGjD,IAAIE,EAAgC,MAArB/B,EAAWgC,OACY,iBAAxBhC,EAAWU,UAAyBV,EAAWU,SAASuB,QAAQ,WAAa,EACrFjC,EAAWgC,OACbE,EAAwB5D,KAAK6D,yBAA2B7D,KAAK6D,uBAAyB,CAAC,GACvFC,OAAW,EACXC,OAAa,EACbC,OAAa,EACbP,GAAYzD,KAAKiE,mBACjBH,EAAWpC,EAAWwC,WACtBH,EAAarC,EAAWyC,aACR,MAAZL,GAAiC,SAAbA,IACpBA,EAAW9D,KAAKoE,qBAEF,MAAdL,GAAqC,SAAfA,IACtBA,EAAa/D,KAAKqE,oBAAoBP,GACtCE,GAAa,KAIjBF,EAAWpC,EAAW4C,YACtBP,EAAarC,EAAW6C,cACR,MAAZT,GAAiC,SAAbA,IACpBA,EAAW9D,KAAKwE,kBAEF,MAAdT,GAAqC,SAAfA,IACtBA,EAAa/D,KAAKyE,iBAAiBX,GACnCE,GAAa,KAGrBF,EAAWA,GAAY,UACNF,EAAsBc,MAChCX,IAAeH,EAAsBe,QACrCX,IAAeJ,EAAsBI,YACrClC,IAAc8B,EAAsBhB,OACpCb,IAAsB6B,EAAsBf,gBAC/Cb,GAAmB,EACnB4B,EAAsBc,KAAOZ,EAC7BF,EAAsBe,OAASZ,EAC/BH,EAAsBI,WAAaA,EACnCJ,EAAsBhB,MAAQd,EAC9B8B,EAAsBf,cAAgBd,EACtCP,EAAOoD,oBAAoBhB,IAE/BpC,EAAOH,SAAW,KACdW,GACAR,EAAOqD,YAAW,EAE1B,CACJ,EACA/E,EAAQQ,UAAU2D,gBAAkB,WAChC,OAAO,CACX,EACAnE,EAAQQ,UAAU8D,kBAAoB,WAClC,MAAO,MACX,EACAtE,EAAQQ,UAAU+D,oBAAsB,SAAUP,GAC9C,MAAO,MACX,EACAhE,EAAQQ,UAAUkE,eAAiB,WAC/B,OAAOxE,KAAK8E,MAAQ9E,KAAK8E,KAAKC,aAAe,KAAoB,IACrE,EACAjF,EAAQQ,UAAUmE,iBAAmB,SAAUX,GAC3C,IAAIkB,EAAkBhF,KAAK8E,MAAQ9E,KAAK8E,KAAKG,qBACzCC,EAAsC,iBAApBF,IAAgC,QAAMA,GACvDE,IACDA,EAAW,CAAC,IAAK,IAAK,IAAK,IAI/B,IAFA,IAAIC,EAAQD,EAAS,GACjBE,EAASpF,KAAK8E,KAAKC,aACdM,EAAI,EAAGA,EAAI,EAAGA,IACnBH,EAASG,GAAKH,EAASG,GAAKF,GAASC,EAAS,EAAI,MAAQ,EAAID,GAGlE,OADAD,EAAS,GAAK,GACP,QAAUA,EAAU,OAC/B,EACApF,EAAQQ,UAAUgF,SAAW,SAAUC,EAAIC,GAAW,EACtD1F,EAAQQ,UAAUmF,OAAS,SAAU/F,EAAKgG,GAC1B,eAARhG,EACAM,KAAK2F,cAAcD,GAEN,gBAARhG,EACLM,KAAK4F,eAAeF,GAEP,aAARhG,EACLM,KAAK6F,YAAYH,GAEJ,UAARhG,GACLM,KAAK8F,MAAQ9F,KAAK8F,OAAS,CAAC,GAC5B,QAAO9F,KAAK8F,MAAOJ,IAGnB1F,KAAKN,GAAOgG,CAEpB,EACA5F,EAAQQ,UAAUyF,KAAO,WACrB/F,KAAKL,QAAS,EACdK,KAAKgB,YACT,EACAlB,EAAQQ,UAAU0F,KAAO,WACrBhG,KAAKL,QAAS,EACdK,KAAKgB,YACT,EACAlB,EAAQQ,UAAUC,KAAO,SAAU0F,EAAUP,GACzC,GAAwB,iBAAbO,EACPjG,KAAKyF,OAAOQ,EAAUP,QAErB,IAAI,QAASO,GAGd,IAFA,IAAIxG,EAAMwG,EACNC,GAAU,QAAKzG,GACV4F,EAAI,EAAGA,EAAIa,EAAQC,OAAQd,IAAK,CACrC,IAAI3F,EAAMwG,EAAQb,GAClBrF,KAAKyF,OAAO/F,EAAKuG,EAASvG,GAC9B,CAGJ,OADAM,KAAKgB,aACEhB,IACX,EACAF,EAAQQ,UAAU8F,yBAA2B,SAAUC,GACnDrG,KAAKsG,mBAAmBD,GAExB,IADA,IAAIE,EAAcvG,KAAKwG,aACdnB,EAAI,EAAGA,EAAIrF,KAAKE,UAAUiG,OAAQd,IAAK,CAC5C,IAAIoB,EAAWzG,KAAKE,UAAUmF,GAC1BqB,EAAsBD,EAASE,sBACnC,KAAIF,EAASG,WAAaF,GAAuBA,IAAwBrH,GAAzE,CAGA,IAAIwH,EAAaJ,EAASI,WACtBC,EAASD,EACPN,EAAYM,GAAcN,EAChCE,EAASM,OAAOD,EAJhB,CAKJ,CACJ,EACAhH,EAAQQ,UAAUgG,mBAAqB,SAAUD,GAC7C,IAAIE,EAAcvG,KAAKwG,aAClBD,IACDA,EAAcvG,KAAKwG,aAAe,CAAC,GAEnCH,EAAQ3E,aAAe6E,EAAY7E,aACnC6E,EAAY7E,WAAa1B,KAAK0B,YAElC1B,KAAKgH,qBAAqBX,EAASE,EAAajH,EACpD,EACAQ,EAAQQ,UAAU0G,qBAAuB,SAAUX,EAASE,EAAaU,GACrE,IAAK,IAAI5B,EAAI,EAAGA,EAAI4B,EAAYd,OAAQd,IAAK,CACzC,IAAI3F,EAAMuH,EAAY5B,GACF,MAAhBgB,EAAQ3G,IAAkBA,KAAO6G,IACjCA,EAAY7G,GAAOM,KAAKN,GAEhC,CACJ,EACAI,EAAQQ,UAAU4G,SAAW,WACzB,OAAOlH,KAAKG,cAAcgG,OAAS,CACvC,EACArG,EAAQQ,UAAU6G,SAAW,SAAUC,GACnC,OAAOpH,KAAKI,OAAOgH,EACvB,EACAtH,EAAQQ,UAAU+G,YAAc,SAAUD,GACtC,IAAIhH,EAASJ,KAAKI,OAIlB,OAHKA,EAAOgH,KACRhH,EAAOgH,GAAQ,CAAC,GAEbhH,EAAOgH,EAClB,EACAtH,EAAQQ,UAAUgH,YAAc,SAAUC,GACtCvH,KAAKwH,SAASnI,GAAwB,EAAOkI,EACjD,EACAzH,EAAQQ,UAAUkH,SAAW,SAAUC,EAAWC,EAAmBH,EAAaI,GAC9E,IAAIC,EAAgBH,IAAcpI,EAElC,GADgBW,KAAKkH,aACHU,EAAlB,CAGA,IAAIzH,EAAgBH,KAAKG,cACrB0H,EAAe7H,KAAK8H,gBACxB,MAAI,QAAQ3H,EAAesH,IAAc,KAAMC,GAA8C,IAAzBvH,EAAcgG,OAAlF,CAGA,IAAI4B,EAOJ,GANI/H,KAAKgI,aAAeJ,IACpBG,EAAQ/H,KAAKgI,WAAWP,IAEvBM,IACDA,EAAS/H,KAAKI,QAAUJ,KAAKI,OAAOqH,IAEnCM,GAAUH,EAAf,CAIKA,GACD5H,KAAKoG,yBAAyB2B,GAElC,IAAIE,KAAoBF,GAASA,EAAMG,YAAeP,GAClDM,GACAjI,KAAKmI,uBAAsB,GAE/BnI,KAAKoI,eAAeX,EAAWM,EAAO/H,KAAKwG,aAAckB,GAAoBH,IAAgBvH,KAAKqI,WAAaR,GAAgBA,EAAaS,SAAW,EAAGT,GAC1J,IAAIU,EAAcvI,KAAKyB,aACnB+G,EAAYxI,KAAKyI,WAyBrB,OAxBIF,GACAA,EAAYf,SAASC,EAAWC,EAAmBH,EAAaU,GAEhEO,GACAA,EAAUhB,SAASC,EAAWC,EAAmBH,EAAaU,GAE9DL,GACA5H,KAAKG,cAAgB,GACrBH,KAAKwG,aAAe,CAAC,GAGhBkB,EAID1H,KAAKG,cAAcuI,KAAKjB,GAHxBzH,KAAKG,cAAgB,CAACsH,GAM9BzH,KAAK2I,0BACL3I,KAAKgB,cACAiH,GAAiBjI,KAAKqI,YACvBrI,KAAKmI,uBAAsB,GAC3BnI,KAAKqB,UAAY,MAEd0G,CAnCP,EAFI,OAAS,SAAWN,EAAY,eATpC,CALA,CAoDJ,EACA3H,EAAQQ,UAAUsI,UAAY,SAAUxI,EAAQmH,EAAaI,GACzD,GAAKvH,EAAO+F,OAGP,CACD,IAAI0C,EAAe,GACf1I,EAAgBH,KAAKG,cACrB2I,EAAM1I,EAAO+F,OACb4C,EAAYD,IAAQ3I,EAAcgG,OACtC,GAAI4C,EACA,IAAK,IAAI1D,EAAI,EAAGA,EAAIyD,EAAKzD,IACrB,GAAIjF,EAAOiF,KAAOlF,EAAckF,GAAI,CAChC0D,GAAY,EACZ,KACJ,CAGR,GAAIA,EACA,OAEJ,IAAS1D,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CAC1B,IAAIoC,EAAYrH,EAAOiF,GACnB2D,OAAW,EACXhJ,KAAKgI,aACLgB,EAAWhJ,KAAKgI,WAAWP,EAAWrH,IAErC4I,IACDA,EAAWhJ,KAAKI,OAAOqH,IAEvBuB,GACAH,EAAaH,KAAKM,EAE1B,CACA,IAAIC,EAAeJ,EAAaC,EAAM,GAClCb,KAAoBgB,GAAgBA,EAAaf,YAAeP,GAChEM,GACAjI,KAAKmI,uBAAsB,GAE/B,IAAIe,EAAclJ,KAAKmJ,aAAaN,GAChChB,EAAe7H,KAAK8H,gBACxB9H,KAAKoG,yBAAyB8C,GAC9BlJ,KAAKoI,eAAehI,EAAOgJ,KAAK,KAAMF,EAAalJ,KAAKwG,cAAc,GAAQe,IAAgBvH,KAAKqI,WAAaR,GAAgBA,EAAaS,SAAW,EAAGT,GAC3J,IAAIU,EAAcvI,KAAKyB,aACnB+G,EAAYxI,KAAKyI,WACjBF,GACAA,EAAYK,UAAUxI,EAAQmH,EAAaU,GAE3CO,GACAA,EAAUI,UAAUxI,EAAQmH,EAAaU,GAE7CjI,KAAK2I,0BACL3I,KAAKG,cAAgBC,EAAOiJ,QAC5BrJ,KAAKgB,cACAiH,GAAiBjI,KAAKqI,YACvBrI,KAAKmI,uBAAsB,GAC3BnI,KAAKqB,UAAY,KAEzB,MAvDIrB,KAAKsH,aAwDb,EACAxH,EAAQQ,UAAUqI,wBAA0B,WACxC,IAAK,IAAItD,EAAI,EAAGA,EAAIrF,KAAKE,UAAUiG,OAAQd,IAAK,CAC5C,IAAIoB,EAAWzG,KAAKE,UAAUmF,GAC1BoB,EAASI,YACTJ,EAAS6C,aAAatJ,KAAKyG,EAASI,YAE5C,CACJ,EACA/G,EAAQQ,UAAUiJ,YAAc,SAAUxB,GACtC,IAAIyB,GAAM,QAAQxJ,KAAKG,cAAe4H,GACtC,GAAIyB,GAAO,EAAG,CACV,IAAIrJ,EAAgBH,KAAKG,cAAckJ,QACvClJ,EAAcsJ,OAAOD,EAAK,GAC1BxJ,KAAK4I,UAAUzI,EACnB,CACJ,EACAL,EAAQQ,UAAUoJ,aAAe,SAAUC,EAAUC,EAAUC,GAC3D,IAAI1J,EAAgBH,KAAKG,cAAckJ,QACnCG,GAAM,QAAQrJ,EAAewJ,GAC7BG,GAAiB,QAAQ3J,EAAeyJ,IAAa,EACrDJ,GAAO,EACFM,EAID3J,EAAcsJ,OAAOD,EAAK,GAH1BrJ,EAAcqJ,GAAOI,EAMpBC,IAAaC,GAClB3J,EAAcuI,KAAKkB,GAEvB5J,KAAK4I,UAAUzI,EACnB,EACAL,EAAQQ,UAAUyJ,YAAc,SAAUhC,EAAOiC,GACzCA,EACAhK,KAAKwH,SAASO,GAAO,GAGrB/H,KAAKuJ,YAAYxB,EAEzB,EACAjI,EAAQQ,UAAU6I,aAAe,SAAU/I,GAGvC,IAFA,IACI6J,EADAf,EAAc,CAAC,EAEV7D,EAAI,EAAGA,EAAIjF,EAAO+F,OAAQd,IAAK,CACpC,IAAI0C,EAAQ3H,EAAOiF,IACnB,QAAO6D,EAAanB,GAChBA,EAAMrG,aACNuI,EAAmBA,GAAoB,CAAC,GACxC,QAAOA,EAAkBlC,EAAMrG,YAEvC,CAIA,OAHIuI,IACAf,EAAYxH,WAAauI,GAEtBf,CACX,EACApJ,EAAQQ,UAAU8H,eAAiB,SAAUX,EAAWM,EAAOxB,EAAamB,EAAmBwC,EAAYrC,GACvG,IAAIsC,IAAyBpC,GAASL,GAClCK,GAASA,EAAMrG,YACf1B,KAAK0B,YAAa,QAAO,CAAC,EAAGgG,EAAoB1H,KAAK0B,WAAa6E,EAAY7E,aAC/E,QAAO1B,KAAK0B,WAAYqG,EAAMrG,aAEzByI,GACD5D,EAAY7E,aACZ1B,KAAK0B,WAAa6E,EAAY7E,YAKtC,IAFA,IAAI0I,EAAmB,CAAC,EACpBC,GAAgB,EACXhF,EAAI,EAAGA,EAAI/F,EAAoB6G,OAAQd,IAAK,CACjD,IAAI3F,EAAMJ,EAAoB+F,GAC1BiF,EAAsBJ,GAAc1K,EAAuBE,GAC3DqI,GAAuB,MAAdA,EAAMrI,GACX4K,GACAD,GAAgB,EAChBD,EAAiB1K,GAAOqI,EAAMrI,IAG9BM,KAAKN,GAAOqI,EAAMrI,GAGjByK,GACmB,MAApB5D,EAAY7G,KACR4K,GACAD,GAAgB,EAChBD,EAAiB1K,GAAO6G,EAAY7G,IAGpCM,KAAKN,GAAO6G,EAAY7G,GAIxC,CACA,IAAKwK,EACD,IAAS7E,EAAI,EAAGA,EAAIrF,KAAKE,UAAUiG,OAAQd,IAAK,CAC5C,IAAIoB,EAAWzG,KAAKE,UAAUmF,GAC1BwB,EAAaJ,EAASI,WACrBJ,EAASG,WACVH,EAAS8D,mBAAmB1D,GACrBkB,GAASxB,GAAaM,GACtBkB,GAASxB,EAExB,CAEA8D,GACArK,KAAKwK,iBAAiB/C,EAAW2C,EAAkBvC,EAE3D,EACA/H,EAAQQ,UAAUmK,iBAAmB,SAAUC,GAC3C,KAAIA,EAAY5F,MAAS4F,EAAYC,eAMjCD,IAAgB1K,KAApB,CAMA,IAAI4K,EAAK5K,KAAK8E,KACV8F,GACAF,EAAYG,YAAYD,GAE5BF,EAAY5F,KAAO8F,EACnBF,EAAYC,aAAe3K,IAN3B,CAOJ,EACAF,EAAQQ,UAAUwK,iBAAmB,SAAUJ,GACvCA,EAAY5F,MACZ4F,EAAYK,iBAAiBL,EAAY5F,MAE7C4F,EAAY5F,KAAO,KACnB4F,EAAYC,aAAe,IAC/B,EACA7K,EAAQQ,UAAU0K,YAAc,WAC5B,OAAOhL,KAAKiL,SAChB,EACAnL,EAAQQ,UAAUuF,YAAc,SAAUqF,GAClClL,KAAKiL,WAAajL,KAAKiL,YAAcC,GACrClL,KAAKmL,iBAETnL,KAAKyK,iBAAiBS,GACtBlL,KAAKiL,UAAYC,EACjBlL,KAAKgB,YACT,EACAlB,EAAQQ,UAAU6K,eAAiB,WAC/B,IAAID,EAAWlL,KAAKiL,UAChBC,IACAlL,KAAK8K,iBAAiBI,GACtBlL,KAAKiL,UAAY,KACjBjL,KAAKgB,aAEb,EACAlB,EAAQQ,UAAU8K,eAAiB,WAC/B,OAAOpL,KAAKyB,YAChB,EACA3B,EAAQQ,UAAUsF,eAAiB,SAAUpE,GACzC,IAAI6J,EAAsBrL,KAAKyB,aAC3B4J,IAAwB7J,IAGxB6J,GAAuBA,IAAwB7J,GAC/CxB,KAAKsL,oBAOT9J,EAAOK,mBAAqB,IAAI,KAChC7B,KAAKyK,iBAAiBjJ,GACtBxB,KAAKyB,aAAeD,EACpBxB,KAAKgB,aACT,EACAlB,EAAQQ,UAAUqF,cAAgB,SAAU4F,GACnCvL,KAAK0B,aACN1B,KAAK0B,WAAa,CAAC,IAEvB,QAAO1B,KAAK0B,WAAY6J,GACxBvL,KAAKgB,YACT,EACAlB,EAAQQ,UAAUkL,iBAAmB,WACjCxL,KAAK0B,WAAa,KAClB1B,KAAKgB,YACT,EACAlB,EAAQQ,UAAUgL,kBAAoB,WAClC,IAAI9J,EAASxB,KAAKyB,aACdD,IACAA,EAAOK,mBAAqB,KAC5B7B,KAAK8K,iBAAiBtJ,GACtBxB,KAAKyB,aAAe,KACpBzB,KAAK6D,uBAAyB,KAC9B7D,KAAKgB,aAEb,EACAlB,EAAQQ,UAAUmL,iBAAmB,WACjC,OAAOzL,KAAKyI,UAChB,EACA3I,EAAQQ,UAAUoL,iBAAmB,SAAUC,GACvC3L,KAAKyI,YAAczI,KAAKyI,aAAekD,GACvC3L,KAAK4L,sBAET5L,KAAKyK,iBAAiBkB,GACtB3L,KAAKyI,WAAakD,EAClB3L,KAAKgB,YACT,EACAlB,EAAQQ,UAAUsL,oBAAsB,WACpC,IAAIpD,EAAYxI,KAAKyI,WACjBD,IACAxI,KAAK8K,iBAAiBtC,GACtBxI,KAAKyI,WAAa,KAClBzI,KAAKgB,aAEb,EACAlB,EAAQQ,UAAUU,WAAa,WAC3BhB,KAAKqB,SAAW,KAChB,IAAIuJ,EAAK5K,KAAK8E,KACV8F,IACI5K,KAAKqI,UACLuC,EAAGiB,eAGHjB,EAAGkB,WAGP9L,KAAK2K,cACL3K,KAAK2K,aAAa3J,YAE1B,EACAlB,EAAQQ,UAAUyL,MAAQ,WACtB/L,KAAKgB,YACT,EACAlB,EAAQQ,UAAU6H,sBAAwB,SAAU6D,GAChDhM,KAAKqI,UAAY2D,EACjB,IAAIzD,EAAcvI,KAAKyB,aACnB+G,EAAYxI,KAAKyI,WACjBF,IACAA,EAAYF,UAAY2D,GAExBxD,IACAA,EAAUH,UAAY2D,EAE9B,EACAlM,EAAQQ,UAAUuK,YAAc,SAAUD,GACtC,GAAI5K,KAAK8E,OAAS8F,EAAlB,CAGA5K,KAAK8E,KAAO8F,EACZ,IAAI1K,EAAYF,KAAKE,UACrB,GAAIA,EACA,IAAK,IAAImF,EAAI,EAAGA,EAAInF,EAAUiG,OAAQd,IAClCuF,EAAGqB,UAAUC,YAAYhM,EAAUmF,IAGvCrF,KAAKiL,WACLjL,KAAKiL,UAAUJ,YAAYD,GAE3B5K,KAAKyB,cACLzB,KAAKyB,aAAaoJ,YAAYD,GAE9B5K,KAAKyI,YACLzI,KAAKyI,WAAWoC,YAAYD,EAfhC,CAiBJ,EACA9K,EAAQQ,UAAUyK,iBAAmB,SAAUH,GAC3C,GAAK5K,KAAK8E,KAAV,CAGA9E,KAAK8E,KAAO,KACZ,IAAI5E,EAAYF,KAAKE,UACrB,GAAIA,EACA,IAAK,IAAImF,EAAI,EAAGA,EAAInF,EAAUiG,OAAQd,IAClCuF,EAAGqB,UAAUE,eAAejM,EAAUmF,IAG1CrF,KAAKiL,WACLjL,KAAKiL,UAAUF,iBAAiBH,GAEhC5K,KAAKyB,cACLzB,KAAKyB,aAAasJ,iBAAiBH,GAEnC5K,KAAKyI,YACLzI,KAAKyI,WAAWsC,iBAAiBH,EAfrC,CAiBJ,EACA9K,EAAQQ,UAAU8L,QAAU,SAAU1M,EAAK2M,EAAMC,GAC7C,IAAIxF,EAASpH,EAAMM,KAAKN,GAAOM,KAU/B,IAAIyG,EAAW,IAAI,IAASK,EAAQuF,EAAMC,GAG1C,OAFA5M,IAAQ+G,EAASI,WAAanH,GAC9BM,KAAKkM,YAAYzF,EAAU/G,GACpB+G,CACX,EACA3G,EAAQQ,UAAU4L,YAAc,SAAUzF,EAAU/G,GAChD,IAAIkL,EAAK5K,KAAK8E,KACVyH,EAAKvM,KACTyG,EAAS+F,QAAO,WACZD,EAAGE,sBAAsB/M,EAC7B,IAAGgN,MAAK,WACJ,IAAIxM,EAAYqM,EAAGrM,UACfsJ,GAAM,QAAQtJ,EAAWuG,GACzB+C,GAAO,GACPtJ,EAAUuJ,OAAOD,EAAK,EAE9B,IACAxJ,KAAKE,UAAUwI,KAAKjC,GAChBmE,GACAA,EAAGqB,UAAUC,YAAYzF,GAE7BmE,GAAMA,EAAG+B,QACb,EACA7M,EAAQQ,UAAUmM,sBAAwB,SAAU/M,GAChDM,KAAKgB,YACT,EACAlB,EAAQQ,UAAUsM,cAAgB,SAAUC,EAAOC,GAI/C,IAHA,IAAI5M,EAAYF,KAAKE,UACjB4I,EAAM5I,EAAUiG,OAChB4G,EAAgB,GACX1H,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CAC1B,IAAIoB,EAAWvG,EAAUmF,GACpBwH,GAASA,IAAUpG,EAASoG,MAI7BE,EAAcrE,KAAKjC,GAHnBA,EAASuG,KAAKF,EAKtB,CAEA,OADA9M,KAAKE,UAAY6M,EACV/M,IACX,EACAF,EAAQQ,UAAU2M,UAAY,SAAUnG,EAAQyE,EAAK2B,GACjDD,EAAUjN,KAAM8G,EAAQyE,EAAK2B,EACjC,EACApN,EAAQQ,UAAU6M,YAAc,SAAUrG,EAAQyE,EAAK2B,GACnDD,EAAUjN,KAAM8G,EAAQyE,EAAK2B,GAAgB,EACjD,EACApN,EAAQQ,UAAUkK,iBAAmB,SAAU/C,EAAWX,EAAQyE,EAAK2B,GAEnE,IADA,IAAIhN,EAAY+M,EAAUjN,KAAM8G,EAAQyE,EAAK2B,GACpC7H,EAAI,EAAGA,EAAInF,EAAUiG,OAAQd,IAClCnF,EAAUmF,GAAGsB,sBAAwBc,CAE7C,EACA3H,EAAQQ,UAAUiC,gBAAkB,WAChC,OAAO,IACX,EACAzC,EAAQQ,UAAU8M,aAAe,WAC7B,OAAO,IACX,EACAtN,EAAQuN,iBAAmB,WACvB,IAAIC,EAAUxN,EAAQQ,UACtBgN,EAAQC,KAAO,UACfD,EAAQlG,KAAO,GACfkG,EAAQ3N,OACJ2N,EAAQE,OACJF,EAAQG,QACJH,EAAQ1M,UACJ0M,EAAQI,SACJJ,EAAQK,WACJL,EAAQjF,WAAY,EAC5CiF,EAAQjM,QAAU,KAQlB,SAASuM,EAAqBlO,EAAKmO,EAAYC,EAAMC,GAsBjD,SAASC,EAAaC,EAAMC,GACxBC,OAAOC,eAAeF,EAAK,EAAG,CAC1BG,IAAK,WACD,OAAOJ,EAAKH,EAChB,EACAQ,IAAK,SAAUC,GACXN,EAAKH,GAAQS,CACjB,IAEJJ,OAAOC,eAAeF,EAAK,EAAG,CAC1BG,IAAK,WACD,OAAOJ,EAAKF,EAChB,EACAO,IAAK,SAAUC,GACXN,EAAKF,GAAQQ,CACjB,GAER,CAtCAJ,OAAOC,eAAed,EAAS5N,EAAK,CAChC2O,IAAK,WAIIrO,KAAK6N,IAENG,EAAahO,KADHA,KAAK6N,GAAc,IAGjC,OAAO7N,KAAK6N,EAChB,EACAS,IAAK,SAAUJ,GAIXlO,KAAK8N,GAAQI,EAAI,GACjBlO,KAAK+N,GAAQG,EAAI,GACjBlO,KAAK6N,GAAcK,EACnBF,EAAahO,KAAMkO,EACvB,GAoBR,CACIC,OAAOC,iBACPR,EAAqB,WAAY,aAAc,IAAK,KACpDA,EAAqB,QAAS,eAAgB,SAAU,UACxDA,EAAqB,SAAU,gBAAiB,UAAW,WAElE,CAjE0B,GAkEpB9N,CACX,CA1yBc,GA6yBd,SAASmN,EAAUuB,EAAY1H,EAAQyE,EAAK2B,EAAgBuB,GAExD,IAAIvO,EAAY,GAChBwO,EAAiBF,EAAY,GAAIA,EAAY1H,EAF7CyE,EAAMA,GAAO,CAAC,EAE4C2B,EAAgBhN,EAAWuO,GACrF,IAAIE,EAAczO,EAAUiG,OACxByI,GAAe,EACfC,EAAUtD,EAAImB,KACdoC,EAAavD,EAAIwD,QACjBC,EAAS,WACTJ,GAAe,IACfD,GACmB,IACfC,EACOC,GAAWA,IACXC,GAAcA,IAE7B,EACIG,EAAY,aACZN,GACmB,IACfC,EACOC,GAAWA,IACXC,GAAcA,IAE7B,EACKH,GACDE,GAAWA,IAEX3O,EAAUiG,OAAS,GAAKoF,EAAIiB,QAC5BtM,EAAU,GAAGsM,QAAO,SAAU1F,EAAQoI,GAClC3D,EAAIiB,OAAO0C,EACf,IAEJ,IAAK,IAAI7J,EAAI,EAAGA,EAAInF,EAAUiG,OAAQd,IAAK,CACvC,IAAIoB,EAAWvG,EAAUmF,GACrB2J,GACAvI,EAASiG,KAAKsC,GAEdC,GACAxI,EAASsI,QAAQE,GAEjB1D,EAAI4D,OACJ1I,EAAS6B,SAASiD,EAAIjD,UAE1B7B,EAAS2I,MAAM7D,EAAI8D,OACvB,CACA,OAAOnP,CACX,CACA,SAASoP,EAAeC,EAAQzI,EAAQgC,GACpC,IAAK,IAAIzD,EAAI,EAAGA,EAAIyD,EAAKzD,IACrBkK,EAAOlK,GAAKyB,EAAOzB,EAE3B,CAIA,SAASmK,EAAU1I,EAAQyI,EAAQ7P,GAC/B,IAAI,QAAY6P,EAAO7P,IAInB,IAHK,QAAYoH,EAAOpH,MACpBoH,EAAOpH,GAAO,KAEd,QAAa6P,EAAO7P,IAAO,CAC3B,IAAIoJ,EAAMyG,EAAO7P,GAAKyG,OAClBW,EAAOpH,GAAKyG,SAAW2C,IACvBhC,EAAOpH,GAAO,IAAK6P,EAAO7P,GAAgB,YAAEoJ,GAC5CwG,EAAexI,EAAOpH,GAAM6P,EAAO7P,GAAMoJ,GAEjD,KACK,CACD,IAAI2G,EAAYF,EAAO7P,GACnBgQ,EAAY5I,EAAOpH,GACnBiQ,EAAOF,EAAUtJ,OACrB,GAnBOT,EAmBO+J,GAlBf,QAAY/J,EAAM,IAoBb,IADA,IAAIkK,EAAOH,EAAU,GAAGtJ,OACfd,EAAI,EAAGA,EAAIsK,EAAMtK,IACjBqK,EAAUrK,GAIXiK,EAAeI,EAAUrK,GAAIoK,EAAUpK,GAAIuK,GAH3CF,EAAUrK,GAAKwK,MAAMvP,UAAU+I,MAAMyG,KAAKL,EAAUpK,SAQ5DiK,EAAeI,EAAWD,EAAWE,GAEzCD,EAAUvJ,OAASsJ,EAAUtJ,MACjC,MAGAW,EAAOpH,GAAO6P,EAAO7P,GArC7B,IAAmBgG,CAuCnB,CAiBA,SAASgJ,EAAiBF,EAAYuB,EAAQC,EAAYlJ,EAAQyE,EAAK2B,EAAgBhN,EAAWuO,GAS9F,IARA,IAAIwB,GAAa,QAAKnJ,GAClBwB,EAAWiD,EAAIjD,SACf4H,EAAQ3E,EAAI2E,MACZC,EAAW5E,EAAI4E,SACfC,EAAa7E,EAAI6E,WACjBC,IAAc,QAASnD,GACvBoD,EAAkB9B,EAAWtO,UAC7BqQ,EAAgB,GACXC,EAAI,EAAGA,EAAIP,EAAW9J,OAAQqK,IAAK,CACxC,IAAIC,EAAWR,EAAWO,GACtBE,EAAY5J,EAAO2J,GACvB,GAAiB,MAAbC,GAA6C,MAAxBV,EAAWS,KAC5BJ,GAAcnD,EAAeuD,IACjC,KAAI,QAASC,KACL,QAAYA,KACZ,QAAiBA,GAWrBH,EAAc7H,KAAK+H,OAXc,CACjC,GAAIV,EAAQ,CACHtB,IACDuB,EAAWS,GAAYC,EACvBlC,EAAW/B,sBAAsBsD,IAErC,QACJ,CACArB,EAAiBF,EAAYiC,EAAUT,EAAWS,GAAWC,EAAWnF,EAAK2B,GAAkBA,EAAeuD,GAAWvQ,EAAWuO,EACxI,MAKMA,IACNuB,EAAWS,GAAYC,EACvBlC,EAAW/B,sBAAsBsD,GACjCQ,EAAc7H,KAAK+H,GAE3B,CACA,IAAIE,EAASJ,EAAcpK,OAC3B,IAAKgK,GAAYQ,EACb,IAAK,IAAItL,EAAI,EAAGA,EAAIiL,EAAgBnK,OAAQd,IAAK,CAE7C,IADIoB,EAAW6J,EAAgBjL,IAClBwB,aAAekJ,EAExB,GADiBtJ,EAASmK,WAAWL,GACrB,CACZ,IAAI/G,GAAM,QAAQ8G,EAAiB7J,GACnC6J,EAAgB7G,OAAOD,EAAK,EAChC,CAER,CAMJ,GAJK+B,EAAI4D,QACLoB,GAAgB,QAAOA,GAAe,SAAU7Q,GAAO,OAlE1CmR,EAkE8D/J,EAAOpH,GAlE/DoR,EAkEqEd,EAAWtQ,KAjEhGmR,IAASC,IACT,QAAYD,KAAS,QAAYC,IAE5C,SAAuBC,EAAMC,GACzB,IAAIlI,EAAMiI,EAAK5K,OACf,GAAI2C,IAAQkI,EAAK7K,OACb,OAAO,EAEX,IAAK,IAAId,EAAI,EAAGA,EAAIyD,EAAKzD,IACrB,GAAI0L,EAAK1L,KAAO2L,EAAK3L,GACjB,OAAO,EAGf,OAAO,CACX,CAbqD4L,CAAcJ,EAAMC,IAFzE,IAAqBD,EAAMC,CAkEuF,IAC1GH,EAASJ,EAAcpK,QAEvBwK,EAAS,GACLpF,EAAI4D,QAAUjP,EAAUiG,OAAS,CACrC,IA2BIM,EA3BAyK,OAAiB,EACjBC,OAAiB,EACjBC,OAAc,EAClB,GAAI3C,EAAS,CACT0C,EAAiB,CAAC,EACdf,IACAc,EAAiB,CAAC,GAEtB,IAAS7L,EAAI,EAAGA,EAAIsL,EAAQtL,IAAK,CAE7B8L,EADIV,EAAWF,EAAclL,IACF2K,EAAWS,GAClCL,EACAc,EAAeT,GAAY3J,EAAO2J,GAGlCT,EAAWS,GAAY3J,EAAO2J,EAEtC,CACJ,MACK,GAAIL,EAAY,CACjBgB,EAAc,CAAC,EACf,IAAS/L,EAAI,EAAGA,EAAIsL,EAAQtL,IAAK,CAE7B+L,EADIX,EAAWF,EAAclL,KACL,OAAW2K,EAAWS,IAC9CjB,EAAUQ,EAAYlJ,EAAQ2J,EAClC,CACJ,EACIhK,EAAW,IAAI,IAASuJ,GAAY,GAAO,EAAOG,GAAW,QAAOG,GAAiB,SAAU7J,GAAY,OAAOA,EAASI,aAAekJ,CAAQ,IAAK,OAClJlJ,WAAakJ,EAClBxE,EAAIsB,QACJpG,EAASoG,MAAQtB,EAAIsB,OAErBuD,GAAcc,GACdzK,EAAS4K,aAAa,EAAGH,EAAgBX,GAEzCa,GACA3K,EAAS4K,aAAa,EAAGD,EAAab,GAE1C9J,EAAS4K,aAAyB,MAAZ/I,EAAmB,IAAMA,EAAUmG,EAAU0C,EAAiBrK,EAAQyJ,GAAeL,MAAMA,GAAS,GAC1H1B,EAAWtC,YAAYzF,EAAUsJ,GACjC7P,EAAUwI,KAAKjC,EACnB,CACJ,EAhNA,QAAM3G,EAAS,MACf,QAAMA,EAAS,MAgNf,oFC7gCA,IAAIwR,EAAc,CACdC,OAAQ,SAAUf,GACd,OAAOA,CACX,EACAgB,YAAa,SAAUhB,GACnB,OAAOA,EAAIA,CACf,EACAiB,aAAc,SAAUjB,GACpB,OAAOA,GAAK,EAAIA,EACpB,EACAkB,eAAgB,SAAUlB,GACtB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,GAEb,MAASA,GAAKA,EAAI,GAAK,EACnC,EACAmB,QAAS,SAAUnB,GACf,OAAOA,EAAIA,EAAIA,CACnB,EACAoB,SAAU,SAAUpB,GAChB,QAASA,EAAIA,EAAIA,EAAI,CACzB,EACAqB,WAAY,SAAUrB,GAClB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAAIA,EAElB,KAAQA,GAAK,GAAKA,EAAIA,EAAI,EACrC,EACAsB,UAAW,SAAUtB,GACjB,OAAOA,EAAIA,EAAIA,EAAIA,CACvB,EACAuB,WAAY,SAAUvB,GAClB,OAAO,KAAOA,EAAIA,EAAIA,EAAIA,CAC9B,EACAwB,aAAc,SAAUxB,GACpB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAAIA,EAAIA,GAErB,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,EAC1C,EACAyB,UAAW,SAAUzB,GACjB,OAAOA,EAAIA,EAAIA,EAAIA,EAAIA,CAC3B,EACA0B,WAAY,SAAU1B,GAClB,QAASA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,CACjC,EACA2B,aAAc,SAAU3B,GACpB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAAIA,EAAIA,EAAIA,EAE1B,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,EAC7C,EACA4B,aAAc,SAAU5B,GACpB,OAAO,EAAI6B,KAAKC,IAAI9B,EAAI6B,KAAKE,GAAK,EACtC,EACAC,cAAe,SAAUhC,GACrB,OAAO6B,KAAKI,IAAIjC,EAAI6B,KAAKE,GAAK,EAClC,EACAG,gBAAiB,SAAUlC,GACvB,MAAO,IAAO,EAAI6B,KAAKC,IAAID,KAAKE,GAAK/B,GACzC,EACAmC,cAAe,SAAUnC,GACrB,OAAa,IAANA,EAAU,EAAI6B,KAAKO,IAAI,KAAMpC,EAAI,EAC5C,EACAqC,eAAgB,SAAUrC,GACtB,OAAa,IAANA,EAAU,EAAI,EAAI6B,KAAKO,IAAI,GAAI,GAAKpC,EAC/C,EACAsC,iBAAkB,SAAUtC,GACxB,OAAU,IAANA,EACO,EAED,IAANA,EACO,GAENA,GAAK,GAAK,EACJ,GAAM6B,KAAKO,IAAI,KAAMpC,EAAI,GAE7B,IAAqC,EAA7B6B,KAAKO,IAAI,GAAI,IAAMpC,EAAI,IAC1C,EACAuC,WAAY,SAAUvC,GAClB,OAAO,EAAI6B,KAAKW,KAAK,EAAIxC,EAAIA,EACjC,EACAyC,YAAa,SAAUzC,GACnB,OAAO6B,KAAKW,KAAK,KAAOxC,EAAIA,EAChC,EACA0C,cAAe,SAAU1C,GACrB,OAAKA,GAAK,GAAK,GACH,IAAO6B,KAAKW,KAAK,EAAIxC,EAAIA,GAAK,GAEnC,IAAO6B,KAAKW,KAAK,GAAKxC,GAAK,GAAKA,GAAK,EAChD,EACA2C,UAAW,SAAU3C,GACjB,IAAI4C,EACAC,EAAI,GAER,OAAU,IAAN7C,EACO,EAED,IAANA,EACO,IAEN6C,GAAKA,EAAI,GACVA,EAAI,EACJD,EAAIE,IAGJF,EAZI,GAYIf,KAAKkB,KAAK,EAAIF,IAAM,EAAIhB,KAAKE,KAEhCc,EAAIhB,KAAKO,IAAI,EAAG,IAAMpC,GAAK,IAC9B6B,KAAKI,KAAKjC,EAAI4C,IAAM,EAAIf,KAAKE,IAf3B,IAgBZ,EACAiB,WAAY,SAAUhD,GAClB,IAAI4C,EACAC,EAAI,GAER,OAAU,IAAN7C,EACO,EAED,IAANA,EACO,IAEN6C,GAAKA,EAAI,GACVA,EAAI,EACJD,EAAIE,IAGJF,EAZI,GAYIf,KAAKkB,KAAK,EAAIF,IAAM,EAAIhB,KAAKE,IAEjCc,EAAIhB,KAAKO,IAAI,GAAI,GAAKpC,GACxB6B,KAAKI,KAAKjC,EAAI4C,IAAM,EAAIf,KAAKE,IAf3B,IAesC,EAClD,EACAkB,aAAc,SAAUjD,GACpB,IAAI4C,EACAC,EAAI,GACJC,EAAI,GACR,OAAU,IAAN9C,EACO,EAED,IAANA,EACO,IAEN6C,GAAKA,EAAI,GACVA,EAAI,EACJD,EAAIE,IAGJF,EAAIE,EAAIjB,KAAKkB,KAAK,EAAIF,IAAM,EAAIhB,KAAKE,KAEpC/B,GAAK,GAAK,EACI6C,EAAIhB,KAAKO,IAAI,EAAG,IAAMpC,GAAK,IACpC6B,KAAKI,KAAKjC,EAAI4C,IAAM,EAAIf,KAAKE,IAAMe,IADjC,GAGLD,EAAIhB,KAAKO,IAAI,GAAI,IAAMpC,GAAK,IAC7B6B,KAAKI,KAAKjC,EAAI4C,IAAM,EAAIf,KAAKE,IAAMe,GAAK,GAAM,EACxD,EACAI,OAAQ,SAAUlD,GACd,IAAI4C,EAAI,QACR,OAAO5C,EAAIA,IAAM4C,EAAI,GAAK5C,EAAI4C,EAClC,EACAO,QAAS,SAAUnD,GACf,IAAI4C,EAAI,QACR,QAAS5C,EAAIA,IAAM4C,EAAI,GAAK5C,EAAI4C,GAAK,CACzC,EACAQ,UAAW,SAAUpD,GACjB,IAAI4C,EAAI,UACR,OAAK5C,GAAK,GAAK,EACGA,EAAIA,IAAM4C,EAAI,GAAK5C,EAAI4C,GAA9B,GAEJ,KAAQ5C,GAAK,GAAKA,IAAM4C,EAAI,GAAK5C,EAAI4C,GAAK,EACrD,EACAS,SAAU,SAAUrD,GAChB,OAAO,EAAIc,EAAYwC,UAAU,EAAItD,EACzC,EACAsD,UAAW,SAAUtD,GACjB,OAAIA,EAAK,EAAI,KACF,OAASA,EAAIA,EAEfA,EAAK,EAAI,KACP,QAAUA,GAAM,IAAM,MAASA,EAAI,IAErCA,EAAK,IAAM,KACT,QAAUA,GAAM,KAAO,MAASA,EAAI,MAGpC,QAAUA,GAAM,MAAQ,MAASA,EAAI,OAEpD,EACAuD,YAAa,SAAUvD,GACnB,OAAIA,EAAI,GACiC,GAA9Bc,EAAYuC,SAAa,EAAJrD,GAEU,GAAnCc,EAAYwC,UAAc,EAAJtD,EAAQ,GAAW,EACpD,GAEJ,0BCnIA,EA5DY,WACR,SAASwD,EAAKC,GACVjU,KAAKkU,SAAU,EACflU,KAAKmU,WAAa,EAClBnU,KAAKoU,YAAc,EACnBpU,KAAKqU,SAAU,EACfrU,KAAKsU,MAAQL,EAAKM,MAAQ,IAC1BvU,KAAKwU,OAASP,EAAK/D,OAAS,EAC5BlQ,KAAKqM,KAAO4H,EAAK5H,OAAQ,EACzBrM,KAAKyU,QAAUR,EAAKQ,SAAW,KAC/BzU,KAAK0U,UAAYT,EAAKS,WAAa,KACnC1U,KAAK2U,UAAYV,EAAKU,WAAa,KACnCV,EAAK5E,QAAUrP,KAAK4U,UAAUX,EAAK5E,OACvC,CA6CA,OA5CA2E,EAAK1T,UAAUuU,KAAO,SAAUC,EAAYC,GAKxC,GAJK/U,KAAKkU,UACNlU,KAAKmU,WAAaW,EAAa9U,KAAKwU,OACpCxU,KAAKkU,SAAU,IAEflU,KAAKqU,QAAT,CAIA,IAAIE,EAAOvU,KAAKsU,MACZU,EAAcF,EAAa9U,KAAKmU,WAAanU,KAAKoU,YAClDlF,EAAU8F,EAAcT,EACxBrF,EAAU,IACVA,EAAU,GAEdA,EAAUmD,KAAK4C,IAAI/F,EAAS,GAC5B,IAAIgG,EAAalV,KAAKkV,WAClBC,EAAWD,EAAaA,EAAWhG,GAAWA,EAElD,GADAlP,KAAKyU,QAAQU,GACG,IAAZjG,EAAe,CACf,IAAIlP,KAAKqM,KAOL,OAAO,EANP,IAAI+I,EAAYJ,EAAcT,EAC9BvU,KAAKmU,WAAaW,EAAaM,EAC/BpV,KAAKoU,YAAc,EACnBpU,KAAK2U,WAKb,CACA,OAAO,CAtBP,CAFI3U,KAAKoU,aAAeW,CAyB5B,EACAf,EAAK1T,UAAU+U,MAAQ,WACnBrV,KAAKqU,SAAU,CACnB,EACAL,EAAK1T,UAAUgV,OAAS,WACpBtV,KAAKqU,SAAU,CACnB,EACAL,EAAK1T,UAAUsU,UAAY,SAAUvF,GACjCrP,KAAKqP,OAASA,EACdrP,KAAKkV,YAAa,QAAW7F,GACvBA,EACA,EAAYA,KAAW,OAAsBA,EACvD,EACO2E,CACX,CA3DW,yBCIPuB,EAAa1F,MAAMvP,UAAU+I,MACjC,SAASmM,EAAkBC,EAAIC,EAAIxG,GAC/B,OAAQwG,EAAKD,GAAMvG,EAAUuG,CACjC,CACA,SAASE,EAAmBC,EAAKH,EAAIC,EAAIxG,GAErC,IADA,IAAIpG,EAAM2M,EAAGtP,OACJd,EAAI,EAAGA,EAAIyD,EAAKzD,IACrBuQ,EAAIvQ,GAAKmQ,EAAkBC,EAAGpQ,GAAIqQ,EAAGrQ,GAAI6J,GAE7C,OAAO0G,CACX,CAcA,SAASC,EAAWD,EAAKH,EAAIC,EAAII,GAE7B,IADA,IAAIhN,EAAM2M,EAAGtP,OACJd,EAAI,EAAGA,EAAIyD,EAAKzD,IACrBuQ,EAAIvQ,GAAKoQ,EAAGpQ,GAAKqQ,EAAGrQ,GAAKyQ,EAE7B,OAAOF,CACX,CACA,SAASG,EAAWH,EAAKH,EAAIC,EAAII,GAG7B,IAFA,IAAIhN,EAAM2M,EAAGtP,OACT6P,EAAOlN,GAAO2M,EAAG,GAAGtP,OACfd,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CACrBuQ,EAAIvQ,KACLuQ,EAAIvQ,GAAK,IAEb,IAAK,IAAI4Q,EAAI,EAAGA,EAAID,EAAMC,IACtBL,EAAIvQ,GAAG4Q,GAAKR,EAAGpQ,GAAG4Q,GAAKP,EAAGrQ,GAAG4Q,GAAKH,CAE1C,CACA,OAAOF,CACX,CACA,SAASM,EAAeC,EAAMtF,GAM1B,IALA,IAAIlB,EAAOwG,EAAKhQ,OACZyJ,EAAOiB,EAAK1K,OACZiQ,EAAazG,EAAOC,EAAOiB,EAAOsF,EAClCE,EAAahE,KAAK4C,IAAItF,EAAMC,GAC5B0G,EAAOF,EAAWC,EAAa,IAAM,CAAEE,MAAO,CAAC,EAAG,EAAG,EAAG,GAAI/S,OAAQ,GAC/D6B,EAAIgR,EAAYhR,EAAIgN,KAAKmE,IAAI7G,EAAMC,GAAOvK,IAC/C+Q,EAAW1N,KAAK,CACZlF,OAAQ8S,EAAK9S,OACb+S,MAAOD,EAAKC,MAAMlN,SAG9B,CACA,SAASoN,EAAUN,EAAMtF,EAAM6F,GAC3B,IAAI3F,EAAOoF,EACPnF,EAAOH,EACX,GAAKE,EAAKrI,MAASsI,EAAKtI,KAAxB,CAGA,IAAIiO,EAAU5F,EAAK5K,OACfyQ,EAAU5F,EAAK7K,OACnB,GAAIwQ,IAAYC,EAEZ,GADuBD,EAAUC,EAE7B7F,EAAK5K,OAASyQ,OAGd,IAAK,IAAIvR,EAAIsR,EAAStR,EAAIuR,EAASvR,IAC/B0L,EAAKrI,KAAgB,IAAXgO,EAAe1F,EAAK3L,GAAKkQ,EAAWzF,KAAKkB,EAAK3L,KAIpE,IAAI2Q,EAAOjF,EAAK,IAAMA,EAAK,GAAG5K,OAC9B,IAASd,EAAI,EAAGA,EAAI0L,EAAK5K,OAAQd,IAC7B,GAAe,IAAXqR,EACIG,MAAM9F,EAAK1L,MACX0L,EAAK1L,GAAK2L,EAAK3L,SAInB,IAAK,IAAI4Q,EAAI,EAAGA,EAAID,EAAMC,IAClBY,MAAM9F,EAAK1L,GAAG4Q,MACdlF,EAAK1L,GAAG4Q,GAAKjF,EAAK3L,GAAG4Q,GAxBrC,CA6BJ,CACO,SAASa,EAAWpR,GACvB,IAAI,QAAYA,GAAQ,CACpB,IAAIoD,EAAMpD,EAAMS,OAChB,IAAI,QAAYT,EAAM,IAAK,CAEvB,IADA,IAAIqR,EAAM,GACD1R,EAAI,EAAGA,EAAIyD,EAAKzD,IACrB0R,EAAIrO,KAAK6M,EAAWzF,KAAKpK,EAAML,KAEnC,OAAO0R,CACX,CACA,OAAOxB,EAAWzF,KAAKpK,EAC3B,CACA,OAAOA,CACX,CACA,SAASsR,EAAYC,GAKjB,OAJAA,EAAK,GAAK5E,KAAK6E,MAAMD,EAAK,KAAO,EACjCA,EAAK,GAAK5E,KAAK6E,MAAMD,EAAK,KAAO,EACjCA,EAAK,GAAK5E,KAAK6E,MAAMD,EAAK,KAAO,EACjCA,EAAK,GAAgB,MAAXA,EAAK,GAAa,EAAIA,EAAK,GAC9B,QAAUA,EAAK7N,KAAK,KAAO,GACtC,CAWA,SAAS+N,EAAoBC,GACzB,OAJ6B,IAItBA,GAHsB,IAGoBA,CACrD,CACA,SAASC,EAAiBD,GACtB,OAVsB,IAUfA,GATe,IASoBA,CAC9C,CACA,IAAIE,EAAU,CAAC,EAAG,EAAG,EAAG,GACpBC,EAAS,WACT,SAASA,EAAMC,GACXxX,KAAKyX,UAAY,GACjBzX,KAAK0X,UAAW,EAChB1X,KAAK2X,UAAW,EAChB3X,KAAK4X,YAAa,EAClB5X,KAAK6X,QAAU,EACf7X,KAAK8X,SAAW,EAChB9X,KAAKwX,SAAWA,CACpB,CA4QA,OA3QAD,EAAMjX,UAAUyX,WAAa,WACzB,OAAO/X,KAAKgY,SAChB,EACAT,EAAMjX,UAAU2X,YAAc,WAC1BjY,KAAKgY,WAAY,EACbhY,KAAKkY,gBACLlY,KAAKkY,eAAeD,aAE5B,EACAV,EAAMjX,UAAU6X,aAAe,WAC3B,OAAOnY,KAAKyX,UAAUtR,QAAU,CACpC,EACAoR,EAAMjX,UAAU8X,iBAAmB,WAC/B,OAAOpY,KAAKkY,cAChB,EACAX,EAAMjX,UAAU+X,YAAc,SAAUC,EAAMC,EAAUlJ,GACpDrP,KAAK4X,YAAa,EAClB,IAAIH,EAAYzX,KAAKyX,UACjB3O,EAAM2O,EAAUtR,OAChBuR,GAAW,EACXN,EAtCY,EAuCZ1R,EAAQ6S,EACZ,IAAI,QAAYA,GAAW,CACvB,IAAIC,EAlDhB,SAAuB9S,GACnB,OAAO,QAAYA,GAASA,EAAM,IAAM,EAAI,CAChD,CAgD2B+S,CAAcF,GAC7BnB,EAAUoB,GACO,IAAbA,KAAmB,QAASD,EAAS,KACrB,IAAbC,KAAmB,QAASD,EAAS,GAAG,OAC3Cb,GAAW,EAEnB,MAEI,IAAI,QAASa,MAAc,QAAMA,GAC7BnB,EAxDQ,OA0DP,IAAI,QAASmB,GACd,GAAK1B,OAAO0B,GAGP,CACD,IAAIG,EAAanC,EAAA,GAAYgC,GACzBG,IACAhT,EAAQgT,EACRtB,EA/DD,EAiEP,MARIA,EA5DI,OAsEP,IAAI,QAAiBmB,GAAW,CACjC,IAAII,GAAiB,QAAO,CAAC,EAAGjT,GAChCiT,EAAeC,YAAa,QAAIL,EAASK,YAAY,SAAUC,GAAa,MAAO,CAC/ErV,OAAQqV,EAAUrV,OAClB+S,MAAOA,EAAA,GAAYsC,EAAUtC,OAC7B,KACA,QAAiBgC,GACjBnB,EAzEa,GA2ER,QAAiBmB,KACtBnB,EA3Ea,GA6EjB1R,EAAQiT,CACZ,CAEQ,IAAR7P,EACA9I,KAAKoX,QAAUA,EAEVA,IAAYpX,KAAKoX,SAlFV,IAkFqBA,IACjCM,GAAW,GAEf1X,KAAK0X,SAAW1X,KAAK0X,UAAYA,EACjC,IAAIoB,EAAK,CACLR,KAAMA,EACN5S,MAAOA,EACP6S,SAAUA,EACVrJ,QAAS,GASb,OAPIG,IACAyJ,EAAGzJ,OAASA,EACZyJ,EAAG5D,YAAa,QAAW7F,GACrBA,EACA,EAAYA,KAAW,OAAsBA,IAEvDoI,EAAU/O,KAAKoQ,GACRA,CACX,EACAvB,EAAMjX,UAAUyY,QAAU,SAAUC,EAASC,GACzC,IAAIC,EAAMlZ,KAAKyX,UACXzX,KAAK4X,YACLsB,EAAIC,MAAK,SAAU9F,EAAG+F,GAClB,OAAO/F,EAAEiF,KAAOc,EAAEd,IACtB,IAQJ,IANA,IAAIlB,EAAUpX,KAAKoX,QACfiC,EAASH,EAAI/S,OACbmT,EAASJ,EAAIG,EAAS,GACtBE,EAAavZ,KAAK0X,SAClB8B,EAAQnC,EAAiBD,GACzBqC,EAAatC,EAAoBC,GAC5B/R,EAAI,EAAGA,EAAIgU,EAAQhU,IAAK,CAC7B,IAAIyT,EAAKI,EAAI7T,GACTK,EAAQoT,EAAGpT,MACXgU,EAAYJ,EAAO5T,MACvBoT,EAAG5J,QAAU4J,EAAGR,KAAOU,EAClBO,IACGC,GAASnU,IAAMgU,EAAS,EACxB5C,EAAU/Q,EAAOgU,EAAWtC,GAEvBqC,GACLvD,EAAexQ,EAAMkT,WAAYc,EAAUd,YAGvD,CACA,IAAKW,GAjIoB,IAkIlBnC,GACA6B,GACAjZ,KAAKmY,gBACLc,EAAcd,gBACdf,IAAY6B,EAAc7B,UACzB6B,EAAcjB,UAAW,CAC7BhY,KAAKkY,eAAiBe,EACtB,IAAIU,EAAaT,EAAI,GAAGxT,MACxB,IAASL,EAAI,EAAGA,EAAIgU,EAAQhU,IA/IhB,IAgJJ+R,EACA8B,EAAI7T,GAAGuU,cAAgBV,EAAI7T,GAAGK,MAAQiU,EA9InC,IAgJEvC,EACL8B,EAAI7T,GAAGuU,cACH/D,EAAW,GAAIqD,EAAI7T,GAAGK,MAAOiU,GAAa,GAEzCtC,EAAiBD,KACtB8B,EAAI7T,GAAGuU,cAvJD,IAuJiBxC,EACjBvB,EAAW,GAAIqD,EAAI7T,GAAGK,MAAOiU,GAAa,GAC1C5D,EAAW,GAAImD,EAAI7T,GAAGK,MAAOiU,GAAa,GAG5D,CACJ,EACApC,EAAMjX,UAAUuU,KAAO,SAAU/N,EAAQoI,GACrC,IAAIlP,KAAKgY,UAAT,CAGIhY,KAAKkY,gBAAkBlY,KAAKkY,eAAeF,YAC3ChY,KAAKkY,eAAiB,MAE1B,IAOI2B,EAGAC,EACAC,EAXAC,EAAoC,MAAvBha,KAAKkY,eAClB+B,EAAWD,EAAa,gBAAkB,QAC1C5C,EAAUpX,KAAKoX,QACfK,EAAYzX,KAAKyX,UACjByC,EAASzC,EAAUtR,OACnBqR,EAAWxX,KAAKwX,SAChB2C,EAzKW,IAyKI/C,EAEfgD,EAAYpa,KAAK6X,QACjBwC,EAAUhI,KAAK4C,IAGnB,GAAe,IAAXiF,EACAJ,EAAQC,EAAYtC,EAAU,OAE7B,CACD,GAAIvI,EAAU,EACV2K,EAAW,OAEV,GAAI3K,EAAUlP,KAAK8X,SAAU,CAE9B,IAAK+B,EADOQ,EAAQD,EAAY,EAAGF,EAAS,GACrBL,GAAY,KAC3BpC,EAAUoC,GAAU3K,SAAWA,GADD2K,KAKtCA,EAAWQ,EAAQR,EAAUK,EAAS,EAC1C,KACK,CACD,IAAKL,EAAWO,EAAWP,EAAWK,KAC9BzC,EAAUoC,GAAU3K,QAAUA,GADQ2K,KAK9CA,EAAWQ,EAAQR,EAAW,EAAGK,EAAS,EAC9C,CACAH,EAAYtC,EAAUoC,EAAW,GACjCC,EAAQrC,EAAUoC,EACtB,CACA,GAAMC,GAASC,EAAf,CAGA/Z,KAAK6X,QAAUgC,EACf7Z,KAAK8X,SAAW5I,EAChB,IAAIoL,EAAYP,EAAU7K,QAAU4K,EAAM5K,QACtCqL,EAAiB,IAAbD,EAAiB,EAAID,GAASnL,EAAU4K,EAAM5K,SAAWoL,EAAU,GACvEP,EAAU7E,aACVqF,EAAIR,EAAU7E,WAAWqF,IAE7B,IAAI7K,EAAYsK,EAAaha,KAAKwa,eAC3BL,EAAe7C,EAAUxQ,EAAO0Q,GAIvC,IAHKH,EAAiBD,KAAY+C,GAAkBzK,IAChDA,EAAY1P,KAAKwa,eAAiB,IAElCxa,KAAK0X,SACL5Q,EAAO0Q,GAAY+C,EAAI,EAAIT,EAAMvB,SAAWwB,EAAUxB,cAErD,GAAIlB,EAAiBD,GA9NR,IA+NdA,EACMzB,EAAmBjG,EAAWoK,EAAMG,GAAWF,EAAUE,GAAWM,GA1UtF,SAA4B3E,EAAKH,EAAIC,EAAIxG,GAGrC,IAFA,IAAIpG,EAAM2M,EAAGtP,OACT6P,EAAOlN,GAAO2M,EAAG,GAAGtP,OACfd,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CACrBuQ,EAAIvQ,KACLuQ,EAAIvQ,GAAK,IAEb,IAAK,IAAI4Q,EAAI,EAAGA,EAAID,EAAMC,IACtBL,EAAIvQ,GAAG4Q,GAAKT,EAAkBC,EAAGpQ,GAAG4Q,GAAIP,EAAGrQ,GAAG4Q,GAAI/G,EAE1D,CAEJ,CA+TkBuL,CAAmB/K,EAAWoK,EAAMG,GAAWF,EAAUE,GAAWM,QAEzE,GAAIpD,EAAoBC,GAAU,CACnC,IAAI7I,EAAMuL,EAAMG,GACZS,EAAYX,EAAUE,GACtBU,EAnOiB,IAmOIvD,EACzBtQ,EAAO0Q,GAAY,CACfjK,KAAMoN,EAAqB,SAAW,SACtCjY,EAAG8S,EAAkBjH,EAAI7L,EAAGgY,EAAUhY,EAAG6X,GACzC5X,EAAG6S,EAAkBjH,EAAI5L,EAAG+X,EAAU/X,EAAG4X,GACzC3B,YAAY,QAAIrK,EAAIqK,YAAY,SAAUC,EAAWrP,GACjD,IAAIoR,EAAgBF,EAAU9B,WAAWpP,GACzC,MAAO,CACHhG,OAAQgS,EAAkBqD,EAAUrV,OAAQoX,EAAcpX,OAAQ+W,GAClEhE,MAAOS,EAAYrB,EAAmB,GAAIkD,EAAUtC,MAAOqE,EAAcrE,MAAOgE,IAExF,IACAM,OAAQH,EAAUG,QAElBF,GACA7T,EAAO0Q,GAAUsD,GAAKtF,EAAkBjH,EAAIuM,GAAIJ,EAAUI,GAAIP,GAC9DzT,EAAO0Q,GAAUuD,GAAKvF,EAAkBjH,EAAIwM,GAAIL,EAAUK,GAAIR,IAG9DzT,EAAO0Q,GAAUwD,EAAIxF,EAAkBjH,EAAIyM,EAAGN,EAAUM,EAAGT,EAEnE,MACK,GAAIJ,EACLxE,EAAmBjG,EAAWoK,EAAMG,GAAWF,EAAUE,GAAWM,GAC/DP,IACDlT,EAAO0Q,GAAYR,EAAYtH,QAGlC,CACD,IAAIhK,EAAQ8P,EAAkBsE,EAAMG,GAAWF,EAAUE,GAAWM,GAChEP,EACAha,KAAKwa,eAAiB9U,EAGtBoB,EAAO0Q,GAAY9R,CAE3B,CACIsU,GACAha,KAAKib,aAAanU,EA9DtB,CA7CA,CA6GJ,EACAyQ,EAAMjX,UAAU2a,aAAe,SAAUnU,GACrC,IAAIsQ,EAAUpX,KAAKoX,QACfI,EAAWxX,KAAKwX,SAChBoC,EAAgB5Z,KAAKwa,eAnRT,IAoRZpD,EACAtQ,EAAO0Q,GAAY1Q,EAAO0Q,GAAYoC,EAlR3B,IAoRNxC,GACLb,EAAA,GAAYzP,EAAO0Q,GAAWF,GAC9BzB,EAAWyB,EAASA,EAASsC,EAAe,GAC5C9S,EAAO0Q,GAAYR,EAAYM,IAzRjB,IA2RTF,EACLvB,EAAW/O,EAAO0Q,GAAW1Q,EAAO0Q,GAAWoC,EAAe,GA3RhD,IA6RTxC,GACLrB,EAAWjP,EAAO0Q,GAAW1Q,EAAO0Q,GAAWoC,EAAe,EAEtE,EACOrC,CACX,CAtRY,GAulBZ,EAhUgB,WACZ,SAAS2D,EAASpU,EAAQuF,EAAMC,EAAwB6O,GACpDnb,KAAKob,QAAU,CAAC,EAChBpb,KAAKqb,WAAa,GAClBrb,KAAKsb,SAAW,EAChBtb,KAAKub,SAAW,EAChBvb,KAAKwb,MAAQ,KACbxb,KAAKyb,QAAU3U,EACf9G,KAAK0b,MAAQrP,EACTA,GAAQ8O,GACR,OAAS,qDAGbnb,KAAK2b,mBAAqBR,EAC1Bnb,KAAK4b,eAAiBtP,EAC1B,CA+SA,OA9SA4O,EAAS5a,UAAUub,WAAa,WAC5B,OAAO7b,KAAKsb,QAChB,EACAJ,EAAS5a,UAAUwb,SAAW,WAC1B,OAAO9b,KAAKwU,MAChB,EACA0G,EAAS5a,UAAUsG,QAAU,WACzB,OAAO5G,KAAK0b,KAChB,EACAR,EAAS5a,UAAUyb,UAAY,WAC3B,OAAO/b,KAAKyb,OAChB,EACAP,EAAS5a,UAAUgJ,aAAe,SAAUxC,GACxC9G,KAAKyb,QAAU3U,CACnB,EACAoU,EAAS5a,UAAU0b,KAAO,SAAU1D,EAAMvY,EAAOsP,GAC7C,OAAOrP,KAAKqR,aAAaiH,EAAMvY,GAAO,QAAKA,GAAQsP,EACvD,EACA6L,EAAS5a,UAAU+Q,aAAe,SAAUiH,EAAMvY,EAAOkc,EAAW5M,GAEhE,IADA,IAAI6M,EAASlc,KAAKob,QACT/V,EAAI,EAAGA,EAAI4W,EAAU9V,OAAQd,IAAK,CACvC,IAAImS,EAAWyE,EAAU5W,GACrB8W,EAAQD,EAAO1E,GACnB,IAAK2E,EAAO,CACRA,EAAQD,EAAO1E,GAAY,IAAID,EAAMC,GACrC,IAAI4E,OAAe,EACfnD,EAAgBjZ,KAAKqc,kBAAkB7E,GAC3C,GAAIyB,EAAe,CACf,IAAIqD,EAAkBrD,EAAcxB,UAChC8E,EAAcD,EAAgBA,EAAgBnW,OAAS,GAC3DiW,EAAeG,GAAeA,EAAY7W,MAhVvC,IAiVCuT,EAAc7B,SAAgCgF,IAC9CA,EAAepF,EAAYoF,GAEnC,MAEIA,EAAepc,KAAKyb,QAAQjE,GAEhC,GAAoB,MAAhB4E,EACA,SAEA9D,EAAO,GACP6D,EAAM9D,YAAY,EAAGvB,EAAWsF,GAAe/M,GAEnDrP,KAAKqb,WAAW3S,KAAK8O,EACzB,CACA2E,EAAM9D,YAAYC,EAAMxB,EAAW/W,EAAMyX,IAAYnI,EACzD,CAEA,OADArP,KAAKsb,SAAWjJ,KAAKmE,IAAIxW,KAAKsb,SAAUhD,GACjCtY,IACX,EACAkb,EAAS5a,UAAU+U,MAAQ,WACvBrV,KAAKwb,MAAMnG,QACXrV,KAAKqU,SAAU,CACnB,EACA6G,EAAS5a,UAAUgV,OAAS,WACxBtV,KAAKwb,MAAMlG,SACXtV,KAAKqU,SAAU,CACnB,EACA6G,EAAS5a,UAAUkc,SAAW,WAC1B,QAASxc,KAAKqU,OAClB,EACA6G,EAAS5a,UAAUgI,SAAW,SAAUA,GAGpC,OAFAtI,KAAKsb,SAAWhT,EAChBtI,KAAKyc,QAAS,EACPzc,IACX,EACAkb,EAAS5a,UAAUoc,cAAgB,WAC/B1c,KAAK2c,qBACL3c,KAAKwb,MAAQ,KACb,IAAIoB,EAAW5c,KAAK6c,SACpB,GAAID,EAEA,IADA,IAAI9T,EAAM8T,EAASzW,OACVd,EAAI,EAAGA,EAAIyD,EAAKzD,IACrBuX,EAASvX,GAAGyK,KAAK9P,KAG7B,EACAkb,EAAS5a,UAAUwc,iBAAmB,WAClC9c,KAAK2c,qBACL,IAAI1Q,EAAYjM,KAAKiM,UACjB8Q,EAAc/c,KAAKgd,YAKvB,GAJI/Q,GACAA,EAAUgR,WAAWjd,KAAKwb,OAE9Bxb,KAAKwb,MAAQ,KACTuB,EACA,IAAK,IAAI1X,EAAI,EAAGA,EAAI0X,EAAY5W,OAAQd,IACpC0X,EAAY1X,GAAGyK,KAAK9P,KAGhC,EACAkb,EAAS5a,UAAUqc,mBAAqB,WAGpC,IAFA,IAAIT,EAASlc,KAAKob,QACd8B,EAAald,KAAKqb,WACbhW,EAAI,EAAGA,EAAI6X,EAAW/W,OAAQd,IACnC6W,EAAOgB,EAAW7X,IAAI4S,aAE9B,EACAiD,EAAS5a,UAAU+b,kBAAoB,SAAUc,GAC7C,IAAIlE,EACAmE,EAAoBpd,KAAK2b,mBAC7B,GAAIyB,EACA,IAAK,IAAI/X,EAAI,EAAGA,EAAI+X,EAAkBjX,OAAQd,IAAK,CAC/C,IAAI8W,EAAQiB,EAAkB/X,GAAGgY,SAASF,GACtChB,IACAlD,EAAgBkD,EAExB,CAEJ,OAAOlD,CACX,EACAiC,EAAS5a,UAAU8O,MAAQ,SAAUC,GACjC,KAAIrP,KAAKub,SAAW,GAApB,CAGAvb,KAAKub,SAAW,EAIhB,IAHA,IAAItN,EAAOjO,KACPkc,EAAS,GACTlD,EAAUhZ,KAAKsb,UAAY,EACtBjW,EAAI,EAAGA,EAAIrF,KAAKqb,WAAWlV,OAAQd,IAAK,CAC7C,IAAImS,EAAWxX,KAAKqb,WAAWhW,GAC3B8W,EAAQnc,KAAKob,QAAQ5D,GACrByB,EAAgBjZ,KAAKqc,kBAAkB7E,GACvC0B,EAAMiD,EAAM1E,UACZyC,EAAShB,EAAI/S,OAEjB,GADAgW,EAAMpD,QAAQC,EAASC,GACnBkD,EAAMhE,eACN,IAAKnY,KAAK4b,gBAAkBO,EAAMzE,SAAU,CACxC,IAAI4B,EAASJ,EAAIgB,EAAS,GACtBZ,IACArL,EAAKwN,QAAQU,EAAM3E,UAAY8B,EAAOf,UAE1C4D,EAAMlE,aACV,MAEIiE,EAAOxT,KAAKyT,EAGxB,CACA,GAAID,EAAO/V,QAAUnG,KAAKyc,OAAQ,CAC9B,IAAIa,EAAO,IAAI,EAAK,CAChB/I,KAAMyE,EACN3M,KAAMrM,KAAK0b,MACXxL,MAAOlQ,KAAKwU,QAAU,EACtBC,QAAS,SAAUvF,GACfjB,EAAKsN,SAAW,EAChB,IAAI6B,EAAoBnP,EAAK0N,mBAC7B,GAAIyB,EAAmB,CAEnB,IADA,IAAIG,GAA2B,EACtBlY,EAAI,EAAGA,EAAI+X,EAAkBjX,OAAQd,IAC1C,GAAI+X,EAAkB/X,GAAGmW,MAAO,CAC5B+B,GAA2B,EAC3B,KACJ,CAECA,IACDtP,EAAK0N,mBAAqB,KAElC,CACA,IAAStW,EAAI,EAAGA,EAAI6W,EAAO/V,OAAQd,IAC/B6W,EAAO7W,GAAGwP,KAAK5G,EAAKwN,QAASvM,GAEjC,IAAIsO,EAAcvP,EAAKwP,YACvB,GAAID,EACA,IAASnY,EAAI,EAAGA,EAAImY,EAAYrX,OAAQd,IACpCmY,EAAYnY,GAAG4I,EAAKwN,QAASvM,EAGzC,EACAwF,UAAW,WACPzG,EAAKyO,eACT,IAEJ1c,KAAKwb,MAAQ8B,EACTtd,KAAKiM,WACLjM,KAAKiM,UAAUyR,QAAQJ,GAEvBjO,GACAiO,EAAK1I,UAAUvF,EAEvB,MAEIrP,KAAK0c,gBAET,OAAO1c,IAtEP,CAuEJ,EACAkb,EAAS5a,UAAU0M,KAAO,SAAUF,GAChC,GAAK9M,KAAKwb,MAAV,CAGA,IAAI8B,EAAOtd,KAAKwb,MACZ1O,GACAwQ,EAAK7I,QAAQ,GAEjBzU,KAAK8c,kBALL,CAMJ,EACA5B,EAAS5a,UAAU4P,MAAQ,SAAUoI,GAEjC,OADAtY,KAAKwU,OAAS8D,EACPtY,IACX,EACAkb,EAAS5a,UAAUkM,OAAS,SAAUjH,GAOlC,OANIA,IACKvF,KAAKyd,cACNzd,KAAKyd,YAAc,IAEvBzd,KAAKyd,YAAY/U,KAAKnD,IAEnBvF,IACX,EACAkb,EAAS5a,UAAUoM,KAAO,SAAUnH,GAOhC,OANIA,IACKvF,KAAK6c,WACN7c,KAAK6c,SAAW,IAEpB7c,KAAK6c,SAASnU,KAAKnD,IAEhBvF,IACX,EACAkb,EAAS5a,UAAUyO,QAAU,SAAUxJ,GAOnC,OANIA,IACKvF,KAAKgd,cACNhd,KAAKgd,YAAc,IAEvBhd,KAAKgd,YAAYtU,KAAKnD,IAEnBvF,IACX,EACAkb,EAAS5a,UAAUqd,QAAU,WACzB,OAAO3d,KAAKwb,KAChB,EACAN,EAAS5a,UAAU+c,SAAW,SAAU7F,GACpC,OAAOxX,KAAKob,QAAQ5D,EACxB,EACA0D,EAAS5a,UAAUsd,UAAY,WAC3B,IAAIC,EAAQ7d,KACZ,OAAO,QAAIA,KAAKqb,YAAY,SAAU3b,GAAO,OAAOme,EAAMzC,QAAQ1b,EAAM,GAC5E,EACAwb,EAAS5a,UAAUsQ,WAAa,SAAUqL,EAAWnP,GACjD,IAAKmP,EAAU9V,SAAWnG,KAAKwb,MAC3B,OAAO,EAIX,IAFA,IAAIU,EAASlc,KAAKob,QACd8B,EAAald,KAAKqb,WACbhW,EAAI,EAAGA,EAAI4W,EAAU9V,OAAQd,IAAK,CACvC,IAAI8W,EAAQD,EAAOD,EAAU5W,IACzB8W,IAAUA,EAAMpE,eACZjL,EACAqP,EAAMtH,KAAK7U,KAAKyb,QAAS,GAEF,IAAlBzb,KAAKub,UACVY,EAAMtH,KAAK7U,KAAKyb,QAAS,GAE7BU,EAAMlE,cAEd,CACA,IAAI6F,GAAa,EACjB,IAASzY,EAAI,EAAGA,EAAI6X,EAAW/W,OAAQd,IACnC,IAAK6W,EAAOgB,EAAW7X,IAAI0S,aAAc,CACrC+F,GAAa,EACb,KACJ,CAKJ,OAHIA,GACA9d,KAAK8c,mBAEFgB,CACX,EACA5C,EAAS5a,UAAUyG,OAAS,SAAUD,EAAQiX,EAAWC,GACrD,GAAKlX,EAAL,CAGAiX,EAAYA,GAAa/d,KAAKqb,WAC9B,IAAK,IAAIhW,EAAI,EAAGA,EAAI0Y,EAAU5X,OAAQd,IAAK,CACvC,IAAImS,EAAWuG,EAAU1Y,GACrB8W,EAAQnc,KAAKob,QAAQ5D,GACzB,GAAK2E,IAASA,EAAMpE,aAApB,CAGA,IAAImB,EAAMiD,EAAM1E,UACZqB,EAAKI,EAAI8E,EAAc,EAAI9E,EAAI/S,OAAS,GACxC2S,IACAhS,EAAO0Q,GAAYV,EAAWgC,EAAGP,UAJrC,CAMJ,CAbA,CAcJ,EACA2C,EAAS5a,UAAUiK,mBAAqB,SAAU0T,EAAYF,GAC1DA,EAAYA,IAAa,QAAKE,GAC9B,IAAK,IAAI5Y,EAAI,EAAGA,EAAI0Y,EAAU5X,OAAQd,IAAK,CACvC,IAAImS,EAAWuG,EAAU1Y,GACrB8W,EAAQnc,KAAKob,QAAQ5D,GACzB,GAAK2E,EAAL,CAGA,IAAIjD,EAAMiD,EAAM1E,UAChB,GAAIyB,EAAI/S,OAAS,EAAG,CAChB,IAAImT,EAASJ,EAAIgF,MACjB/B,EAAM9D,YAAYiB,EAAOhB,KAAM2F,EAAWzG,IAC1C2E,EAAMpD,QAAQ/Y,KAAKsb,SAAUa,EAAM/D,mBACvC,CANA,CAOJ,CACJ,EACO8C,CACX,CA/Te,oFC9ZXiD,EAAS,gCACN,SAASC,EAAsBC,GAClC,IAAIC,EAAQD,GAAkBF,EAAOI,KAAKF,GAC1C,GAAIC,EAAO,CACP,IAAIE,EAASF,EAAM,GAAGG,MAAM,KACxBC,IAAO,QAAKF,EAAO,IACnBG,IAAO,QAAKH,EAAO,IACnBI,IAAO,QAAKJ,EAAO,IACnBK,IAAO,QAAKL,EAAO,IACvB,GAAI3H,MAAM6H,EAAMC,EAAMC,EAAMC,GACxB,OAEJ,IAAIC,EAAU,GACd,OAAO,SAAUxL,GACb,OAAOA,GAAK,EACN,EAAIA,GAAK,EACT,GACA,QAAY,EAAGoL,EAAKE,EAAK,EAAGtL,EAAGwL,KAAY,QAAQ,EAAGH,EAAKE,EAAK,EAAGC,EAAQ,GACrF,CACJ,CACJ,6BCrBIC,EACJA,WAAyB,EAAIC,kBACpBC,OAAOF,uBAAyBE,OAAOF,sBAAsBG,KAAKD,SAC/DA,OAAOE,yBAA2BF,OAAOE,wBAAwBD,KAAKD,SACvEA,OAAOG,0BACPH,OAAOI,8BAAiC,SAAUC,GACzD,OAAOC,WAAWD,EAAM,GAC5B,EACA,iKCAA,SAASE,EAAUvf,EAAIwf,EAASC,GAC5B,IAAIC,EAASC,EAAA,GAAYC,eACrB1c,EAAQsc,EAAQK,WAChB1c,EAASqc,EAAQM,YACjBC,EAAcL,EAAOM,MAWzB,OAVID,IACAA,EAAY5d,SAAW,WACvB4d,EAAYE,KAAO,IACnBF,EAAYG,IAAM,IAClBH,EAAY7c,MAAQA,EAAQ,KAC5B6c,EAAY5c,OAASA,EAAS,KAC9Buc,EAAOS,aAAa,iBAAkBngB,IAE1C0f,EAAOxc,MAAQA,EAAQuc,EACvBC,EAAOvc,OAASA,EAASsc,EAClBC,CACX,CAEA,IA6QA,EA7Qa,SAAUU,GAEnB,SAASC,EAAMrgB,EAAIwf,EAASC,GACxB,IAiBIa,EAjBA1C,EAAQwC,EAAOvQ,KAAK9P,OAASA,KACjC6d,EAAM2C,YAAa,EACnB3C,EAAM4C,eAAiB,GACvB5C,EAAM6B,IAAM,EACZ7B,EAAM6C,SAAU,EAChB7C,EAAM8C,OAAS,CAAC,EAChB9C,EAAM+C,aAAc,EACpB/C,EAAMgD,OAAS,EACfhD,EAAMiD,oBAAsB,EAC5BjD,EAAMxc,SAAU,EAChBwc,EAAMkD,kBAAmB,EACzBlD,EAAMmD,QAAS,EACfnD,EAAMoD,YAAc,EACpBpD,EAAMqD,aAAe,EACrBrD,EAAMsD,WAAa,EACnBtD,EAAMuD,iBAAmB,KACzBvD,EAAMwD,eAAiB,KAEvB3B,EAAMA,GAAO,KACK,iBAAPzf,EACPsgB,EAAMf,EAAUvf,EAAIwf,EAASC,GAExB4B,EAAA,GAAcrhB,KAEnBA,GADAsgB,EAAMtgB,GACGA,IAEb4d,EAAM5d,GAAKA,EACX4d,EAAM0C,IAAMA,EACZ,IAAIgB,EAAWhB,EAAIN,MAUnB,OATIsB,IACAD,EAAA,GAAuBf,GACvBA,EAAIiB,cAAgB,WAAc,OAAO,CAAO,EAChDD,EAASE,QAAU,IACnBF,EAASG,OAAS,IAClBH,EAASI,YAAc,KAE3B9D,EAAM4B,QAAUA,EAChB5B,EAAM6B,IAAMA,EACL7B,CACX,CAiOA,OA1QA,QAAUyC,EAAOD,GA0CjBC,EAAMhgB,UAAUshB,gBAAkB,WAC9B,OAAO5hB,KAAKmhB,WAAanhB,KAAKkhB,YAClC,EACAZ,EAAMhgB,UAAUuhB,WAAa,WACzB7hB,KAAKohB,iBAAmBphB,KAAKkhB,aAC7BlhB,KAAKqhB,eAAiBrhB,KAAKmhB,UAC/B,EACAb,EAAMhgB,UAAUwhB,YAAc,WAC1B9hB,KAAK+hB,IAAM/hB,KAAKugB,IAAIyB,WAAW,MAC/BhiB,KAAK+hB,IAAIrC,IAAM1f,KAAK0f,GACxB,EACAY,EAAMhgB,UAAU2hB,aAAe,WAC3BjiB,KAAK+gB,kBAAmB,CAC5B,EACAT,EAAMhgB,UAAU4hB,iBAAmB,WAC/B,IAAIxC,EAAM1f,KAAK0f,IACf1f,KAAKmiB,QAAU3C,EAAU,QAAUxf,KAAKC,GAAID,KAAKyf,QAASC,GAC1D1f,KAAKoiB,QAAUpiB,KAAKmiB,QAAQH,WAAW,MAC3B,IAARtC,GACA1f,KAAKoiB,QAAQC,MAAM3C,EAAKA,EAEhC,EACAY,EAAMhgB,UAAUgiB,mBAAqB,SAAUC,EAAaC,EAAUC,EAAWC,GAC7E,GAAI1iB,KAAK+gB,iBAEL,OADA/gB,KAAK+gB,kBAAmB,EACjB,KAEX,IAkFI4B,EAlFAC,EAAqB,GACrB9B,EAAsB9gB,KAAK8gB,oBAC3B+B,GAAO,EACPC,EAAc,IAAIC,EAAA,EAAa,EAAG,EAAG,EAAG,GAC5C,SAASC,EAAmBC,GACxB,GAAKA,EAAKC,aAAcD,EAAKE,SAG7B,GAAkC,IAA9BP,EAAmBzc,OAAc,EAC7Bid,EAAe,IAAIL,EAAA,EAAa,EAAG,EAAG,EAAG,IAChCzgB,KAAK2gB,GAClBL,EAAmBla,KAAK0a,EAC5B,KACK,CAID,IAHA,IA+BQA,EA/BJC,GAAW,EACXC,EAAeC,IACfC,EAAqB,EAChBne,EAAI,EAAGA,EAAIud,EAAmBzc,SAAUd,EAAG,CAChD,IAAIoe,EAAab,EAAmBvd,GACpC,GAAIoe,EAAWC,UAAUT,GAAO,CAC5B,IAAIU,EAAgB,IAAIZ,EAAA,EAAa,EAAG,EAAG,EAAG,GAC9CY,EAAcrhB,KAAKmhB,GACnBE,EAAcC,MAAMX,GACpBL,EAAmBvd,GAAKse,EACxBN,GAAW,EACX,KACJ,CACK,GAAIR,EAAM,CACXC,EAAYxgB,KAAK2gB,GACjBH,EAAYc,MAAMH,GAClB,IAAII,EAAQZ,EAAK9f,MAAQ8f,EAAK7f,OAC1B0gB,EAAQL,EAAWtgB,MAAQsgB,EAAWrgB,OAEtC2gB,EADcjB,EAAY3f,MAAQ2f,EAAY1f,OACpBygB,EAAQC,EAClCC,EAAYT,IACZA,EAAeS,EACfP,EAAqBne,EAE7B,CACJ,CAKA,GAJIwd,IACAD,EAAmBY,GAAoBI,MAAMX,GAC7CI,GAAW,IAEVA,GACGD,EAAe,IAAIL,EAAA,EAAa,EAAG,EAAG,EAAG,IAChCzgB,KAAK2gB,GAClBL,EAAmBla,KAAK0a,GAEvBP,IACDA,EAAOD,EAAmBzc,QAAU2a,EAE5C,CACJ,CACA,IAAK,IAAIzb,EAAIrF,KAAKkhB,aAAc7b,EAAIrF,KAAKmhB,aAAc9b,EAAG,CAEtD,GADIkH,EAAKgW,EAAYld,GACb,CACJ,IAAI2e,EAAczX,EAAG0X,gBAAgBxB,EAAWC,GAAY,GAAM,IAC9DwB,EAAW3X,EAAG4X,eAAkB5X,EAAGlL,QAAU,OAAgB2iB,GAC3DzX,EAAG6X,mBACH,OAEFpB,EAAmBkB,GAEvB,IAAIG,EAAUL,IAAiBzX,EAAGlL,QAAU,OAAgBkL,EAAG4X,cACzD5X,EAAGa,eACH,KACFiX,GACArB,EAAmBqB,EAE3B,CACJ,CACA,IAAShf,EAAIrF,KAAKohB,iBAAkB/b,EAAIrF,KAAKqhB,iBAAkBhc,EAAG,CAC9D,IAAIkH,EAGI2X,EAFJF,GADAzX,EAAKiW,EAASnd,IACG4e,gBAAgBxB,EAAWC,GAAY,GAAM,GAClE,GAAInW,KAAQyX,IAAgBzX,EAAGzH,OAASyH,EAAG4X,cACnCD,EAAW3X,EAAG6X,qBAEdpB,EAAmBkB,EAG/B,CAEA,EAAG,CACCvB,GAAmB,EACnB,IAAStd,EAAI,EAAGA,EAAIud,EAAmBzc,QACnC,GAAIyc,EAAmBvd,GAAG8d,SACtBP,EAAmBnZ,OAAOpE,EAAG,OADjC,CAIA,IAAK,IAAI4Q,EAAI5Q,EAAI,EAAG4Q,EAAI2M,EAAmBzc,QACnCyc,EAAmBvd,GAAGqe,UAAUd,EAAmB3M,KACnD0M,GAAmB,EACnBC,EAAmBvd,GAAGue,MAAMhB,EAAmB3M,IAC/C2M,EAAmBnZ,OAAOwM,EAAG,IAG7BA,IAGR5Q,GAXA,CAaR,OAASsd,GAET,OADA3iB,KAAKskB,YAAc1B,EACZA,CACX,EACAtC,EAAMhgB,UAAUikB,mBAAqB,WACjC,OAAQvkB,KAAKskB,aAAe,IAAIjb,OACpC,EACAiX,EAAMhgB,UAAUkkB,OAAS,SAAUrhB,EAAOC,GACtC,IAAIsc,EAAM1f,KAAK0f,IACXa,EAAMvgB,KAAKugB,IACXgB,EAAWhB,EAAIN,MACfkC,EAAUniB,KAAKmiB,QACfZ,IACAA,EAASpe,MAAQA,EAAQ,KACzBoe,EAASne,OAASA,EAAS,MAE/Bmd,EAAIpd,MAAQA,EAAQuc,EACpBa,EAAInd,OAASA,EAASsc,EAClByC,IACAA,EAAQhf,MAAQA,EAAQuc,EACxByC,EAAQ/e,OAASA,EAASsc,EACd,IAARA,GACA1f,KAAKoiB,QAAQC,MAAM3C,EAAKA,GAGpC,EACAY,EAAMhgB,UAAUmkB,MAAQ,SAAUC,EAAUC,EAAYC,GACpD,IAAIrE,EAAMvgB,KAAKugB,IACXwB,EAAM/hB,KAAK+hB,IACX5e,EAAQod,EAAIpd,MACZC,EAASmd,EAAInd,OACjBuhB,EAAaA,GAAc3kB,KAAK2kB,WAChC,IAAIE,EAAiB7kB,KAAKwgB,aAAekE,EACrCjE,EAAiBzgB,KAAKygB,eACtBf,EAAM1f,KAAK0f,IACXzR,EAAOjO,KACP6kB,IACK7kB,KAAKmiB,SACNniB,KAAKkiB,mBAETliB,KAAKoiB,QAAQ0C,yBAA2B,OACxC9kB,KAAKoiB,QAAQ2C,UAAUxE,EAAK,EAAG,EAAGpd,EAAQuc,EAAKtc,EAASsc,IAE5D,IAAIyC,EAAUniB,KAAKmiB,QACnB,SAAS6C,EAAQtiB,EAAGC,EAAGQ,EAAOC,GAE1B,GADA2e,EAAIkD,UAAUviB,EAAGC,EAAGQ,EAAOC,GACvBuhB,GAA6B,gBAAfA,EAA8B,CAC5C,IAAIO,OAA8B,EAClC,GAAI5D,EAAA,GAAsBqD,GAGtBO,GAFkBP,EAAW9J,QAAW8J,EAAWQ,UAAYhiB,GACxDwhB,EAAWS,WAAahiB,IAExBuhB,EAAWU,mBACX,QAAkBtD,EAAK4C,EAAY,CAClCjiB,EAAG,EACHC,EAAG,EACHQ,MAAOA,EACPC,OAAQA,IAEhBuhB,EAAWU,iBAAmBH,EAC9BP,EAAWQ,QAAUhiB,EACrBwhB,EAAWS,SAAWhiB,OAEjBke,EAAA,GAA0BqD,KAC/BA,EAAWW,OAASX,EAAWW,QAAU5F,EACzCiF,EAAWY,OAASZ,EAAWY,QAAU7F,EACzCwF,GAA8B,QAAoBnD,EAAK4C,EAAY,CAC/D5Y,MAAO,WACHkC,EAAKgU,eACLhU,EAAKuX,UAAU1Z,SACnB,KAGRiW,EAAI0D,OACJ1D,EAAI2D,UAAYR,GAA+BP,EAC/C5C,EAAI4D,SAASjjB,EAAGC,EAAGQ,EAAOC,GAC1B2e,EAAI6D,SACR,CACIf,IACA9C,EAAI0D,OACJ1D,EAAI8D,YAAcpF,EAClBsB,EAAIgD,UAAU5C,EAASzf,EAAGC,EAAGQ,EAAOC,GACpC2e,EAAI6D,UAEZ,EAEKhB,GAAgBC,EACjBG,EAAQ,EAAG,EAAG7hB,EAAOC,GAEhBwhB,EAAaze,QAClBmb,EAAA,GAAUsD,GAAc,SAAU3B,GAC9B+B,EAAQ/B,EAAKvgB,EAAIgd,EAAKuD,EAAKtgB,EAAI+c,EAAKuD,EAAK9f,MAAQuc,EAAKuD,EAAK7f,OAASsc,EACxE,GAER,EACOY,CACX,CA5QY,CA4QVwF,EAAA,yBC/REC,EAAqB,IACrBC,EAAgB,OAChBC,EAA2B,IA2B/B,IAAIC,EAAiB,WACjB,SAASA,EAAcC,EAAMC,EAASnS,EAAMhU,GACxCD,KAAKuN,KAAO,SACZvN,KAAKqmB,YAAc,GACnBrmB,KAAKsmB,iBAAmB,GACxBtmB,KAAKumB,QAAU,CAAC,EAChBvmB,KAAKwmB,aAAe,CAAC,EACrBxmB,KAAKymB,2BAA4B,EACjCzmB,KAAKuN,KAAO,SACZ,IAAImZ,GAAgBP,EAAKQ,UACc,WAAhCR,EAAKQ,SAASC,cACrB5mB,KAAK6mB,MAAQ5S,EAAOqN,EAAA,GAAY,CAAC,EAAGrN,GAAQ,CAAC,GAC7CjU,KAAK0f,IAAMzL,EAAK6S,kBAAoB,KACpC9mB,KAAK+mB,cAAgBL,EACrB1mB,KAAKmmB,KAAOA,EACIA,EAAKlG,QAEjBqB,EAAA,GAAuB6E,GACvBA,EAAKa,UAAY,IAErBhnB,KAAKomB,QAAUA,EACf,IAAIa,EAAajnB,KAAKqmB,YACtBrmB,KAAKsmB,iBAAmB,GACxB,IAAIY,EAASlnB,KAAKumB,QAClB,GAAKG,EAMA,CACD,IAAIS,EAAahB,EACbhjB,EAAQgkB,EAAWhkB,MACnBC,EAAS+jB,EAAW/jB,OACN,MAAd6Q,EAAK9Q,QACLA,EAAQ8Q,EAAK9Q,OAEE,MAAf8Q,EAAK7Q,SACLA,EAAS6Q,EAAK7Q,QAElBpD,KAAK0f,IAAMzL,EAAK6S,kBAAoB,EACpCK,EAAWhkB,MAAQA,EAAQnD,KAAK0f,IAChCyH,EAAW/jB,OAASA,EAASpD,KAAK0f,IAClC1f,KAAKonB,OAASjkB,EACdnD,KAAKqnB,QAAUjkB,EACf,IAAIkkB,EAAY,IAAI,EAAMH,EAAYnnB,KAAMA,KAAK0f,KACjD4H,EAAUC,aAAc,EACxBD,EAAUxF,cACVoF,EAAOlB,QAAiBsB,EACxBA,EAAUzG,OAASmF,EACnBiB,EAAWve,KAAKsd,GAChBhmB,KAAKwnB,SAAWrB,CACpB,KA5BmB,CACfnmB,KAAKonB,QAAS,QAAQjB,EAAM,EAAGlS,GAC/BjU,KAAKqnB,SAAU,QAAQlB,EAAM,EAAGlS,GAChC,IAAIwT,EAAUznB,KAAKwnB,SAvC/B,SAAoBrkB,EAAOC,GACvB,IAAIqkB,EAAUC,SAASC,cAAc,OASrC,OARAF,EAAQxH,MAAM2H,QAAU,CACpB,oBACA,SAAWzkB,EAAQ,KACnB,UAAYC,EAAS,KACrB,YACA,WACA,kBACFgG,KAAK,KAAO,IACPqe,CACX,CA4B0CI,CAAW7nB,KAAKonB,OAAQpnB,KAAKqnB,SAC3DlB,EAAK2B,YAAYL,EACrB,CAwBJ,CAmiBA,OAliBAvB,EAAc5lB,UAAUynB,QAAU,WAC9B,MAAO,QACX,EACA7B,EAAc5lB,UAAU0nB,eAAiB,WACrC,OAAOhoB,KAAK+mB,aAChB,EACAb,EAAc5lB,UAAU2nB,gBAAkB,WACtC,OAAOjoB,KAAKwnB,QAChB,EACAtB,EAAc5lB,UAAU4nB,sBAAwB,WAC5C,IAAIC,EAAenoB,KAAKioB,kBACxB,GAAIE,EACA,MAAO,CACHC,WAAYD,EAAaC,YAAc,EACvCC,UAAWF,EAAaE,WAAa,EAGjD,EACAnC,EAAc5lB,UAAUwL,QAAU,SAAUwc,GACxC,IAAIC,EAAOvoB,KAAKomB,QAAQoC,gBAAe,GACnChG,EAAWxiB,KAAKsmB,iBAChBW,EAAajnB,KAAKqmB,YACtBrmB,KAAKyoB,UAAYpW,KAAKqW,SACtB1oB,KAAK2oB,WAAWJ,EAAM/F,EAAU8F,EAAUtoB,KAAKyoB,WAC/C,IAAK,IAAIpjB,EAAI,EAAGA,EAAI4hB,EAAW9gB,OAAQd,IAAK,CACxC,IAAIujB,EAAI3B,EAAW5hB,GACfwjB,EAAQ7oB,KAAKumB,QAAQqC,GACzB,IAAKC,EAAMtB,aAAesB,EAAM/c,QAAS,CACrC,IAAI6Y,EAAmB,IAANtf,EAAUrF,KAAK8oB,iBAAmB,KACnDD,EAAM/c,QAAQ6Y,EAClB,CACJ,CAIA,OAHI3kB,KAAK6mB,MAAMkC,eACX/oB,KAAKsmB,iBAAmBiC,EAAKlf,SAE1BrJ,IACX,EACAkmB,EAAc5lB,UAAUuL,aAAe,WACnC7L,KAAKgpB,gBAAgBhpB,KAAKomB,QAAQoC,gBAAe,GACrD,EACAtC,EAAc5lB,UAAU0oB,gBAAkB,SAAUT,GAChD,IAAIzf,EAAMyf,EAAKpiB,OACX+B,EAAalI,KAAKipB,YAEtB,GADA/gB,GAAcA,EAAWuc,QACpB3b,EAAL,CASA,IANA,IAKIiZ,EALAlV,EAAQ,CACRb,SAAS,EACTyW,UAAWziB,KAAKonB,OAChB1E,WAAY1iB,KAAKqnB,SAGZhiB,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CAC1B,IAAIkH,EAAKgc,EAAKljB,GACVkH,EAAGlE,YACEH,IACDA,EAAalI,KAAKipB,YAAcjpB,KAAKkpB,SAASnD,IAE7ChE,IACDA,EAAM7Z,EAAW6Z,KACb0D,QAER,QAAM1D,EAAKxV,EAAIM,EAAOxH,IAAMyD,EAAM,GAE1C,CACIiZ,GACAA,EAAI6D,SArBR,CAuBJ,EACAM,EAAc5lB,UAAU6oB,cAAgB,WACpC,OAAOnpB,KAAKkpB,SAASnD,EACzB,EACAG,EAAc5lB,UAAU8oB,SAAW,SAAUrH,EAAKxV,IAC9C,QAAYwV,EAAKxV,EACrB,EACA2Z,EAAc5lB,UAAUqoB,WAAa,SAAUJ,EAAM/F,EAAU8F,EAAUe,GACrE,GAAIrpB,KAAKyoB,YAAcY,EAAvB,CAGAf,EAAWA,IAAY,EACvBtoB,KAAKspB,mBAAmBf,GACxB,IAAIgB,EAAKvpB,KAAKwpB,aAAajB,EAAM/F,EAAU8F,GAAWmB,EAAWF,EAAGE,SAAUC,EAAoBH,EAAGG,kBAOrG,GANI1pB,KAAKymB,2BACLzmB,KAAK2pB,qBAELD,GACA1pB,KAAKgpB,gBAAgBT,GAEpBkB,EAODzpB,KAAK4pB,WAAU,SAAUf,GACrBA,EAAMhH,YAAcgH,EAAMhH,YAC9B,QATW,CACX,IAAIgI,EAAS7pB,MACb,EAAA+e,EAAA,IAAsB,WAClB8K,EAAOlB,WAAWJ,EAAM/F,EAAU8F,EAAUe,EAChD,GACJ,CAfA,CAqBJ,EACAnD,EAAc5lB,UAAUqpB,mBAAqB,WACzC,IAAI5H,EAAM/hB,KAAKkpB,SAASlD,GAAejE,IACnC5e,EAAQnD,KAAKwnB,SAASrkB,MACtBC,EAASpD,KAAKwnB,SAASpkB,OAC3B2e,EAAIkD,UAAU,EAAG,EAAG9hB,EAAOC,GAC3BpD,KAAK8pB,kBAAiB,SAAUjB,GACxBA,EAAMnI,SACNqB,EAAIgD,UAAU8D,EAAMtI,IAAK,EAAG,EAAGpd,EAAOC,EAE9C,GACJ,EACA8iB,EAAc5lB,UAAUkpB,aAAe,SAAUjB,EAAM/F,EAAU8F,GAI7D,IAHA,IAAIzK,EAAQ7d,KACR+pB,EAAY,GACZhB,EAAe/oB,KAAK6mB,MAAMkC,aACrBiB,EAAK,EAAGA,EAAKhqB,KAAKqmB,YAAYlgB,OAAQ6jB,IAAM,CACjD,IAAInJ,EAAS7gB,KAAKqmB,YAAY2D,GAC1BnB,EAAQ7oB,KAAKumB,QAAQ1F,GACrBgI,EAAMtB,aACHsB,IAAU7oB,KAAKipB,cACdJ,EAAMxnB,SAAWinB,IACrByB,EAAUrhB,KAAKmgB,EAEvB,CAgFA,IA/EA,IAAIY,GAAW,EACXC,GAAoB,EACpBO,EAAU,SAAUzZ,GACpB,IAsBInL,EAtBAwjB,EAAQkB,EAAUvZ,GAClBuR,EAAM8G,EAAM9G,IACZ6C,EAAemE,GACZF,EAAMvG,mBAAmBiG,EAAM/F,EAAU0H,EAAO9C,OAAQ8C,EAAO7C,SAClEjY,EAAQkZ,EAAWO,EAAM3H,aAAe2H,EAAM5H,YAC9CkJ,GAAY7B,GAAYO,EAAMjI,aAAewJ,KAAKC,IAClDC,EAAYH,GAAYC,KAAKC,MAC7B1F,EAAakE,EAAMhI,SAAWqJ,EAAO7D,YAAY,GAC/C6D,EAAOpB,iBAAmB,KAChC,GAAID,EAAM3H,eAAiB2H,EAAM1H,WAC7B0H,EAAMpE,OAAM,EAAOE,EAAYC,QAE9B,GAAIxV,IAAUyZ,EAAM3H,aAAc,CACnC,IAAIqJ,EAAUhC,EAAKnZ,GACdmb,EAAQ3J,aAAgB2J,EAAQC,WAAYlC,GAC7CO,EAAMpE,OAAM,EAAOE,EAAYC,EAEvC,EACe,IAAXxV,IAEAA,EAAQyZ,EAAM3H,cAGlB,IAAIuJ,EAAU,SAAUC,GACpB,IAAI7d,EAAQ,CACRb,SAAS,EACT2e,YAAY,EACZC,OAAQ,KACRnI,UAAW5E,EAAMuJ,OACjB1E,WAAY7E,EAAMwJ,SAEtB,IAAKhiB,EAAI+J,EAAO/J,EAAIwjB,EAAM1H,WAAY9b,IAAK,CACvC,IAAIkH,EAAKgc,EAAKljB,GAKd,GAJIkH,EAAGlE,YACHqhB,GAAoB,GAExB7L,EAAMgN,WAAWte,EAAIsc,EAAOE,EAAc2B,EAAa7d,EAAOxH,IAAMwjB,EAAM1H,WAAa,GACnFgJ,EAEA,GADYC,KAAKC,MAAQC,EACb,GACR,KAGZ,CACIzd,EAAMie,iBACN/I,EAAI6D,SAEZ,EACA,GAAIhB,EACA,GAA4B,IAAxBA,EAAaze,OACbd,EAAIwjB,EAAM1H,gBAIV,IADA,IAAIzB,EAAMwK,EAAOxK,IACR1E,EAAI,EAAGA,EAAI4J,EAAaze,SAAU6U,EAAG,CAC1C,IAAIiI,EAAO2B,EAAa5J,GACxB+G,EAAI0D,OACJ1D,EAAIgJ,YACJhJ,EAAIkB,KAAKA,EAAKvgB,EAAIgd,EAAKuD,EAAKtgB,EAAI+c,EAAKuD,EAAK9f,MAAQuc,EAAKuD,EAAK7f,OAASsc,GACrEqC,EAAIzE,OACJmN,EAAQxH,GACRlB,EAAI6D,SACR,MAIJ7D,EAAI0D,OACJgF,IACA1I,EAAI6D,UAERiD,EAAM5H,YAAc5b,EAChBwjB,EAAM5H,YAAc4H,EAAM1H,aAC1BsI,GAAW,EAEnB,EACIS,EAASlqB,KACJwQ,EAAI,EAAGA,EAAIuZ,EAAU5jB,OAAQqK,IAClCyZ,EAAQzZ,GASZ,OAPIwa,EAAA,EAAIC,KACJ3J,EAAA,GAAUthB,KAAKumB,SAAS,SAAUsC,GAC1BA,GAASA,EAAM9G,KAAO8G,EAAM9G,IAAImJ,MAChCrC,EAAM9G,IAAImJ,MAElB,IAEG,CACHzB,SAAUA,EACVC,kBAAmBA,EAE3B,EACAxD,EAAc5lB,UAAUuqB,WAAa,SAAUte,EAAI4e,EAAcpC,EAAc2B,EAAa7d,EAAOue,GAC/F,IAAIrJ,EAAMoJ,EAAapJ,IACvB,GAAIgH,EAAc,CACd,IAAIsC,EAAY9e,EAAGa,iBACdsd,GAAeW,GAAaA,EAAU3H,UAAUgH,OACjD,QAAM3I,EAAKxV,EAAIM,EAAOue,GACtB7e,EAAG+e,iBAAiBD,GAE5B,MAEI,QAAMtJ,EAAKxV,EAAIM,EAAOue,EAE9B,EACAlF,EAAc5lB,UAAU4oB,SAAW,SAAUrI,EAAQH,GAC7C1gB,KAAK+mB,gBAAkB/mB,KAAKymB,4BAC5B5F,EAASmF,GAEb,IAAI6C,EAAQ7oB,KAAKumB,QAAQ1F,GAiBzB,OAhBKgI,KACDA,EAAQ,IAAI,EAAM,MAAQhI,EAAQ7gB,KAAMA,KAAK0f,MACvCmB,OAASA,EACfgI,EAAMtB,aAAc,EAChBvnB,KAAKwmB,aAAa3F,GAClBS,EAAA,GAAWuH,EAAO7oB,KAAKwmB,aAAa3F,IAAS,GAExC7gB,KAAKwmB,aAAa3F,EAASoF,IAChC3E,EAAA,GAAWuH,EAAO7oB,KAAKwmB,aAAa3F,EAASoF,IAA2B,GAExEvF,IACAmI,EAAMnI,QAAUA,GAEpB1gB,KAAKurB,YAAY1K,EAAQgI,GACzBA,EAAM/G,eAEH+G,CACX,EACA3C,EAAc5lB,UAAUirB,YAAc,SAAU1K,EAAQgI,GACpD,IAAI2C,EAAYxrB,KAAKumB,QACjBU,EAAajnB,KAAKqmB,YAClBvd,EAAMme,EAAW9gB,OACjBshB,EAAUznB,KAAKwnB,SACfiE,EAAY,KACZpmB,GAAK,EACT,IAAImmB,EAAU3K,IArVtB,SAAsBgI,GAClB,QAAKA,MAGDA,EAAMtB,aAGoB,mBAAlBsB,EAAY,QACU,mBAAnBA,EAAa,QAIhC,CA+Ua6C,CAAa7C,GAAlB,CAMA,GAAI/f,EAAM,GAAK+X,EAASoG,EAAW,GAAI,CACnC,IAAK5hB,EAAI,EAAGA,EAAIyD,EAAM,KACdme,EAAW5hB,GAAKwb,GACboG,EAAW5hB,EAAI,GAAKwb,GAFNxb,KAMzBomB,EAAYD,EAAUvE,EAAW5hB,GACrC,CAGA,GAFA4hB,EAAWxd,OAAOpE,EAAI,EAAG,EAAGwb,GAC5B2K,EAAU3K,GAAUgI,GACfA,EAAMnI,QACP,GAAI+K,EAAW,CACX,IAAIE,EAAUF,EAAUlL,IACpBoL,EAAQC,YACRnE,EAAQoE,aAAahD,EAAMtI,IAAKoL,EAAQC,aAGxCnE,EAAQK,YAAYe,EAAMtI,IAElC,MAEQkH,EAAQqE,WACRrE,EAAQoE,aAAahD,EAAMtI,IAAKkH,EAAQqE,YAGxCrE,EAAQK,YAAYe,EAAMtI,KAItCsI,EAAMrD,UAAYxlB,IA/BlB,CAgCJ,EACAkmB,EAAc5lB,UAAUspB,UAAY,SAAUrkB,EAAIC,GAE9C,IADA,IAAIyhB,EAAajnB,KAAKqmB,YACbhhB,EAAI,EAAGA,EAAI4hB,EAAW9gB,OAAQd,IAAK,CACxC,IAAIujB,EAAI3B,EAAW5hB,GACnBE,EAAGuK,KAAKtK,EAASxF,KAAKumB,QAAQqC,GAAIA,EACtC,CACJ,EACA1C,EAAc5lB,UAAUwpB,iBAAmB,SAAUvkB,EAAIC,GAErD,IADA,IAAIyhB,EAAajnB,KAAKqmB,YACbhhB,EAAI,EAAGA,EAAI4hB,EAAW9gB,OAAQd,IAAK,CACxC,IAAIujB,EAAI3B,EAAW5hB,GACfwjB,EAAQ7oB,KAAKumB,QAAQqC,GACrBC,EAAMtB,aACNhiB,EAAGuK,KAAKtK,EAASqjB,EAAOD,EAEhC,CACJ,EACA1C,EAAc5lB,UAAUyrB,eAAiB,SAAUxmB,EAAIC,GAEnD,IADA,IAAIyhB,EAAajnB,KAAKqmB,YACbhhB,EAAI,EAAGA,EAAI4hB,EAAW9gB,OAAQd,IAAK,CACxC,IAAIujB,EAAI3B,EAAW5hB,GACfwjB,EAAQ7oB,KAAKumB,QAAQqC,GACpBC,EAAMtB,aACPhiB,EAAGuK,KAAKtK,EAASqjB,EAAOD,EAEhC,CACJ,EACA1C,EAAc5lB,UAAU0rB,UAAY,WAChC,OAAOhsB,KAAKumB,OAChB,EACAL,EAAc5lB,UAAUgpB,mBAAqB,SAAUf,GAInD,SAAS0D,EAAgBziB,GACjBiiB,IACIA,EAAUtK,aAAe3X,IACzBiiB,EAAUpqB,SAAU,GAExBoqB,EAAUtK,WAAa3X,EAE/B,CACA,GAXAxJ,KAAK8pB,kBAAiB,SAAUjB,EAAOD,GACnCC,EAAMxnB,QAAUwnB,EAAM7H,QAAS,CACnC,IASIhhB,KAAK+mB,cACL,IAAK,IAAImF,EAAM,EAAGA,EAAM3D,EAAKpiB,OAAQ+lB,IAAO,CAExC,IADI3f,EAAKgc,EAAK2D,IACPrL,SAAW0H,EAAK2D,EAAM,GAAGrL,QAAUtU,EAAGqU,YAAa,CACtD5gB,KAAKymB,2BAA4B,EACjC,KACJ,CACJ,CAEJ,IAEI0F,EACA9mB,EAHAomB,EAAY,KACZW,EAAwB,EAG5B,IAAK/mB,EAAI,EAAGA,EAAIkjB,EAAKpiB,OAAQd,IAAK,CAC9B,IAAIkH,EACAsU,GADAtU,EAAKgc,EAAKljB,IACEwb,OACZgI,OAAQ,EACRsD,IAAetL,IACfsL,EAAatL,EACbuL,EAAwB,GAExB7f,EAAGqU,cACHiI,EAAQ7oB,KAAKkpB,SAASrI,EAlchB,KAkc0C7gB,KAAKymB,4BAC/C7F,aAAc,EACpBwL,EAAwB,GAGxBvD,EAAQ7oB,KAAKkpB,SAASrI,GAAUuL,EAAwB,EAAInG,EAA2B,GAAIjmB,KAAKymB,2BAE/FoC,EAAMtB,aACPjG,EAAA,EAAc,UAAYT,EAAS,kCAAoCgI,EAAM5oB,IAE7E4oB,IAAU4C,IACV5C,EAAM7H,QAAS,EACX6H,EAAM3H,eAAiB7b,IACvBwjB,EAAMxnB,SAAU,GAEpBwnB,EAAM3H,aAAe7b,EAChBwjB,EAAMjI,YAIPiI,EAAM5H,aAAe,EAHrB4H,EAAM5H,YAAc5b,EAKxB4mB,EAAgB5mB,GAChBomB,EAAY5C,GAEXtc,EAAGlL,QAAU,OAAgBkL,EAAGlE,YACjCwgB,EAAMxnB,SAAU,EACZwnB,EAAMjI,aAAeiI,EAAM5H,YAAc,IACzC4H,EAAM5H,YAAc5b,GAGhC,CACA4mB,EAAgB5mB,GAChBrF,KAAK8pB,kBAAiB,SAAUjB,EAAOD,IAC9BC,EAAM7H,QAAU6H,EAAMjH,kBAAoB,IAC3CiH,EAAMxnB,SAAU,EAChBwnB,EAAM3H,aAAe2H,EAAM1H,WAAa0H,EAAM5H,YAAc,GAE5D4H,EAAMxnB,SAAWwnB,EAAM5H,YAAc,IACrC4H,EAAM5H,YAAc4H,EAAM3H,aAElC,GACJ,EACAgF,EAAc5lB,UAAUmkB,MAAQ,WAE5B,OADAzkB,KAAK8pB,iBAAiB9pB,KAAKqsB,aACpBrsB,IACX,EACAkmB,EAAc5lB,UAAU+rB,YAAc,SAAUxD,GAC5CA,EAAMpE,OACV,EACAyB,EAAc5lB,UAAUgsB,mBAAqB,SAAUtnB,GACnDhF,KAAK8oB,iBAAmB9jB,EACxBsc,EAAA,GAAUthB,KAAKumB,SAAS,SAAUsC,GAC9BA,EAAM5G,cACV,GACJ,EACAiE,EAAc5lB,UAAUisB,YAAc,SAAU1L,EAAQF,GACpD,GAAIA,EAAQ,CACR,IAAI6L,EAAcxsB,KAAKwmB,aAClBgG,EAAY3L,GAIbS,EAAA,GAAWkL,EAAY3L,GAASF,GAAQ,GAHxC6L,EAAY3L,GAAUF,EAK1B,IAAK,IAAItb,EAAI,EAAGA,EAAIrF,KAAKqmB,YAAYlgB,OAAQd,IAAK,CAC9C,IAAIonB,EAAUzsB,KAAKqmB,YAAYhhB,GAC/B,GAAIonB,IAAY5L,GAAU4L,IAAY5L,EAASoF,EAA0B,CACrE,IAAI4C,EAAQ7oB,KAAKumB,QAAQkG,GACzBnL,EAAA,GAAWuH,EAAO2D,EAAY3L,IAAS,EAC3C,CACJ,CACJ,CACJ,EACAqF,EAAc5lB,UAAUosB,SAAW,SAAU7L,GACzC,IAAIqG,EAASlnB,KAAKumB,QACdU,EAAajnB,KAAKqmB,YAClBwC,EAAQ3B,EAAOrG,GACdgI,IAGLA,EAAMtI,IAAIoM,WAAWC,YAAY/D,EAAMtI,YAChC2G,EAAOrG,GACdoG,EAAWxd,OAAO6X,EAAA,GAAa2F,EAAYpG,GAAS,GACxD,EACAqF,EAAc5lB,UAAUkkB,OAAS,SAAUrhB,EAAOC,GAC9C,GAAKpD,KAAKwnB,SAASvH,MAQd,CACD,IAAIwH,EAAUznB,KAAKwnB,SACnBC,EAAQxH,MAAM4M,QAAU,OACxB,IAAI5Y,EAAOjU,KAAK6mB,MACZV,EAAOnmB,KAAKmmB,KAMhB,GALS,MAAThjB,IAAkB8Q,EAAK9Q,MAAQA,GACrB,MAAVC,IAAmB6Q,EAAK7Q,OAASA,GACjCD,GAAQ,QAAQgjB,EAAM,EAAGlS,GACzB7Q,GAAS,QAAQ+iB,EAAM,EAAGlS,GAC1BwT,EAAQxH,MAAM4M,QAAU,GACpB7sB,KAAKonB,SAAWjkB,GAASC,IAAWpD,KAAKqnB,QAAS,CAGlD,IAAK,IAAIpnB,KAFTwnB,EAAQxH,MAAM9c,MAAQA,EAAQ,KAC9BskB,EAAQxH,MAAM7c,OAASA,EAAS,KACjBpD,KAAKumB,QACZvmB,KAAKumB,QAAQuG,eAAe7sB,IAC5BD,KAAKumB,QAAQtmB,GAAIukB,OAAOrhB,EAAOC,GAGvCpD,KAAK8L,SAAQ,EACjB,CACA9L,KAAKonB,OAASjkB,EACdnD,KAAKqnB,QAAUjkB,CACnB,KA9B0B,CACtB,GAAa,MAATD,GAA2B,MAAVC,EACjB,OAEJpD,KAAKonB,OAASjkB,EACdnD,KAAKqnB,QAAUjkB,EACfpD,KAAKkpB,SAASlD,GAAexB,OAAOrhB,EAAOC,EAC/C,CAwBA,OAAOpD,IACX,EACAkmB,EAAc5lB,UAAUysB,WAAa,SAAUlM,GAC3C,IAAIgI,EAAQ7oB,KAAKumB,QAAQ1F,GACrBgI,GACAA,EAAMpE,OAEd,EACAyB,EAAc5lB,UAAU0sB,QAAU,WAC9BhtB,KAAKmmB,KAAKa,UAAY,GACtBhnB,KAAKmmB,KACDnmB,KAAKomB,QACDpmB,KAAKwnB,SACDxnB,KAAKumB,QAAU,IAC/B,EACAL,EAAc5lB,UAAU2sB,kBAAoB,SAAUhZ,GAElD,GADAA,EAAOA,GAAQ,CAAC,EACZjU,KAAK+mB,gBAAkB/mB,KAAK2pB,mBAC5B,OAAO3pB,KAAKumB,QAAQP,QAAezF,IAEvC,IAAI2M,EAAa,IAAI,EAAM,QAASltB,KAAMiU,EAAKkZ,YAAcntB,KAAK0f,KAClEwN,EAAWpL,cACXoL,EAAWzI,OAAM,EAAOxQ,EAAKjP,iBAAmBhF,KAAK8oB,kBACrD,IAAI/G,EAAMmL,EAAWnL,IACrB,GAAI9N,EAAKkZ,YAAcntB,KAAK0f,IAAK,CAC7B1f,KAAK8L,UACL,IAAIshB,EAAUF,EAAW3M,IAAIpd,MACzBkqB,EAAWH,EAAW3M,IAAInd,OAC9BpD,KAAK4pB,WAAU,SAAUf,GACjBA,EAAMtB,YACNxF,EAAIgD,UAAU8D,EAAMtI,IAAK,EAAG,EAAG6M,EAASC,GAEnCxE,EAAMyE,iBACXvL,EAAI0D,OACJoD,EAAMyE,eAAevL,GACrBA,EAAI6D,UAEZ,GACJ,MAQI,IANA,IAAI/Y,EAAQ,CACRb,SAAS,EACTyW,UAAWziB,KAAKonB,OAChB1E,WAAY1iB,KAAKqnB,SAEjB9E,EAAcviB,KAAKomB,QAAQoC,gBAAe,GACrCnjB,EAAI,EAAGyD,EAAMyZ,EAAYpc,OAAQd,EAAIyD,EAAKzD,IAAK,CACpD,IAAIkH,EAAKgW,EAAYld,IACrB,QAAM0c,EAAKxV,EAAIM,EAAOxH,IAAMyD,EAAM,EACtC,CAEJ,OAAOokB,EAAW3M,GACtB,EACA2F,EAAc5lB,UAAUwf,SAAW,WAC/B,OAAO9f,KAAKonB,MAChB,EACAlB,EAAc5lB,UAAUyf,UAAY,WAChC,OAAO/f,KAAKqnB,OAChB,EACOnB,CACX,CAzlBoB,GA0lBpB,0ECnnBO,SAASqH,EAAYhhB,GACxB,IAZ8BihB,EAAUC,EAYpCxN,EAAQ1T,EAAG0T,MACXyN,EAAWzN,EAAMyN,UAAYzN,EAAMwN,UAAY,IAbrBD,EAa4CvN,EAAMyN,SAbxCD,EAakDxN,EAAMwN,UAZ3FD,GAAyB,UAAbA,GAA0BC,EAAY,EAGnC,WAAbD,EACD,CAAC,EAAIC,EAAW,EAAIA,GACP,WAAbD,EACI,CAACC,IACD,QAASD,GACL,CAACA,IAAY,QAAQA,GAAYA,EAAW,KAP/C,MAYPG,EAAiB1N,EAAM0N,eAC3B,GAAID,EAAU,CACV,IAAIE,EAAe3N,EAAM4N,eAAiBthB,EAAGuhB,aAAgBvhB,EAAGuhB,eAAiB,EAC7EF,GAA+B,IAAhBA,IACfF,GAAW,QAAIA,GAAU,SAAUK,GAC/B,OAAOA,EAASH,CACpB,IACAD,GAAkBC,EAE1B,CACA,MAAO,CAACF,EAAUC,EACtB,kOCfIK,EAAmB,IAAI,KAAU,GACrC,SAASC,EAAehO,GACpB,IAAItb,EAASsb,EAAMtb,OACnB,QAAmB,MAAVA,GAA6B,SAAXA,KAAuBsb,EAAMwN,UAAY,GACxE,CACA,SAASS,EAAuBC,GAC5B,MAA+B,iBAAjBA,GAA8C,SAAjBA,CAC/C,CACA,SAASC,EAAanO,GAClB,IAAIvb,EAAOub,EAAMvb,KACjB,OAAe,MAARA,GAAyB,SAATA,CAC3B,CACA,SAAS2pB,EAAWtM,EAAK9B,GACrB,GAAyB,MAArBA,EAAMqO,aAA6C,IAAtBrO,EAAMqO,YAAmB,CACtD,IAAIC,EAAsBxM,EAAI8D,YAC9B9D,EAAI8D,YAAc5F,EAAMqO,YAAcrO,EAAMuO,QAC5CzM,EAAIrd,OACJqd,EAAI8D,YAAc0I,CACtB,MAEIxM,EAAIrd,MAEZ,CACA,SAAS+pB,EAAa1M,EAAK9B,GACvB,GAA2B,MAAvBA,EAAMyO,eAAiD,IAAxBzO,EAAMyO,cAAqB,CAC1D,IAAIH,EAAsBxM,EAAI8D,YAC9B9D,EAAI8D,YAAc5F,EAAMyO,cAAgBzO,EAAMuO,QAC9CzM,EAAIpd,SACJod,EAAI8D,YAAc0I,CACtB,MAEIxM,EAAIpd,QAEZ,CACO,SAASgqB,EAAoB5M,EAAK6M,EAASriB,GAC9C,IAAIsiB,GAAQ,QAAoBD,EAAQC,MAAOD,EAAQE,QAASviB,GAChE,IAAI,QAAasiB,GAAQ,CACrB,IAAIE,EAAgBhN,EAAIiN,cAAcH,EAAOD,EAAQK,QAAU,UAC/D,GAAyB,mBAAdC,WACJH,GACAA,EAAcI,aAAc,CAC/B,IAAIC,EAAS,IAAIF,UACjBE,EAAOC,cAAeT,EAAQlsB,GAAK,EAAKksB,EAAQjsB,GAAK,GACrDysB,EAAOE,WAAW,EAAG,GAAIV,EAAQ5rB,UAAY,GAAK,MAClDosB,EAAOG,UAAWX,EAAQtJ,QAAU,EAAKsJ,EAAQrJ,QAAU,GAC3DwJ,EAAcI,aAAaC,EAC/B,CACA,OAAOL,CACX,CACJ,CAwMA,IAAIS,EAAsB,CAAC,aAAc,gBAAiB,iBACtDC,EAAe,CACf,CAAC,UAAW,QAAS,CAAC,WAAY,SAAU,CAAC,aAAc,KAE/D,SAASC,EAAgB3N,EAAK9B,EAAO0P,EAAWC,EAAa/iB,GACzD,IAAIgjB,GAAe,EACnB,IAAKD,GAEG3P,KADJ0P,EAAYA,GAAa,CAAC,GAEtB,OAAO,EAGf,GAAIC,GAAe3P,EAAMuO,UAAYmB,EAAUnB,QAAS,CACpDsB,EAAe/N,EAAKlV,GACpBgjB,GAAe,EACf,IAAIrB,EAAUnc,KAAKmE,IAAInE,KAAK4C,IAAIgL,EAAMuO,QAAS,GAAI,GACnDzM,EAAI8D,YAAchP,MAAM2X,GAAW,KAAqBA,QAAUA,CACtE,EACIoB,GAAe3P,EAAM8P,QAAUJ,EAAUI,SACpCF,IACDC,EAAe/N,EAAKlV,GACpBgjB,GAAe,GAEnB9N,EAAI+C,yBAA2B7E,EAAM8P,OAAS,KAAqBA,OAEvE,IAAK,IAAI1qB,EAAI,EAAGA,EAAImqB,EAAoBrpB,OAAQd,IAAK,CACjD,IAAImS,EAAWgY,EAAoBnqB,IAC/BuqB,GAAe3P,EAAMzI,KAAcmY,EAAUnY,MACxCqY,IACDC,EAAe/N,EAAKlV,GACpBgjB,GAAe,GAEnB9N,EAAIvK,GAAYuK,EAAIrC,KAAOO,EAAMzI,IAAa,GAEtD,CAQA,OAPIoY,GAAe3P,EAAM+P,cAAgBL,EAAUK,eAC1CH,IACDC,EAAe/N,EAAKlV,GACpBgjB,GAAe,GAEnB9N,EAAIiO,YAAc/P,EAAM+P,aAAe,KAAqBA,aAEzDH,CACX,CACA,SAASI,EAA2BlO,EAAKxV,EAAIqe,EAAQgF,EAAa/iB,GAC9D,IAAIoT,EAAQiQ,EAAS3jB,EAAIM,EAAMb,SAC3B2jB,EAAYC,EACV,KACChF,GAAUsF,EAAStF,EAAQ/d,EAAMb,UAAY,CAAC,EACrD,GAAIiU,IAAU0P,EACV,OAAO,EAEX,IAAIE,EAAeH,EAAgB3N,EAAK9B,EAAO0P,EAAWC,EAAa/iB,GAsBvE,IArBI+iB,GAAe3P,EAAMvb,OAASirB,EAAUjrB,QACnCmrB,IACDC,EAAe/N,EAAKlV,GACpBgjB,GAAe,GAEnB3B,EAAuBjO,EAAMvb,QAAUqd,EAAI2D,UAAYzF,EAAMvb,QAE7DkrB,GAAe3P,EAAMtb,SAAWgrB,EAAUhrB,UACrCkrB,IACDC,EAAe/N,EAAKlV,GACpBgjB,GAAe,GAEnB3B,EAAuBjO,EAAMtb,UAAYod,EAAIoO,YAAclQ,EAAMtb,UAEjEirB,GAAe3P,EAAMuO,UAAYmB,EAAUnB,WACtCqB,IACDC,EAAe/N,EAAKlV,GACpBgjB,GAAe,GAEnB9N,EAAI8D,YAA+B,MAAjB5F,EAAMuO,QAAkB,EAAIvO,EAAMuO,SAEpDjiB,EAAG6jB,YAAa,CAChB,IACIC,EADYpQ,EAAMwN,WACWxN,EAAM4N,eAAiBthB,EAAGuhB,aAAgBvhB,EAAGuhB,eAAiB,GAC3F/L,EAAI0L,YAAc4C,IACbR,IACDC,EAAe/N,EAAKlV,GACpBgjB,GAAe,GAEnB9N,EAAI0L,UAAY4C,EAExB,CACA,IAAK,IAAIhrB,EAAI,EAAGA,EAAIoqB,EAAatpB,OAAQd,IAAK,CAC1C,IAAIirB,EAAOb,EAAapqB,GACpBmS,EAAW8Y,EAAK,IAChBV,GAAe3P,EAAMzI,KAAcmY,EAAUnY,MACxCqY,IACDC,EAAe/N,EAAKlV,GACpBgjB,GAAe,GAEnB9N,EAAIvK,GAAYyI,EAAMzI,IAAa8Y,EAAK,GAEhD,CACA,OAAOT,CACX,CAIA,SAASU,EAAoBxO,EAAKxV,GAC9B,IAAI1L,EAAI0L,EAAGzL,UACP4e,EAAMqC,EAAIrC,KAAO,EACjB7e,EACAkhB,EAAIoN,aAAazP,EAAM7e,EAAE,GAAI6e,EAAM7e,EAAE,GAAI6e,EAAM7e,EAAE,GAAI6e,EAAM7e,EAAE,GAAI6e,EAAM7e,EAAE,GAAI6e,EAAM7e,EAAE,IAGrFkhB,EAAIoN,aAAazP,EAAK,EAAG,EAAGA,EAAK,EAAG,EAE5C,CA2BA,IAAI8Q,EAAiB,EACjBC,EAAkB,EAClBC,EAAiB,EACjBC,EAAwB,EAY5B,SAASb,EAAe/N,EAAKlV,GACzBA,EAAM+jB,WAAa7O,EAAIrd,OACvBmI,EAAMgkB,aAAe9O,EAAIpd,SACzBkI,EAAM+jB,UAAY,GAClB/jB,EAAMgkB,YAAc,EACxB,CACA,SAASX,EAAS3jB,EAAIP,GAClB,OAAOA,GAAWO,EAAGukB,cAA4BvkB,EAAG0T,KACxD,CACO,SAAS8Q,EAAYhP,EAAKxV,GAC7BykB,EAAMjP,EAAKxV,EAAI,CAAEP,SAAS,EAAOyW,UAAW,EAAGC,WAAY,IAAK,EACpE,CACO,SAASsO,EAAMjP,EAAKxV,EAAIM,EAAOue,GAClC,IAAIvqB,EAAI0L,EAAGzL,UACX,IAAKyL,EAAG0X,gBAAgBpX,EAAM4V,UAAW5V,EAAM6V,YAAY,GAAO,GAG9D,OAFAnW,EAAGlL,UAAY,UACfkL,EAAG4X,cAAe,GAGtB,IAAI8M,EAAY1kB,EAAG2kB,YACfpG,EAAkBje,EAAMie,gBACxBqG,GAAoB,EACpBC,GAAgB,EAkBpB,GAjBKtG,KAAmB,QAAkBmG,EAAWnG,KAC7CA,GAAmBA,EAAgB3kB,SACnC2pB,EAAe/N,EAAKlV,GACpBkV,EAAI6D,UACJwL,EAAgBD,GAAoB,EACpCtkB,EAAMie,gBAAkB,KACxBje,EAAM8d,YAAa,EACnB9d,EAAM+d,OAAS,MAEfqG,GAAaA,EAAU9qB,SACvB2pB,EAAe/N,EAAKlV,GACpBkV,EAAI0D,OA3EhB,SAA0BwL,EAAWlP,EAAKlV,GAEtC,IADA,IAAI8d,GAAa,EACRtlB,EAAI,EAAGA,EAAI4rB,EAAU9qB,OAAQd,IAAK,CACvC,IAAI6F,EAAW+lB,EAAU5rB,GACzBslB,EAAaA,GAAczf,EAASmmB,aACpCd,EAAoBxO,EAAK7W,GACzB6W,EAAIgJ,YACJ7f,EAASomB,UAAUvP,EAAK7W,EAASqmB,OACjCxP,EAAIzE,MACR,CACAzQ,EAAM8d,WAAaA,CACvB,CAiEY6G,CAAiBP,EAAWlP,EAAKlV,GACjCskB,GAAoB,GAExBtkB,EAAMie,gBAAkBmG,GAExBpkB,EAAM8d,WACNpe,EAAG4X,cAAe,MADtB,CAIA5X,EAAGklB,aAAellB,EAAGklB,cACrBllB,EAAGmlB,mBACH,IAAI9G,EAAS/d,EAAM+d,OACdA,IACDwG,EAAgBD,GAAoB,GAExC,IA/EwBQ,EAAIC,EA+ExBC,EAAetlB,aAAc,MAC1BA,EAAGulB,WA9Dd,SAAsB7R,GAClB,IAAI8R,EAAU3D,EAAanO,GACvBmQ,EAAYnC,EAAehO,GAC/B,QAASA,EAAMyN,aACLqE,GAAW3B,IACb2B,GAAiC,iBAAf9R,EAAMvb,MACxB0rB,GAAqC,iBAAjBnQ,EAAMtb,QAC3Bsb,EAAM+R,cAAgB,GACtB/R,EAAMyO,cAAgB,GACtBzO,EAAMqO,YAAc,EAC/B,CAqDW2D,CAAa1lB,EAAG0T,OACnBkR,IAlFoBQ,EAkFoB9wB,EAlFhB+wB,EAkFmBhH,EAAO9pB,UAjFlD6wB,GAAMC,EACCD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,GAEdD,GAAOC,IA0Eb9B,EAAe/N,EAAKlV,GACpB0jB,EAAoBxO,EAAKxV,IAEnBslB,GACN/B,EAAe/N,EAAKlV,GAExB,IAAIoT,EAAQiQ,EAAS3jB,EAAIM,EAAMb,SAC3BO,aAAc,MACVM,EAAMqlB,eAAiB1B,IACvBY,GAAgB,EAChBvkB,EAAMqlB,aAAe1B,GAEzBP,EAA2BlO,EAAKxV,EAAIqe,EAAQwG,EAAevkB,GACtDglB,IAAkBhlB,EAAM+jB,WAAc/jB,EAAMgkB,cAC7C9O,EAAIgJ,YAnahB,SAAmBhJ,EAAKxV,EAAI0T,EAAOkS,GAC/B,IAAI5I,EACA6G,EAAYnC,EAAehO,GAC3B8R,EAAU3D,EAAanO,GACvB+R,EAAgB/R,EAAM+R,cACtBI,EAAaJ,EAAgB,EAC7BK,GAAa9lB,EAAG+lB,KACd/lB,EAAGiB,SAAU4kB,IAAeC,GAC9B9lB,EAAGgmB,kBAEP,IAAID,EAAO/lB,EAAG+lB,MAAQtE,EAClBwE,EAAYjmB,EAAGlL,QACnB,IAAK8wB,EAAS,CACV,IAAIztB,EAAOub,EAAMvb,KACbC,EAASsb,EAAMtb,OACf8tB,EAAkBV,KAAartB,EAAKkU,WACpC8Z,EAAoBtC,KAAezrB,EAAOiU,WAC1C+Z,EAAiBZ,KAAartB,EAAKmqB,MACnC+D,EAAmBxC,KAAezrB,EAAOkqB,MACzCgE,OAAe,EACfC,OAAiB,EACjBC,OAAc,EACdC,OAAgB,EAChB/P,OAAO,GACPwP,GAAmBC,KACnBzP,EAAO1W,EAAGhK,mBAEVkwB,IACAI,EAAeL,GACT,QAAkBzQ,EAAKrd,EAAMue,GAC7B1W,EAAG0mB,qBACT1mB,EAAG0mB,qBAAuBJ,GAE1BH,IACAI,EAAiBN,GACX,QAAkBzQ,EAAKpd,EAAQse,GAC/B1W,EAAG2mB,uBACT3mB,EAAG2mB,uBAAyBJ,GAE5BH,IACAI,EAAeP,IAAcjmB,EAAG4mB,oBAC1BxE,EAAoB5M,EAAKrd,EAAM6H,GAC/BA,EAAG4mB,oBACT5mB,EAAG4mB,oBAAsBJ,GAEzBH,IACAI,EAAiBR,IAAcjmB,EAAG6mB,sBAC5BzE,EAAoB5M,EAAKpd,EAAQ4H,GACjCA,EAAG6mB,sBACT7mB,EAAG6mB,sBAAwBL,GAE3BN,EACA1Q,EAAI2D,UAAYmN,EAEXF,IACDI,EACAhR,EAAI2D,UAAYqN,EAGhBhB,GAAU,GAGdW,EACA3Q,EAAIoO,YAAc2C,EAEbF,IACDI,EACAjR,EAAIoO,YAAc6C,EAGlB5C,GAAY,EAGxB,CACA,IAEI1C,EACAC,EAHAtL,EAAQ9V,EAAG8mB,iBACff,EAAKgB,SAASjR,EAAM,GAAIA,EAAM,GAAI9V,EAAGgnB,wBAGjCxR,EAAIyR,aAAevT,EAAMyN,WACHA,GAAtBnE,GAAK,OAAYhd,IAAmB,GAAIohB,EAAiBpE,EAAG,IAEhE,IAAIkK,GAAe,GACfpB,GAAcG,EAAY,QAC1BF,EAAKoB,OAAO3R,EAAIrC,KACZ0S,EACAE,EAAKqB,WAAW,OAGhBrB,EAAKqB,WAAW5R,GAChB0R,GAAe,GAEnBnB,EAAKsB,QACLrnB,EAAG+kB,UAAUgB,EAAM/lB,EAAGglB,MAAOY,GAC7BG,EAAKuB,WACLtnB,EAAGunB,eAEHL,GACAnB,EAAKyB,YAAYhS,EAAKqQ,EAAaJ,EAAgB,GAEnDtE,IACA3L,EAAIyR,YAAY9F,GAChB3L,EAAI4L,eAAiBA,GAEpBwE,IACGlS,EAAM+T,aACF5D,GACA3B,EAAa1M,EAAK9B,GAElB8R,GACA1D,EAAWtM,EAAK9B,KAIhB8R,GACA1D,EAAWtM,EAAK9B,GAEhBmQ,GACA3B,EAAa1M,EAAK9B,KAI1ByN,GACA3L,EAAIyR,YAAY,GAExB,CAySQS,CAAUlS,EAAKxV,EAAI0T,EAAO4R,GACtBA,IACAhlB,EAAM+jB,UAAY3Q,EAAMvb,MAAQ,GAChCmI,EAAMgkB,YAAc5Q,EAAMtb,QAAU,KAIpC4H,aAAc,KACVM,EAAMqlB,eAAiBxB,IACvBU,GAAgB,EAChBvkB,EAAMqlB,aAAexB,GAEzBT,EAA2BlO,EAAKxV,EAAIqe,EAAQwG,EAAevkB,GAhRvE,SAAmBkV,EAAKxV,EAAI0T,GACxB,IAAIsJ,EACA2K,EAAOjU,EAAMiU,KAEjB,GADQ,MAARA,IAAiBA,GAAQ,IACrBA,EAAM,CACNnS,EAAIoS,KAAOlU,EAAMkU,MAAQ,KACzBpS,EAAIjgB,UAAYme,EAAMne,UACtBigB,EAAIqS,aAAenU,EAAMmU,aACzB,IAAI1G,OAAW,EACXC,OAAiB,EACjB5L,EAAIyR,aAAevT,EAAMyN,WACHA,GAAtBnE,GAAK,OAAYhd,IAAmB,GAAIohB,EAAiBpE,EAAG,IAE5DmE,IACA3L,EAAIyR,YAAY9F,GAChB3L,EAAI4L,eAAiBA,GAErB1N,EAAM+T,aACF/F,EAAehO,IACf8B,EAAIsS,WAAWH,EAAMjU,EAAMvd,EAAGud,EAAMtd,GAEpCyrB,EAAanO,IACb8B,EAAIuS,SAASJ,EAAMjU,EAAMvd,EAAGud,EAAMtd,KAIlCyrB,EAAanO,IACb8B,EAAIuS,SAASJ,EAAMjU,EAAMvd,EAAGud,EAAMtd,GAElCsrB,EAAehO,IACf8B,EAAIsS,WAAWH,EAAMjU,EAAMvd,EAAGud,EAAMtd,IAGxC+qB,GACA3L,EAAIyR,YAAY,GAExB,CACJ,CA4OYe,CAAUxS,EAAKxV,EAAI0T,IAEd1T,aAAc,MACfM,EAAMqlB,eAAiBzB,IACvBW,GAAgB,EAChBvkB,EAAMqlB,aAAezB,GA9IrC,SAAwB1O,EAAKxV,EAAIqe,EAAQgF,EAAa/iB,GAC3C6iB,EAAgB3N,EAAKmO,EAAS3jB,EAAIM,EAAMb,SAAU4e,GAAUsF,EAAStF,EAAQ/d,EAAMb,SAAU4jB,EAAa/iB,EACrH,CA8IY2nB,CAAezS,EAAKxV,EAAIqe,EAAQwG,EAAevkB,GA5T3D,SAAoBkV,EAAKxV,EAAI0T,GACzB,IAAI4O,EAAQtiB,EAAGuiB,SAAU,QAAoB7O,EAAM4O,MAAOtiB,EAAGuiB,QAASviB,EAAIA,EAAGkoB,QAC7E,GAAK5F,IAAU,QAAaA,GAA5B,CAGA,IAAInsB,EAAIud,EAAMvd,GAAK,EACfC,EAAIsd,EAAMtd,GAAK,EACfQ,EAAQoJ,EAAGuT,WACX1c,EAASmJ,EAAGwT,YACZ2U,EAAS7F,EAAM1rB,MAAQ0rB,EAAMzrB,OAWjC,GAVa,MAATD,GAA2B,MAAVC,EACjBD,EAAQC,EAASsxB,EAEF,MAAVtxB,GAA2B,MAATD,EACvBC,EAASD,EAAQuxB,EAEH,MAATvxB,GAA2B,MAAVC,IACtBD,EAAQ0rB,EAAM1rB,MACdC,EAASyrB,EAAMzrB,QAEf6c,EAAM0U,QAAU1U,EAAM2U,QAAS,CAC/B,IAAIC,EAAK5U,EAAM4U,IAAM,EACjBC,EAAK7U,EAAM6U,IAAM,EACrB/S,EAAIgD,UAAU8J,EAAOgG,EAAIC,EAAI7U,EAAM0U,OAAQ1U,EAAM2U,QAASlyB,EAAGC,EAAGQ,EAAOC,EAC3E,MACK,GAAI6c,EAAM4U,IAAM5U,EAAM6U,GAAI,CAC3B,IAEIH,EAASxxB,GAFT0xB,EAAK5U,EAAM4U,IAGXD,EAAUxxB,GAFV0xB,EAAK7U,EAAM6U,IAGf/S,EAAIgD,UAAU8J,EAAOgG,EAAIC,EAAIH,EAAQC,EAASlyB,EAAGC,EAAGQ,EAAOC,EAC/D,MAEI2e,EAAIgD,UAAU8J,EAAOnsB,EAAGC,EAAGQ,EAAOC,EA7BtC,CA+BJ,CA0RY2xB,CAAWhT,EAAKxV,EAAI0T,IAEf1T,EAAGyoB,0BACJnoB,EAAMqlB,eAAiBvB,IACvBS,GAAgB,EAChBvkB,EAAMqlB,aAAevB,GAcrC,SAA0B5O,EAAKxV,EAAIM,GAC/B,IAAIooB,EAAe1oB,EAAG2oB,kBAClBC,EAAuB5oB,EAAGyoB,0BAC9BjT,EAAI0D,OACJ,IAQIpgB,EACAyD,EATAssB,EAAa,CACbtK,gBAAiB,KACjBF,OAAQ,KACRD,YAAY,EACZlI,UAAW5V,EAAM4V,UACjBC,WAAY7V,EAAM6V,WAClB1W,QAASa,EAAMb,SAInB,IAAK3G,EAAIkH,EAAG8oB,YAAavsB,EAAMmsB,EAAa9uB,OAAQd,EAAIyD,EAAKzD,IAAK,EAC1DiwB,EAAcL,EAAa5vB,IACnBosB,aAAe6D,EAAY7D,cACvC6D,EAAY5D,mBACZV,EAAMjP,EAAKuT,EAAaF,EAAY/vB,IAAMyD,EAAM,GAChDwsB,EAAYC,kBACZD,EAAYzT,YAAcyT,EAAYzT,aACtCuT,EAAWxK,OAAS0K,CACxB,CACA,IAAK,IAAIpJ,EAAM,EAAGsJ,EAAQL,EAAqBhvB,OAAQ+lB,EAAMsJ,EAAOtJ,IAAO,CACvE,IAAIoJ,KAAcH,EAAqBjJ,IAC3BuF,aAAe6D,EAAY7D,cACvC6D,EAAY5D,mBACZV,EAAMjP,EAAKuT,EAAaF,EAAYlJ,IAAQsJ,EAAQ,GACpDF,EAAYC,kBACZD,EAAYzT,YAAcyT,EAAYzT,aACtCuT,EAAWxK,OAAS0K,CACxB,CACA/oB,EAAGkpB,4BACHlpB,EAAGie,UAAW,EACdzI,EAAI6D,SACR,CA/CY8P,CAAiB3T,EAAKxV,EAAIM,IAG9BglB,GAAgBzG,GAChB0E,EAAe/N,EAAKlV,GAExBN,EAAGgpB,kBACHhpB,EAAGsV,YAActV,EAAGsV,aACpBhV,EAAM+d,OAASre,EACfA,EAAGlL,QAAU,EACbkL,EAAG4X,cAAe,CAjElB,CAkEJ,wBCzgBA,SAASwR,EAAUC,GACf,OAAO1S,SAAS0S,EACpB,CAqCO,SAASC,EAAkB9T,EAAKtiB,EAAKwjB,GAKxC,IAJA,IAAI6S,EAA8B,WAAbr2B,EAAI8N,KAnBtB,SAA8BwU,EAAKtiB,EAAKwjB,GAC3C,IAAI9f,EAAQ8f,EAAK9f,MACbC,EAAS6f,EAAK7f,OACd6R,EAAM5C,KAAK4C,IAAI9R,EAAOC,GACtBV,EAAa,MAATjD,EAAIiD,EAAY,GAAMjD,EAAIiD,EAC9BC,EAAa,MAATlD,EAAIkD,EAAY,GAAMlD,EAAIkD,EAC9BqY,EAAa,MAATvb,EAAIub,EAAY,GAAMvb,EAAIub,EAUlC,OATKvb,EAAIob,SACLnY,EAAIA,EAAIS,EAAQ8f,EAAKvgB,EACrBC,EAAIA,EAAIS,EAAS6f,EAAKtgB,EACtBqY,GAAQ/F,GAEZvS,EAAIizB,EAAUjzB,GAAKA,EAAI,GACvBC,EAAIgzB,EAAUhzB,GAAKA,EAAI,GACvBqY,EAAIA,GAAK,GAAK2a,EAAU3a,GAAKA,EAAI,GACZ+G,EAAIgU,qBAAqBrzB,EAAGC,EAAG,EAAGD,EAAGC,EAAGqY,EAEjE,CAGU+a,CAAqBhU,EAAKtiB,EAAKwjB,GAtClC,SAA8BlB,EAAKtiB,EAAKwjB,GAC3C,IAAIvgB,EAAa,MAATjD,EAAIiD,EAAY,EAAIjD,EAAIiD,EAC5BoY,EAAe,MAAVrb,EAAIqb,GAAa,EAAIrb,EAAIqb,GAC9BnY,EAAa,MAATlD,EAAIkD,EAAY,EAAIlD,EAAIkD,EAC5BoY,EAAe,MAAVtb,EAAIsb,GAAa,EAAItb,EAAIsb,GAYlC,OAXKtb,EAAIob,SACLnY,EAAIA,EAAIugB,EAAK9f,MAAQ8f,EAAKvgB,EAC1BoY,EAAKA,EAAKmI,EAAK9f,MAAQ8f,EAAKvgB,EAC5BC,EAAIA,EAAIsgB,EAAK7f,OAAS6f,EAAKtgB,EAC3BoY,EAAKA,EAAKkI,EAAK7f,OAAS6f,EAAKtgB,GAEjCD,EAAIizB,EAAUjzB,GAAKA,EAAI,EACvBoY,EAAK6a,EAAU7a,GAAMA,EAAK,EAC1BnY,EAAIgzB,EAAUhzB,GAAKA,EAAI,EACvBoY,EAAK4a,EAAU5a,GAAMA,EAAK,EACLgH,EAAIiU,qBAAqBtzB,EAAGC,EAAGmY,EAAIC,EAE5D,CAsBUib,CAAqBjU,EAAKtiB,EAAKwjB,GACjCrK,EAAanZ,EAAImZ,WACZvT,EAAI,EAAGA,EAAIuT,EAAWzS,OAAQd,IACnCywB,EAAeG,aAAard,EAAWvT,GAAG7B,OAAQoV,EAAWvT,GAAGkR,OAEpE,OAAOuf,CACX,CACO,SAASI,EAAkBjF,EAAWkF,GACzC,GAAIlF,IAAckF,IAAmBlF,IAAckF,EAC/C,OAAO,EAEX,IAAKlF,IAAckF,GAAkBlF,EAAU9qB,SAAWgwB,EAAchwB,OACpE,OAAO,EAEX,IAAK,IAAId,EAAI,EAAGA,EAAI4rB,EAAU9qB,OAAQd,IAClC,GAAI4rB,EAAU5rB,KAAO8wB,EAAc9wB,GAC/B,OAAO,EAGf,OAAO,CACX,CACA,SAAS+wB,EAAW7nB,GAChB,OAAO8nB,SAAS9nB,EAAK,GACzB,CACO,SAAS+nB,EAAQnQ,EAAMoQ,EAAOtiB,GACjC,IAAIuiB,EAAK,CAAC,QAAS,UAAUD,GACzBE,EAAM,CAAC,cAAe,gBAAgBF,GACtCG,EAAM,CAAC,cAAe,cAAcH,GACpCI,EAAM,CAAC,eAAgB,iBAAiBJ,GAC5C,GAAgB,MAAZtiB,EAAKuiB,IAA4B,SAAbviB,EAAKuiB,GACzB,OAAOI,WAAW3iB,EAAKuiB,IAE3B,IAAIK,EAAMnP,SAASoP,YAAYC,iBAAiB5Q,GAChD,OAASA,EAAKsQ,IAAQL,EAAWS,EAAIL,KAAQJ,EAAWjQ,EAAKlG,MAAMuW,MAC5DJ,EAAWS,EAAIH,KAAS,IACxBN,EAAWS,EAAIF,KAAS,GAAM,CACzC,6OC7EIjX,EAAM,WACN,EAAIV,kBACJU,EAAMrN,KAAKmE,IAAIyI,OAAO6H,kBACd7H,OAAO+X,QAAU/X,OAAO+X,OAAOC,WAAahY,OAAO+X,OAAOE,aAC3D,EAAG,IAEP,IACIpQ,EAAmBpH,EACnByX,EAAsB,GACtBC,EAAmB,OACnBC,EAAoB,OACpBC,EAAsB,8BCZ1B,SAASC,EAAcC,EAAIC,EAAIC,EAAIC,EAAIlK,EAAW/qB,EAAGC,GACxD,GAAkB,IAAd8qB,EACA,OAAO,EAEX,IAAImK,EAAKnK,EACLlE,EAAK,EAET,GAAK5mB,EAAI80B,EAAKG,GAAMj1B,EAAIg1B,EAAKC,GACrBj1B,EAAI80B,EAAKG,GAAMj1B,EAAIg1B,EAAKC,GACxBl1B,EAAI80B,EAAKI,GAAMl1B,EAAIg1B,EAAKE,GACxBl1B,EAAI80B,EAAKI,GAAMl1B,EAAIg1B,EAAKE,EAC5B,OAAO,EAEX,GAAIJ,IAAOE,EAKP,OAAOrlB,KAAKwlB,IAAIn1B,EAAI80B,IAAOI,EAAK,EAEpC,IAAIE,GANAvO,GAAMkO,EAAKE,IAAOH,EAAKE,IAMZh1B,EAAIC,GALT60B,EAAKG,EAAKD,EAAKD,IAAOD,EAAKE,GAOrC,OADSI,EAAMA,GAAOvO,EAAKA,EAAK,IACnBqO,EAAK,EAAIA,EAAK,CAC/B,uGCtBIG,EAAU,KACd,SAASC,EAAc3kB,EAAG+F,GACtB,OAAO/G,KAAKwlB,IAAIxkB,EAAI+F,GAAK2e,CAC7B,CACO,SAASE,EAAQzZ,EAAQ9b,EAAGC,GAC/B,IAAI4X,EAAI,EACJjH,EAAIkL,EAAO,GACf,IAAKlL,EACD,OAAO,EAEX,IAAK,IAAIjO,EAAI,EAAGA,EAAImZ,EAAOrY,OAAQd,IAAK,CACpC,IAAI6yB,EAAK1Z,EAAOnZ,GAChBkV,IAAK,OAAYjH,EAAE,GAAIA,EAAE,GAAI4kB,EAAG,GAAIA,EAAG,GAAIx1B,EAAGC,GAC9C2Q,EAAI4kB,CACR,CACA,IAAIziB,EAAK+I,EAAO,GAIhB,OAHKwZ,EAAc1kB,EAAE,GAAImC,EAAG,KAAQuiB,EAAc1kB,EAAE,GAAImC,EAAG,MACvD8E,IAAK,OAAYjH,EAAE,GAAIA,EAAE,GAAImC,EAAG,GAAIA,EAAG,GAAI/S,EAAGC,IAErC,IAAN4X,CACX,wECpBO,SAASgd,EAAcC,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI0S,EAAW/qB,EAAGC,GAChE,GAAkB,IAAd8qB,EACA,OAAO,EAEX,IAAImK,EAAKnK,EACT,QAAK9qB,EAAI80B,EAAKG,GAAMj1B,EAAIg1B,EAAKC,GAAMj1B,EAAIoY,EAAK6c,GACpCj1B,EAAI80B,EAAKG,GAAMj1B,EAAIg1B,EAAKC,GAAMj1B,EAAIoY,EAAK6c,GACvCl1B,EAAI80B,EAAKI,GAAMl1B,EAAIg1B,EAAKE,GAAMl1B,EAAIoY,EAAK8c,GACvCl1B,EAAI80B,EAAKI,GAAMl1B,EAAIg1B,EAAKE,GAAMl1B,EAAIoY,EAAK8c,KAGvC,QAAsBJ,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAIrY,EAAGC,EAAG,OAChDi1B,EAAK,CACrB,+OCXIO,EAAiB,CAAC,EACf,SAASrY,EAASoU,EAAMC,GAC3BA,EAAOA,GAAQ,KACf,IAAIiE,EAAcD,EAAehE,GAC5BiE,IACDA,EAAcD,EAAehE,GAAQ,IAAI,KAAI,MAEjD,IAAIhxB,EAAQi1B,EAAY/pB,IAAI6lB,GAK5B,OAJa,MAAT/wB,IACAA,EAAQ,KAAYk1B,YAAYnE,EAAMC,GAAMhxB,MAC5Ci1B,EAAYE,IAAIpE,EAAM/wB,IAEnBA,CACX,CACO,SAASo1B,EAAqBrE,EAAMC,EAAMryB,EAAWsyB,GACxD,IAAIjxB,EAAQ2c,EAASoU,EAAMC,GACvB/wB,EAASo1B,EAAcrE,GACvBzxB,EAAI+1B,EAAY,EAAGt1B,EAAOrB,GAC1Ba,EAAI+1B,EAAY,EAAGt1B,EAAQgxB,GAE/B,OADW,IAAI,IAAa1xB,EAAGC,EAAGQ,EAAOC,EAE7C,CACO,SAASb,EAAgB2xB,EAAMC,EAAMryB,EAAWsyB,GACnD,IAAIuE,IAAczE,GAAQ,IAAM,IAAIzV,MAAM,MAE1C,GAAY,IADFka,EAAUxyB,OAEhB,OAAOoyB,EAAqBI,EAAU,GAAIxE,EAAMryB,EAAWsyB,GAI3D,IADA,IAAIwE,EAAa,IAAI,IAAa,EAAG,EAAG,EAAG,GAClCvzB,EAAI,EAAGA,EAAIszB,EAAUxyB,OAAQd,IAAK,CACvC,IAAI4d,EAAOsV,EAAqBI,EAAUtzB,GAAI8uB,EAAMryB,EAAWsyB,GACzD,IAAN/uB,EAAUuzB,EAAWt2B,KAAK2gB,GAAQ2V,EAAWhV,MAAMX,EACvD,CACA,OAAO2V,CAEf,CACO,SAASH,EAAY/1B,EAAGS,EAAOrB,GAOlC,MANkB,UAAdA,EACAY,GAAKS,EAEc,WAAdrB,IACLY,GAAKS,EAAQ,GAEVT,CACX,CACO,SAASg2B,EAAY/1B,EAAGS,EAAQP,GAOnC,MANsB,WAAlBA,EACAF,GAAKS,EAAS,EAES,WAAlBP,IACLF,GAAKS,GAEFT,CACX,CACO,SAAS61B,EAAcrE,GAC1B,OAAOrU,EAAS,IAAKqU,EACzB,CAIO,SAAS0E,EAAanzB,EAAOozB,GAChC,MAAqB,iBAAVpzB,EACHA,EAAMqzB,YAAY,MAAQ,EACnBnC,WAAWlxB,GAAS,IAAMozB,EAE9BlC,WAAWlxB,GAEfA,CACX,CACO,SAASjD,EAAsBmT,EAAK3B,EAAMgP,GAC7C,IAAI+V,EAAe/kB,EAAK7R,UAAY,SAChC62B,EAA4B,MAAjBhlB,EAAKglB,SAAmBhlB,EAAKglB,SAAW,EACnD71B,EAAS6f,EAAK7f,OACdD,EAAQ8f,EAAK9f,MACb+1B,EAAa91B,EAAS,EACtBV,EAAIugB,EAAKvgB,EACTC,EAAIsgB,EAAKtgB,EACTb,EAAY,OACZC,EAAoB,MACxB,GAAIi3B,aAAwBnpB,MACxBnN,GAAKm2B,EAAaG,EAAa,GAAI/V,EAAK9f,OACxCR,GAAKk2B,EAAaG,EAAa,GAAI/V,EAAK7f,QACxCtB,EAAY,KACZC,EAAoB,UAGpB,OAAQi3B,GACJ,IAAK,OACDt2B,GAAKu2B,EACLt2B,GAAKu2B,EACLp3B,EAAY,QACZC,EAAoB,SACpB,MACJ,IAAK,QACDW,GAAKu2B,EAAW91B,EAChBR,GAAKu2B,EACLn3B,EAAoB,SACpB,MACJ,IAAK,MACDW,GAAKS,EAAQ,EACbR,GAAKs2B,EACLn3B,EAAY,SACZC,EAAoB,SACpB,MACJ,IAAK,SACDW,GAAKS,EAAQ,EACbR,GAAKS,EAAS61B,EACdn3B,EAAY,SACZ,MACJ,IAAK,SACDY,GAAKS,EAAQ,EACbR,GAAKu2B,EACLp3B,EAAY,SACZC,EAAoB,SACpB,MACJ,IAAK,aACDW,GAAKu2B,EACLt2B,GAAKu2B,EACLn3B,EAAoB,SACpB,MACJ,IAAK,cACDW,GAAKS,EAAQ81B,EACbt2B,GAAKu2B,EACLp3B,EAAY,QACZC,EAAoB,SACpB,MACJ,IAAK,YACDW,GAAKS,EAAQ,EACbR,GAAKs2B,EACLn3B,EAAY,SACZ,MACJ,IAAK,eACDY,GAAKS,EAAQ,EACbR,GAAKS,EAAS61B,EACdn3B,EAAY,SACZC,EAAoB,SACpB,MACJ,IAAK,gBACDW,GAAKu2B,EACLt2B,GAAKs2B,EACL,MACJ,IAAK,iBACDv2B,GAAKS,EAAQ81B,EACbt2B,GAAKs2B,EACLn3B,EAAY,QACZ,MACJ,IAAK,mBACDY,GAAKu2B,EACLt2B,GAAKS,EAAS61B,EACdl3B,EAAoB,SACpB,MACJ,IAAK,oBACDW,GAAKS,EAAQ81B,EACbt2B,GAAKS,EAAS61B,EACdn3B,EAAY,QACZC,EAAoB,SAShC,OALA6T,EAAMA,GAAO,CAAC,GACVlT,EAAIA,EACRkT,EAAIjT,EAAIA,EACRiT,EAAIhT,MAAQd,EACZ8T,EAAI/S,cAAgBd,EACb6T,CACX,wDCzKA,IAAIujB,EAAgB,EAAV9mB,KAAKE,GACR,SAAS6mB,EAAgBC,GAK5B,OAJAA,GAASF,GACG,IACRE,GAASF,GAENE,CACX,yBCPe,SAASC,EAAY9B,EAAIC,EAAIC,EAAIC,EAAIj1B,EAAGC,GACnD,GAAKA,EAAI80B,GAAM90B,EAAIg1B,GAAQh1B,EAAI80B,GAAM90B,EAAIg1B,EACrC,OAAO,EAEX,GAAIA,IAAOF,EACP,OAAO,EAEX,IAAI8B,GAAK52B,EAAI80B,IAAOE,EAAKF,GACrB+B,EAAM7B,EAAKF,EAAK,GAAK,EACf,IAAN8B,GAAiB,IAANA,IACXC,EAAM7B,EAAKF,EAAK,IAAO,IAE3B,IAAIgC,EAAKF,GAAK7B,EAAKF,GAAMA,EACzB,OAAOiC,IAAO/2B,EAAI6gB,IAAWkW,EAAK/2B,EAAI82B,EAAM,CAChD,kFCZInf,EAAUhI,KAAK4C,IACfykB,EAAUrnB,KAAKmE,IACfmjB,EAAK,IAAI,IACTC,EAAK,IAAI,IACTC,EAAK,IAAI,IACTC,EAAK,IAAI,IACTC,EAAQ,IAAI,IACZC,EAAQ,IAAI,IACZjX,EAAgB,WAChB,SAASA,EAAargB,EAAGC,EAAGQ,EAAOC,GAC3BD,EAAQ,IACRT,GAAQS,EACRA,GAASA,GAETC,EAAS,IACTT,GAAQS,EACRA,GAAUA,GAEdpD,KAAK0C,EAAIA,EACT1C,KAAK2C,EAAIA,EACT3C,KAAKmD,MAAQA,EACbnD,KAAKoD,OAASA,CAClB,CA4LA,OA3LA2f,EAAaziB,UAAUsjB,MAAQ,SAAUqW,GACrC,IAAIv3B,EAAI2X,EAAQ4f,EAAMv3B,EAAG1C,KAAK0C,GAC1BC,EAAI0X,EAAQ4f,EAAMt3B,EAAG3C,KAAK2C,GAC1BugB,SAASljB,KAAK0C,IAAMwgB,SAASljB,KAAKmD,OAClCnD,KAAKmD,MAAQu2B,EAAQO,EAAMv3B,EAAIu3B,EAAM92B,MAAOnD,KAAK0C,EAAI1C,KAAKmD,OAAST,EAGnE1C,KAAKmD,MAAQ82B,EAAM92B,MAEnB+f,SAASljB,KAAK2C,IAAMugB,SAASljB,KAAKoD,QAClCpD,KAAKoD,OAASs2B,EAAQO,EAAMt3B,EAAIs3B,EAAM72B,OAAQpD,KAAK2C,EAAI3C,KAAKoD,QAAUT,EAGtE3C,KAAKoD,OAAS62B,EAAM72B,OAExBpD,KAAK0C,EAAIA,EACT1C,KAAK2C,EAAIA,CACb,EACAogB,EAAaziB,UAAUkC,eAAiB,SAAU3B,GAC9CkiB,EAAavgB,eAAexC,KAAMA,KAAMa,EAC5C,EACAkiB,EAAaziB,UAAU45B,mBAAqB,SAAU9gB,GAClD,IAAI/F,EAAIrT,KACJ60B,EAAKzb,EAAEjW,MAAQkQ,EAAElQ,MACjB2xB,EAAK1b,EAAEhW,OAASiQ,EAAEjQ,OAClBvC,EAAI,OAIR,OAHA,KAAiBA,EAAGA,EAAG,EAAEwS,EAAE3Q,GAAI2Q,EAAE1Q,IACjC,KAAa9B,EAAGA,EAAG,CAACg0B,EAAIC,IACxB,KAAiBj0B,EAAGA,EAAG,CAACuY,EAAE1W,EAAG0W,EAAEzW,IACxB9B,CACX,EACAkiB,EAAaziB,UAAUojB,UAAY,SAAUtK,EAAG+gB,GAC5C,IAAK/gB,EACD,OAAO,EAELA,aAAa2J,IACf3J,EAAI2J,EAAaqX,OAAOhhB,IAE5B,IAAI/F,EAAIrT,KACJq6B,EAAMhnB,EAAE3Q,EACR43B,EAAMjnB,EAAE3Q,EAAI2Q,EAAElQ,MACdo3B,EAAMlnB,EAAE1Q,EACR63B,EAAMnnB,EAAE1Q,EAAI0Q,EAAEjQ,OACdq3B,EAAMrhB,EAAE1W,EACRg4B,EAAMthB,EAAE1W,EAAI0W,EAAEjW,MACdw3B,EAAMvhB,EAAEzW,EACRi4B,EAAMxhB,EAAEzW,EAAIyW,EAAEhW,OACdy3B,IAAYP,EAAMG,GAAOC,EAAML,GAAOG,EAAMG,GAAOC,EAAML,GAC7D,GAAIJ,EAAK,CACL,IAAIW,EAAOvX,IACPwX,EAAO,EACPC,EAAK3oB,KAAKwlB,IAAIyC,EAAMG,GACpBQ,EAAK5oB,KAAKwlB,IAAI6C,EAAML,GACpBa,EAAK7oB,KAAKwlB,IAAI2C,EAAMG,GACpBQ,EAAK9oB,KAAKwlB,IAAI+C,EAAML,GACpB95B,EAAK4R,KAAK4C,IAAI+lB,EAAIC,GAClBv6B,EAAK2R,KAAK4C,IAAIimB,EAAIC,GAClBb,EAAMG,GAAOC,EAAML,EACf55B,EAAKs6B,IACLA,EAAOt6B,EACHu6B,EAAKC,EACL,IAAM3sB,IAAI0rB,GAAQgB,EAAI,GAGtB,IAAM1sB,IAAI0rB,EAAOiB,EAAI,IAKzBx6B,EAAKq6B,IACLA,EAAOr6B,EACHu6B,EAAKC,EACL,IAAM3sB,IAAIyrB,EAAOiB,EAAI,GAGrB,IAAM1sB,IAAIyrB,GAAQkB,EAAI,IAI9BT,EAAMG,GAAOC,EAAML,EACf75B,EAAKq6B,IACLA,EAAOr6B,EACHw6B,EAAKC,EACL,IAAM7sB,IAAI0rB,EAAO,GAAIkB,GAGrB,IAAM5sB,IAAI0rB,EAAO,EAAGmB,IAKxB16B,EAAKq6B,IACLA,EAAOr6B,EACHy6B,EAAKC,EACL,IAAM7sB,IAAIyrB,EAAO,EAAGmB,GAGpB,IAAM5sB,IAAIyrB,EAAO,GAAIoB,GAIrC,CAIA,OAHIhB,GACA,IAAM73B,KAAK63B,EAAKU,EAAUd,EAAQC,GAE/Ba,CACX,EACA9X,EAAaziB,UAAU23B,QAAU,SAAUv1B,EAAGC,GAC1C,IAAIsgB,EAAOjjB,KACX,OAAO0C,GAAKugB,EAAKvgB,GACVA,GAAMugB,EAAKvgB,EAAIugB,EAAK9f,OACpBR,GAAKsgB,EAAKtgB,GACVA,GAAMsgB,EAAKtgB,EAAIsgB,EAAK7f,MAC/B,EACA2f,EAAaziB,UAAU86B,MAAQ,WAC3B,OAAO,IAAIrY,EAAa/iB,KAAK0C,EAAG1C,KAAK2C,EAAG3C,KAAKmD,MAAOnD,KAAKoD,OAC7D,EACA2f,EAAaziB,UAAUgC,KAAO,SAAU23B,GACpClX,EAAazgB,KAAKtC,KAAMi6B,EAC5B,EACAlX,EAAaziB,UAAU+6B,MAAQ,WAC3B,MAAO,CACH34B,EAAG1C,KAAK0C,EACRC,EAAG3C,KAAK2C,EACRQ,MAAOnD,KAAKmD,MACZC,OAAQpD,KAAKoD,OAErB,EACA2f,EAAaziB,UAAU4iB,SAAW,WAC9B,OAAOA,SAASljB,KAAK0C,IACdwgB,SAASljB,KAAK2C,IACdugB,SAASljB,KAAKmD,QACd+f,SAASljB,KAAKoD,OACzB,EACA2f,EAAaziB,UAAU6iB,OAAS,WAC5B,OAAsB,IAAfnjB,KAAKmD,OAA+B,IAAhBnD,KAAKoD,MACpC,EACA2f,EAAaqX,OAAS,SAAUnX,GAC5B,OAAO,IAAIF,EAAaE,EAAKvgB,EAAGugB,EAAKtgB,EAAGsgB,EAAK9f,MAAO8f,EAAK7f,OAC7D,EACA2f,EAAazgB,KAAO,SAAUwE,EAAQyI,GAClCzI,EAAOpE,EAAI6M,EAAO7M,EAClBoE,EAAOnE,EAAI4M,EAAO5M,EAClBmE,EAAO3D,MAAQoM,EAAOpM,MACtB2D,EAAO1D,OAASmM,EAAOnM,MAC3B,EACA2f,EAAavgB,eAAiB,SAAUsE,EAAQyI,EAAQ1O,GACpD,GAAKA,EAAL,CAMA,GAAIA,EAAE,GAAK,MAAQA,EAAE,IAAM,MAAQA,EAAE,GAAK,MAAQA,EAAE,IAAM,KAAM,CAC5D,IAAIg0B,EAAKh0B,EAAE,GACPi0B,EAAKj0B,EAAE,GACPy6B,EAAKz6B,EAAE,GACP06B,EAAK16B,EAAE,GAaX,OAZAiG,EAAOpE,EAAI6M,EAAO7M,EAAImyB,EAAKyG,EAC3Bx0B,EAAOnE,EAAI4M,EAAO5M,EAAImyB,EAAKyG,EAC3Bz0B,EAAO3D,MAAQoM,EAAOpM,MAAQ0xB,EAC9B/tB,EAAO1D,OAASmM,EAAOnM,OAAS0xB,EAC5BhuB,EAAO3D,MAAQ,IACf2D,EAAOpE,GAAKoE,EAAO3D,MACnB2D,EAAO3D,OAAS2D,EAAO3D,YAEvB2D,EAAO1D,OAAS,IAChB0D,EAAOnE,GAAKmE,EAAO1D,OACnB0D,EAAO1D,QAAU0D,EAAO1D,QAGhC,CACAu2B,EAAGj3B,EAAIm3B,EAAGn3B,EAAI6M,EAAO7M,EACrBi3B,EAAGh3B,EAAIm3B,EAAGn3B,EAAI4M,EAAO5M,EACrBi3B,EAAGl3B,EAAIo3B,EAAGp3B,EAAI6M,EAAO7M,EAAI6M,EAAOpM,MAChCy2B,EAAGj3B,EAAIk3B,EAAGl3B,EAAI4M,EAAO5M,EAAI4M,EAAOnM,OAChCu2B,EAAG74B,UAAUD,GACbi5B,EAAGh5B,UAAUD,GACb+4B,EAAG94B,UAAUD,GACbg5B,EAAG/4B,UAAUD,GACbiG,EAAOpE,EAAI2X,EAAQsf,EAAGj3B,EAAGk3B,EAAGl3B,EAAGm3B,EAAGn3B,EAAGo3B,EAAGp3B,GACxCoE,EAAOnE,EAAI0X,EAAQsf,EAAGh3B,EAAGi3B,EAAGj3B,EAAGk3B,EAAGl3B,EAAGm3B,EAAGn3B,GACxC,IAAI64B,EAAO9B,EAAQC,EAAGj3B,EAAGk3B,EAAGl3B,EAAGm3B,EAAGn3B,EAAGo3B,EAAGp3B,GACpC+4B,EAAO/B,EAAQC,EAAGh3B,EAAGi3B,EAAGj3B,EAAGk3B,EAAGl3B,EAAGm3B,EAAGn3B,GACxCmE,EAAO3D,MAAQq4B,EAAO10B,EAAOpE,EAC7BoE,EAAO1D,OAASq4B,EAAO30B,EAAOnE,CAjC9B,MAJQmE,IAAWyI,GACXwT,EAAazgB,KAAKwE,EAAQyI,EAqCtC,EACOwT,CACX,CA3MmB,GA4MnB,2BCtNA,IAAI+C,EAAY,WACZ,SAASA,EAAS4V,GACVA,IACA17B,KAAK27B,iBAAmBD,EAEhC,CA0JA,OAzJA5V,EAASxlB,UAAUs7B,GAAK,SAAUC,EAAOC,EAAOC,EAASv2B,GAChDxF,KAAKg8B,aACNh8B,KAAKg8B,WAAa,CAAC,GAEvB,IAAIC,EAAKj8B,KAAKg8B,WAMd,GALqB,mBAAVF,IACPt2B,EAAUu2B,EACVA,EAAUD,EACVA,EAAQ,OAEPC,IAAYF,EACb,OAAO77B,KAEX,IAAIk8B,EAAiBl8B,KAAK27B,iBACb,MAATG,GAAiBI,GAAkBA,EAAeC,iBAClDL,EAAQI,EAAeC,eAAeL,IAErCG,EAAGJ,KACJI,EAAGJ,GAAS,IAEhB,IAAK,IAAIx2B,EAAI,EAAGA,EAAI42B,EAAGJ,GAAO11B,OAAQd,IAClC,GAAI42B,EAAGJ,GAAOx2B,GAAG+2B,IAAML,EACnB,OAAO/7B,KAGf,IAAIq8B,EAAO,CACPD,EAAGL,EACHD,MAAOA,EACP/Z,IAAMvc,GAAWxF,KACjBs8B,WAAYP,EAAQQ,sBAEpBC,EAAYP,EAAGJ,GAAO11B,OAAS,EAC/Bs2B,EAAWR,EAAGJ,GAAOW,GAIzB,OAHCC,GAAYA,EAASH,WAChBL,EAAGJ,GAAOpyB,OAAO+yB,EAAW,EAAGH,GAC/BJ,EAAGJ,GAAOnzB,KAAK2zB,GACdr8B,IACX,EACA8lB,EAASxlB,UAAUo8B,SAAW,SAAUC,GACpC,IAAIV,EAAKj8B,KAAKg8B,WACd,OAAQC,IAAOA,EAAGU,KAAeV,EAAGU,GAAWx2B,MACnD,EACA2f,EAASxlB,UAAUs8B,IAAM,SAAUC,EAAWd,GAC1C,IAAIE,EAAKj8B,KAAKg8B,WACd,IAAKC,EACD,OAAOj8B,KAEX,IAAK68B,EAED,OADA78B,KAAKg8B,WAAa,CAAC,EACZh8B,KAEX,GAAI+7B,EAAS,CACT,GAAIE,EAAGY,GAAY,CAEf,IADA,IAAIC,EAAU,GACLz3B,EAAI,EAAG03B,EAAId,EAAGY,GAAW12B,OAAQd,EAAI03B,EAAG13B,IACzC42B,EAAGY,GAAWx3B,GAAG+2B,IAAML,GACvBe,EAAQp0B,KAAKuzB,EAAGY,GAAWx3B,IAGnC42B,EAAGY,GAAaC,CACpB,CACIb,EAAGY,IAAuC,IAAzBZ,EAAGY,GAAW12B,eACxB81B,EAAGY,EAElB,aAEWZ,EAAGY,GAEd,OAAO78B,IACX,EACA8lB,EAASxlB,UAAU08B,QAAU,SAAUH,GAEnC,IADA,IAAII,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUh3B,OAAQ+2B,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,IAAKl9B,KAAKg8B,WACN,OAAOh8B,KAEX,IAAIi8B,EAAKj8B,KAAKg8B,WAAWa,GACrBX,EAAiBl8B,KAAK27B,iBAC1B,GAAIM,EAGA,IAFA,IAAImB,EAASH,EAAK92B,OACd2C,EAAMmzB,EAAG91B,OACJd,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CAC1B,IAAIg4B,EAAQpB,EAAG52B,GACf,IAAI62B,IACGA,EAAeoB,QACA,MAAfD,EAAMvB,OACLI,EAAeoB,OAAOT,EAAWQ,EAAMvB,OAG/C,OAAQsB,GACJ,KAAK,EACDC,EAAMjB,EAAEtsB,KAAKutB,EAAMtb,KACnB,MACJ,KAAK,EACDsb,EAAMjB,EAAEtsB,KAAKutB,EAAMtb,IAAKkb,EAAK,IAC7B,MACJ,KAAK,EACDI,EAAMjB,EAAEtsB,KAAKutB,EAAMtb,IAAKkb,EAAK,GAAIA,EAAK,IACtC,MACJ,QACII,EAAMjB,EAAEmB,MAAMF,EAAMtb,IAAKkb,GAGrC,CAIJ,OAFAf,GAAkBA,EAAesB,cAC1BtB,EAAesB,aAAaX,GAC5B78B,IACX,EACA8lB,EAASxlB,UAAUm9B,mBAAqB,SAAUlwB,GAE9C,IADA,IAAI0vB,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUh3B,OAAQ+2B,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,IAAKl9B,KAAKg8B,WACN,OAAOh8B,KAEX,IAAIi8B,EAAKj8B,KAAKg8B,WAAWzuB,GACrB2uB,EAAiBl8B,KAAK27B,iBAC1B,GAAIM,EAIA,IAHA,IAAImB,EAASH,EAAK92B,OACd4b,EAAMkb,EAAKG,EAAS,GACpBt0B,EAAMmzB,EAAG91B,OACJd,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CAC1B,IAAIg4B,EAAQpB,EAAG52B,GACf,IAAI62B,IACGA,EAAeoB,QACA,MAAfD,EAAMvB,OACLI,EAAeoB,OAAO/vB,EAAM8vB,EAAMvB,OAG1C,OAAQsB,GACJ,KAAK,EACDC,EAAMjB,EAAEtsB,KAAKiS,GACb,MACJ,KAAK,EACDsb,EAAMjB,EAAEtsB,KAAKiS,EAAKkb,EAAK,IACvB,MACJ,KAAK,EACDI,EAAMjB,EAAEtsB,KAAKiS,EAAKkb,EAAK,GAAIA,EAAK,IAChC,MACJ,QACII,EAAMjB,EAAEmB,MAAMxb,EAAKkb,EAAK5zB,MAAM,EAAG+zB,EAAS,IAGtD,CAIJ,OAFAlB,GAAkBA,EAAesB,cAC1BtB,EAAesB,aAAajwB,GAC5BvN,IACX,EACO8lB,CACX,CAhKe,GAiKf,6BCjKA,IAAI4X,EACA,SAAenvB,GACXvO,KAAK0F,MAAQ6I,CACjB,EAIAovB,EAAc,WACd,SAASA,IACL39B,KAAK49B,KAAO,CAChB,CA2CA,OA1CAD,EAAWr9B,UAAUu9B,OAAS,SAAUtvB,GACpC,IAAIuvB,EAAQ,IAAIJ,EAAMnvB,GAEtB,OADAvO,KAAK+9B,YAAYD,GACVA,CACX,EACAH,EAAWr9B,UAAUy9B,YAAc,SAAUD,GACpC99B,KAAKg+B,MAINh+B,KAAKi+B,KAAKC,KAAOJ,EACjBA,EAAMK,KAAOn+B,KAAKi+B,KAClBH,EAAMI,KAAO,KACbl+B,KAAKi+B,KAAOH,GANZ99B,KAAKg+B,KAAOh+B,KAAKi+B,KAAOH,EAQ5B99B,KAAK49B,MACT,EACAD,EAAWr9B,UAAU89B,OAAS,SAAUN,GACpC,IAAIK,EAAOL,EAAMK,KACbD,EAAOJ,EAAMI,KACbC,EACAA,EAAKD,KAAOA,EAGZl+B,KAAKg+B,KAAOE,EAEZA,EACAA,EAAKC,KAAOA,EAGZn+B,KAAKi+B,KAAOE,EAEhBL,EAAMI,KAAOJ,EAAMK,KAAO,KAC1Bn+B,KAAK49B,MACT,EACAD,EAAWr9B,UAAUwI,IAAM,WACvB,OAAO9I,KAAK49B,IAChB,EACAD,EAAWr9B,UAAUmkB,MAAQ,WACzBzkB,KAAKg+B,KAAOh+B,KAAKi+B,KAAO,KACxBj+B,KAAK49B,KAAO,CAChB,EACOD,CACX,CA/CiB,GAiDbU,EAAO,WACP,SAASA,EAAIC,GACTt+B,KAAKu+B,MAAQ,IAAIZ,EACjB39B,KAAKw+B,SAAW,GAChBx+B,KAAKy+B,KAAO,CAAC,EACbz+B,KAAKw+B,SAAWF,CACpB,CA6CA,OA5CAD,EAAI/9B,UAAUg4B,IAAM,SAAU54B,EAAKgG,GAC/B,IAAI6iB,EAAOvoB,KAAKu+B,MACZG,EAAM1+B,KAAKy+B,KACXE,EAAU,KACd,GAAgB,MAAZD,EAAIh/B,GAAc,CAClB,IAAIoJ,EAAMyf,EAAKzf,MACXg1B,EAAQ99B,KAAK4+B,kBACjB,GAAI91B,GAAO9I,KAAKw+B,UAAY11B,EAAM,EAAG,CACjC,IAAI+1B,EAAiBtW,EAAKyV,KAC1BzV,EAAK6V,OAAOS,UACLH,EAAIG,EAAen/B,KAC1Bi/B,EAAUE,EAAen5B,MACzB1F,KAAK4+B,kBAAoBC,CAC7B,CACIf,EACAA,EAAMp4B,MAAQA,EAGdo4B,EAAQ,IAAIJ,EAAMh4B,GAEtBo4B,EAAMp+B,IAAMA,EACZ6oB,EAAKwV,YAAYD,GACjBY,EAAIh/B,GAAOo+B,CACf,CACA,OAAOa,CACX,EACAN,EAAI/9B,UAAU+N,IAAM,SAAU3O,GAC1B,IAAIo+B,EAAQ99B,KAAKy+B,KAAK/+B,GAClB6oB,EAAOvoB,KAAKu+B,MAChB,GAAa,MAATT,EAKA,OAJIA,IAAUvV,EAAK0V,OACf1V,EAAK6V,OAAON,GACZvV,EAAKwV,YAAYD,IAEdA,EAAMp4B,KAErB,EACA24B,EAAI/9B,UAAUmkB,MAAQ,WAClBzkB,KAAKu+B,MAAM9Z,QACXzkB,KAAKy+B,KAAO,CAAC,CACjB,EACAJ,EAAI/9B,UAAUwI,IAAM,WAChB,OAAO9I,KAAKu+B,MAAMz1B,KACtB,EACOu1B,CACX,CApDU,GAqDV,6CC5GIS,EAAS,CAAC,EAAG,GACbC,EAAU,CAAC,EAAG,GACdhF,EAAQ,IAAI,IACZC,EAAQ,IAAI,IACZgF,EAAwB,WACxB,SAASA,EAAqB/b,EAAMniB,GAChCd,KAAKi/B,SAAW,GAChBj/B,KAAKk/B,MAAQ,GACbl/B,KAAKm/B,QAAU,CAAC,EAAG,GACnB,IAAK,IAAI95B,EAAI,EAAGA,EAAI,EAAGA,IACnBrF,KAAKi/B,SAAS55B,GAAK,IAAI,IAE3B,IAASA,EAAI,EAAGA,EAAI,EAAGA,IACnBrF,KAAKk/B,MAAM75B,GAAK,IAAI,IAEpB4d,GACAjjB,KAAKo/B,iBAAiBnc,EAAMniB,EAEpC,CAkGA,OAjGAk+B,EAAqB1+B,UAAU8+B,iBAAmB,SAAUnc,EAAMniB,GAC9D,IAAIu+B,EAAUr/B,KAAKi/B,SACfK,EAAOt/B,KAAKk/B,MACZx8B,EAAIugB,EAAKvgB,EACTC,EAAIsgB,EAAKtgB,EACTmY,EAAKpY,EAAIugB,EAAK9f,MACd4X,EAAKpY,EAAIsgB,EAAK7f,OAKlB,GAJAi8B,EAAQ,GAAG/wB,IAAI5L,EAAGC,GAClB08B,EAAQ,GAAG/wB,IAAIwM,EAAInY,GACnB08B,EAAQ,GAAG/wB,IAAIwM,EAAIC,GACnBskB,EAAQ,GAAG/wB,IAAI5L,EAAGqY,GACdja,EACA,IAAK,IAAIuE,EAAI,EAAGA,EAAI,EAAGA,IACnBg6B,EAAQh6B,GAAGvE,UAAUA,GAG7B,IAAMy+B,IAAID,EAAK,GAAID,EAAQ,GAAIA,EAAQ,IACvC,IAAME,IAAID,EAAK,GAAID,EAAQ,GAAIA,EAAQ,IACvCC,EAAK,GAAGE,YACRF,EAAK,GAAGE,YACR,IAASn6B,EAAI,EAAGA,EAAI,EAAGA,IACnBrF,KAAKm/B,QAAQ95B,GAAKi6B,EAAKj6B,GAAGo6B,IAAIJ,EAAQ,GAE9C,EACAL,EAAqB1+B,UAAUojB,UAAY,SAAUuW,EAAOE,GACxD,IAAIuF,GAAa,EACbC,GAASxF,EAGb,OAFAJ,EAAMzrB,IAAIiV,IAAUA,KACpByW,EAAM1rB,IAAI,EAAG,IACRtO,KAAK4/B,uBAAuB5/B,KAAMi6B,EAAOF,EAAOC,EAAO2F,EAAO,KAC/DD,GAAa,EACTC,KAIH3/B,KAAK4/B,uBAAuB3F,EAAOj6B,KAAM+5B,EAAOC,EAAO2F,GAAQ,KAChED,GAAa,EACTC,IAIHA,GACD,IAAMr9B,KAAK63B,EAAKuF,EAAa3F,EAAQC,GAV1B0F,CAanB,EACAV,EAAqB1+B,UAAUs/B,uBAAyB,SAAU3xB,EAAMgsB,EAAOF,EAAOC,EAAO2F,EAAOE,GAEhG,IADA,IAAIH,GAAa,EACRr6B,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAIy6B,EAAO9/B,KAAKk/B,MAAM75B,GAGtB,GAFArF,KAAK+/B,qBAAqB16B,EAAG4I,EAAKgxB,SAAUH,GAC5C9+B,KAAK+/B,qBAAqB16B,EAAG40B,EAAMgF,SAAUF,GACzCD,EAAO,GAAKC,EAAQ,IAAMD,EAAO,GAAKC,EAAQ,GAAI,CAElD,GADAW,GAAa,EACTC,EACA,OAAOD,EAEX,IAAIM,EAAQ3tB,KAAKwlB,IAAIkH,EAAQ,GAAKD,EAAO,IACrCmB,EAAQ5tB,KAAKwlB,IAAIiH,EAAO,GAAKC,EAAQ,IACrC1sB,KAAK4C,IAAI+qB,EAAOC,GAASjG,EAAMlxB,QAC3Bk3B,EAAQC,EACR,IAAM5d,MAAM2X,EAAO8F,GAAOE,EAAQH,GAGlC,IAAMxd,MAAM2X,EAAO8F,EAAMG,EAAQJ,GAG7C,MACK,GAAI9F,EAAO,CACRiG,EAAQ3tB,KAAKwlB,IAAIkH,EAAQ,GAAKD,EAAO,IACrCmB,EAAQ5tB,KAAKwlB,IAAIiH,EAAO,GAAKC,EAAQ,IACrC1sB,KAAK4C,IAAI+qB,EAAOC,GAASlG,EAAMjxB,QAC3Bk3B,EAAQC,EACR,IAAM5d,MAAM0X,EAAO+F,EAAME,EAAQH,GAGjC,IAAMxd,MAAM0X,EAAO+F,GAAOG,EAAQJ,GAG9C,CACJ,CACA,OAAOH,CACX,EACAV,EAAqB1+B,UAAUy/B,qBAAuB,SAAUG,EAAKb,EAASzpB,GAM1E,IALA,IAAIkqB,EAAO9/B,KAAKk/B,MAAMgB,GAClBn9B,EAAS/C,KAAKm/B,QACdgB,EAAOd,EAAQ,GAAGI,IAAIK,GAAQ/8B,EAAOm9B,GACrCjrB,EAAMkrB,EACN3pB,EAAM2pB,EACD96B,EAAI,EAAGA,EAAIg6B,EAAQl5B,OAAQd,IAAK,CACrC,IAAI+6B,EAASf,EAAQh6B,GAAGo6B,IAAIK,GAAQ/8B,EAAOm9B,GAC3CjrB,EAAM5C,KAAK4C,IAAImrB,EAAQnrB,GACvBuB,EAAMnE,KAAKmE,IAAI4pB,EAAQ5pB,EAC3B,CACAZ,EAAI,GAAKX,EACTW,EAAI,GAAKY,CACb,EACOwoB,CACX,CAjH2B,GAkH3B,sHClHIqB,EAAM,CACNC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,GAEHC,EAAU,GACVC,EAAU,GACV7rB,EAAM,GACNuB,EAAM,GACNuqB,EAAO,GACPC,EAAO,GACP3mB,EAAUhI,KAAK4C,IACfykB,EAAUrnB,KAAKmE,IACfyqB,EAAU5uB,KAAKC,IACf4uB,EAAU7uB,KAAKI,IACf0uB,EAAU9uB,KAAKwlB,IACftlB,EAAKF,KAAKE,GACV4mB,EAAW,EAAL5mB,EACN6uB,EAAwC,oBAAjBC,aACvBC,EAAY,GAChB,SAASC,EAAOC,GAEZ,OADQnvB,KAAKovB,MAAMD,EAASjvB,EAAK,KAAO,IAC5B,EAAKA,CACrB,CACO,SAASmvB,EAAmBC,EAAQC,GACvC,IAAIC,EAAgBN,EAAOI,EAAO,IAC9BE,EAAgB,IAChBA,GAAiB1I,GAErB,IAAI2I,EAAQD,EAAgBF,EAAO,GAC/BI,EAAcJ,EAAO,GACzBI,GAAeD,GACVF,GAAiBG,EAAcF,GAAiB1I,EACjD4I,EAAcF,EAAgB1I,EAEzByI,GAAiBC,EAAgBE,GAAe5I,EACrD4I,EAAcF,EAAgB1I,GAExByI,GAAiBC,EAAgBE,EACvCA,EAAcF,GAAiB1I,EAAMoI,EAAOM,EAAgBE,IAEvDH,GAAiBC,EAAgBE,IACtCA,EAAcF,GAAiB1I,EAAMoI,EAAOQ,EAAcF,KAE9DF,EAAO,GAAKE,EACZF,EAAO,GAAKI,CAChB,CACA,IAAIC,EAAa,WACb,SAASA,EAAUC,GACfjiC,KAAK0f,IAAM,EACX1f,KAAKkiC,IAAM,EACXliC,KAAKmiC,IAAM,EACXniC,KAAKoiC,IAAM,EACXpiC,KAAKqiC,IAAM,EACXriC,KAAK49B,KAAO,EACRqE,IACAjiC,KAAKsiC,WAAY,GAEjBtiC,KAAKsiC,YACLtiC,KAAKuiC,KAAO,GAEpB,CAymB6B,IACrBC,EAOR,OAhnBAR,EAAU1hC,UAAUmiC,gBAAkB,WAClCziC,KAAK0iC,UACT,EACAV,EAAU1hC,UAAUqiC,WAAa,WAC7B,OAAO3iC,KAAK0iC,QAChB,EACAV,EAAU1hC,UAAUgzB,SAAW,SAAUuB,EAAIC,EAAIvB,IAC7CA,EAAyBA,GAA0B,GACtB,IACzBvzB,KAAK4iC,IAAMzB,EAAQ5N,EAAyB,KAAMsB,IAAO,EACzD70B,KAAK6iC,IAAM1B,EAAQ5N,EAAyB,KAAMuB,IAAO,EAEjE,EACAkN,EAAU1hC,UAAUozB,OAAS,SAAUhU,GACnC1f,KAAK0f,IAAMA,CACf,EACAsiB,EAAU1hC,UAAUqzB,WAAa,SAAU5R,GACvC/hB,KAAK8iC,KAAO/gB,CAChB,EACAigB,EAAU1hC,UAAU0hB,WAAa,WAC7B,OAAOhiB,KAAK8iC,IAChB,EACAd,EAAU1hC,UAAUyqB,UAAY,WAG5B,OAFA/qB,KAAK8iC,MAAQ9iC,KAAK8iC,KAAK/X,YACvB/qB,KAAK4zB,QACE5zB,IACX,EACAgiC,EAAU1hC,UAAUszB,MAAQ,WACpB5zB,KAAKsiC,YACLtiC,KAAK49B,KAAO,GAEZ59B,KAAK+iC,cACL/iC,KAAK+iC,YAAc,KACnB/iC,KAAKgjC,SAAW,GAEpBhjC,KAAK0iC,UACT,EACAV,EAAU1hC,UAAU2iC,OAAS,SAAUvgC,EAAGC,GAQtC,OAPA3C,KAAKkjC,iBACLljC,KAAKmjC,QAAQ9C,EAAIC,EAAG59B,EAAGC,GACvB3C,KAAK8iC,MAAQ9iC,KAAK8iC,KAAKG,OAAOvgC,EAAGC,GACjC3C,KAAKoiC,IAAM1/B,EACX1C,KAAKqiC,IAAM1/B,EACX3C,KAAKkiC,IAAMx/B,EACX1C,KAAKmiC,IAAMx/B,EACJ3C,IACX,EACAgiC,EAAU1hC,UAAU8iC,OAAS,SAAU1gC,EAAGC,GACtC,IAAIlC,EAAK0gC,EAAQz+B,EAAI1C,KAAKkiC,KACtBxhC,EAAKygC,EAAQx+B,EAAI3C,KAAKmiC,KACtBkB,EAAa5iC,EAAKT,KAAK4iC,KAAOliC,EAAKV,KAAK6iC,IAK5C,GAJA7iC,KAAKmjC,QAAQ9C,EAAIE,EAAG79B,EAAGC,GACnB3C,KAAK8iC,MAAQO,GACbrjC,KAAK8iC,KAAKM,OAAO1gC,EAAGC,GAEpB0gC,EACArjC,KAAKkiC,IAAMx/B,EACX1C,KAAKmiC,IAAMx/B,EACX3C,KAAKsjC,eAAiB,MAErB,CACD,IAAIpI,EAAKz6B,EAAKA,EAAKC,EAAKA,EACpBw6B,EAAKl7B,KAAKsjC,iBACVtjC,KAAKujC,YAAc7gC,EACnB1C,KAAKwjC,YAAc7gC,EACnB3C,KAAKsjC,eAAiBpI,EAE9B,CACA,OAAOl7B,IACX,EACAgiC,EAAU1hC,UAAUmjC,cAAgB,SAAU/L,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,GAQ9D,OAPA3jC,KAAKkjC,iBACLljC,KAAKmjC,QAAQ9C,EAAIG,EAAG9I,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,GACpC3jC,KAAK8iC,MACL9iC,KAAK8iC,KAAKW,cAAc/L,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,GAEhD3jC,KAAKkiC,IAAMwB,EACX1jC,KAAKmiC,IAAMwB,EACJ3jC,IACX,EACAgiC,EAAU1hC,UAAUsjC,iBAAmB,SAAUlM,EAAIC,EAAI7c,EAAIC,GAQzD,OAPA/a,KAAKkjC,iBACLljC,KAAKmjC,QAAQ9C,EAAII,EAAG/I,EAAIC,EAAI7c,EAAIC,GAC5B/a,KAAK8iC,MACL9iC,KAAK8iC,KAAKc,iBAAiBlM,EAAIC,EAAI7c,EAAIC,GAE3C/a,KAAKkiC,IAAMpnB,EACX9a,KAAKmiC,IAAMpnB,EACJ/a,IACX,EACAgiC,EAAU1hC,UAAUujC,IAAM,SAAUC,EAAIC,EAAI/oB,EAAGgpB,EAAYC,EAAUrC,GACjE5hC,KAAKkjC,iBACL5B,EAAU,GAAK0C,EACf1C,EAAU,GAAK2C,EACfvC,EAAmBJ,EAAWM,GAC9BoC,EAAa1C,EAAU,GAEvB,IAAIQ,GADJmC,EAAW3C,EAAU,IACE0C,EAKvB,OAJAhkC,KAAKmjC,QAAQ9C,EAAIK,EAAGoD,EAAIC,EAAI/oB,EAAGA,EAAGgpB,EAAYlC,EAAO,EAAGF,EAAgB,EAAI,GAC5E5hC,KAAK8iC,MAAQ9iC,KAAK8iC,KAAKe,IAAIC,EAAIC,EAAI/oB,EAAGgpB,EAAYC,EAAUrC,GAC5D5hC,KAAKkiC,IAAMjB,EAAQgD,GAAYjpB,EAAI8oB,EACnC9jC,KAAKmiC,IAAMjB,EAAQ+C,GAAYjpB,EAAI+oB,EAC5B/jC,IACX,EACAgiC,EAAU1hC,UAAU4jC,MAAQ,SAAUxM,EAAIC,EAAI7c,EAAIC,EAAIopB,GAKlD,OAJAnkC,KAAKkjC,iBACDljC,KAAK8iC,MACL9iC,KAAK8iC,KAAKoB,MAAMxM,EAAIC,EAAI7c,EAAIC,EAAIopB,GAE7BnkC,IACX,EACAgiC,EAAU1hC,UAAU2iB,KAAO,SAAUvgB,EAAGC,EAAG4X,EAAG6hB,GAI1C,OAHAp8B,KAAKkjC,iBACLljC,KAAK8iC,MAAQ9iC,KAAK8iC,KAAK7f,KAAKvgB,EAAGC,EAAG4X,EAAG6hB,GACrCp8B,KAAKmjC,QAAQ9C,EAAIO,EAAGl+B,EAAGC,EAAG4X,EAAG6hB,GACtBp8B,IACX,EACAgiC,EAAU1hC,UAAU8jC,UAAY,WAC5BpkC,KAAKkjC,iBACLljC,KAAKmjC,QAAQ9C,EAAIM,GACjB,IAAI5e,EAAM/hB,KAAK8iC,KACXtL,EAAKx3B,KAAKoiC,IACV3K,EAAKz3B,KAAKqiC,IAMd,OALItgB,GACAA,EAAIqiB,YAERpkC,KAAKkiC,IAAM1K,EACXx3B,KAAKmiC,IAAM1K,EACJz3B,IACX,EACAgiC,EAAU1hC,UAAUoE,KAAO,SAAUqd,GACjCA,GAAOA,EAAIrd,OACX1E,KAAK6zB,UACT,EACAmO,EAAU1hC,UAAUqE,OAAS,SAAUod,GACnCA,GAAOA,EAAIpd,SACX3E,KAAK6zB,UACT,EACAmO,EAAU1hC,UAAUwI,IAAM,WACtB,OAAO9I,KAAK49B,IAChB,EACAoE,EAAU1hC,UAAU+jC,QAAU,SAAU9B,GACpC,IAAIz5B,EAAMy5B,EAAKp8B,OACTnG,KAAKuiC,MAAQviC,KAAKuiC,KAAKp8B,SAAW2C,IAAQs4B,IAC5CphC,KAAKuiC,KAAO,IAAIlB,aAAav4B,IAEjC,IAAK,IAAIzD,EAAI,EAAGA,EAAIyD,EAAKzD,IACrBrF,KAAKuiC,KAAKl9B,GAAKk9B,EAAKl9B,GAExBrF,KAAK49B,KAAO90B,CAChB,EACAk5B,EAAU1hC,UAAUgkC,WAAa,SAAUhS,GACjCA,aAAgBziB,QAClByiB,EAAO,CAACA,IAKZ,IAHA,IAAIxpB,EAAMwpB,EAAKnsB,OACXo+B,EAAa,EACb/gC,EAASxD,KAAK49B,KACTv4B,EAAI,EAAGA,EAAIyD,EAAKzD,IACrBk/B,GAAcjS,EAAKjtB,GAAGyD,MAEtBs4B,GAAkBphC,KAAKuiC,gBAAgBlB,eACvCrhC,KAAKuiC,KAAO,IAAIlB,aAAa79B,EAAS+gC,IAE1C,IAASl/B,EAAI,EAAGA,EAAIyD,EAAKzD,IAErB,IADA,IAAIm/B,EAAiBlS,EAAKjtB,GAAGk9B,KACpB/xB,EAAI,EAAGA,EAAIg0B,EAAer+B,OAAQqK,IACvCxQ,KAAKuiC,KAAK/+B,KAAYghC,EAAeh0B,GAG7CxQ,KAAK49B,KAAOp6B,CAChB,EACAw+B,EAAU1hC,UAAU6iC,QAAU,SAAUsB,EAAKpxB,EAAG+F,EAAGsrB,EAAGC,EAAGhkC,EAAGikC,EAAGC,EAAGzI,GAC9D,GAAKp8B,KAAKsiC,UAAV,CAGA,IAAIC,EAAOviC,KAAKuiC,KACZviC,KAAK49B,KAAOT,UAAUh3B,OAASo8B,EAAKp8B,SACpCnG,KAAK8kC,cACLvC,EAAOviC,KAAKuiC,MAEhB,IAAK,IAAIl9B,EAAI,EAAGA,EAAI83B,UAAUh3B,OAAQd,IAClCk9B,EAAKviC,KAAK49B,QAAUT,UAAU93B,EAPlC,CASJ,EACA28B,EAAU1hC,UAAU4iC,eAAiB,WAC7BljC,KAAKsjC,eAAiB,IACtBtjC,KAAK8iC,MAAQ9iC,KAAK8iC,KAAKM,OAAOpjC,KAAKujC,YAAavjC,KAAKwjC,aACrDxjC,KAAKsjC,eAAiB,EAE9B,EACAtB,EAAU1hC,UAAUwkC,YAAc,WAC9B,KAAM9kC,KAAKuiC,gBAAgB1yB,OAAQ,CAE/B,IADA,IAAIk1B,EAAU,GACL1/B,EAAI,EAAGA,EAAIrF,KAAK49B,KAAMv4B,IAC3B0/B,EAAQ1/B,GAAKrF,KAAKuiC,KAAKl9B,GAE3BrF,KAAKuiC,KAAOwC,CAChB,CACJ,EACA/C,EAAU1hC,UAAUuzB,SAAW,WAC3B,GAAK7zB,KAAKsiC,UAAV,CAGAtiC,KAAKkjC,iBACL,IAAIX,EAAOviC,KAAKuiC,KACZA,aAAgB1yB,QAChB0yB,EAAKp8B,OAASnG,KAAK49B,KACfwD,GAAiBphC,KAAK49B,KAAO,KAC7B59B,KAAKuiC,KAAO,IAAIlB,aAAakB,IANrC,CASJ,EACAP,EAAU1hC,UAAUiC,gBAAkB,WAClC0S,EAAI,GAAKA,EAAI,GAAK8rB,EAAK,GAAKA,EAAK,GAAKiE,OAAOC,UAC7CzuB,EAAI,GAAKA,EAAI,GAAKwqB,EAAK,GAAKA,EAAK,IAAMgE,OAAOC,UAC9C,IAKI5/B,EALAk9B,EAAOviC,KAAKuiC,KACZ2C,EAAK,EACLC,EAAK,EACL3N,EAAK,EACLC,EAAK,EAET,IAAKpyB,EAAI,EAAGA,EAAIrF,KAAK49B,MAAO,CACxB,IAAI6G,EAAMlC,EAAKl9B,KACX+/B,EAAgB,IAAN//B,EAOd,OANI+/B,IAGA5N,EAFA0N,EAAK3C,EAAKl9B,GAGVoyB,EAFA0N,EAAK5C,EAAKl9B,EAAI,IAIVo/B,GACJ,KAAKpE,EAAIC,EACL4E,EAAK1N,EAAK+K,EAAKl9B,KACf8/B,EAAK1N,EAAK8K,EAAKl9B,KACf07B,EAAK,GAAKvJ,EACVuJ,EAAK,GAAKtJ,EACVuJ,EAAK,GAAKxJ,EACVwJ,EAAK,GAAKvJ,EACV,MACJ,KAAK4I,EAAIE,GACL,QAAS2E,EAAIC,EAAI5C,EAAKl9B,GAAIk9B,EAAKl9B,EAAI,GAAI07B,EAAMC,GAC7CkE,EAAK3C,EAAKl9B,KACV8/B,EAAK5C,EAAKl9B,KACV,MACJ,KAAKg7B,EAAIG,GACL,QAAU0E,EAAIC,EAAI5C,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,GAAIk9B,EAAKl9B,EAAI,GAAI07B,EAAMC,GAC1FkE,EAAK3C,EAAKl9B,KACV8/B,EAAK5C,EAAKl9B,KACV,MACJ,KAAKg7B,EAAII,GACL,QAAcyE,EAAIC,EAAI5C,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,GAAIk9B,EAAKl9B,EAAI,GAAI07B,EAAMC,GACxEkE,EAAK3C,EAAKl9B,KACV8/B,EAAK5C,EAAKl9B,KACV,MACJ,KAAKg7B,EAAIK,EACL,IAAIoD,EAAKvB,EAAKl9B,KACV0+B,EAAKxB,EAAKl9B,KACVggC,EAAK9C,EAAKl9B,KACVigC,EAAK/C,EAAKl9B,KACV2+B,EAAazB,EAAKl9B,KAClB4+B,EAAW1B,EAAKl9B,KAAO2+B,EAC3B3+B,GAAK,EACL,IAAIu8B,GAAiBW,EAAKl9B,KACtB+/B,IACA5N,EAAKyJ,EAAQ+C,GAAcqB,EAAKvB,EAChCrM,EAAKyJ,EAAQ8C,GAAcsB,EAAKvB,IAEpC,QAAQD,EAAIC,EAAIsB,EAAIC,EAAItB,EAAYC,EAAUrC,EAAeb,EAAMC,GACnEkE,EAAKjE,EAAQgD,GAAYoB,EAAKvB,EAC9BqB,EAAKjE,EAAQ+C,GAAYqB,EAAKvB,EAC9B,MACJ,KAAK1D,EAAIO,EACLpJ,EAAK0N,EAAK3C,EAAKl9B,KACfoyB,EAAK0N,EAAK5C,EAAKl9B,KACf,IAAIlC,EAAQo/B,EAAKl9B,KACbjC,EAASm/B,EAAKl9B,MAClB,QAASmyB,EAAIC,EAAID,EAAKr0B,EAAOs0B,EAAKr0B,EAAQ29B,EAAMC,GAChD,MACJ,KAAKX,EAAIM,EACLuE,EAAK1N,EACL2N,EAAK1N,EAGb,KAASxiB,EAAKA,EAAK8rB,GACnB,KAASvqB,EAAKA,EAAKwqB,EACvB,CAIA,OAHU,IAAN37B,IACA4P,EAAI,GAAKA,EAAI,GAAKuB,EAAI,GAAKA,EAAI,GAAK,GAEjC,IAAI,IAAavB,EAAI,GAAIA,EAAI,GAAIuB,EAAI,GAAKvB,EAAI,GAAIuB,EAAI,GAAKvB,EAAI,GAC1E,EACA+sB,EAAU1hC,UAAUilC,iBAAmB,WACnC,IAAIhD,EAAOviC,KAAKuiC,KACZz5B,EAAM9I,KAAK49B,KACX4H,EAAKxlC,KAAK4iC,IACV6C,EAAKzlC,KAAK6iC,IACVqC,EAAK,EACLC,EAAK,EACL3N,EAAK,EACLC,EAAK,EACJz3B,KAAK+iC,cACN/iC,KAAK+iC,YAAc,IAKvB,IAHA,IAAI2C,EAAa1lC,KAAK+iC,YAClB4C,EAAe,EACfC,EAAW,EACNvgC,EAAI,EAAGA,EAAIyD,GAAM,CACtB,IAAI27B,EAAMlC,EAAKl9B,KACX+/B,EAAgB,IAAN//B,EACV+/B,IAGA5N,EAFA0N,EAAK3C,EAAKl9B,GAGVoyB,EAFA0N,EAAK5C,EAAKl9B,EAAI,IAIlB,IAAI03B,GAAK,EACT,OAAQ0H,GACJ,KAAKpE,EAAIC,EACL4E,EAAK1N,EAAK+K,EAAKl9B,KACf8/B,EAAK1N,EAAK8K,EAAKl9B,KACf,MACJ,KAAKg7B,EAAIE,EACL,IAAIzlB,EAAKynB,EAAKl9B,KAGV3E,GAFAqa,EAAKwnB,EAAKl9B,MAEA8/B,GACVhE,EAFA1gC,EAAKqa,EAAKoqB,GAEIM,GAAMrE,EAAQzgC,GAAM+kC,GAAMpgC,IAAMyD,EAAM,KACpDi0B,EAAI1qB,KAAKW,KAAKvS,EAAKA,EAAKC,EAAKA,GAC7BwkC,EAAKpqB,EACLqqB,EAAKpqB,GAET,MAEJ,KAAKslB,EAAIG,EACL,IAAI9I,EAAK6K,EAAKl9B,KACVsyB,EAAK4K,EAAKl9B,KAEV0V,GADAD,EAAKynB,EAAKl9B,KACLk9B,EAAKl9B,MACVq+B,EAAKnB,EAAKl9B,KACVs+B,EAAKpB,EAAKl9B,KACd03B,GAAI,QAAYmI,EAAIC,EAAIzN,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,EAAI,IAChDuB,EAAKxB,EACLyB,EAAKxB,EACL,MAEJ,KAAKtD,EAAII,EACD/I,EAAK6K,EAAKl9B,KACVsyB,EAAK4K,EAAKl9B,KACVyV,EAAKynB,EAAKl9B,KACV0V,EAAKwnB,EAAKl9B,KACd03B,GAAI,QAAgBmI,EAAIC,EAAIzN,EAAIC,EAAI7c,EAAIC,EAAI,IAC5CmqB,EAAKpqB,EACLqqB,EAAKpqB,EACL,MAEJ,KAAKslB,EAAIK,EACL,IAAIoD,EAAKvB,EAAKl9B,KACV0+B,EAAKxB,EAAKl9B,KACVggC,EAAK9C,EAAKl9B,KACVigC,EAAK/C,EAAKl9B,KACV2+B,EAAazB,EAAKl9B,KAClBy8B,EAAQS,EAAKl9B,KACb4+B,EAAWnC,EAAQkC,EACvB3+B,GAAK,EACgBk9B,EAAKl9B,KACtB+/B,IACA5N,EAAKyJ,EAAQ+C,GAAcqB,EAAKvB,EAChCrM,EAAKyJ,EAAQ8C,GAAcsB,EAAKvB,GAEpChH,EAAIrD,EAAQ2L,EAAIC,GAAMjrB,EAAQ8e,EAAK9mB,KAAKwlB,IAAIiK,IAC5CoD,EAAKjE,EAAQgD,GAAYoB,EAAKvB,EAC9BqB,EAAKjE,EAAQ+C,GAAYqB,EAAKvB,EAC9B,MACJ,KAAK1D,EAAIO,EACLpJ,EAAK0N,EAAK3C,EAAKl9B,KACfoyB,EAAK0N,EAAK5C,EAAKl9B,KAGf03B,EAAY,EAFAwF,EAAKl9B,KAEQ,EADZk9B,EAAKl9B,KAElB,MAEJ,KAAKg7B,EAAIM,EACL,IAAIlgC,EAAK+2B,EAAK0N,EACVxkC,EAAK+2B,EAAK0N,EACdpI,EAAI1qB,KAAKW,KAAKvS,EAAKA,EAAKC,EAAKA,GAC7BwkC,EAAK1N,EACL2N,EAAK1N,EAITsF,GAAK,IACL2I,EAAWE,KAAc7I,EACzB4I,GAAgB5I,EAExB,CAEA,OADA/8B,KAAKgjC,SAAW2C,EACTA,CACX,EACA3D,EAAU1hC,UAAUyzB,YAAc,SAAUhS,EAAK7S,GAC7C,IAIIsoB,EACAC,EACAyN,EACAC,EACAziC,EACAC,EAEA+iC,EAIAG,EAEAC,EACAC,EAlBApB,EAAI3kC,KAAKuiC,KACTiD,EAAKxlC,KAAK4iC,IACV6C,EAAKzlC,KAAK6iC,IACV/5B,EAAM9I,KAAK49B,KAOXoI,EAAW92B,EAAU,EAGrB+2B,EAAc,EACdL,EAAW,EAEXM,EAAgB,EAGpB,IAAIF,IACKhmC,KAAK+iC,aACN/iC,KAAKulC,mBAETG,EAAa1lC,KAAK+iC,YAElB8C,EAAkB32B,EADHlP,KAAKgjC,UAMxBmD,EAAI,IAAK,IAAI9gC,EAAI,EAAGA,EAAIyD,GAAM,CAC1B,IAAI27B,EAAME,EAAEt/B,KACR+/B,EAAgB,IAAN//B,EAWd,OAVI+/B,IAGA5N,EAFA0N,EAAKP,EAAEt/B,GAGPoyB,EAFA0N,EAAKR,EAAEt/B,EAAI,IAIXo/B,IAAQpE,EAAIE,GAAK2F,EAAgB,IACjCnkB,EAAIqhB,OAAO0C,EAAYC,GACvBG,EAAgB,GAEZzB,GACJ,KAAKpE,EAAIC,EACL9I,EAAK0N,EAAKP,EAAEt/B,KACZoyB,EAAK0N,EAAKR,EAAEt/B,KACZ0c,EAAIkhB,OAAOiC,EAAIC,GACf,MACJ,KAAK9E,EAAIE,EACL79B,EAAIiiC,EAAEt/B,KACN1C,EAAIgiC,EAAEt/B,KACN,IAAI5E,EAAK0gC,EAAQz+B,EAAIwiC,GACjBxkC,EAAKygC,EAAQx+B,EAAIwiC,GACrB,GAAI1kC,EAAK+kC,GAAM9kC,EAAK+kC,EAAI,CACpB,GAAIO,EAAU,CAEV,GAAIC,GADAlJ,GAAI2I,EAAWE,MACGC,EAAiB,CACnC,IAAItM,GAAKsM,EAAkBI,GAAelJ,GAC1Chb,EAAIqhB,OAAO8B,GAAM,EAAI3L,GAAK72B,EAAI62B,EAAG4L,GAAM,EAAI5L,GAAK52B,EAAI42B,GACpD,MAAM4M,CACV,CACAF,GAAelJ,EACnB,CACAhb,EAAIqhB,OAAO1gC,EAAGC,GACduiC,EAAKxiC,EACLyiC,EAAKxiC,EACLujC,EAAgB,CACpB,KACK,CACD,IAAIhL,EAAKz6B,EAAKA,EAAKC,EAAKA,EACpBw6B,EAAKgL,IACLJ,EAAapjC,EACbqjC,EAAapjC,EACbujC,EAAgBhL,EAExB,CACA,MAEJ,KAAKmF,EAAIG,EACL,IAAI9I,EAAKiN,EAAEt/B,KACPsyB,EAAKgN,EAAEt/B,KACPyV,EAAK6pB,EAAEt/B,KACP0V,EAAK4pB,EAAEt/B,KACPq+B,EAAKiB,EAAEt/B,KACPs+B,EAAKgB,EAAEt/B,KACX,GAAI2gC,EAAU,CAEV,GAAIC,GADAlJ,GAAI2I,EAAWE,MACGC,EAAiB,CAC/BtM,GAAKsM,EAAkBI,GAAelJ,IAC1C,QAAemI,EAAIxN,EAAI5c,EAAI4oB,EAAInK,EAAGsH,IAClC,QAAesE,EAAIxN,EAAI5c,EAAI4oB,EAAIpK,EAAGuH,GAClC/e,EAAI0hB,cAAc5C,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,IACtF,MAAMqF,CACV,CACAF,GAAelJ,EACnB,CACAhb,EAAI0hB,cAAc/L,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,GACtCuB,EAAKxB,EACLyB,EAAKxB,EACL,MAEJ,KAAKtD,EAAII,EACD/I,EAAKiN,EAAEt/B,KACPsyB,EAAKgN,EAAEt/B,KACPyV,EAAK6pB,EAAEt/B,KACP0V,EAAK4pB,EAAEt/B,KACX,GAAI2gC,EAAU,CAEV,GAAIC,GADAlJ,GAAI2I,EAAWE,MACGC,EAAiB,CAC/BtM,GAAKsM,EAAkBI,GAAelJ,IAC1C,QAAmBmI,EAAIxN,EAAI5c,EAAIye,EAAGsH,IAClC,QAAmBsE,EAAIxN,EAAI5c,EAAIwe,EAAGuH,GAClC/e,EAAI6hB,iBAAiB/C,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,IACjE,MAAMqF,CACV,CACAF,GAAelJ,EACnB,CACAhb,EAAI6hB,iBAAiBlM,EAAIC,EAAI7c,EAAIC,GACjCmqB,EAAKpqB,EACLqqB,EAAKpqB,EACL,MAEJ,KAAKslB,EAAIK,EACL,IAAIoD,EAAKa,EAAEt/B,KACP0+B,EAAKY,EAAEt/B,KACPggC,EAAKV,EAAEt/B,KACPigC,EAAKX,EAAEt/B,KACP2+B,EAAaW,EAAEt/B,KACfy8B,EAAQ6C,EAAEt/B,KACV+gC,EAAMzB,EAAEt/B,KACRu8B,GAAiB+C,EAAEt/B,KACnB2V,EAAKqqB,EAAKC,EAAMD,EAAKC,EACrBe,EAAYlF,EAAQkE,EAAKC,GAAM,KAC/BrB,EAAWD,EAAalC,EACxBwE,GAAa,EACjB,GAAIN,EAEIC,GADAlJ,GAAI2I,EAAWE,MACGC,IAClB5B,EAAWD,EAAalC,GAAS+D,EAAkBI,GAAelJ,GAClEuJ,GAAa,GAEjBL,GAAelJ,GAQnB,GANIsJ,GAAatkB,EAAIwkB,QACjBxkB,EAAIwkB,QAAQzC,EAAIC,EAAIsB,EAAIC,EAAIc,EAAKpC,EAAYC,EAAUrC,GAGvD7f,EAAI8hB,IAAIC,EAAIC,EAAI/oB,EAAGgpB,EAAYC,EAAUrC,GAEzC0E,EACA,MAAMH,EAENf,IACA5N,EAAKyJ,EAAQ+C,GAAcqB,EAAKvB,EAChCrM,EAAKyJ,EAAQ8C,GAAcsB,EAAKvB,GAEpCmB,EAAKjE,EAAQgD,GAAYoB,EAAKvB,EAC9BqB,EAAKjE,EAAQ+C,GAAYqB,EAAKvB,EAC9B,MACJ,KAAK1D,EAAIO,EACLpJ,EAAK0N,EAAKP,EAAEt/B,GACZoyB,EAAK0N,EAAKR,EAAEt/B,EAAI,GAChB3C,EAAIiiC,EAAEt/B,KACN1C,EAAIgiC,EAAEt/B,KACN,IAAIlC,GAAQwhC,EAAEt/B,KACVjC,GAASuhC,EAAEt/B,KACf,GAAI2gC,EAAU,CAEV,GAAIC,GADAlJ,GAAI2I,EAAWE,MACGC,EAAiB,CACnC,IAAIhnB,GAAMgnB,EAAkBI,EAC5BlkB,EAAIkhB,OAAOvgC,EAAGC,GACdof,EAAIqhB,OAAO1gC,EAAI2X,EAAQwE,GAAK1b,IAAQR,IACpCkc,IAAO1b,IACG,GACN4e,EAAIqhB,OAAO1gC,EAAIS,GAAOR,EAAI0X,EAAQwE,GAAKzb,MAE3Cyb,IAAOzb,IACG,GACN2e,EAAIqhB,OAAO1gC,EAAIg3B,EAAQv2B,GAAQ0b,GAAK,GAAIlc,EAAIS,KAEhDyb,IAAO1b,IACG,GACN4e,EAAIqhB,OAAO1gC,EAAGC,EAAI+2B,EAAQt2B,GAASyb,GAAK,IAE5C,MAAMsnB,CACV,CACAF,GAAelJ,EACnB,CACAhb,EAAIkB,KAAKvgB,EAAGC,EAAGQ,GAAOC,IACtB,MACJ,KAAKi9B,EAAIM,EACL,GAAIqF,EAAU,CACV,IAAIjJ,GACJ,GAAIkJ,GADAlJ,GAAI2I,EAAWE,MACGC,EAAiB,CAC/BtM,GAAKsM,EAAkBI,GAAelJ,GAC1Chb,EAAIqhB,OAAO8B,GAAM,EAAI3L,GAAK/B,EAAK+B,EAAG4L,GAAM,EAAI5L,GAAK9B,EAAK8B,GACtD,MAAM4M,CACV,CACAF,GAAelJ,EACnB,CACAhb,EAAIqiB,YACJc,EAAK1N,EACL2N,EAAK1N,EAEjB,CACJ,EACAuK,EAAU1hC,UAAU86B,MAAQ,WACxB,IAAIoL,EAAW,IAAIxE,EACfO,EAAOviC,KAAKuiC,KAIhB,OAHAiE,EAASjE,KAAOA,EAAKl5B,MAAQk5B,EAAKl5B,QAC5BwG,MAAMvP,UAAU+I,MAAMyG,KAAKyyB,GACjCiE,EAAS5I,KAAO59B,KAAK49B,KACd4I,CACX,EACAxE,EAAU3B,IAAMA,EAChB2B,EAAU30B,mBACFm1B,EAAQR,EAAU1hC,WAChBgiC,WAAY,EAClBE,EAAMI,IAAM,EACZJ,EAAMK,IAAM,EACZL,EAAMc,eAAiB,OACvBd,EAAME,SAAW,IAEdV,CACX,CAhoBgB,GAioBhB,2BCzrBA,IAAIyE,EAAS,WACT,SAASA,EAAM/jC,EAAGC,GACd3C,KAAK0C,EAAIA,GAAK,EACd1C,KAAK2C,EAAIA,GAAK,CAClB,CA0HA,OAzHA8jC,EAAMnmC,UAAUgC,KAAO,SAAU23B,GAG7B,OAFAj6B,KAAK0C,EAAIu3B,EAAMv3B,EACf1C,KAAK2C,EAAIs3B,EAAMt3B,EACR3C,IACX,EACAymC,EAAMnmC,UAAU86B,MAAQ,WACpB,OAAO,IAAIqL,EAAMzmC,KAAK0C,EAAG1C,KAAK2C,EAClC,EACA8jC,EAAMnmC,UAAUgO,IAAM,SAAU5L,EAAGC,GAG/B,OAFA3C,KAAK0C,EAAIA,EACT1C,KAAK2C,EAAIA,EACF3C,IACX,EACAymC,EAAMnmC,UAAUomC,MAAQ,SAAUzM,GAC9B,OAAOA,EAAMv3B,IAAM1C,KAAK0C,GAAKu3B,EAAMt3B,IAAM3C,KAAK2C,CAClD,EACA8jC,EAAMnmC,UAAUqmC,IAAM,SAAU1M,GAG5B,OAFAj6B,KAAK0C,GAAKu3B,EAAMv3B,EAChB1C,KAAK2C,GAAKs3B,EAAMt3B,EACT3C,IACX,EACAymC,EAAMnmC,UAAU+hB,MAAQ,SAAUukB,GAC9B5mC,KAAK0C,GAAKkkC,EACV5mC,KAAK2C,GAAKikC,CACd,EACAH,EAAMnmC,UAAUumC,YAAc,SAAU5M,EAAO2M,GAC3C5mC,KAAK0C,GAAKu3B,EAAMv3B,EAAIkkC,EACpB5mC,KAAK2C,GAAKs3B,EAAMt3B,EAAIikC,CACxB,EACAH,EAAMnmC,UAAUi/B,IAAM,SAAUtF,GAG5B,OAFAj6B,KAAK0C,GAAKu3B,EAAMv3B,EAChB1C,KAAK2C,GAAKs3B,EAAMt3B,EACT3C,IACX,EACAymC,EAAMnmC,UAAUm/B,IAAM,SAAUxF,GAC5B,OAAOj6B,KAAK0C,EAAIu3B,EAAMv3B,EAAI1C,KAAK2C,EAAIs3B,EAAMt3B,CAC7C,EACA8jC,EAAMnmC,UAAUwI,IAAM,WAClB,OAAOuJ,KAAKW,KAAKhT,KAAK0C,EAAI1C,KAAK0C,EAAI1C,KAAK2C,EAAI3C,KAAK2C,EACrD,EACA8jC,EAAMnmC,UAAUwmC,UAAY,WACxB,OAAO9mC,KAAK0C,EAAI1C,KAAK0C,EAAI1C,KAAK2C,EAAI3C,KAAK2C,CAC3C,EACA8jC,EAAMnmC,UAAUk/B,UAAY,WACxB,IAAI12B,EAAM9I,KAAK8I,MAGf,OAFA9I,KAAK0C,GAAKoG,EACV9I,KAAK2C,GAAKmG,EACH9I,IACX,EACAymC,EAAMnmC,UAAU24B,SAAW,SAAUgB,GACjC,IAAIx5B,EAAKT,KAAK0C,EAAIu3B,EAAMv3B,EACpBhC,EAAKV,KAAK2C,EAAIs3B,EAAMt3B,EACxB,OAAO0P,KAAKW,KAAKvS,EAAKA,EAAKC,EAAKA,EACpC,EACA+lC,EAAMnmC,UAAUymC,eAAiB,SAAU9M,GACvC,IAAIx5B,EAAKT,KAAK0C,EAAIu3B,EAAMv3B,EACpBhC,EAAKV,KAAK2C,EAAIs3B,EAAMt3B,EACxB,OAAOlC,EAAKA,EAAKC,EAAKA,CAC1B,EACA+lC,EAAMnmC,UAAU0mC,OAAS,WAGrB,OAFAhnC,KAAK0C,GAAK1C,KAAK0C,EACf1C,KAAK2C,GAAK3C,KAAK2C,EACR3C,IACX,EACAymC,EAAMnmC,UAAUQ,UAAY,SAAUD,GAClC,GAAKA,EAAL,CAGA,IAAI6B,EAAI1C,KAAK0C,EACTC,EAAI3C,KAAK2C,EAGb,OAFA3C,KAAK0C,EAAI7B,EAAE,GAAK6B,EAAI7B,EAAE,GAAK8B,EAAI9B,EAAE,GACjCb,KAAK2C,EAAI9B,EAAE,GAAK6B,EAAI7B,EAAE,GAAK8B,EAAI9B,EAAE,GAC1Bb,IALP,CAMJ,EACAymC,EAAMnmC,UAAU2mC,QAAU,SAAUrxB,GAGhC,OAFAA,EAAI,GAAK5V,KAAK0C,EACdkT,EAAI,GAAK5V,KAAK2C,EACPiT,CACX,EACA6wB,EAAMnmC,UAAU4mC,UAAY,SAAUC,GAClCnnC,KAAK0C,EAAIykC,EAAM,GACfnnC,KAAK2C,EAAIwkC,EAAM,EACnB,EACAV,EAAMn4B,IAAM,SAAUgF,EAAG5Q,EAAGC,GACxB2Q,EAAE5Q,EAAIA,EACN4Q,EAAE3Q,EAAIA,CACV,EACA8jC,EAAMnkC,KAAO,SAAUgR,EAAG4kB,GACtB5kB,EAAE5Q,EAAIw1B,EAAGx1B,EACT4Q,EAAE3Q,EAAIu1B,EAAGv1B,CACb,EACA8jC,EAAM39B,IAAM,SAAUwK,GAClB,OAAOjB,KAAKW,KAAKM,EAAE5Q,EAAI4Q,EAAE5Q,EAAI4Q,EAAE3Q,EAAI2Q,EAAE3Q,EACzC,EACA8jC,EAAMK,UAAY,SAAUxzB,GACxB,OAAOA,EAAE5Q,EAAI4Q,EAAE5Q,EAAI4Q,EAAE3Q,EAAI2Q,EAAE3Q,CAC/B,EACA8jC,EAAMhH,IAAM,SAAUhqB,EAAIC,GACtB,OAAOD,EAAG/S,EAAIgT,EAAGhT,EAAI+S,EAAG9S,EAAI+S,EAAG/S,CACnC,EACA8jC,EAAME,IAAM,SAAU/wB,EAAKH,EAAIC,GAC3BE,EAAIlT,EAAI+S,EAAG/S,EAAIgT,EAAGhT,EAClBkT,EAAIjT,EAAI8S,EAAG9S,EAAI+S,EAAG/S,CACtB,EACA8jC,EAAMlH,IAAM,SAAU3pB,EAAKH,EAAIC,GAC3BE,EAAIlT,EAAI+S,EAAG/S,EAAIgT,EAAGhT,EAClBkT,EAAIjT,EAAI8S,EAAG9S,EAAI+S,EAAG/S,CACtB,EACA8jC,EAAMpkB,MAAQ,SAAUzM,EAAKH,EAAImxB,GAC7BhxB,EAAIlT,EAAI+S,EAAG/S,EAAIkkC,EACfhxB,EAAIjT,EAAI8S,EAAG9S,EAAIikC,CACnB,EACAH,EAAMI,YAAc,SAAUjxB,EAAKH,EAAIC,EAAIkxB,GACvChxB,EAAIlT,EAAI+S,EAAG/S,EAAIgT,EAAGhT,EAAIkkC,EACtBhxB,EAAIjT,EAAI8S,EAAG9S,EAAI+S,EAAG/S,EAAIikC,CAC1B,EACAH,EAAMW,KAAO,SAAUxxB,EAAKH,EAAIC,EAAI6jB,GAChC,IAAI8N,EAAO,EAAI9N,EACf3jB,EAAIlT,EAAI2kC,EAAO5xB,EAAG/S,EAAI62B,EAAI7jB,EAAGhT,EAC7BkT,EAAIjT,EAAI0kC,EAAO5xB,EAAG9S,EAAI42B,EAAI7jB,EAAG/S,CACjC,EACO8jC,CACX,CA/HY,GAgIZ,gHC9HIa,EAAY,KACZvP,EAAU,KACd,SAASwP,EAAgBh5B,GACrB,OAAOA,EAAMwpB,GAAWxpB,GAAM,IAClC,CACA,IAAIi5B,EAAW,GACXC,EAAe,GACfC,EAAkB,OAClB7P,EAAMxlB,KAAKwlB,IACX8P,EAAiB,WACjB,SAASA,IACT,CA0MiC,IACzBnF,EAcR,OAxNAmF,EAAcrnC,UAAUsnC,kBAAoB,SAAU/mC,GAClD,OAAO8mC,EAAcC,kBAAkB5nC,KAAMa,EACjD,EACA8mC,EAAcrnC,UAAUunC,YAAc,SAAUC,GAC5C9nC,KAAK0C,EAAIolC,EAAI,GACb9nC,KAAK2C,EAAImlC,EAAI,EACjB,EACAH,EAAcrnC,UAAUgzB,SAAW,SAAUwU,GACzC9nC,KAAKslB,OAASwiB,EAAI,GAClB9nC,KAAKulB,OAASuiB,EAAI,EACtB,EACAH,EAAcrnC,UAAUynC,QAAU,SAAUD,GACxC9nC,KAAKgoC,MAAQF,EAAI,GACjB9nC,KAAKioC,MAAQH,EAAI,EACrB,EACAH,EAAcrnC,UAAU4nC,UAAY,SAAUJ,GAC1C9nC,KAAKqD,QAAUykC,EAAI,GACnB9nC,KAAKsD,QAAUwkC,EAAI,EACvB,EACAH,EAAcrnC,UAAU6nC,mBAAqB,WACzC,OAAOZ,EAAgBvnC,KAAKgD,WACrBukC,EAAgBvnC,KAAK0C,IACrB6kC,EAAgBvnC,KAAK2C,IACrB4kC,EAAgBvnC,KAAKslB,OAAS,IAC9BiiB,EAAgBvnC,KAAKulB,OAAS,IAC9BgiB,EAAgBvnC,KAAKgoC,QACrBT,EAAgBvnC,KAAKioC,MAChC,EACAN,EAAcrnC,UAAUc,gBAAkB,WACtC,IAAIgnC,EAAkBpoC,KAAKiC,QAAUjC,KAAKiC,OAAOnB,UAC7CqnC,EAAqBnoC,KAAKmoC,qBAC1BtnC,EAAIb,KAAKc,UACPqnC,GAAsBC,GAO5BvnC,EAAIA,GAAK,OACLsnC,EACAnoC,KAAK4nC,kBAAkB/mC,GAGvBymC,EAAUzmC,GAEVunC,IACID,EACA,KAAWtnC,EAAGunC,EAAiBvnC,GAG/B,KAAYA,EAAGunC,IAGvBpoC,KAAKc,UAAYD,EACjBb,KAAKqoC,yBAAyBxnC,IAtBtBA,IACAymC,EAAUzmC,GACVb,KAAKsoC,aAAe,KAqBhC,EACAX,EAAcrnC,UAAU+nC,yBAA2B,SAAUxnC,GACzD,IAAI0nC,EAAmBvoC,KAAKuoC,iBAC5B,GAAwB,MAApBA,GAAiD,IAArBA,EAAwB,CACpDvoC,KAAKqzB,eAAemU,GACpB,IAAIgB,EAAOhB,EAAS,GAAK,GAAK,EAAI,EAC9BiB,EAAOjB,EAAS,GAAK,GAAK,EAAI,EAC9B3S,IAAO2S,EAAS,GAAKgB,GAAQD,EAAmBC,GAAQhB,EAAS,IAAM,EACvE1S,IAAO0S,EAAS,GAAKiB,GAAQF,EAAmBE,GAAQjB,EAAS,IAAM,EAC3E3mC,EAAE,IAAMg0B,EACRh0B,EAAE,IAAMg0B,EACRh0B,EAAE,IAAMi0B,EACRj0B,EAAE,IAAMi0B,CACZ,CACA90B,KAAKsoC,aAAetoC,KAAKsoC,cAAgB,OACzC,KAActoC,KAAKsoC,aAAcznC,EACrC,EACA8mC,EAAcrnC,UAAUooC,qBAAuB,WAG3C,IAFA,IAAIC,EAAgB3oC,KAChB4oC,EAAY,GACTD,GACHC,EAAUlgC,KAAKigC,GACfA,EAAgBA,EAAc1mC,OAElC,KAAO0mC,EAAgBC,EAAU1qB,OAC7ByqB,EAAcvnC,kBAElB,OAAOpB,KAAKc,SAChB,EACA6mC,EAAcrnC,UAAUuoC,kBAAoB,SAAUhoC,GAClD,GAAKA,EAAL,CAGA,IAAIg0B,EAAKh0B,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAC5Bi0B,EAAKj0B,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAC5BmC,EAAWqP,KAAKy2B,MAAMjoC,EAAE,GAAIA,EAAE,IAC9BkoC,EAAS12B,KAAKE,GAAK,EAAIvP,EAAWqP,KAAKy2B,MAAMjoC,EAAE,GAAIA,EAAE,IACzDi0B,EAAKziB,KAAKW,KAAK8hB,GAAMziB,KAAKC,IAAIy2B,GAC9BlU,EAAKxiB,KAAKW,KAAK6hB,GACf70B,KAAKgoC,MAAQe,EACb/oC,KAAKioC,MAAQ,EACbjoC,KAAKgD,UAAYA,EACjBhD,KAAK0C,GAAK7B,EAAE,GACZb,KAAK2C,GAAK9B,EAAE,GACZb,KAAKslB,OAASuP,EACd70B,KAAKulB,OAASuP,EACd90B,KAAKqD,QAAU,EACfrD,KAAKsD,QAAU,CAff,CAgBJ,EACAqkC,EAAcrnC,UAAUS,mBAAqB,WACzC,GAAKf,KAAKc,UAAV,CAGA,IAAImB,EAASjC,KAAKiC,OACdpB,EAAIb,KAAKc,UACTmB,GAAUA,EAAOnB,YACjB,KAAW2mC,EAAcxlC,EAAOqmC,aAAcznC,GAC9CA,EAAI4mC,GAER,IAAIuB,EAAKhpC,KAAKqD,QACV4lC,EAAKjpC,KAAKsD,SACV0lC,GAAMC,KACNvB,EAAgB,GAAKsB,EACrBtB,EAAgB,GAAKuB,EACrB,KAAWxB,EAAc5mC,EAAG6mC,GAC5BD,EAAa,IAAMuB,EACnBvB,EAAa,IAAMwB,EACnBpoC,EAAI4mC,GAERznC,KAAK6oC,kBAAkBhoC,EAjBvB,CAkBJ,EACA8mC,EAAcrnC,UAAU+yB,eAAiB,SAAUzd,GAC/C,IAAI/U,EAAIb,KAAKc,UAEb,OADA8U,EAAMA,GAAO,GACR/U,GAKL+U,EAAI,GAAKvD,KAAKW,KAAKnS,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAC1C+U,EAAI,GAAKvD,KAAKW,KAAKnS,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACtCA,EAAE,GAAK,IACP+U,EAAI,IAAMA,EAAI,IAEd/U,EAAE,GAAK,IACP+U,EAAI,IAAMA,EAAI,IAEXA,IAZHA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAWf,EACA+xB,EAAcrnC,UAAU4oC,sBAAwB,SAAUxmC,EAAGC,GACzD,IAAIwmC,EAAK,CAACzmC,EAAGC,GACT2lC,EAAetoC,KAAKsoC,aAIxB,OAHIA,GACA,KAAsBa,EAAIA,EAAIb,GAE3Ba,CACX,EACAxB,EAAcrnC,UAAU8oC,uBAAyB,SAAU1mC,EAAGC,GAC1D,IAAIwmC,EAAK,CAACzmC,EAAGC,GACT7B,EAAYd,KAAKc,UAIrB,OAHIA,GACA,KAAsBqoC,EAAIA,EAAIroC,GAE3BqoC,CACX,EACAxB,EAAcrnC,UAAUwtB,aAAe,WACnC,IAAIjtB,EAAIb,KAAKc,UACb,OAAOD,GAAKg3B,EAAIh3B,EAAE,GAAK,GAAK,OAASg3B,EAAIh3B,EAAE,GAAK,GAAK,MAC/CwR,KAAKW,KAAK6kB,EAAIh3B,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,KACrC,CACV,EACA8mC,EAAcrnC,UAAU6B,cAAgB,SAAUoN,GAC9CpN,EAAcnC,KAAMuP,EACxB,EACAo4B,EAAcC,kBAAoB,SAAU9gC,EAAQjG,GAChDA,EAAIA,GAAK,GACT,IAAImoC,EAAKliC,EAAOzD,SAAW,EACvB4lC,EAAKniC,EAAOxD,SAAW,EACvBuxB,EAAK/tB,EAAOwe,OACZwP,EAAKhuB,EAAOye,OACZ8jB,EAAKviC,EAAOwiC,QACZC,EAAKziC,EAAO0iC,QACZxmC,EAAW8D,EAAO9D,UAAY,EAC9BN,EAAIoE,EAAOpE,EACXC,EAAImE,EAAOnE,EACXqlC,EAAQlhC,EAAOkhC,MAAQ31B,KAAKo3B,IAAI3iC,EAAOkhC,OAAS,EAChDC,EAAQnhC,EAAOmhC,MAAQ51B,KAAKo3B,KAAK3iC,EAAOmhC,OAAS,EACrD,GAAIe,GAAMC,GAAMI,GAAME,EAAI,CACtB,IAAI9oC,EAAKuoC,EAAKK,EACV3oC,EAAKuoC,EAAKM,EACd1oC,EAAE,IAAMJ,EAAKo0B,EAAKmT,EAAQtnC,EAAKo0B,EAC/Bj0B,EAAE,IAAMH,EAAKo0B,EAAKmT,EAAQxnC,EAAKo0B,CACnC,MAEIh0B,EAAE,GAAKA,EAAE,GAAK,EASlB,OAPAA,EAAE,GAAKg0B,EACPh0B,EAAE,GAAKi0B,EACPj0B,EAAE,GAAKonC,EAAQpT,EACfh0B,EAAE,GAAKmnC,EAAQlT,EACf9xB,GAAY,KAAcnC,EAAGA,EAAGmC,GAChCnC,EAAE,IAAMmoC,EAAKtmC,EACb7B,EAAE,IAAMooC,EAAKtmC,EACN9B,CACX,EACA8mC,EAAct6B,mBACNm1B,EAAQmF,EAAcrnC,WACpBglB,OACFkd,EAAMjd,OACFid,EAAM+F,iBAAmB,OACjC/F,EAAM9/B,EACF8/B,EAAM7/B,EACF6/B,EAAMn/B,QACFm/B,EAAMl/B,QACFk/B,EAAMwF,MACFxF,EAAMyF,MACFzF,EAAMx/B,SACFw/B,EAAM8G,QACF9G,EAAMgH,QAAU,IAE7C7B,CACX,CA5NoB,GA8NT+B,EAAsB,CAC7B,IAAK,IAAK,UAAW,UAAW,UAAW,UAAW,WAAY,SAAU,SAAU,QAAS,SAE5F,SAASvnC,EAAc2E,EAAQyI,GAClC,IAAK,IAAIlK,EAAI,EAAGA,EAAIqkC,EAAoBvjC,OAAQd,IAAK,CACjD,IAAImS,EAAWkyB,EAAoBrkC,GACnCyB,EAAO0Q,GAAYjI,EAAOiI,EAC9B,CACJ,CACA,4BClPA,IAAImyB,EAAgBt3B,KAAKovB,MAAsB,EAAhBpvB,KAAKqW,UAChCkhB,EAAyD,mBAA1Bz7B,OAAOC,eACtCy7B,EAAW,WACX,SAASA,IACL7pC,KAAK8pC,IAAM,cAAgBH,GAC/B,CAkCA,OAjCAE,EAAQvpC,UAAU+N,IAAM,SAAU3O,GAC9B,OAAOM,KAAK+pC,OAAOrqC,GAAKM,KAAK8pC,IACjC,EACAD,EAAQvpC,UAAUgO,IAAM,SAAU5O,EAAKgG,GACnC,IAAIoB,EAAS9G,KAAK+pC,OAAOrqC,GAWzB,OAVIkqC,EACAz7B,OAAOC,eAAetH,EAAQ9G,KAAK8pC,IAAK,CACpCpkC,MAAOA,EACPskC,YAAY,EACZC,cAAc,IAIlBnjC,EAAO9G,KAAK8pC,KAAOpkC,EAEhB1F,IACX,EACA6pC,EAAQvpC,UAAkB,OAAI,SAAUZ,GACpC,QAAIM,KAAKkqC,IAAIxqC,YACFM,KAAK+pC,OAAOrqC,GAAKM,KAAK8pC,MACtB,EAGf,EACAD,EAAQvpC,UAAU4pC,IAAM,SAAUxqC,GAC9B,QAASM,KAAK+pC,OAAOrqC,GAAKM,KAAK8pC,IACnC,EACAD,EAAQvpC,UAAUypC,OAAS,SAAUrqC,GACjC,GAAIA,IAAQyO,OAAOzO,GACf,MAAMyqC,UAAU,8CAEpB,OAAOzqC,CACX,EACOmqC,CACX,CAtCc,GAuCd,uLCvCIxvB,EAAUhI,KAAK4C,IACfykB,EAAUrnB,KAAKmE,IACf0qB,EAAU7uB,KAAKI,IACfwuB,EAAU5uB,KAAKC,IACf6mB,EAAgB,EAAV9mB,KAAKE,GACXnD,EAAQ,OACRg7B,EAAM,OACNC,EAAY,OACT,SAASC,EAAW9rB,EAAQvJ,EAAKuB,GACpC,GAAsB,IAAlBgI,EAAOrY,OAAX,CAQA,IALA,IAAImN,EAAIkL,EAAO,GACX0B,EAAO5M,EAAE,GACTi3B,EAAQj3B,EAAE,GACV6M,EAAM7M,EAAE,GACRk3B,EAASl3B,EAAE,GACNjO,EAAI,EAAGA,EAAImZ,EAAOrY,OAAQd,IAC/BiO,EAAIkL,EAAOnZ,GACX6a,EAAO7F,EAAQ6F,EAAM5M,EAAE,IACvBi3B,EAAQ7Q,EAAQ6Q,EAAOj3B,EAAE,IACzB6M,EAAM9F,EAAQ8F,EAAK7M,EAAE,IACrBk3B,EAAS9Q,EAAQ8Q,EAAQl3B,EAAE,IAE/B2B,EAAI,GAAKiL,EACTjL,EAAI,GAAKkL,EACT3J,EAAI,GAAK+zB,EACT/zB,EAAI,GAAKg0B,CAhBT,CAiBJ,CACO,SAASC,EAASjT,EAAIC,EAAIC,EAAIC,EAAI1iB,EAAKuB,GAC1CvB,EAAI,GAAKoF,EAAQmd,EAAIE,GACrBziB,EAAI,GAAKoF,EAAQod,EAAIE,GACrBnhB,EAAI,GAAKkjB,EAAQlC,EAAIE,GACrBlhB,EAAI,GAAKkjB,EAAQjC,EAAIE,EACzB,CACA,IAAI+S,EAAO,GACPC,EAAO,GACJ,SAASC,EAAUpT,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,EAAI1uB,EAAKuB,GAC3D,IAAIq0B,EAAe,KACfC,EAAU,KACVC,EAAIF,EAAarT,EAAIE,EAAI5c,EAAI4oB,EAAIgH,GACrCz1B,EAAI,GAAKsO,IACTtO,EAAI,GAAKsO,IACT/M,EAAI,IAAM+M,IACV/M,EAAI,IAAM+M,IACV,IAAK,IAAIle,EAAI,EAAGA,EAAI0lC,EAAG1lC,IAAK,CACxB,IAAI3C,EAAIooC,EAAQtT,EAAIE,EAAI5c,EAAI4oB,EAAIgH,EAAKrlC,IACrC4P,EAAI,GAAKoF,EAAQ3X,EAAGuS,EAAI,IACxBuB,EAAI,GAAKkjB,EAAQh3B,EAAG8T,EAAI,GAC5B,CACAu0B,EAAIF,EAAapT,EAAIE,EAAI5c,EAAI4oB,EAAIgH,GACjC,IAAStlC,EAAI,EAAGA,EAAI0lC,EAAG1lC,IAAK,CACxB,IAAI1C,EAAImoC,EAAQrT,EAAIE,EAAI5c,EAAI4oB,EAAIgH,EAAKtlC,IACrC4P,EAAI,GAAKoF,EAAQ1X,EAAGsS,EAAI,IACxBuB,EAAI,GAAKkjB,EAAQ/2B,EAAG6T,EAAI,GAC5B,CACAvB,EAAI,GAAKoF,EAAQmd,EAAIviB,EAAI,IACzBuB,EAAI,GAAKkjB,EAAQlC,EAAIhhB,EAAI,IACzBvB,EAAI,GAAKoF,EAAQqpB,EAAIzuB,EAAI,IACzBuB,EAAI,GAAKkjB,EAAQgK,EAAIltB,EAAI,IACzBvB,EAAI,GAAKoF,EAAQod,EAAIxiB,EAAI,IACzBuB,EAAI,GAAKkjB,EAAQjC,EAAIjhB,EAAI,IACzBvB,EAAI,GAAKoF,EAAQspB,EAAI1uB,EAAI,IACzBuB,EAAI,GAAKkjB,EAAQiK,EAAIntB,EAAI,GAC7B,CACO,SAASw0B,EAAcxT,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI9F,EAAKuB,GACvD,IAAIy0B,EAAoB,KACpBC,EAAc,KACd5P,EAAK5B,EAAQrf,EAAQ4wB,EAAkBzT,EAAIE,EAAI5c,GAAK,GAAI,GACxDygB,EAAK7B,EAAQrf,EAAQ4wB,EAAkBxT,EAAIE,EAAI5c,GAAK,GAAI,GACxDrY,EAAIwoC,EAAY1T,EAAIE,EAAI5c,EAAIwgB,GAC5B34B,EAAIuoC,EAAYzT,EAAIE,EAAI5c,EAAIwgB,GAChCtmB,EAAI,GAAKoF,EAAQmd,EAAI1c,EAAIpY,GACzBuS,EAAI,GAAKoF,EAAQod,EAAI1c,EAAIpY,GACzB6T,EAAI,GAAKkjB,EAAQlC,EAAI1c,EAAIpY,GACzB8T,EAAI,GAAKkjB,EAAQjC,EAAI1c,EAAIpY,EAC7B,CACO,SAASwoC,EAAQzoC,EAAGC,EAAG0iC,EAAIC,EAAItB,EAAYC,EAAUrC,EAAe3sB,EAAKuB,GAC5E,IAAI40B,EAAU,KACVC,EAAU,KACVC,EAAOj5B,KAAKwlB,IAAImM,EAAaC,GACjC,GAAIqH,EAAOnS,EAAM,MAAQmS,EAAO,KAK5B,OAJAr2B,EAAI,GAAKvS,EAAI2iC,EACbpwB,EAAI,GAAKtS,EAAI2iC,EACb9uB,EAAI,GAAK9T,EAAI2iC,OACb7uB,EAAI,GAAK7T,EAAI2iC,GAuBjB,GApBAl2B,EAAM,GAAK6xB,EAAQ+C,GAAcqB,EAAK3iC,EACtC0M,EAAM,GAAK8xB,EAAQ8C,GAAcsB,EAAK3iC,EACtCynC,EAAI,GAAKnJ,EAAQgD,GAAYoB,EAAK3iC,EAClC0nC,EAAI,GAAKlJ,EAAQ+C,GAAYqB,EAAK3iC,EAClCyoC,EAAQn2B,EAAK7F,EAAOg7B,GACpBiB,EAAQ70B,EAAKpH,EAAOg7B,IACpBpG,GAA0B,GACT,IACbA,GAA0B7K,IAE9B8K,GAAsB,GACP,IACXA,GAAsB9K,GAEtB6K,EAAaC,IAAarC,EAC1BqC,GAAY9K,EAEP6K,EAAaC,GAAYrC,IAC9BoC,GAAc7K,GAEdyI,EAAe,CACf,IAAI9J,EAAMmM,EACVA,EAAWD,EACXA,EAAalM,CACjB,CACA,IAAK,IAAIuB,EAAQ,EAAGA,EAAQ4K,EAAU5K,GAAShnB,KAAKE,GAAK,EACjD8mB,EAAQ2K,IACRqG,EAAU,GAAKpJ,EAAQ5H,GAASgM,EAAK3iC,EACrC2nC,EAAU,GAAKnJ,EAAQ7H,GAASiM,EAAK3iC,EACrCyoC,EAAQn2B,EAAKo1B,EAAWp1B,GACxBo2B,EAAQ70B,EAAK6zB,EAAW7zB,GAGpC,iYC1HI+0B,EAAUl5B,KAAKO,IACf44B,EAAWn5B,KAAKW,KAChB+kB,EAAU,KACV0T,EAAkB,KAClBC,EAAaF,EAAS,GACtBG,EAAY,EAAI,EAChBC,GAAM,UACNC,GAAM,UACNC,GAAM,UACV,SAASC,EAAax9B,GAClB,OAAOA,GAAOwpB,GAAWxpB,EAAMwpB,CACnC,CACA,SAASwP,EAAgBh5B,GACrB,OAAOA,EAAMwpB,GAAWxpB,GAAOwpB,CACnC,CACO,SAAS+S,EAAQr1B,EAAIC,EAAIwiB,EAAI8T,EAAIzS,GACpC,IAAI8N,EAAO,EAAI9N,EACf,OAAO8N,EAAOA,GAAQA,EAAO5xB,EAAK,EAAI8jB,EAAI7jB,GACpC6jB,EAAIA,GAAKA,EAAIyS,EAAK,EAAI3E,EAAOnP,EACvC,CACO,SAAS+T,EAAkBx2B,EAAIC,EAAIwiB,EAAI8T,EAAIzS,GAC9C,IAAI8N,EAAO,EAAI9N,EACf,OAAO,KAAO7jB,EAAKD,GAAM4xB,EAAO,GAAKnP,EAAKxiB,GAAM6jB,GAAK8N,GAC9C2E,EAAK9T,GAAMqB,EAAIA,EAC1B,CACO,SAAS2S,EAAYz2B,EAAIC,EAAIwiB,EAAI8T,EAAIz9B,EAAK49B,GAC7C,IAAI94B,EAAI24B,EAAK,GAAKt2B,EAAKwiB,GAAMziB,EACzB2D,EAAI,GAAK8e,EAAU,EAALxiB,EAASD,GACvBivB,EAAI,GAAKhvB,EAAKD,GACdkvB,EAAIlvB,EAAKlH,EACTmyB,EAAItnB,EAAIA,EAAI,EAAI/F,EAAIqxB,EACpB0H,EAAIhzB,EAAIsrB,EAAI,EAAIrxB,EAAIsxB,EACpBnE,EAAIkE,EAAIA,EAAI,EAAItrB,EAAIurB,EACpBoG,EAAI,EACR,GAAIgB,EAAarL,IAAMqL,EAAaK,GAAI,CACpC,GAAIL,EAAa3yB,GACb+yB,EAAM,GAAK,OAGPE,GAAM3H,EAAItrB,IACJ,GAAKizB,GAAM,IACjBF,EAAMpB,KAAOsB,EAGzB,KACK,CACD,IAAIC,EAAOF,EAAIA,EAAI,EAAI1L,EAAIF,EAC3B,GAAIuL,EAAaO,GAAO,CACpB,IAAIC,EAAIH,EAAI1L,EAER8L,GAAMD,EAAI,GADVF,GAAMjzB,EAAI/F,EAAIk5B,IAER,GAAKF,GAAM,IACjBF,EAAMpB,KAAOsB,GAEbG,GAAM,GAAKA,GAAM,IACjBL,EAAMpB,KAAOyB,EAErB,MACK,GAAIF,EAAO,EAAG,CACf,IAAIG,EAAWjB,EAASc,GACpBI,EAAKhM,EAAItnB,EAAI,IAAM/F,IAAM+4B,EAAIK,GAC7BE,EAAKjM,EAAItnB,EAAI,IAAM/F,IAAM+4B,EAAIK,IAa7BJ,IAAOjzB,IAXPszB,EADAA,EAAK,GACCnB,GAASmB,EAAIf,GAGdJ,EAAQmB,EAAIf,KAGjBgB,EADAA,EAAK,GACCpB,GAASoB,EAAIhB,GAGdJ,EAAQoB,EAAIhB,OAEQ,EAAIt4B,KACvB,GAAKg5B,GAAM,IACjBF,EAAMpB,KAAOsB,EAErB,KACK,CACD,IAAIO,GAAK,EAAIlM,EAAItnB,EAAI,EAAI/F,EAAI+4B,IAAM,EAAIZ,EAAS9K,EAAIA,EAAIA,IACpDmM,EAAQx6B,KAAKy6B,KAAKF,GAAK,EACvBG,EAAQvB,EAAS9K,GACjB5I,EAAMzlB,KAAKC,IAAIu6B,GACfR,IAAOjzB,EAAI,EAAI2zB,EAAQjV,IAAQ,EAAIzkB,GAEnC25B,GADAR,IAAOpzB,EAAI2zB,GAASjV,EAAM4T,EAAar5B,KAAKI,IAAIo6B,MAAY,EAAIx5B,KACzD+F,EAAI2zB,GAASjV,EAAM4T,EAAar5B,KAAKI,IAAIo6B,MAAY,EAAIx5B,IAChEg5B,GAAM,GAAKA,GAAM,IACjBF,EAAMpB,KAAOsB,GAEbG,GAAM,GAAKA,GAAM,IACjBL,EAAMpB,KAAOyB,GAEbQ,GAAM,GAAKA,GAAM,IACjBb,EAAMpB,KAAOiC,EAErB,CACJ,CACA,OAAOjC,CACX,CACO,SAASF,EAAap1B,EAAIC,EAAIwiB,EAAI8T,EAAIiB,GACzC,IAAI7zB,EAAI,EAAI8e,EAAK,GAAKxiB,EAAK,EAAID,EAC3BpC,EAAI,EAAIqC,EAAK,EAAIs2B,EAAK,EAAIv2B,EAAK,EAAIyiB,EACnCwM,EAAI,EAAIhvB,EAAK,EAAID,EACjBs1B,EAAI,EACR,GAAIgB,EAAa14B,GAAI,CACjB,GAAIk0B,EAAgBnuB,IACZizB,GAAM3H,EAAItrB,IACJ,GAAKizB,GAAM,IACjBY,EAAQlC,KAAOsB,EAG3B,KACK,CACD,IAAIC,EAAOlzB,EAAIA,EAAI,EAAI/F,EAAIqxB,EAC3B,GAAIqH,EAAaO,GACbW,EAAQ,IAAM7zB,GAAK,EAAI/F,QAEtB,GAAIi5B,EAAO,EAAG,CACf,IACID,EADAI,EAAWjB,EAASc,GAEpBE,IAAOpzB,EAAIqzB,IAAa,EAAIp5B,IAD5Bg5B,IAAOjzB,EAAIqzB,IAAa,EAAIp5B,KAEtB,GAAKg5B,GAAM,IACjBY,EAAQlC,KAAOsB,GAEfG,GAAM,GAAKA,GAAM,IACjBS,EAAQlC,KAAOyB,EAEvB,CACJ,CACA,OAAOzB,CACX,CACO,SAASmC,EAAez3B,EAAIC,EAAIwiB,EAAI8T,EAAIzS,EAAG3jB,GAC9C,IAAIu3B,GAAOz3B,EAAKD,GAAM8jB,EAAI9jB,EACtB23B,GAAOlV,EAAKxiB,GAAM6jB,EAAI7jB,EACtB23B,GAAOrB,EAAK9T,GAAMqB,EAAIrB,EACtBoV,GAAQF,EAAMD,GAAO5T,EAAI4T,EACzBI,GAAQF,EAAMD,GAAO7T,EAAI6T,EACzBI,GAASD,EAAOD,GAAQ/T,EAAI+T,EAChC13B,EAAI,GAAKH,EACTG,EAAI,GAAKu3B,EACTv3B,EAAI,GAAK03B,EACT13B,EAAI,GAAK43B,EACT53B,EAAI,GAAK43B,EACT53B,EAAI,GAAK23B,EACT33B,EAAI,GAAKy3B,EACTz3B,EAAI,GAAKo2B,CACb,CACO,SAASyB,EAAkBjW,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,EAAIjhC,EAAGC,EAAGiT,GACpE,IAAI2jB,EAGA4E,EACAD,EACAjD,EACAC,EALA5gB,EAAW,KACXqqB,EAAIphB,IAKRqoB,EAAI,GAAKlpC,EACTkpC,EAAI,GAAKjpC,EACT,IAAK,IAAI+qC,EAAK,EAAGA,EAAK,EAAGA,GAAM,IAC3B7B,EAAI,GAAKf,EAAQtT,EAAIE,EAAI5c,EAAI4oB,EAAIgK,GACjC7B,EAAI,GAAKf,EAAQrT,EAAIE,EAAI5c,EAAI4oB,EAAI+J,IACjCzS,GAAK,QAAa2Q,EAAKC,IACdlH,IACLpL,EAAImU,EACJ/I,EAAI1J,GAGZ0J,EAAIphB,IACJ,IAAK,IAAIle,EAAI,EAAGA,EAAI,MACZiV,EAAWmxB,GADKpmC,IAIpB84B,EAAO5E,EAAIjf,EACX4jB,EAAO3E,EAAIjf,EACXuxB,EAAI,GAAKf,EAAQtT,EAAIE,EAAI5c,EAAI4oB,EAAIvF,GACjC0N,EAAI,GAAKf,EAAQrT,EAAIE,EAAI5c,EAAI4oB,EAAIxF,GACjClD,GAAK,QAAa4Q,EAAKD,GACnBzN,GAAQ,GAAKlD,EAAK0J,GAClBpL,EAAI4E,EACJwG,EAAI1J,IAGJ6Q,EAAI,GAAKhB,EAAQtT,EAAIE,EAAI5c,EAAI4oB,EAAIxF,GACjC4N,EAAI,GAAKhB,EAAQrT,EAAIE,EAAI5c,EAAI4oB,EAAIzF,GACjChD,GAAK,QAAa4Q,EAAKF,GACnB1N,GAAQ,GAAKhD,EAAKyJ,GAClBpL,EAAI2E,EACJyG,EAAIzJ,GAGJ5gB,GAAY,IAQxB,OAJI1E,IACAA,EAAI,GAAKk1B,EAAQtT,EAAIE,EAAI5c,EAAI4oB,EAAInK,GACjC3jB,EAAI,GAAKk1B,EAAQrT,EAAIE,EAAI5c,EAAI4oB,EAAIpK,IAE9BiS,EAAS7G,EACpB,CACO,SAASgJ,EAAYnW,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,EAAIiK,GAKxD,IAJA,IAAIC,EAAKrW,EACLsW,EAAKrW,EACLkN,EAAI,EACJ9vB,EAAO,EAAI+4B,EACNvoC,EAAI,EAAGA,GAAKuoC,EAAWvoC,IAAK,CACjC,IAAIk0B,EAAIl0B,EAAIwP,EACRnS,EAAIooC,EAAQtT,EAAIE,EAAI5c,EAAI4oB,EAAInK,GAC5B52B,EAAImoC,EAAQrT,EAAIE,EAAI5c,EAAI4oB,EAAIpK,GAC5B94B,EAAKiC,EAAImrC,EACTntC,EAAKiC,EAAImrC,EACbnJ,GAAKtyB,KAAKW,KAAKvS,EAAKA,EAAKC,EAAKA,GAC9BmtC,EAAKnrC,EACLorC,EAAKnrC,CACT,CACA,OAAOgiC,CACX,CACO,SAASuG,EAAYz1B,EAAIC,EAAIwiB,EAAIqB,GACpC,IAAI8N,EAAO,EAAI9N,EACf,OAAO8N,GAAQA,EAAO5xB,EAAK,EAAI8jB,EAAI7jB,GAAM6jB,EAAIA,EAAIrB,CACrD,CACO,SAAS6V,EAAsBt4B,EAAIC,EAAIwiB,EAAIqB,GAC9C,OAAO,IAAM,EAAIA,IAAM7jB,EAAKD,GAAM8jB,GAAKrB,EAAKxiB,GAChD,CACO,SAASs4B,EAAgBv4B,EAAIC,EAAIwiB,EAAI3pB,EAAK49B,GAC7C,IAAI94B,EAAIoC,EAAK,EAAIC,EAAKwiB,EAClB9e,EAAI,GAAK1D,EAAKD,GACdivB,EAAIjvB,EAAKlH,EACTw8B,EAAI,EACR,GAAIgB,EAAa14B,GAAI,CACjB,GAAIk0B,EAAgBnuB,IACZizB,GAAM3H,EAAItrB,IACJ,GAAKizB,GAAM,IACjBF,EAAMpB,KAAOsB,EAGzB,KACK,CACD,IAAIC,EAAOlzB,EAAIA,EAAI,EAAI/F,EAAIqxB,EAC3B,GAAIqH,EAAaO,IACTD,GAAMjzB,GAAK,EAAI/F,KACT,GAAKg5B,GAAM,IACjBF,EAAMpB,KAAOsB,QAGhB,GAAIC,EAAO,EAAG,CACf,IACID,EADAI,EAAWjB,EAASc,GAEpBE,IAAOpzB,EAAIqzB,IAAa,EAAIp5B,IAD5Bg5B,IAAOjzB,EAAIqzB,IAAa,EAAIp5B,KAEtB,GAAKg5B,GAAM,IACjBF,EAAMpB,KAAOsB,GAEbG,GAAM,GAAKA,GAAM,IACjBL,EAAMpB,KAAOyB,EAErB,CACJ,CACA,OAAOzB,CACX,CACO,SAASE,EAAkBx1B,EAAIC,EAAIwiB,GACtC,IAAI+V,EAAUx4B,EAAKyiB,EAAK,EAAIxiB,EAC5B,OAAgB,IAAZu4B,EACO,IAGCx4B,EAAKC,GAAMu4B,CAE3B,CACO,SAASC,EAAmBz4B,EAAIC,EAAIwiB,EAAIqB,EAAG3jB,GAC9C,IAAIu3B,GAAOz3B,EAAKD,GAAM8jB,EAAI9jB,EACtB23B,GAAOlV,EAAKxiB,GAAM6jB,EAAI7jB,EACtB43B,GAAQF,EAAMD,GAAO5T,EAAI4T,EAC7Bv3B,EAAI,GAAKH,EACTG,EAAI,GAAKu3B,EACTv3B,EAAI,GAAK03B,EACT13B,EAAI,GAAK03B,EACT13B,EAAI,GAAKw3B,EACTx3B,EAAI,GAAKsiB,CACb,CACO,SAASiW,EAAsB3W,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAIrY,EAAGC,EAAGiT,GAChE,IAAI2jB,EACAjf,EAAW,KACXqqB,EAAIphB,IACRqoB,EAAI,GAAKlpC,EACTkpC,EAAI,GAAKjpC,EACT,IAAK,IAAI+qC,EAAK,EAAGA,EAAK,EAAGA,GAAM,IAAM,CACjC7B,EAAI,GAAKX,EAAY1T,EAAIE,EAAI5c,EAAI4yB,GACjC7B,EAAI,GAAKX,EAAYzT,EAAIE,EAAI5c,EAAI2yB,IAC7BzS,GAAK,QAAa2Q,EAAKC,IAClBlH,IACLpL,EAAImU,EACJ/I,EAAI1J,EAEZ,CACA0J,EAAIphB,IACJ,IAAK,IAAIle,EAAI,EAAGA,EAAI,MACZiV,EAAWmxB,GADKpmC,IAAK,CAIzB,IAAI84B,EAAO5E,EAAIjf,EACX4jB,EAAO3E,EAAIjf,EACfuxB,EAAI,GAAKX,EAAY1T,EAAIE,EAAI5c,EAAIqjB,GACjC0N,EAAI,GAAKX,EAAYzT,EAAIE,EAAI5c,EAAIojB,GACjC,IAAIlD,GAAK,QAAa4Q,EAAKD,GAC3B,GAAIzN,GAAQ,GAAKlD,EAAK0J,EAClBpL,EAAI4E,EACJwG,EAAI1J,MAEH,CACD6Q,EAAI,GAAKZ,EAAY1T,EAAIE,EAAI5c,EAAIojB,GACjC4N,EAAI,GAAKZ,EAAYzT,EAAIE,EAAI5c,EAAImjB,GACjC,IAAIhD,GAAK,QAAa4Q,EAAKF,GACvB1N,GAAQ,GAAKhD,EAAKyJ,GAClBpL,EAAI2E,EACJyG,EAAIzJ,GAGJ5gB,GAAY,EAEpB,CACJ,CAKA,OAJI1E,IACAA,EAAI,GAAKs1B,EAAY1T,EAAIE,EAAI5c,EAAIye,GACjC3jB,EAAI,GAAKs1B,EAAYzT,EAAIE,EAAI5c,EAAIwe,IAE9BiS,EAAS7G,EACpB,CACO,SAASyJ,EAAgB5W,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI6yB,GAKpD,IAJA,IAAIC,EAAKrW,EACLsW,EAAKrW,EACLkN,EAAI,EACJ9vB,EAAO,EAAI+4B,EACNvoC,EAAI,EAAGA,GAAKuoC,EAAWvoC,IAAK,CACjC,IAAIk0B,EAAIl0B,EAAIwP,EACRnS,EAAIwoC,EAAY1T,EAAIE,EAAI5c,EAAIye,GAC5B52B,EAAIuoC,EAAYzT,EAAIE,EAAI5c,EAAIwe,GAC5B94B,EAAKiC,EAAImrC,EACTntC,EAAKiC,EAAImrC,EACbnJ,GAAKtyB,KAAKW,KAAKvS,EAAKA,EAAKC,EAAKA,GAC9BmtC,EAAKnrC,EACLorC,EAAKnrC,CACT,CACA,OAAOgiC,CACX,iJCxVI0J,EAAMh8B,KAAKi8B,IAAI,GACnB,SAASC,EAAYC,EAAMC,EAAMC,EAAUC,EAASC,EAASC,GACzD,IAAIC,EAAWH,EAAU,IAAMC,EAC3BG,EAAWP,EAAKroC,OACpB,GAAI0oC,EAAS/hB,eAAegiB,GACxB,OAAOD,EAASC,GAEpB,GAAa,IAATL,EAAY,CACZ,IAAIO,EAAW38B,KAAKovB,MAAMpvB,KAAKi8B,KAAM,GAAKS,GAAY,GAAMH,GAAWP,GACvE,OAAOG,EAAKE,GAAUM,EAC1B,CAGA,IAFA,IAAIC,EAAaN,EAAW,GAAKD,EAC7BQ,EAAcR,EAAW,EACtBC,EAAW,GAAKO,GACnBA,IAGJ,IADA,IAAIC,EAAM,EACDl5B,EAAI,EAAGm5B,EAAc,EAAGn5B,EAAI84B,EAAU94B,IAAK,CAChD,IAAIo5B,EAAS,GAAKp5B,EACZo5B,EAAST,IACXO,IAAQC,EAAc,GAAK,EAAI,GAAKZ,EAAKE,GAAUz4B,GAC7Cs4B,EAAYC,EAAMC,EAAO,EAAGS,EAAaD,EAAYL,EAAUS,EAAQR,GAC7EO,IAER,CAEA,OADAP,EAASC,GAAYK,EACdA,CACX,CACO,SAASG,EAAiBC,EAAKC,GAClC,IAAIC,EAAK,CACL,CAACF,EAAI,GAAIA,EAAI,GAAI,EAAG,EAAG,EAAG,GAAIC,EAAK,GAAKD,EAAI,IAAKC,EAAK,GAAKD,EAAI,IAC/D,CAAC,EAAG,EAAG,EAAGA,EAAI,GAAIA,EAAI,GAAI,GAAIC,EAAK,GAAKD,EAAI,IAAKC,EAAK,GAAKD,EAAI,IAC/D,CAACA,EAAI,GAAIA,EAAI,GAAI,EAAG,EAAG,EAAG,GAAIC,EAAK,GAAKD,EAAI,IAAKC,EAAK,GAAKD,EAAI,IAC/D,CAAC,EAAG,EAAG,EAAGA,EAAI,GAAIA,EAAI,GAAI,GAAIC,EAAK,GAAKD,EAAI,IAAKC,EAAK,GAAKD,EAAI,IAC/D,CAACA,EAAI,GAAIA,EAAI,GAAI,EAAG,EAAG,EAAG,GAAIC,EAAK,GAAKD,EAAI,IAAKC,EAAK,GAAKD,EAAI,IAC/D,CAAC,EAAG,EAAG,EAAGA,EAAI,GAAIA,EAAI,GAAI,GAAIC,EAAK,GAAKD,EAAI,IAAKC,EAAK,GAAKD,EAAI,IAC/D,CAACA,EAAI,GAAIA,EAAI,GAAI,EAAG,EAAG,EAAG,GAAIC,EAAK,GAAKD,EAAI,IAAKC,EAAK,GAAKD,EAAI,IAC/D,CAAC,EAAG,EAAG,EAAGA,EAAI,GAAIA,EAAI,GAAI,GAAIC,EAAK,GAAKD,EAAI,IAAKC,EAAK,GAAKD,EAAI,KAE/DV,EAAW,CAAC,EACZa,EAAMnB,EAAYkB,EAAI,EAAG,EAAG,EAAG,EAAGZ,GACtC,GAAY,IAARa,EAAJ,CAIA,IADA,IAAIC,EAAK,GACAtqC,EAAI,EAAGA,EAAI,EAAGA,IACnB,IAAK,IAAI4Q,EAAI,EAAGA,EAAI,EAAGA,IACV,MAAT05B,EAAG15B,KAAe05B,EAAG15B,GAAK,GAC1B05B,EAAG15B,MAAQ5Q,EAAI4Q,GAAK,GAAK,EAAI,GACvBs4B,EAAYkB,EAAI,EAAS,IAANpqC,EAAU,EAAI,EAAG,GAAKA,EAAG,GAAK4Q,EAAG44B,GACpDa,EAAMF,EAAKnqC,GAGzB,OAAO,SAAUuQ,EAAKg6B,EAAWC,GAC7B,IAAIC,EAAKF,EAAYD,EAAG,GAAKE,EAAYF,EAAG,GAAK,EACjD/5B,EAAI,IAAMg6B,EAAYD,EAAG,GAAKE,EAAYF,EAAG,GAAKA,EAAG,IAAMG,EAC3Dl6B,EAAI,IAAMg6B,EAAYD,EAAG,GAAKE,EAAYF,EAAG,GAAKA,EAAG,IAAMG,CAC/D,CAdA,CAeJ,CCxDA,IAAIC,EAAmB,kBACnBC,EAAW,GACR,SAASC,EAAoBr6B,EAAKs6B,EAAQC,EAAUC,EAAKC,GAC5D,OAAOC,EAA2BN,EAAUE,EAAQE,EAAKC,GAAK,IACvDC,EAA2B16B,EAAKu6B,EAAUH,EAAS,GAAIA,EAAS,GAC3E,CACO,SAASM,EAA2B16B,EAAKrJ,EAAI6jC,EAAKC,EAAKxQ,GAC1D,GAAItzB,EAAGgkC,uBAAyBvlB,EAAA,EAAIwlB,eAAiBC,EAAWlkC,GAAK,CACjE,IAAImkC,EAAQnkC,EAAGwjC,KAAsBxjC,EAAGwjC,GAAoB,CAAC,GACzDY,EASZ,SAA6BpkC,EAAImkC,GAC7B,IAAIC,EAAUD,EAAMC,QACpB,GAAIA,EACA,OAAOA,EAEXA,EAAUD,EAAMC,QAAU,GAG1B,IAFA,IAAIC,EAAS,CAAC,OAAQ,SAClBC,EAAS,CAAC,MAAO,UACZxrC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAIyrC,EAASppB,SAASC,cAAc,OAEhCopB,EAAQ1rC,EAAI,EACZ2rC,GAAS3rC,GAAK,GAAK,EAFbyrC,EAAO7wB,MAGb2H,QAAU,CACV,qBACA,qBACA,aACA,YACA,kBACA,oBACA,UACA,WACAgpB,EAAOG,GAAS,KAChBF,EAAOG,GAAS,KAChBJ,EAAO,EAAIG,GAAS,QACpBF,EAAO,EAAIG,GAAS,QACpB,IACF5nC,KAAK,eACPmD,EAAGub,YAAYgpB,GACfH,EAAQjoC,KAAKooC,EACjB,CACA,OAAOH,CACX,CAzCsBM,CAAoB1kC,EAAImkC,GAClCQ,EAyCZ,SAAmCP,EAASD,EAAO7Q,GAO/C,IANA,IAAIsR,EAAkBtR,EAAU,WAAa,QACzCqR,EAAcR,EAAMS,GACpBC,EAAeV,EAAMW,UACrBA,EAAY,GACZC,EAAa,GACbC,GAAkB,EACblsC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAI4d,EAAO0tB,EAAQtrC,GAAGkrC,wBAClBiB,EAAK,EAAInsC,EACT3C,EAAIugB,EAAK/C,KACTvd,EAAIsgB,EAAK9C,IACbkxB,EAAU3oC,KAAKhG,EAAGC,GAClB4uC,EAAkBA,GAAmBH,GAAgB1uC,IAAM0uC,EAAaI,IAAO7uC,IAAMyuC,EAAaI,EAAK,GACvGF,EAAW5oC,KAAKioC,EAAQtrC,GAAG+iB,WAAYuoB,EAAQtrC,GAAGgjB,UACtD,CACA,OAAQkpB,GAAmBL,EACrBA,GACCR,EAAMW,UAAYA,EACjBX,EAAMS,GAAmBtR,EACnByP,EAAiBgC,EAAYD,GAC7B/B,EAAiB+B,EAAWC,GAC9C,CA/D0BG,CAA0Bd,EAASD,EAAO7Q,GAC5D,GAAIqR,EAEA,OADAA,EAAYt7B,EAAKw6B,EAAKC,IACf,CAEf,CACA,OAAO,CACX,CAyDO,SAASI,EAAWlkC,GACvB,MAAqC,WAA9BA,EAAGoa,SAASC,aACvB,CACA,IAAI8qB,EAAa,aACbC,EAAa,CACb,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAM,SAEH,SAASC,EAAWriC,GACvB,OAAiB,MAAVA,EACD,IACCA,EAAS,IAAIsiC,QAAQH,GAAY,SAAUI,EAAKpN,GAC/C,OAAOiN,EAAWjN,EACtB,GACR,uBC7FA,IAAIqN,EACA,WACI/xC,KAAKgyC,SAAU,EACfhyC,KAAKiyC,IAAK,EACVjyC,KAAKkyC,MAAO,EACZlyC,KAAKmyC,SAAU,EACfnyC,KAAKoyC,QAAS,CAClB,EAmBApnB,EAAM,IAfN,WACIhrB,KAAKqyC,QAAU,IAAIN,EACnB/xC,KAAKsyC,MAAO,EACZtyC,KAAKirB,KAAM,EACXjrB,KAAKuyC,QAAS,EACdvyC,KAAKwyC,cAAe,EACpBxyC,KAAKyyC,sBAAuB,EAC5BzyC,KAAK0yC,wBAAyB,EAC9B1yC,KAAKwwC,cAAe,EACpBxwC,KAAK2yC,oBAAqB,EAC1B3yC,KAAK4yC,sBAAuB,EAC5B5yC,KAAKgf,gBAAoC,oBAAXC,MAClC,EAIc,iBAAP4zB,IAAmD,mBAAzBA,GAAGC,mBACpC9nB,EAAIC,KAAM,EACVD,EAAIynB,sBAAuB,GAEF,oBAAb/qB,UAA4C,oBAATzZ,KAC/C+c,EAAIunB,QAAS,EAEa,oBAAdQ,WACZ/nB,EAAIsnB,MAAO,EACXtnB,EAAIwnB,cAAe,GAKvB,SAAgBQ,EAAIhoB,GAChB,IAAIqnB,EAAUrnB,EAAIqnB,QACdL,EAAUgB,EAAGC,MAAM,qBACnBhB,EAAKe,EAAGC,MAAM,mBACXD,EAAGC,MAAM,6BACZf,EAAOc,EAAGC,MAAM,mBAChBb,EAAS,kBAAoBc,KAAKF,GAClChB,IACAK,EAAQL,SAAU,EAClBK,EAAQc,QAAUnB,EAAQ,IAE1BC,IACAI,EAAQJ,IAAK,EACbI,EAAQc,QAAUlB,EAAG,IAErBC,IACAG,EAAQH,MAAO,EACfG,EAAQc,QAAUjB,EAAK,GACvBG,EAAQF,SAAWD,EAAK,GAAGzzB,MAAM,KAAK,GAAK,IAE3C2zB,IACAC,EAAQD,QAAS,GAErBpnB,EAAIwnB,aAAkC,oBAAZY,QAC1BpoB,EAAIynB,qBAAuB,iBAAkBxzB,SAAWozB,EAAQJ,KAAOI,EAAQH,KAC/ElnB,EAAI0nB,uBAAyB,kBAAmBzzB,SACxCozB,EAAQH,MAASG,EAAQJ,KAAOI,EAAQc,SAAW,IAC3DnoB,EAAIwlB,aAAmC,oBAAb9oB,SAC1B,IAAIzH,EAAQyH,SAAS2rB,gBAAgBpzB,MACrC+K,EAAI4nB,sBAAyBP,EAAQJ,IAAM,eAAgBhyB,GACpDoyB,EAAQH,MACN,oBAAqBjzB,QAAY,QAAS,IAAIq0B,iBAChD,mBAAoBrzB,MAClB,gBAAiBA,GAC1B+K,EAAI2nB,mBAAqB3nB,EAAI4nB,sBACrBP,EAAQJ,KAAOI,EAAQc,SAAW,CAC9C,CAtCII,CAAOR,UAAUS,UAAWxoB,GAuChC,wOC3EIyoB,EAAkB,iDAClBzD,EAAW,GACX0D,EAA4B,IAAIrB,QAAQL,UACpC,IAAIK,QAAQc,QAAQ10B,MAAM,KAAK,GAAK,GACrC,SAASk1B,EAAcpnC,EAAI5L,EAAGiV,EAAKg+B,GAkBtC,OAjBAh+B,EAAMA,GAAO,CAAC,EACVg+B,EACAC,EAActnC,EAAI5L,EAAGiV,GAEhB89B,GACU,MAAZ/yC,EAAEmzC,QACFnzC,EAAEmzC,SAAWnzC,EAAEozC,SAClBn+B,EAAIo+B,IAAMrzC,EAAEmzC,OACZl+B,EAAIq+B,IAAMtzC,EAAEuzC,QAEM,MAAbvzC,EAAEozC,SACPn+B,EAAIo+B,IAAMrzC,EAAEozC,QACZn+B,EAAIq+B,IAAMtzC,EAAEwzC,SAGZN,EAActnC,EAAI5L,EAAGiV,GAElBA,CACX,CACA,SAASi+B,EAActnC,EAAI5L,EAAGiV,GAC1B,GAAI,IAAI46B,cAAgBjkC,EAAGgkC,sBAAuB,CAC9C,IAAI6D,EAAKzzC,EAAE0zC,QACPC,EAAK3zC,EAAE4zC,QACX,IAAI,QAAWhoC,GAAK,CAChB,IAAIioC,EAAMjoC,EAAGgkC,wBAGb,OAFA36B,EAAIo+B,IAAMI,EAAKI,EAAIt0B,UACnBtK,EAAIq+B,IAAMK,EAAKE,EAAIr0B,IAEvB,CAEI,IAAI,QAA2B6vB,EAAUzjC,EAAI6nC,EAAIE,GAG7C,OAFA1+B,EAAIo+B,IAAMhE,EAAS,QACnBp6B,EAAIq+B,IAAMjE,EAAS,GAI/B,CACAp6B,EAAIo+B,IAAMp+B,EAAIq+B,IAAM,CACxB,CACO,SAASQ,EAAe9zC,GAC3B,OAAOA,GACAse,OAAO4c,KAClB,CACO,SAAS6Y,EAAenoC,EAAI5L,EAAGizC,GAElC,GAAa,OADbjzC,EAAI8zC,EAAe9zC,IACbqzC,IACF,OAAOrzC,EAEX,IAAIk8B,EAAYl8B,EAAE4M,KAElB,GADcsvB,GAAaA,EAAUl5B,QAAQ,UAAY,EAMpD,CACD,IAAIgxC,EAAsB,aAAd9X,EACNl8B,EAAEi0C,cAAc,GAChBj0C,EAAEk0C,eAAe,GACvBF,GAAShB,EAAcpnC,EAAIooC,EAAOh0C,EAAGizC,EACzC,KAVc,CACVD,EAAcpnC,EAAI5L,EAAGA,EAAGizC,GACxB,IAAIkB,EAeZ,SAAkCn0C,GAC9B,IAAIo0C,EAAgBp0C,EAAEm0C,WACtB,GAAIC,EACA,OAAOA,EAEX,IAAIC,EAASr0C,EAAEq0C,OACXC,EAASt0C,EAAEs0C,OACf,GAAc,MAAVD,GAA4B,MAAVC,EAClB,OAAOF,EAOX,OAAO,GALgB,IAAXE,EAAe5iC,KAAKwlB,IAAIod,GAAU5iC,KAAKwlB,IAAImd,KAC5CC,EAAS,GAAK,EACnBA,EAAS,EAAI,EACTD,EAAS,GAAK,EACV,EAElB,CA/ByBE,CAAyBv0C,GAC1CA,EAAEw0C,QAAUL,EAAaA,EAAa,MAAQn0C,EAAEy0C,QAAU,GAAK,CACnE,CAOA,IAAIC,EAAS10C,EAAE00C,OAIf,OAHe,MAAX10C,EAAE20C,YAA4BC,IAAXF,GAAwB5B,EAAgBP,KAAKvyC,EAAE4M,QAClE5M,EAAE20C,MAAkB,EAATD,EAAa,EAAc,EAATA,EAAa,EAAc,EAATA,EAAa,EAAI,GAE7D10C,CACX,CAkBO,SAAS60C,EAAiBjpC,EAAInF,EAAM20B,EAAS0Z,GAChDlpC,EAAGipC,iBAAiBpuC,EAAM20B,EAAS0Z,EACvC,CACO,SAASC,EAAoBnpC,EAAInF,EAAM20B,EAAS0Z,GACnDlpC,EAAGmpC,oBAAoBtuC,EAAM20B,EAAS0Z,EAC1C,CACO,IAAIzoC,EAAO,SAAUrM,GACxBA,EAAEg1C,iBACFh1C,EAAEi1C,kBACFj1C,EAAEk1C,cAAe,CACrB,EACO,SAASC,EAAmCn1C,GAC/C,OAAmB,IAAZA,EAAE20C,OAA2B,IAAZ30C,EAAE20C,KAC9B,yBCzGO,SAASlb,IACZ,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAC3B,CACO,SAAS2b,EAASngC,GAOrB,OANAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,CACX,CACO,SAAStT,EAAKsT,EAAK/U,GAOtB,OANA+U,EAAI,GAAK/U,EAAE,GACX+U,EAAI,GAAK/U,EAAE,GACX+U,EAAI,GAAK/U,EAAE,GACX+U,EAAI,GAAK/U,EAAE,GACX+U,EAAI,GAAK/U,EAAE,GACX+U,EAAI,GAAK/U,EAAE,GACJ+U,CACX,CACO,SAASogC,EAAIpgC,EAAKgc,EAAIqkB,GACzB,IAAIC,EAAOtkB,EAAG,GAAKqkB,EAAG,GAAKrkB,EAAG,GAAKqkB,EAAG,GAClCE,EAAOvkB,EAAG,GAAKqkB,EAAG,GAAKrkB,EAAG,GAAKqkB,EAAG,GAClCG,EAAOxkB,EAAG,GAAKqkB,EAAG,GAAKrkB,EAAG,GAAKqkB,EAAG,GAClCI,EAAOzkB,EAAG,GAAKqkB,EAAG,GAAKrkB,EAAG,GAAKqkB,EAAG,GAClCK,EAAO1kB,EAAG,GAAKqkB,EAAG,GAAKrkB,EAAG,GAAKqkB,EAAG,GAAKrkB,EAAG,GAC1C2kB,EAAO3kB,EAAG,GAAKqkB,EAAG,GAAKrkB,EAAG,GAAKqkB,EAAG,GAAKrkB,EAAG,GAO9C,OANAhc,EAAI,GAAKsgC,EACTtgC,EAAI,GAAKugC,EACTvgC,EAAI,GAAKwgC,EACTxgC,EAAI,GAAKygC,EACTzgC,EAAI,GAAK0gC,EACT1gC,EAAI,GAAK2gC,EACF3gC,CACX,CACO,SAAS4gC,EAAU5gC,EAAKvC,EAAGojC,GAO9B,OANA7gC,EAAI,GAAKvC,EAAE,GACXuC,EAAI,GAAKvC,EAAE,GACXuC,EAAI,GAAKvC,EAAE,GACXuC,EAAI,GAAKvC,EAAE,GACXuC,EAAI,GAAKvC,EAAE,GAAKojC,EAAE,GAClB7gC,EAAI,GAAKvC,EAAE,GAAKojC,EAAE,GACX7gC,CACX,CACO,SAAS8gC,EAAO9gC,EAAKvC,EAAGsjC,GAC3B,IAAIC,EAAKvjC,EAAE,GACPwjC,EAAKxjC,EAAE,GACPyjC,EAAMzjC,EAAE,GACR0jC,EAAK1jC,EAAE,GACP2jC,EAAK3jC,EAAE,GACP4jC,EAAM5jC,EAAE,GACR6jC,EAAK7kC,KAAKI,IAAIkkC,GACdQ,EAAK9kC,KAAKC,IAAIqkC,GAOlB,OANA/gC,EAAI,GAAKghC,EAAKO,EAAKJ,EAAKG,EACxBthC,EAAI,IAAMghC,EAAKM,EAAKH,EAAKI,EACzBvhC,EAAI,GAAKihC,EAAKM,EAAKH,EAAKE,EACxBthC,EAAI,IAAMihC,EAAKK,EAAKC,EAAKH,EACzBphC,EAAI,GAAKuhC,EAAKL,EAAMI,EAAKD,EACzBrhC,EAAI,GAAKuhC,EAAKF,EAAMC,EAAKJ,EAClBlhC,CACX,CACO,SAASyM,EAAMzM,EAAKvC,EAAGojC,GAC1B,IAAIW,EAAKX,EAAE,GACPY,EAAKZ,EAAE,GAOX,OANA7gC,EAAI,GAAKvC,EAAE,GAAK+jC,EAChBxhC,EAAI,GAAKvC,EAAE,GAAKgkC,EAChBzhC,EAAI,GAAKvC,EAAE,GAAK+jC,EAChBxhC,EAAI,GAAKvC,EAAE,GAAKgkC,EAChBzhC,EAAI,GAAKvC,EAAE,GAAK+jC,EAChBxhC,EAAI,GAAKvC,EAAE,GAAKgkC,EACTzhC,CACX,CACO,SAAS0hC,EAAO1hC,EAAKvC,GACxB,IAAIujC,EAAKvjC,EAAE,GACPwjC,EAAKxjC,EAAE,GACPyjC,EAAMzjC,EAAE,GACR0jC,EAAK1jC,EAAE,GACP2jC,EAAK3jC,EAAE,GACP4jC,EAAM5jC,EAAE,GACRq8B,EAAMkH,EAAKI,EAAKD,EAAKF,EACzB,OAAKnH,GAGLA,EAAM,EAAMA,EACZ95B,EAAI,GAAKohC,EAAKtH,EACd95B,EAAI,IAAMmhC,EAAKrH,EACf95B,EAAI,IAAMihC,EAAKnH,EACf95B,EAAI,GAAKghC,EAAKlH,EACd95B,EAAI,IAAMihC,EAAKI,EAAMD,EAAKF,GAAOpH,EACjC95B,EAAI,IAAMmhC,EAAKD,EAAMF,EAAKK,GAAOvH,EAC1B95B,GATI,IAUf,CACO,SAASwlB,EAAM/nB,GAClB,IAAI+F,EA7FG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GA+FvB,OADA9W,EAAK8W,EAAG/F,GACD+F,CACX,kWCjGO,IAAIm+B,EAAoB,GACpBC,EAAsB,aACtBC,EAAeF,EAAoB,MAAQC,EAgB/C,IAOK1U,EACA4U,EARDC,EAZX,SAAyBC,GACrB,IAAIlZ,EAAM,CAAC,EACX,GAAoB,oBAATmZ,KACP,OAAOnZ,EAEX,IAAK,IAAIr5B,EAAI,EAAGA,EAAIuyC,EAAOzxC,OAAQd,IAAK,CACpC,IAAIyyC,EAAOC,OAAOC,aAAa3yC,EAAI,IAC/B4yC,GAAQL,EAAOM,WAAW7yC,GAVzB,IACD,IAUJq5B,EAAIoZ,GAAQG,CAChB,CACA,OAAOvZ,CACX,CACoCyZ,CAbX,0GAcdC,EAAc,CACrBv4B,aAAc,WACV,MAA2B,oBAAb6H,UACPA,SAASC,cAAc,SAClC,EACA0Q,YAGW,SAAUnE,EAAMC,GACnB,IAAK2O,EAAM,CACP,IAAIuV,EAASD,EAAYv4B,eACzBijB,EAAOuV,GAAUA,EAAOr2B,WAAW,KACvC,CACA,GAAI8gB,EAIA,OAHI4U,IAAgBvjB,IAChBujB,EAAc5U,EAAK3O,KAAOA,GAAQsjB,GAE/B3U,EAAKzK,YAAYnE,GAGxBA,EAAOA,GAAQ,GAEf,IAAIokB,EAAM,UAAU/5B,KADpB4V,EAAOA,GAAQsjB,GAEXc,EAAWD,IAAQA,EAAI,IAAMf,EAC7Bp0C,EAAQ,EACZ,GAAIgxB,EAAKxwB,QAAQ,SAAW,EACxBR,EAAQo1C,EAAWrkB,EAAK/tB,YAGxB,IAAK,IAAId,EAAI,EAAGA,EAAI6uB,EAAK/tB,OAAQd,IAAK,CAClC,IAAImzC,EAAeb,EAAuBzjB,EAAK7uB,IAC/ClC,GAAyB,MAAhBq1C,EAAuBD,EAAYC,EAAeD,CAC/D,CAEJ,MAAO,CAAEp1C,MAAOA,EAExB,EAEJs1C,UAAW,SAAUlJ,EAAK9a,EAAQikB,GAC9B,IAAI7pB,EAAQ,IAAI8pB,MAIhB,OAHA9pB,EAAM4F,OAASA,EACf5F,EAAM6pB,QAAUA,EAChB7pB,EAAM0gB,IAAMA,EACL1gB,CACX,0DC/DJ,IAAI+pB,EAAoB,GACpBC,EAAwB,EAU5B,SAASC,EAAiBC,EAAO5S,EAAI6S,EAAIC,GACrC,IAAIC,EAAQ/S,EAAK,EACjB,GAAI+S,IAAUF,EACV,OAAO,EAEX,GAAIC,EAAQF,EAAMG,KAAUH,EAAM5S,IAAO,EAAG,CACxC,KAAO+S,EAAQF,GAAMC,EAAQF,EAAMG,GAAQH,EAAMG,EAAQ,IAAM,GAC3DA,KAWZ,SAAoBH,EAAO5S,EAAI6S,GAC3BA,IACA,KAAO7S,EAAK6S,GAAI,CACZ,IAAIzf,EAAIwf,EAAM5S,GACd4S,EAAM5S,KAAQ4S,EAAMC,GACpBD,EAAMC,KAAQzf,CAClB,CACJ,CAhBQ4f,CAAWJ,EAAO5S,EAAI+S,EAC1B,MAEI,KAAOA,EAAQF,GAAMC,EAAQF,EAAMG,GAAQH,EAAMG,EAAQ,KAAO,GAC5DA,IAGR,OAAOA,EAAQ/S,CACnB,CASA,SAASiT,EAAoBL,EAAO5S,EAAI6S,EAAI5pC,EAAO6pC,GAI/C,IAHI7pC,IAAU+2B,GACV/2B,IAEGA,EAAQ4pC,EAAI5pC,IAAS,CAKxB,IAJA,IAGIiqC,EAHAC,EAAQP,EAAM3pC,GACd8Q,EAAOimB,EACPoE,EAAQn7B,EAEL8Q,EAAOqqB,GAEN0O,EAAQK,EAAOP,EADnBM,EAAMn5B,EAAOqqB,IAAU,IACU,EAC7BA,EAAQ8O,EAGRn5B,EAAOm5B,EAAM,EAGrB,IAAItO,EAAI37B,EAAQ8Q,EAChB,OAAQ6qB,GACJ,KAAK,EACDgO,EAAM74B,EAAO,GAAK64B,EAAM74B,EAAO,GACnC,KAAK,EACD64B,EAAM74B,EAAO,GAAK64B,EAAM74B,EAAO,GACnC,KAAK,EACD64B,EAAM74B,EAAO,GAAK64B,EAAM74B,GACxB,MACJ,QACI,KAAO6qB,EAAI,GACPgO,EAAM74B,EAAO6qB,GAAKgO,EAAM74B,EAAO6qB,EAAI,GACnCA,IAGZgO,EAAM74B,GAAQo5B,CAClB,CACJ,CACA,SAASC,EAAW7zC,EAAOqzC,EAAO3pC,EAAOjJ,EAAQqzC,EAAMP,GACnD,IAAIQ,EAAa,EACbC,EAAY,EACZl2C,EAAS,EACb,GAAIy1C,EAAQvzC,EAAOqzC,EAAM3pC,EAAQoqC,IAAS,EAAG,CAEzC,IADAE,EAAYvzC,EAASqzC,EACdh2C,EAASk2C,GAAaT,EAAQvzC,EAAOqzC,EAAM3pC,EAAQoqC,EAAOh2C,IAAW,GACxEi2C,EAAaj2C,GACbA,EAAyB,GAAfA,GAAU,KACN,IACVA,EAASk2C,GAGbl2C,EAASk2C,IACTl2C,EAASk2C,GAEbD,GAAcD,EACdh2C,GAAUg2C,CACd,KACK,CAED,IADAE,EAAYF,EAAO,EACZh2C,EAASk2C,GAAaT,EAAQvzC,EAAOqzC,EAAM3pC,EAAQoqC,EAAOh2C,KAAY,GACzEi2C,EAAaj2C,GACbA,EAAyB,GAAfA,GAAU,KACN,IACVA,EAASk2C,GAGbl2C,EAASk2C,IACTl2C,EAASk2C,GAEb,IAAI5hB,EAAM2hB,EACVA,EAAaD,EAAOh2C,EACpBA,EAASg2C,EAAO1hB,CACpB,CAEA,IADA2hB,IACOA,EAAaj2C,GAAQ,CACxB,IAAI3C,EAAI44C,GAAcj2C,EAASi2C,IAAe,GAC1CR,EAAQvzC,EAAOqzC,EAAM3pC,EAAQvO,IAAM,EACnC44C,EAAa54C,EAAI,EAGjB2C,EAAS3C,CAEjB,CACA,OAAO2C,CACX,CACA,SAASm2C,EAAYj0C,EAAOqzC,EAAO3pC,EAAOjJ,EAAQqzC,EAAMP,GACpD,IAAIQ,EAAa,EACbC,EAAY,EACZl2C,EAAS,EACb,GAAIy1C,EAAQvzC,EAAOqzC,EAAM3pC,EAAQoqC,IAAS,EAAG,CAEzC,IADAE,EAAYF,EAAO,EACZh2C,EAASk2C,GAAaT,EAAQvzC,EAAOqzC,EAAM3pC,EAAQoqC,EAAOh2C,IAAW,GACxEi2C,EAAaj2C,GACbA,EAAyB,GAAfA,GAAU,KACN,IACVA,EAASk2C,GAGbl2C,EAASk2C,IACTl2C,EAASk2C,GAEb,IAAI5hB,EAAM2hB,EACVA,EAAaD,EAAOh2C,EACpBA,EAASg2C,EAAO1hB,CACpB,KACK,CAED,IADA4hB,EAAYvzC,EAASqzC,EACdh2C,EAASk2C,GAAaT,EAAQvzC,EAAOqzC,EAAM3pC,EAAQoqC,EAAOh2C,KAAY,GACzEi2C,EAAaj2C,GACbA,EAAyB,GAAfA,GAAU,KACN,IACVA,EAASk2C,GAGbl2C,EAASk2C,IACTl2C,EAASk2C,GAEbD,GAAcD,EACdh2C,GAAUg2C,CACd,CAEA,IADAC,IACOA,EAAaj2C,GAAQ,CACxB,IAAI3C,EAAI44C,GAAcj2C,EAASi2C,IAAe,GAC1CR,EAAQvzC,EAAOqzC,EAAM3pC,EAAQvO,IAAM,EACnC2C,EAAS3C,EAGT44C,EAAa54C,EAAI,CAEzB,CACA,OAAO2C,CACX,CACA,SAASo2C,EAAQb,EAAOE,GACpB,IACI9yC,EAGA0zC,EACAC,EALAC,EAAYlB,EAMZmB,EAAY,EAChB7zC,EAAS4yC,EAAM5yC,OAIf,IAAI2xB,EAAM,GAiCV,SAASmiB,EAAQ50C,GACb,IAAI60C,EAASL,EAASx0C,GAClB80C,EAAUL,EAAUz0C,GACpB+0C,EAASP,EAASx0C,EAAI,GACtBg1C,EAAUP,EAAUz0C,EAAI,GAC5By0C,EAAUz0C,GAAK80C,EAAUE,EACrBh1C,IAAM20C,EAAY,IAClBH,EAASx0C,EAAI,GAAKw0C,EAASx0C,EAAI,GAC/By0C,EAAUz0C,EAAI,GAAKy0C,EAAUz0C,EAAI,IAErC20C,IACA,IAAIxpC,EAAImpC,EAAYZ,EAAMqB,GAASrB,EAAOmB,EAAQC,EAAS,EAAGlB,GAC9DiB,GAAU1pC,EAEM,KADhB2pC,GAAW3pC,IAKK,KADhB6pC,EAAUd,EAAWR,EAAMmB,EAASC,EAAU,GAAIpB,EAAOqB,EAAQC,EAASA,EAAU,EAAGpB,MAInFkB,GAAWE,EAOnB,SAAkBH,EAAQC,EAASC,EAAQC,GACvC,IAAIh1C,EAAI,EACR,IAAKA,EAAI,EAAGA,EAAI80C,EAAS90C,IACrByyB,EAAIzyB,GAAK0zC,EAAMmB,EAAS70C,GAE5B,IAAIi1C,EAAU,EACVC,EAAUH,EACV5K,EAAO0K,EAEX,GADAnB,EAAMvJ,KAAUuJ,EAAMwB,KACJ,KAAZF,EAAe,CACjB,IAAKh1C,EAAI,EAAGA,EAAI80C,EAAS90C,IACrB0zC,EAAMvJ,EAAOnqC,GAAKyyB,EAAIwiB,EAAUj1C,GAEpC,MACJ,CACA,GAAgB,IAAZ80C,EAAe,CACf,IAAK90C,EAAI,EAAGA,EAAIg1C,EAASh1C,IACrB0zC,EAAMvJ,EAAOnqC,GAAK0zC,EAAMwB,EAAUl1C,GAGtC,YADA0zC,EAAMvJ,EAAO6K,GAAWviB,EAAIwiB,GAEhC,CACA,IACIE,EACAC,EACAC,EAHAC,EAAaZ,EAIjB,OAAU,CACNS,EAAS,EACTC,EAAS,EACTC,GAAO,EACP,GACI,GAAIzB,EAAQF,EAAMwB,GAAUziB,EAAIwiB,IAAY,GAIxC,GAHAvB,EAAMvJ,KAAUuJ,EAAMwB,KACtBE,IACAD,EAAS,EACS,KAAZH,EAAe,CACjBK,GAAO,EACP,KACJ,OAMA,GAHA3B,EAAMvJ,KAAU1X,EAAIwiB,KACpBE,IACAC,EAAS,EACS,KAAZN,EAAe,CACjBO,GAAO,EACP,KACJ,SAEEF,EAASC,GAAUE,GAC7B,GAAID,EACA,MAEJ,EAAG,CAEC,GAAe,KADfF,EAASb,EAAYZ,EAAMwB,GAAUziB,EAAKwiB,EAASH,EAAS,EAAGlB,IAC7C,CACd,IAAK5zC,EAAI,EAAGA,EAAIm1C,EAAQn1C,IACpB0zC,EAAMvJ,EAAOnqC,GAAKyyB,EAAIwiB,EAAUj1C,GAKpC,GAHAmqC,GAAQgL,EACRF,GAAWE,GACXL,GAAWK,IACI,EAAG,CACdE,GAAO,EACP,KACJ,CACJ,CAEA,GADA3B,EAAMvJ,KAAUuJ,EAAMwB,KACJ,KAAZF,EAAe,CACjBK,GAAO,EACP,KACJ,CAEA,GAAe,KADfD,EAASlB,EAAWzhB,EAAIwiB,GAAUvB,EAAOwB,EAASF,EAAS,EAAGpB,IAC5C,CACd,IAAK5zC,EAAI,EAAGA,EAAIo1C,EAAQp1C,IACpB0zC,EAAMvJ,EAAOnqC,GAAK0zC,EAAMwB,EAAUl1C,GAKtC,GAHAmqC,GAAQiL,EACRF,GAAWE,EAEK,KADhBJ,GAAWI,GACQ,CACfC,GAAO,EACP,KACJ,CACJ,CAEA,GADA3B,EAAMvJ,KAAU1X,EAAIwiB,KACF,KAAZH,EAAe,CACjBO,GAAO,EACP,KACJ,CACAC,GACJ,OAASH,GAAU3B,GAAyB4B,GAAU5B,GACtD,GAAI6B,EACA,MAEAC,EAAa,IACbA,EAAa,GAEjBA,GAAc,CAClB,CAGA,IAFAZ,EAAYY,GACA,IAAMZ,EAAY,GACd,IAAZI,EAAe,CACf,IAAK90C,EAAI,EAAGA,EAAIg1C,EAASh1C,IACrB0zC,EAAMvJ,EAAOnqC,GAAK0zC,EAAMwB,EAAUl1C,GAEtC0zC,EAAMvJ,EAAO6K,GAAWviB,EAAIwiB,EAChC,KACK,IAAgB,IAAZH,EACL,MAAM,IAAIS,MAGV,IAAKv1C,EAAI,EAAGA,EAAI80C,EAAS90C,IACrB0zC,EAAMvJ,EAAOnqC,GAAKyyB,EAAIwiB,EAAUj1C,EAExC,CACJ,CA1HQw1C,CAASX,EAAQC,EAASC,EAAQC,GA2H1C,SAAmBH,EAAQC,EAASC,EAAQC,GACxC,IAAIh1C,EAAI,EACR,IAAKA,EAAI,EAAGA,EAAIg1C,EAASh1C,IACrByyB,EAAIzyB,GAAK0zC,EAAMqB,EAAS/0C,GAE5B,IAAIi1C,EAAUJ,EAASC,EAAU,EAC7BI,EAAUF,EAAU,EACpB7K,EAAO4K,EAASC,EAAU,EAC1BS,EAAe,EACfC,EAAa,EAEjB,GADAhC,EAAMvJ,KAAUuJ,EAAMuB,KACJ,KAAZH,EAAe,CAEjB,IADAW,EAAetL,GAAQ6K,EAAU,GAC5Bh1C,EAAI,EAAGA,EAAIg1C,EAASh1C,IACrB0zC,EAAM+B,EAAez1C,GAAKyyB,EAAIzyB,GAElC,MACJ,CACA,GAAgB,IAAZg1C,EAAe,CAKf,IAFAU,GAFAvL,GAAQ2K,GAEY,EACpBW,GAFAR,GAAWH,GAEc,EACpB90C,EAAI80C,EAAU,EAAG90C,GAAK,EAAGA,IAC1B0zC,EAAMgC,EAAa11C,GAAK0zC,EAAM+B,EAAez1C,GAGjD,YADA0zC,EAAMvJ,GAAQ1X,EAAIyiB,GAEtB,CACA,IAAII,EAAaZ,EACjB,OAAa,CACT,IAAIS,EAAS,EACTC,EAAS,EACTC,GAAO,EACX,GACI,GAAIzB,EAAQnhB,EAAIyiB,GAAUxB,EAAMuB,IAAY,GAIxC,GAHAvB,EAAMvJ,KAAUuJ,EAAMuB,KACtBE,IACAC,EAAS,EACS,KAAZN,EAAe,CACjBO,GAAO,EACP,KACJ,OAMA,GAHA3B,EAAMvJ,KAAU1X,EAAIyiB,KACpBE,IACAD,EAAS,EACS,KAAZH,EAAe,CACjBK,GAAO,EACP,KACJ,SAEEF,EAASC,GAAUE,GAC7B,GAAID,EACA,MAEJ,EAAG,CAEC,GAAe,KADfF,EAASL,EAAUR,EAAY7hB,EAAIyiB,GAAUxB,EAAOmB,EAAQC,EAASA,EAAU,EAAGlB,IAChE,CAMd,IAHAkB,GAAWK,EACXO,GAHAvL,GAAQgL,GAGY,EACpBM,GAHAR,GAAWE,GAGc,EACpBn1C,EAAIm1C,EAAS,EAAGn1C,GAAK,EAAGA,IACzB0zC,EAAMgC,EAAa11C,GAAK0zC,EAAM+B,EAAez1C,GAEjD,GAAgB,IAAZ80C,EAAe,CACfO,GAAO,EACP,KACJ,CACJ,CAEA,GADA3B,EAAMvJ,KAAU1X,EAAIyiB,KACF,KAAZF,EAAe,CACjBK,GAAO,EACP,KACJ,CAEA,GAAe,KADfD,EAASJ,EAAUd,EAAWR,EAAMuB,GAAUxiB,EAAK,EAAGuiB,EAASA,EAAU,EAAGpB,IAC1D,CAMd,IAHAoB,GAAWI,EACXM,GAHAvL,GAAQiL,GAGY,EACpBK,GAHAP,GAAWE,GAGc,EACpBp1C,EAAI,EAAGA,EAAIo1C,EAAQp1C,IACpB0zC,EAAMgC,EAAa11C,GAAKyyB,EAAIgjB,EAAez1C,GAE/C,GAAIg1C,GAAW,EAAG,CACdK,GAAO,EACP,KACJ,CACJ,CAEA,GADA3B,EAAMvJ,KAAUuJ,EAAMuB,KACJ,KAAZH,EAAe,CACjBO,GAAO,EACP,KACJ,CACAC,GACJ,OAASH,GAAU3B,GAAyB4B,GAAU5B,GACtD,GAAI6B,EACA,MAEAC,EAAa,IACbA,EAAa,GAEjBA,GAAc,CAClB,EACAZ,EAAYY,GACI,IACZZ,EAAY,GAEhB,GAAgB,IAAZM,EAAe,CAKf,IAFAU,GAFAvL,GAAQ2K,GAEY,EACpBW,GAFAR,GAAWH,GAEc,EACpB90C,EAAI80C,EAAU,EAAG90C,GAAK,EAAGA,IAC1B0zC,EAAMgC,EAAa11C,GAAK0zC,EAAM+B,EAAez1C,GAEjD0zC,EAAMvJ,GAAQ1X,EAAIyiB,EACtB,KACK,IAAgB,IAAZF,EACL,MAAM,IAAIO,MAIV,IADAE,EAAetL,GAAQ6K,EAAU,GAC5Bh1C,EAAI,EAAGA,EAAIg1C,EAASh1C,IACrB0zC,EAAM+B,EAAez1C,GAAKyyB,EAAIzyB,EAEtC,CACJ,CA3PQ21C,CAAUd,EAAQC,EAASC,EAAQC,GAE3C,CA0PA,OArTcl0C,EAAS,IAAM,EAAIA,EAAS,KAAO,GAAKA,EAAS,OAAS,GAAK,GAC7E0zC,EAAW,GACXC,EAAY,GAmTL,CACHmB,UA9SJ,WACI,KAAOjB,EAAY,GAAG,CAClB,IAAIjP,EAAIiP,EAAY,EACpB,GAAKjP,GAAK,GAAK+O,EAAU/O,EAAI,IAAM+O,EAAU/O,GAAK+O,EAAU/O,EAAI,IACxDA,GAAK,GAAK+O,EAAU/O,EAAI,IAAM+O,EAAU/O,GAAK+O,EAAU/O,EAAI,GAC3D+O,EAAU/O,EAAI,GAAK+O,EAAU/O,EAAI,IACjCA,SAGH,GAAI+O,EAAU/O,GAAK+O,EAAU/O,EAAI,GAClC,MAEJkP,EAAQlP,EACZ,CACJ,EAiSImQ,eAhSJ,WACI,KAAOlB,EAAY,GAAG,CAClB,IAAIjP,EAAIiP,EAAY,EAChBjP,EAAI,GAAK+O,EAAU/O,EAAI,GAAK+O,EAAU/O,EAAI,IAC1CA,IAEJkP,EAAQlP,EACZ,CACJ,EAyRIoQ,QArTJ,SAAiBC,EAAWC,GACxBxB,EAASG,GAAaoB,EACtBtB,EAAUE,GAAaqB,EACvBrB,GAAa,CACjB,EAmTJ,CACe,SAAS7gC,EAAK4/B,EAAOE,EAAS9S,EAAI6S,GACxC7S,IACDA,EAAK,GAEJ6S,IACDA,EAAKD,EAAM5yC,QAEf,IAAIm1C,EAAYtC,EAAK7S,EACrB,KAAImV,EAAY,GAAhB,CAGA,IAAIxB,EAAY,EAChB,GAAIwB,EAAY1C,EAEZQ,EAAoBL,EAAO5S,EAAI6S,EAAI7S,GADnC2T,EAAYhB,EAAiBC,EAAO5S,EAAI6S,EAAIC,IACOA,OAFvD,CAKA,IAAIsC,EAAK3B,EAAQb,EAAOE,GACpBuC,EA9fR,SAAsBzQ,GAElB,IADA,IAAI/vB,EAAI,EACD+vB,GAAK6N,GACR59B,GAAS,EAAJ+vB,EACLA,IAAM,EAEV,OAAOA,EAAI/vB,CACf,CAufiBygC,CAAaH,GAC1B,EAAG,CAEC,IADAxB,EAAYhB,EAAiBC,EAAO5S,EAAI6S,EAAIC,IAC5BuC,EAAQ,CACpB,IAAIrsC,EAAQmsC,EACRnsC,EAAQqsC,IACRrsC,EAAQqsC,GAEZpC,EAAoBL,EAAO5S,EAAIA,EAAKh3B,EAAOg3B,EAAK2T,EAAWb,GAC3Da,EAAY3qC,CAChB,CACAosC,EAAGJ,QAAQhV,EAAI2T,GACfyB,EAAGN,YACHK,GAAaxB,EACb3T,GAAM2T,CACV,OAAuB,IAAdwB,GACTC,EAAGL,gBAlBH,CANA,CAyBJ,yoCCjhBIQ,EAAiBC,EAAO,CACxB,WACA,SACA,OACA,QACA,iBACA,gBACA,QACA,WACD,SAAUl8C,EAAK8O,GAEd,OADA9O,EAAI,WAAa8O,EAAM,MAAO,EACvB9O,CACX,GAAG,CAAC,GACAm8C,EAAcD,EAAO,CACrB,OACA,QACA,eACA,QACA,SACA,QACA,SACA,UACA,YACD,SAAUl8C,EAAK8O,GAEd,OADA9O,EAAI,WAAa8O,EAAM,WAAY,EAC5B9O,CACX,GAAG,CAAC,GACAo8C,EAAc1tC,OAAO7N,UAAUw7C,SAC/BC,EAAalsC,MAAMvP,UACnB07C,EAAgBD,EAAWE,QAC3BC,EAAeH,EAAWze,OAC1B6e,EAAcJ,EAAW1yC,MACzB+yC,EAAYL,EAAWrd,IACvB2d,EAAe,WAAc,EAAEC,YAC/BC,EAAgBF,EAAeA,EAAa/7C,UAAY,KACxDk8C,EAAW,YACXC,EAAU,KACP,SAASC,IACZ,OAAOD,GACX,CACO,SAASE,IAEZ,IADA,IAAI1f,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUh3B,OAAQ+2B,IACpCD,EAAKC,GAAMC,UAAUD,EAK7B,CACO,SAAS9B,EAAM7rB,GAClB,GAAc,MAAVA,GAAoC,iBAAXA,EACzB,OAAOA,EAEX,IAAIqtC,EAASrtC,EACTstC,EAAUhB,EAAY/rC,KAAKP,GAC/B,GAAgB,mBAAZstC,GACA,IAAKC,GAAYvtC,GAAS,CACtBqtC,EAAS,GACT,IAAK,IAAIv3C,EAAI,EAAGyD,EAAMyG,EAAOpJ,OAAQd,EAAIyD,EAAKzD,IAC1Cu3C,EAAOv3C,GAAK+1B,EAAM7rB,EAAOlK,GAEjC,OAEC,GAAIu2C,EAAYiB,IACjB,IAAKC,GAAYvtC,GAAS,CACtB,IAAIwtC,EAAOxtC,EAAO+sC,YAClB,GAAIS,EAAKC,KACLJ,EAASG,EAAKC,KAAKztC,OAElB,CACDqtC,EAAS,IAAIG,EAAKxtC,EAAOpJ,QACzB,IAASd,EAAI,EAAGyD,EAAMyG,EAAOpJ,OAAQd,EAAIyD,EAAKzD,IAC1Cu3C,EAAOv3C,GAAKkK,EAAOlK,EAE3B,CACJ,OAEC,IAAKq2C,EAAemB,KAAaC,GAAYvtC,KAAY0tC,EAAM1tC,GAEhE,IAAK,IAAI7P,KADTk9C,EAAS,CAAC,EACMrtC,EACRA,EAAOud,eAAeptB,IAAQA,IAAQ88C,IACtCI,EAAOl9C,GAAO07B,EAAM7rB,EAAO7P,KAIvC,OAAOk9C,CACX,CACO,SAASM,EAAMp2C,EAAQyI,EAAQ4tC,GAClC,IAAKC,EAAS7tC,KAAY6tC,EAASt2C,GAC/B,OAAOq2C,EAAY/hB,EAAM7rB,GAAUzI,EAEvC,IAAK,IAAIpH,KAAO6P,EACZ,GAAIA,EAAOud,eAAeptB,IAAQA,IAAQ88C,EAAU,CAChD,IAAIa,EAAav2C,EAAOpH,GACpB49C,EAAa/tC,EAAO7P,IACpB09C,EAASE,KACNF,EAASC,IACRE,EAAQD,IACRC,EAAQF,IACRJ,EAAMK,IACNL,EAAMI,IACNG,EAAgBF,IAChBE,EAAgBH,IAChBP,GAAYQ,IACZR,GAAYO,IAGXF,GAAez9C,KAAOoH,IAC3BA,EAAOpH,GAAO07B,EAAM7rB,EAAO7P,KAH3Bw9C,EAAMG,EAAYC,EAAYH,EAKtC,CAEJ,OAAOr2C,CACX,CACO,SAAS22C,EAASC,EAAkBP,GAEvC,IADA,IAAIP,EAASc,EAAiB,GACrBr4C,EAAI,EAAGyD,EAAM40C,EAAiBv3C,OAAQd,EAAIyD,EAAKzD,IACpDu3C,EAASM,EAAMN,EAAQc,EAAiBr4C,GAAI83C,GAEhD,OAAOP,CACX,CACO,SAASe,EAAO72C,EAAQyI,GAC3B,GAAIpB,OAAOyvC,OACPzvC,OAAOyvC,OAAO92C,EAAQyI,QAGtB,IAAK,IAAI7P,KAAO6P,EACRA,EAAOud,eAAeptB,IAAQA,IAAQ88C,IACtC11C,EAAOpH,GAAO6P,EAAO7P,IAIjC,OAAOoH,CACX,CACO,SAAS+2C,EAAS/2C,EAAQyI,EAAQuuC,GAErC,IADA,IAAI53C,EAAU63C,EAAKxuC,GACVlK,EAAI,EAAGA,EAAIa,EAAQC,OAAQd,IAAK,CACrC,IAAI3F,EAAMwG,EAAQb,IACby4C,EAAyB,MAAfvuC,EAAO7P,GAA8B,MAAfoH,EAAOpH,MACxCoH,EAAOpH,GAAO6P,EAAO7P,GAE7B,CACA,OAAOoH,CACX,CAC0B,KAAY+Y,aAC/B,SAASlc,EAAQo1C,EAAOrzC,GAC3B,GAAIqzC,EAAO,CACP,GAAIA,EAAMp1C,QACN,OAAOo1C,EAAMp1C,QAAQ+B,GAEzB,IAAK,IAAIL,EAAI,EAAGyD,EAAMiwC,EAAM5yC,OAAQd,EAAIyD,EAAKzD,IACzC,GAAI0zC,EAAM1zC,KAAOK,EACb,OAAOL,CAGnB,CACA,OAAQ,CACZ,CACO,SAAS24C,EAASC,EAAOC,GAC5B,IAAIC,EAAiBF,EAAM39C,UAC3B,SAAS89C,IAAM,CAGf,IAAK,IAAI9tB,KAFT8tB,EAAE99C,UAAY49C,EAAU59C,UACxB29C,EAAM39C,UAAY,IAAI89C,EACLD,EACTA,EAAerxB,eAAewD,KAC9B2tB,EAAM39C,UAAUgwB,GAAQ6tB,EAAe7tB,IAG/C2tB,EAAM39C,UAAUg8C,YAAc2B,EAC9BA,EAAMI,WAAaH,CACvB,CACO,SAASI,EAAMx3C,EAAQyI,EAAQgvC,GAGlC,GAFAz3C,EAAS,cAAeA,EAASA,EAAOxG,UAAYwG,EACpDyI,EAAS,cAAeA,EAASA,EAAOjP,UAAYiP,EAChDpB,OAAOqwC,oBAEP,IADA,IAAIC,EAAUtwC,OAAOqwC,oBAAoBjvC,GAChClK,EAAI,EAAGA,EAAIo5C,EAAQt4C,OAAQd,IAAK,CACrC,IAAI3F,EAAM++C,EAAQp5C,GACN,gBAAR3F,IACK6+C,EAA0B,MAAfhvC,EAAO7P,GAA8B,MAAfoH,EAAOpH,MACzCoH,EAAOpH,GAAO6P,EAAO7P,GAGjC,MAGAm+C,EAAS/2C,EAAQyI,EAAQgvC,EAEjC,CACO,SAASG,EAAYnc,GACxB,QAAKA,IAGe,iBAATA,GAGmB,iBAAhBA,EAAKp8B,OACvB,CACO,SAASw4C,EAAK7W,EAAKviC,EAAIC,GAC1B,GAAMsiC,GAAOviC,EAGb,GAAIuiC,EAAImU,SAAWnU,EAAImU,UAAYD,EAC/BlU,EAAImU,QAAQ12C,EAAIC,QAEf,GAAIsiC,EAAI3hC,UAAY2hC,EAAI3hC,OACzB,IAAK,IAAId,EAAI,EAAGyD,EAAMg/B,EAAI3hC,OAAQd,EAAIyD,EAAKzD,IACvCE,EAAGuK,KAAKtK,EAASsiC,EAAIziC,GAAIA,EAAGyiC,QAIhC,IAAK,IAAIpoC,KAAOooC,EACRA,EAAIhb,eAAeptB,IACnB6F,EAAGuK,KAAKtK,EAASsiC,EAAIpoC,GAAMA,EAAKooC,EAIhD,CACO,SAASpJ,EAAIoJ,EAAKviC,EAAIC,GACzB,IAAKsiC,EACD,MAAO,GAEX,IAAKviC,EACD,OAAO8D,EAAMy+B,GAEjB,GAAIA,EAAIpJ,KAAOoJ,EAAIpJ,MAAQ0d,EACvB,OAAOtU,EAAIpJ,IAAIn5B,EAAIC,GAInB,IADA,IAAIo3C,EAAS,GACJv3C,EAAI,EAAGyD,EAAMg/B,EAAI3hC,OAAQd,EAAIyD,EAAKzD,IACvCu3C,EAAOl0C,KAAKnD,EAAGuK,KAAKtK,EAASsiC,EAAIziC,GAAIA,EAAGyiC,IAE5C,OAAO8U,CAEf,CACO,SAASjB,EAAO7T,EAAKviC,EAAIq5C,EAAMp5C,GAClC,GAAMsiC,GAAOviC,EAAb,CAGA,IAAK,IAAIF,EAAI,EAAGyD,EAAMg/B,EAAI3hC,OAAQd,EAAIyD,EAAKzD,IACvCu5C,EAAOr5C,EAAGuK,KAAKtK,EAASo5C,EAAM9W,EAAIziC,GAAIA,EAAGyiC,GAE7C,OAAO8W,CAJP,CAKJ,CACO,SAASthB,EAAOwK,EAAKviC,EAAIC,GAC5B,IAAKsiC,EACD,MAAO,GAEX,IAAKviC,EACD,OAAO8D,EAAMy+B,GAEjB,GAAIA,EAAIxK,QAAUwK,EAAIxK,SAAW4e,EAC7B,OAAOpU,EAAIxK,OAAO/3B,EAAIC,GAItB,IADA,IAAIo3C,EAAS,GACJv3C,EAAI,EAAGyD,EAAMg/B,EAAI3hC,OAAQd,EAAIyD,EAAKzD,IACnCE,EAAGuK,KAAKtK,EAASsiC,EAAIziC,GAAIA,EAAGyiC,IAC5B8U,EAAOl0C,KAAKo/B,EAAIziC,IAGxB,OAAOu3C,CAEf,CACO,SAASiC,EAAK/W,EAAKviC,EAAIC,GAC1B,GAAMsiC,GAAOviC,EAGb,IAAK,IAAIF,EAAI,EAAGyD,EAAMg/B,EAAI3hC,OAAQd,EAAIyD,EAAKzD,IACvC,GAAIE,EAAGuK,KAAKtK,EAASsiC,EAAIziC,GAAIA,EAAGyiC,GAC5B,OAAOA,EAAIziC,EAGvB,CACO,SAAS04C,EAAKt+C,GACjB,IAAKA,EACD,MAAO,GAEX,GAAI0O,OAAO4vC,KACP,OAAO5vC,OAAO4vC,KAAKt+C,GAEvB,IAAIg/C,EAAU,GACd,IAAK,IAAI/+C,KAAOD,EACRA,EAAIqtB,eAAeptB,IACnB++C,EAAQ/1C,KAAKhJ,GAGrB,OAAO++C,CACX,CAUO,IAAIv/B,EAAQq9B,GAAiBuC,EAAWvC,EAAcr9B,MACvDq9B,EAAczsC,KAAKoP,KAAKq9B,EAAcr9B,MAV5C,SAAsBI,EAAM9Z,GAExB,IADA,IAAIy3B,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUh3B,OAAQ+2B,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,OAAO,WACH,OAAO5d,EAAKie,MAAM/3B,EAASy3B,EAAK19B,OAAO48C,EAAYrsC,KAAKqtB,YAC5D,CACJ,EAIA,SAAS4hB,EAAMz/B,GAEX,IADA,IAAI2d,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUh3B,OAAQ+2B,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,OAAO,WACH,OAAO5d,EAAKie,MAAMv9B,KAAMi9B,EAAK19B,OAAO48C,EAAYrsC,KAAKqtB,YACzD,CACJ,CAEO,SAASogB,EAAQ73C,GACpB,OAAImK,MAAM0tC,QACC1tC,MAAM0tC,QAAQ73C,GAEU,mBAA5Bm2C,EAAY/rC,KAAKpK,EAC5B,CACO,SAASo5C,EAAWp5C,GACvB,MAAwB,mBAAVA,CAClB,CACO,SAASs5C,EAASt5C,GACrB,MAAwB,iBAAVA,CAClB,CACO,SAASu5C,EAAav5C,GACzB,MAAmC,oBAA5Bm2C,EAAY/rC,KAAKpK,EAC5B,CACO,SAASw5C,EAASx5C,GACrB,MAAwB,iBAAVA,CAClB,CACO,SAAS03C,EAAS13C,GACrB,IAAI6H,SAAc7H,EAClB,MAAgB,aAAT6H,KAA0B7H,GAAkB,WAAT6H,CAC9C,CACO,SAASiwC,EAAgB93C,GAC5B,QAASg2C,EAAeG,EAAY/rC,KAAKpK,GAC7C,CACO,SAASy5C,EAAaz5C,GACzB,QAASk2C,EAAYC,EAAY/rC,KAAKpK,GAC1C,CACO,SAASu3C,EAAMv3C,GAClB,MAAwB,iBAAVA,GACmB,iBAAnBA,EAAM05C,UACkB,iBAAxB15C,EAAM25C,aACxB,CACO,SAASC,EAAiB55C,GAC7B,OAA2B,MAApBA,EAAMkT,UACjB,CACO,SAAS2mC,EAAqB75C,GACjC,OAAsB,MAAfA,EAAMmpB,KACjB,CACO,SAAS2wB,EAAS95C,GACrB,MAAmC,oBAA5Bm2C,EAAY/rC,KAAKpK,EAC5B,CACO,SAAS+5C,EAAM/5C,GAClB,OAAOA,GAAUA,CACrB,CACO,SAASg6C,IAEZ,IADA,IAAIziB,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUh3B,OAAQ+2B,IACpCD,EAAKC,GAAMC,UAAUD,GAEzB,IAAK,IAAI73B,EAAI,EAAGyD,EAAMm0B,EAAK92B,OAAQd,EAAIyD,EAAKzD,IACxC,GAAe,MAAX43B,EAAK53B,GACL,OAAO43B,EAAK53B,EAGxB,CACO,SAASs6C,EAAUC,EAAQC,GAC9B,OAAiB,MAAVD,EACDA,EACAC,CACV,CACO,SAASC,EAAUF,EAAQC,EAAQE,GACtC,OAAiB,MAAVH,EACDA,EACU,MAAVC,EACIA,EACAE,CACd,CACO,SAAS12C,EAAMy+B,GAElB,IADA,IAAI7K,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUh3B,OAAQ+2B,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,OAAOif,EAAY5e,MAAMuK,EAAK7K,EAClC,CACO,SAAS+iB,EAAkBzxC,GAC9B,GAAqB,iBAAV,EACP,MAAO,CAACA,EAAKA,EAAKA,EAAKA,GAE3B,IAAIzF,EAAMyF,EAAIpI,OACd,OAAY,IAAR2C,EACO,CAACyF,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,IAEvB,IAARzF,EACE,CAACyF,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,IAEjCA,CACX,CACO,SAAS0xC,EAAOC,EAAWC,GAC9B,IAAKD,EACD,MAAM,IAAItF,MAAMuF,EAExB,CACO,SAASC,GAAKtO,GACjB,OAAW,MAAPA,EACO,KAEkB,mBAAbA,EAAIsO,KACTtO,EAAIsO,OAGJtO,EAAID,QAAQ,qCAAsC,GAEjE,CACA,IAAIwO,GAAe,mBACZ,SAASC,GAAe7gD,GAC3BA,EAAI4gD,KAAgB,CACxB,CACO,SAASvD,GAAYr9C,GACxB,OAAOA,EAAI4gD,GACf,CACA,IAAIE,GAAe,WACf,SAASA,IACLvgD,KAAKuiC,KAAO,CAAC,CACjB,CA6BA,OA5BAge,EAAYjgD,UAAkB,OAAI,SAAUZ,GACxC,IAAI8gD,EAAUxgD,KAAKkqC,IAAIxqC,GAIvB,OAHI8gD,UACOxgD,KAAKuiC,KAAK7iC,GAEd8gD,CACX,EACAD,EAAYjgD,UAAU4pC,IAAM,SAAUxqC,GAClC,OAAOM,KAAKuiC,KAAKzV,eAAeptB,EACpC,EACA6gD,EAAYjgD,UAAU+N,IAAM,SAAU3O,GAClC,OAAOM,KAAKuiC,KAAK7iC,EACrB,EACA6gD,EAAYjgD,UAAUgO,IAAM,SAAU5O,EAAKgG,GAEvC,OADA1F,KAAKuiC,KAAK7iC,GAAOgG,EACV1F,IACX,EACAugD,EAAYjgD,UAAUy9C,KAAO,WACzB,OAAOA,EAAK/9C,KAAKuiC,KACrB,EACAge,EAAYjgD,UAAU27C,QAAU,SAAUwE,GACtC,IAAIle,EAAOviC,KAAKuiC,KAChB,IAAK,IAAI7iC,KAAO6iC,EACRA,EAAKzV,eAAeptB,IACpB+gD,EAASle,EAAK7iC,GAAMA,EAGhC,EACO6gD,CACX,CAjCkB,GAkCdG,GAAsC,mBAARC,IAIlC,IAAIC,GAAW,WACX,SAASA,EAAQnhD,GACb,IAAI+Z,EAAQ+jC,EAAQ99C,GACpBO,KAAKuiC,KALDme,GAAuB,IAAIC,IAAQ,IAAIJ,GAM3C,IAAIM,EAAU7gD,KAId,SAAS8gD,EAAMp7C,EAAOhG,GAClB8Z,EAAQqnC,EAAQvyC,IAAI5I,EAAOhG,GAAOmhD,EAAQvyC,IAAI5O,EAAKgG,EACvD,CALCjG,aAAemhD,EACVnhD,EAAIk/C,KAAKmC,GACRrhD,GAAOk/C,EAAKl/C,EAAKqhD,EAI5B,CAyBA,OAxBAF,EAAQtgD,UAAUygD,OAAS,SAAUrhD,GACjC,OAAOM,KAAKuiC,KAAK2H,IAAIxqC,EACzB,EACAkhD,EAAQtgD,UAAU+N,IAAM,SAAU3O,GAC9B,OAAOM,KAAKuiC,KAAKl0B,IAAI3O,EACzB,EACAkhD,EAAQtgD,UAAUgO,IAAM,SAAU5O,EAAKgG,GAEnC,OADA1F,KAAKuiC,KAAKj0B,IAAI5O,EAAKgG,GACZA,CACX,EACAk7C,EAAQtgD,UAAUq+C,KAAO,SAAUp5C,EAAIC,GACnCxF,KAAKuiC,KAAK0Z,SAAQ,SAAUv2C,EAAOhG,GAC/B6F,EAAGuK,KAAKtK,EAASE,EAAOhG,EAC5B,GACJ,EACAkhD,EAAQtgD,UAAUy9C,KAAO,WACrB,IAAIA,EAAO/9C,KAAKuiC,KAAKwb,OACrB,OAAO2C,GACD7wC,MAAMmtC,KAAKe,GACXA,CACV,EACA6C,EAAQtgD,UAAU0gD,UAAY,SAAUthD,GACpCM,KAAKuiC,KAAa,OAAE7iC,EACxB,EACOkhD,CACX,CArCc,GAuCP,SAASK,GAAcxhD,GAC1B,OAAO,IAAImhD,GAAQnhD,EACvB,CACO,SAASyhD,GAAY7tC,EAAG+F,GAE3B,IADA,IAAI+nC,EAAW,IAAI9tC,EAAEipC,YAAYjpC,EAAElN,OAASiT,EAAEjT,QACrCd,EAAI,EAAGA,EAAIgO,EAAElN,OAAQd,IAC1B87C,EAAS97C,GAAKgO,EAAEhO,GAEpB,IAAI7B,EAAS6P,EAAElN,OACf,IAASd,EAAI,EAAGA,EAAI+T,EAAEjT,OAAQd,IAC1B87C,EAAS97C,EAAI7B,GAAU4V,EAAE/T,GAE7B,OAAO87C,CACX,CACO,SAASC,GAAa5e,EAAO6e,GAChC,IAAI5hD,EACJ,GAAI0O,OAAOisB,OACP36B,EAAM0O,OAAOisB,OAAOoI,OAEnB,CACD,IAAI8e,EAAY,WAAc,EAC9BA,EAAUhhD,UAAYkiC,EACtB/iC,EAAM,IAAI6hD,CACd,CAIA,OAHID,GACA1D,EAAOl+C,EAAK4hD,GAET5hD,CACX,CACO,SAAS8hD,GAAkBhhC,GAC9B,IAAIgB,EAAWhB,EAAIN,MACnBsB,EAASigC,iBAAmB,OAC5BjgC,EAASkgC,WAAa,OACtBlgC,EAASmgC,wBAA0B,gBACnCngC,EAAS,yBAA2B,MACxC,CACO,SAASogC,GAAOC,EAAKtxB,GACxB,OAAOsxB,EAAI90B,eAAewD,EAC9B,CACO,SAASuxB,KAAS,CAClB,IAAIC,GAAmB,IAAMzvC,KAAKE,0BC7hBlC,SAAS6nB,EAAO13B,EAAGC,GAOtB,OANS,MAALD,IACAA,EAAI,GAEC,MAALC,IACAA,EAAI,GAED,CAACD,EAAGC,EACf,CACO,SAASL,EAAKsT,EAAK6gC,GAGtB,OAFA7gC,EAAI,GAAK6gC,EAAE,GACX7gC,EAAI,GAAK6gC,EAAE,GACJ7gC,CACX,CACO,SAASwlB,EAAMqb,GAClB,MAAO,CAACA,EAAE,GAAIA,EAAE,GACpB,CACO,SAASnoC,EAAIsH,EAAKvC,EAAG+F,GAGxB,OAFAxD,EAAI,GAAKvC,EACTuC,EAAI,GAAKwD,EACFxD,CACX,CACO,SAAS+wB,EAAI/wB,EAAKmsC,EAAI5Y,GAGzB,OAFAvzB,EAAI,GAAKmsC,EAAG,GAAK5Y,EAAG,GACpBvzB,EAAI,GAAKmsC,EAAG,GAAK5Y,EAAG,GACbvzB,CACX,CACO,SAASixB,EAAYjxB,EAAKmsC,EAAI5Y,EAAI91B,GAGrC,OAFAuC,EAAI,GAAKmsC,EAAG,GAAK5Y,EAAG,GAAK91B,EACzBuC,EAAI,GAAKmsC,EAAG,GAAK5Y,EAAG,GAAK91B,EAClBuC,CACX,CACO,SAAS2pB,EAAI3pB,EAAKmsC,EAAI5Y,GAGzB,OAFAvzB,EAAI,GAAKmsC,EAAG,GAAK5Y,EAAG,GACpBvzB,EAAI,GAAKmsC,EAAG,GAAK5Y,EAAG,GACbvzB,CACX,CACO,SAAS9M,EAAI2tC,GAChB,OAAOpkC,KAAKW,KAAK8zB,EAAU2P,GAC/B,kaAEO,SAAS3P,EAAU2P,GACtB,OAAOA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,EAClC,CAeO,SAASp0B,EAAMzM,EAAK6gC,EAAGrjC,GAG1B,OAFAwC,EAAI,GAAK6gC,EAAE,GAAKrjC,EAChBwC,EAAI,GAAK6gC,EAAE,GAAKrjC,EACTwC,CACX,CACO,SAAS4pB,EAAU5pB,EAAK6gC,GAC3B,IAAI9R,EAAI77B,EAAI2tC,GASZ,OARU,IAAN9R,GACA/uB,EAAI,GAAK,EACTA,EAAI,GAAK,IAGTA,EAAI,GAAK6gC,EAAE,GAAK9R,EAChB/uB,EAAI,GAAK6gC,EAAE,GAAK9R,GAEb/uB,CACX,CACO,SAASqjB,EAAS8oB,EAAI5Y,GACzB,OAAO92B,KAAKW,MAAM+uC,EAAG,GAAK5Y,EAAG,KAAO4Y,EAAG,GAAK5Y,EAAG,KACxC4Y,EAAG,GAAK5Y,EAAG,KAAO4Y,EAAG,GAAK5Y,EAAG,IACxC,CACO,IAAI6Y,EAAO/oB,EAKX,IAAIgpB,EAJJ,SAAwBF,EAAI5Y,GAC/B,OAAQ4Y,EAAG,GAAK5Y,EAAG,KAAO4Y,EAAG,GAAK5Y,EAAG,KAC9B4Y,EAAG,GAAK5Y,EAAG,KAAO4Y,EAAG,GAAK5Y,EAAG,GACxC,EAOO,SAAS/B,EAAKxxB,EAAKmsC,EAAI5Y,EAAI5P,GAG9B,OAFA3jB,EAAI,GAAKmsC,EAAG,GAAKxoB,GAAK4P,EAAG,GAAK4Y,EAAG,IACjCnsC,EAAI,GAAKmsC,EAAG,GAAKxoB,GAAK4P,EAAG,GAAK4Y,EAAG,IAC1BnsC,CACX,CACO,SAASpT,EAAeoT,EAAK6gC,EAAG51C,GACnC,IAAI6B,EAAI+zC,EAAE,GACN9zC,EAAI8zC,EAAE,GAGV,OAFA7gC,EAAI,GAAK/U,EAAE,GAAK6B,EAAI7B,EAAE,GAAK8B,EAAI9B,EAAE,GACjC+U,EAAI,GAAK/U,EAAE,GAAK6B,EAAI7B,EAAE,GAAK8B,EAAI9B,EAAE,GAC1B+U,CACX,CACO,SAASX,EAAIW,EAAKmsC,EAAI5Y,GAGzB,OAFAvzB,EAAI,GAAKvD,KAAK4C,IAAI8sC,EAAG,GAAI5Y,EAAG,IAC5BvzB,EAAI,GAAKvD,KAAK4C,IAAI8sC,EAAG,GAAI5Y,EAAG,IACrBvzB,CACX,CACO,SAASY,EAAIZ,EAAKmsC,EAAI5Y,GAGzB,OAFAvzB,EAAI,GAAKvD,KAAKmE,IAAIurC,EAAG,GAAI5Y,EAAG,IAC5BvzB,EAAI,GAAKvD,KAAKmE,IAAIurC,EAAG,GAAI5Y,EAAG,IACrBvzB,CACX,gDC7GIssC,EAAgB,SAAU7hC,GAE1B,SAAS6hC,IACL,IAAIrkC,EAAmB,OAAXwC,GAAmBA,EAAOkd,MAAMv9B,KAAMm9B,YAAcn9B,KAEhE,OADA6d,EAAMtQ,KAAO,WACNsQ,CACX,CAsCA,OA3CA,QAAUqkC,EAAc7hC,GAMxB6hC,EAAa5hD,UAAU6hD,iBAAmB,WAGtC,IAFA,IAAIC,EAAQpiD,KAAKuxB,MAAM6wB,MACnBC,EAAYriD,KAAKsiD,eACZj9C,EAAI,EAAGA,EAAI+8C,EAAMj8C,OAAQd,IAC9Bg9C,EAAYA,GAAaD,EAAM/8C,GAAGi9C,eAElCD,GACAriD,KAAKuiD,YAEb,EACAL,EAAa5hD,UAAUmxB,YAAc,WACjCzxB,KAAKmiD,mBAGL,IAFA,IAAIC,EAAQpiD,KAAKuxB,MAAM6wB,OAAS,GAC5B//B,EAAQriB,KAAKqzB,iBACRhuB,EAAI,EAAGA,EAAI+8C,EAAMj8C,OAAQd,IACzB+8C,EAAM/8C,GAAGitB,MACV8vB,EAAM/8C,GAAGktB,kBAEb6vB,EAAM/8C,GAAGitB,KAAKgB,SAASjR,EAAM,GAAIA,EAAM,GAAI+/B,EAAM/8C,GAAGkuB,uBAE5D,EACA2uB,EAAa5hD,UAAUgxB,UAAY,SAAUvP,EAAKwP,GAE9C,IADA,IAAI6wB,EAAQ7wB,EAAM6wB,OAAS,GAClB/8C,EAAI,EAAGA,EAAI+8C,EAAMj8C,OAAQd,IAC9B+8C,EAAM/8C,GAAGisB,UAAUvP,EAAKqgC,EAAM/8C,GAAGksB,OAAO,EAEhD,EACA2wB,EAAa5hD,UAAUuhB,WAAa,WAEhC,IADA,IAAIugC,EAAQpiD,KAAKuxB,MAAM6wB,OAAS,GACvB/8C,EAAI,EAAGA,EAAI+8C,EAAMj8C,OAAQd,IAC9B+8C,EAAM/8C,GAAGyuB,aAEjB,EACAouB,EAAa5hD,UAAUiC,gBAAkB,WAErC,OADAvC,KAAKmiD,iBAAiBryC,KAAK9P,MACpB,KAAKM,UAAUiC,gBAAgBuN,KAAK9P,KAC/C,EACOkiD,CACX,CA7CmB,CA6CjB,MACF,+IC3CIM,EAAkB,cAAgBnwC,KAAKovB,MAAuB,GAAhBpvB,KAAKqW,UAC5C+5B,EAAuB,CAC9BC,WAAY,EACZC,cAAe,EACfC,cAAe,EACf5yB,YAAa,OACbxB,QAAS,EACTuB,MAAO,eAEA8yB,EAAiC,CACxC5iC,MAAO,CACHyiC,YAAY,EACZC,eAAe,EACfC,eAAe,EACf5yB,aAAa,EACbxB,SAAS,IAGjBi0B,EAAqBD,IAAmB,EACxC,IAAIljD,EAAsB,CAAC,IAAK,KAAM,aAClCwjD,EAAqC,CAAC,aACtCC,EAAe,SAAU1iC,GAEzB,SAAS0iC,EAAYhjD,GACjB,OAAOsgB,EAAOvQ,KAAK9P,KAAMD,IAAUC,IACvC,CAyQ+B,IACvBgjD,EAcR,OA3RA,QAAUD,EAAa1iC,GAIvB0iC,EAAYziD,UAAUD,MAAQ,SAAUN,GAEpC,IADA,IAAImG,GAAU,QAAKnG,GACVsF,EAAI,EAAGA,EAAIa,EAAQC,OAAQd,IAAK,CACrC,IAAI3F,EAAMwG,EAAQb,GACN,UAAR3F,EACAM,KAAKijD,SAASljD,EAAML,IAGpB2gB,EAAO/f,UAAUmF,OAAOqK,KAAK9P,KAAMN,EAAKK,EAAML,GAEtD,CACKM,KAAKigB,OACNjgB,KAAKijD,SAAS,CAAC,EAEvB,EACAF,EAAYziD,UAAUmxB,YAAc,WAAc,EAClDsxB,EAAYziD,UAAUuhB,WAAa,WAAc,EACjDkhC,EAAYziD,UAAUoxB,iBAAmB,WAAc,EACvDqxB,EAAYziD,UAAUi1B,gBAAkB,WAAc,EACtDwtB,EAAYziD,UAAU2jB,gBAAkB,SAAUxB,EAAWC,EAAYwgC,EAAkBC,GACvF,IAAItiD,EAAIb,KAAKc,UACb,GAAId,KAAKL,QACFK,KAAKojD,WACkB,IAAvBpjD,KAAKigB,MAAMuO,SACVxuB,KAAKqjD,SAmQrB,SAA6B92C,EAAIpJ,EAAOC,GACpCkgD,EAAQhhD,KAAKiK,EAAGhK,mBACZgK,EAAGzL,WACHwiD,EAAQ9gD,eAAe+J,EAAGzL,WAI9B,OAFAyiD,EAASpgD,MAAQA,EACjBogD,EAASngD,OAASA,GACVkgD,EAAQ5/B,UAAU6/B,EAC9B,CA1QmBC,CAAoBxjD,KAAMyiB,EAAWC,IACxC7hB,IAAMA,EAAE,KAAOA,EAAE,GACrB,OAAO,EAEX,GAAIqiD,GAAoBljD,KAAKkxB,YACzB,IAAK,IAAI7rB,EAAI,EAAGA,EAAIrF,KAAKkxB,YAAY/qB,SAAUd,EAC3C,GAAIrF,KAAKkxB,YAAY7rB,GAAGgsB,aACpB,OAAO,EAInB,GAAI8xB,GAAqBnjD,KAAKiC,OAE1B,IADA,IAAIwhD,EAAWzjD,KAAKiC,OACbwhD,GAAU,CACb,GAAIA,EAAS9jD,OACT,OAAO,EAEX8jD,EAAWA,EAASxhD,MACxB,CAEJ,OAAO,CACX,EACA8gD,EAAYziD,UAAU23B,QAAU,SAAUv1B,EAAGC,GACzC,OAAO3C,KAAK0jD,YAAYhhD,EAAGC,EAC/B,EACAogD,EAAYziD,UAAUgF,SAAW,SAAUC,EAAIC,GAC3CD,EAAGuK,KAAKtK,EAASxF,KACrB,EACA+iD,EAAYziD,UAAUojD,YAAc,SAAUhhD,EAAGC,GAC7C,IAAIghD,EAAQ3jD,KAAKkpC,sBAAsBxmC,EAAGC,GAE1C,OADW3C,KAAKuC,kBACJ01B,QAAQ0rB,EAAM,GAAIA,EAAM,GACxC,EACAZ,EAAYziD,UAAU8M,aAAe,WACjC,IAAI6V,EAAOjjB,KAAK4jD,WAChB,IAAK5jD,KAAK4jD,YAAc5jD,KAAKqB,QAAS,CAClC,IAAIP,EAAYd,KAAKc,UACjB+iD,EAAS7jD,KAAKuC,kBACd0d,EAAQjgB,KAAKigB,MACb6jC,EAAa7jC,EAAMyiC,YAAc,EACjCC,EAAgB1iC,EAAM0iC,eAAiB,EACvCC,EAAgB3iC,EAAM2iC,eAAiB,EAC3C3/B,EAAOjjB,KAAK4jD,aAAe5jD,KAAK4jD,WAAa,IAAI,IAAa,EAAG,EAAG,EAAG,IACnE9iD,EACA,IAAa0B,eAAeygB,EAAM4gC,EAAQ/iD,GAG1CmiB,EAAK3gB,KAAKuhD,IAEVC,GAAcnB,GAAiBC,KAC/B3/B,EAAK9f,OAAsB,EAAb2gD,EAAiBzxC,KAAKwlB,IAAI8qB,GACxC1/B,EAAK7f,QAAuB,EAAb0gD,EAAiBzxC,KAAKwlB,IAAI+qB,GACzC3/B,EAAKvgB,EAAI2P,KAAK4C,IAAIgO,EAAKvgB,EAAGugB,EAAKvgB,EAAIigD,EAAgBmB,GACnD7gC,EAAKtgB,EAAI0P,KAAK4C,IAAIgO,EAAKtgB,EAAGsgB,EAAKtgB,EAAIigD,EAAgBkB,IAEvD,IAAIC,EAAY/jD,KAAKgkD,mBAChB/gC,EAAKE,WACNF,EAAKvgB,EAAI2P,KAAK6E,MAAM+L,EAAKvgB,EAAIqhD,GAC7B9gC,EAAKtgB,EAAI0P,KAAK6E,MAAM+L,EAAKtgB,EAAIohD,GAC7B9gC,EAAK9f,MAAQkP,KAAK4xC,KAAKhhC,EAAK9f,MAAQ,EAAgB,EAAZ4gD,GACxC9gC,EAAK7f,OAASiP,KAAK4xC,KAAKhhC,EAAK7f,OAAS,EAAgB,EAAZ2gD,GAElD,CACA,OAAO9gC,CACX,EACA8/B,EAAYziD,UAAUgrB,iBAAmB,SAAUD,GAC3CA,GACArrB,KAAKkkD,eAAiBlkD,KAAKkkD,gBAAkB,IAAI,IAAa,EAAG,EAAG,EAAG,GACvElkD,KAAKkkD,eAAe5hD,KAAK+oB,IAGzBrrB,KAAKkkD,eAAiB,IAE9B,EACAnB,EAAYziD,UAAU8jB,iBAAmB,WACrC,OAAOpkB,KAAKkkD,cAChB,EACAnB,EAAYziD,UAAU6jD,aAAe,SAAU93C,GAC3C,OAAOrM,KAAKoM,QAAQ,QAASC,EACjC,EACA02C,EAAYziD,UAAUmM,sBAAwB,SAAU23C,GAClC,UAAdA,EACApkD,KAAK6E,aAGL7E,KAAKgB,YAEb,EACA+hD,EAAYziD,UAAUmF,OAAS,SAAU/F,EAAKgG,GAC9B,UAARhG,EACA2gB,EAAO/f,UAAUmF,OAAOqK,KAAK9P,KAAMN,EAAKgG,GAGnC1F,KAAKigB,MAINjgB,KAAKqkD,SAAS3+C,GAHd1F,KAAKijD,SAASv9C,EAM1B,EACAq9C,EAAYziD,UAAU+jD,SAAW,SAAUp+C,EAAUP,GAQjD,MAPwB,iBAAbO,EACPjG,KAAKigB,MAAMha,GAAYP,GAGvB,QAAO1F,KAAKigB,MAAOha,GAEvBjG,KAAK6E,aACE7E,IACX,EACA+iD,EAAYziD,UAAUuE,WAAa,SAAUy/C,GACpCA,GACDtkD,KAAKgB,aAEThB,KAAKqB,SAAW,KACZrB,KAAKukD,QACLvkD,KAAKukD,MAAQ,KAErB,EACAxB,EAAYziD,UAAUyL,MAAQ,WAC1B/L,KAAK6E,YACT,EACAk+C,EAAYziD,UAAUuvB,aAAe,WACjC,SAAU7vB,KAAKqB,QAAU,KAC7B,EACA0hD,EAAYziD,UAAUkkD,aAAe,WACjCxkD,KAAKqB,UAAY,IACrB,EACA0hD,EAAYziD,UAAUmkD,YAAc,SAAUhlD,GAC1C,OAAO,QAAagjD,EAAsBhjD,EAC9C,EACAsjD,EAAYziD,UAAU2iD,SAAW,SAAUxjD,GAClCA,EAAI+iD,KACL/iD,EAAMO,KAAKykD,YAAYhlD,IAEvBO,KAAKqI,UACLrI,KAAK8wB,aAAerxB,EAGpBO,KAAKigB,MAAQxgB,EAEjBO,KAAK6E,YACT,EACAk+C,EAAYziD,UAAUokD,cAAgB,SAAUjlD,GAC5C,OAAOA,EAAI+iD,EACf,EACAO,EAAYziD,UAAUgG,mBAAqB,SAAUD,GACjDga,EAAO/f,UAAUgG,mBAAmBwJ,KAAK9P,KAAMqG,GAC/C,IAAIE,EAAcvG,KAAKwG,aACnBH,EAAQ4Z,QAAU1Z,EAAY0Z,QAC9B1Z,EAAY0Z,MAAQjgB,KAAK2kD,YAAY3kD,KAAKykD,cAAezkD,KAAKigB,QAElEjgB,KAAKgH,qBAAqBX,EAASE,EAAajH,EACpD,EACAyjD,EAAYziD,UAAU8H,eAAiB,SAAUX,EAAWM,EAAOxB,EAAamB,EAAmBwC,EAAYrC,GAC3GwY,EAAO/f,UAAU8H,eAAe0H,KAAK9P,KAAMyH,EAAWM,EAAOxB,EAAamB,EAAmBwC,EAAYrC,GACzG,IACI+8C,EADAz6C,IAAyBpC,GAASL,GAoBtC,GAlBIK,GAASA,EAAMkY,MACX/V,EACIxC,EACAk9C,EAAc78C,EAAMkY,OAGpB2kC,EAAc5kD,KAAK2kD,YAAY3kD,KAAKykD,cAAel+C,EAAY0Z,OAC/DjgB,KAAK2kD,YAAYC,EAAa78C,EAAMkY,SAIxC2kC,EAAc5kD,KAAK2kD,YAAY3kD,KAAKykD,cAAe/8C,EAAoB1H,KAAKigB,MAAQ1Z,EAAY0Z,OAChGjgB,KAAK2kD,YAAYC,EAAa78C,EAAMkY,QAGnC9V,IACLy6C,EAAcr+C,EAAY0Z,OAE1B2kC,EACA,GAAI16C,EAAY,CACZ,IAAI26C,EAAc7kD,KAAKigB,MAEvB,GADAjgB,KAAKigB,MAAQjgB,KAAKykD,YAAYt6C,EAAuB,CAAC,EAAI06C,GACtD16C,EAEA,IADA,IAAI26C,GAAc,QAAKD,GACdx/C,EAAI,EAAGA,EAAIy/C,EAAY3+C,OAAQd,IAAK,EACrC3F,EAAMolD,EAAYz/C,MACXu/C,IACPA,EAAYllD,GAAOklD,EAAYllD,GAC/BM,KAAKigB,MAAMvgB,GAAOmlD,EAAYnlD,GAEtC,CAEJ,IAAIuQ,GAAa,QAAK20C,GACtB,IAASv/C,EAAI,EAAGA,EAAI4K,EAAW9J,OAAQd,IAAK,CACxC,IAAI3F,EAAMuQ,EAAW5K,GACrBrF,KAAKigB,MAAMvgB,GAAOM,KAAKigB,MAAMvgB,EACjC,CACAM,KAAKwK,iBAAiB/C,EAAW,CAC7BwY,MAAO2kC,GACR/8C,EAAc7H,KAAK+kD,yBAC1B,MAEI/kD,KAAKijD,SAAS2B,GAGtB,IAAII,EAAahlD,KAAKqI,UAAYy6C,EAAqCxjD,EACvE,IAAS+F,EAAI,EAAGA,EAAI2/C,EAAW7+C,OAAQd,IAAK,CACpC3F,EAAMslD,EAAW3/C,GACjB0C,GAAuB,MAAdA,EAAMrI,GACfM,KAAKN,GAAOqI,EAAMrI,GAEbyK,GACmB,MAApB5D,EAAY7G,KACZM,KAAKN,GAAO6G,EAAY7G,GAGpC,CACJ,EACAqjD,EAAYziD,UAAU6I,aAAe,SAAU/I,GAG3C,IAFA,IACI6kD,EADA/7C,EAAcmX,EAAO/f,UAAU6I,aAAa2G,KAAK9P,KAAMI,GAElDiF,EAAI,EAAGA,EAAIjF,EAAO+F,OAAQd,IAAK,CACpC,IAAI0C,EAAQ3H,EAAOiF,GACf0C,EAAMkY,QACNglC,EAAcA,GAAe,CAAC,EAC9BjlD,KAAK2kD,YAAYM,EAAal9C,EAAMkY,OAE5C,CAIA,OAHIglC,IACA/7C,EAAY+W,MAAQglC,GAEjB/7C,CACX,EACA65C,EAAYziD,UAAUqkD,YAAc,SAAUC,EAAaC,GAEvD,OADA,QAAOD,EAAaC,GACbD,CACX,EACA7B,EAAYziD,UAAUykD,uBAAyB,WAC3C,OAAOlC,CACX,EACAE,EAAY11C,mBACJ21C,EAAYD,EAAYziD,WAClBiN,KAAO,cACjBy1C,EAAUI,WAAY,EACtBJ,EAAUp6B,EAAI,EACdo6B,EAAUkC,GAAK,EACflC,EAAUniC,OAAS,EACnBmiC,EAAUK,SAAU,EACpBL,EAAUmC,OAAS,UACnBnC,EAAUoC,WAAY,EACtBpC,EAAUpiC,aAAc,EACxBoiC,EAAUuB,MAAQ,KAClBvB,EAAUgB,mBAAqB,OAC/BhB,EAAU3hD,QAAU,KAAa,OAE9B0hD,CACX,CA7RkB,CA6RhB,KACEO,EAAU,IAAI,IAAa,EAAG,EAAG,EAAG,GACpCC,EAAW,IAAI,IAAa,EAAG,EAAG,EAAG,GAUzC,4BCnUA,IAAI8B,EAAY,WACZ,SAASA,EAASzsC,GACd5Y,KAAK4Y,WAAaA,GAAc,EACpC,CAOA,OANAysC,EAAS/kD,UAAU21B,aAAe,SAAUzyB,EAAQ+S,GAChDvW,KAAK4Y,WAAWlQ,KAAK,CACjBlF,OAAQA,EACR+S,MAAOA,GAEf,EACO8uC,CACX,CAXe,GAYf,4ECRIC,EAAS,SAAUjlC,GAEnB,SAASilC,EAAMrxC,GACX,IAAI4J,EAAQwC,EAAOvQ,KAAK9P,OAASA,KAIjC,OAHA6d,EAAMpQ,SAAU,EAChBoQ,EAAM0nC,UAAY,GAClB1nC,EAAMtd,KAAK0T,GACJ4J,CACX,CAmKA,OA1KA,QAAUynC,EAAOjlC,GAQjBilC,EAAMhlD,UAAUklD,YAAc,WAC1B,OAAOxlD,KAAKulD,SAChB,EACAD,EAAMhlD,UAAUmlD,SAAW,WACvB,OAAOzlD,KAAKulD,UAAUl8C,OAC1B,EACAi8C,EAAMhlD,UAAUolD,QAAU,SAAUl8C,GAChC,OAAOxJ,KAAKulD,UAAU/7C,EAC1B,EACA87C,EAAMhlD,UAAUqlD,YAAc,SAAUv+C,GAEpC,IADA,IAAIq+C,EAAWzlD,KAAKulD,UACXlgD,EAAI,EAAGA,EAAIogD,EAASt/C,OAAQd,IACjC,GAAIogD,EAASpgD,GAAG+B,OAASA,EACrB,OAAOq+C,EAASpgD,EAG5B,EACAigD,EAAMhlD,UAAUslD,WAAa,WACzB,OAAO5lD,KAAKulD,UAAUp/C,MAC1B,EACAm/C,EAAMhlD,UAAUqmC,IAAM,SAAUkf,GAY5B,OAXIA,GACIA,IAAU7lD,MAAQ6lD,EAAM5jD,SAAWjC,OACnCA,KAAKulD,UAAU78C,KAAKm9C,GACpB7lD,KAAK8lD,OAAOD,IAQb7lD,IACX,EACAslD,EAAMhlD,UAAUylD,UAAY,SAAUF,EAAOj6B,GACzC,GAAIi6B,GAASA,IAAU7lD,MAAQ6lD,EAAM5jD,SAAWjC,MACzC4rB,GAAeA,EAAY3pB,SAAWjC,KAAM,CAC/C,IAAIylD,EAAWzlD,KAAKulD,UAChB/7C,EAAMi8C,EAAS9hD,QAAQioB,GACvBpiB,GAAO,IACPi8C,EAASh8C,OAAOD,EAAK,EAAGq8C,GACxB7lD,KAAK8lD,OAAOD,GAEpB,CACA,OAAO7lD,IACX,EACAslD,EAAMhlD,UAAUuxC,QAAU,SAAUmU,EAAUC,GAC1C,IAAIz8C,EAAM,KAAexJ,KAAKulD,UAAWS,GAIzC,OAHIx8C,GAAO,GACPxJ,KAAKkmD,UAAUD,EAAUz8C,GAEtBxJ,IACX,EACAslD,EAAMhlD,UAAU4lD,UAAY,SAAUL,EAAOM,GACzC,IAAIV,EAAWzlD,KAAKulD,UAChBa,EAAMX,EAASU,GACnB,GAAIN,GAASA,IAAU7lD,MAAQ6lD,EAAM5jD,SAAWjC,MAAQ6lD,IAAUO,EAAK,CACnEX,EAASU,GAASN,EAClBO,EAAInkD,OAAS,KACb,IAAI2I,EAAK5K,KAAK8E,KACV8F,GACAw7C,EAAIr7C,iBAAiBH,GAEzB5K,KAAK8lD,OAAOD,EAChB,CACA,OAAO7lD,IACX,EACAslD,EAAMhlD,UAAUwlD,OAAS,SAAUD,GAC3BA,EAAM5jD,QACN4jD,EAAM5jD,OAAOm8B,OAAOynB,GAExBA,EAAM5jD,OAASjC,KACf,IAAI4K,EAAK5K,KAAK8E,KACV8F,GAAMA,IAAOi7C,EAAM/gD,MACnB+gD,EAAMh7C,YAAYD,GAEtBA,GAAMA,EAAGkB,SACb,EACAw5C,EAAMhlD,UAAU89B,OAAS,SAAUynB,GAC/B,IAAIj7C,EAAK5K,KAAK8E,KACV2gD,EAAWzlD,KAAKulD,UAChB/7C,EAAM,KAAei8C,EAAUI,GACnC,OAAIr8C,EAAM,IAGVi8C,EAASh8C,OAAOD,EAAK,GACrBq8C,EAAM5jD,OAAS,KACX2I,GACAi7C,EAAM96C,iBAAiBH,GAE3BA,GAAMA,EAAGkB,WAPE9L,IASf,EACAslD,EAAMhlD,UAAU+lD,UAAY,WAGxB,IAFA,IAAIZ,EAAWzlD,KAAKulD,UAChB36C,EAAK5K,KAAK8E,KACLO,EAAI,EAAGA,EAAIogD,EAASt/C,OAAQd,IAAK,CACtC,IAAIwgD,EAAQJ,EAASpgD,GACjBuF,GACAi7C,EAAM96C,iBAAiBH,GAE3Bi7C,EAAM5jD,OAAS,IACnB,CAEA,OADAwjD,EAASt/C,OAAS,EACXnG,IACX,EACAslD,EAAMhlD,UAAUgmD,UAAY,SAAU/gD,EAAIC,GAEtC,IADA,IAAIigD,EAAWzlD,KAAKulD,UACXlgD,EAAI,EAAGA,EAAIogD,EAASt/C,OAAQd,IAAK,CACtC,IAAIwgD,EAAQJ,EAASpgD,GACrBE,EAAGuK,KAAKtK,EAASqgD,EAAOxgD,EAC5B,CACA,OAAOrF,IACX,EACAslD,EAAMhlD,UAAUgF,SAAW,SAAUC,EAAIC,GACrC,IAAK,IAAIH,EAAI,EAAGA,EAAIrF,KAAKulD,UAAUp/C,OAAQd,IAAK,CAC5C,IAAIwgD,EAAQ7lD,KAAKulD,UAAUlgD,GACvBkhD,EAAUhhD,EAAGuK,KAAKtK,EAASqgD,GAC3BA,EAAMp4C,UAAY84C,GAClBV,EAAMvgD,SAASC,EAAIC,EAE3B,CACA,OAAOxF,IACX,EACAslD,EAAMhlD,UAAUuK,YAAc,SAAUD,GACpCyV,EAAO/f,UAAUuK,YAAYiF,KAAK9P,KAAM4K,GACxC,IAAK,IAAIvF,EAAI,EAAGA,EAAIrF,KAAKulD,UAAUp/C,OAAQd,IAAK,CAChCrF,KAAKulD,UAAUlgD,GACrBwF,YAAYD,EACtB,CACJ,EACA06C,EAAMhlD,UAAUyK,iBAAmB,SAAUH,GACzCyV,EAAO/f,UAAUyK,iBAAiB+E,KAAK9P,KAAM4K,GAC7C,IAAK,IAAIvF,EAAI,EAAGA,EAAIrF,KAAKulD,UAAUp/C,OAAQd,IAAK,CAChCrF,KAAKulD,UAAUlgD,GACrB0F,iBAAiBH,EAC3B,CACJ,EACA06C,EAAMhlD,UAAUiC,gBAAkB,SAAUikD,GAKxC,IAJA,IAAIlD,EAAU,IAAI,IAAa,EAAG,EAAG,EAAG,GACpCmC,EAAWe,GAAmBxmD,KAAKulD,UACnCkB,EAAS,GACTxjC,EAAO,KACF5d,EAAI,EAAGA,EAAIogD,EAASt/C,OAAQd,IAAK,CACtC,IAAIwgD,EAAQJ,EAASpgD,GACrB,IAAIwgD,EAAMlmD,SAAUkmD,EAAMzC,UAA1B,CAGA,IAAIsD,EAAYb,EAAMtjD,kBAClBzB,EAAY+kD,EAAMje,kBAAkB6e,GACpC3lD,GACA,IAAa0B,eAAe8gD,EAASoD,EAAW5lD,IAChDmiB,EAAOA,GAAQqgC,EAAQloB,SAClBxX,MAAM0/B,KAGXrgC,EAAOA,GAAQyjC,EAAUtrB,SACpBxX,MAAM8iC,EAVf,CAYJ,CACA,OAAOzjC,GAAQqgC,CACnB,EACOgC,CACX,CA5KY,CA4KV,KACFA,EAAMhlD,UAAUiN,KAAO,QACvB,2EC9KWo5C,GAAsB,QAAS,CACtCjkD,EAAG,EACHC,EAAG,GACJ,MACQikD,EAAgC,CACvC3mC,OAAO,QAAS,CACZvd,GAAG,EACHC,GAAG,EACHQ,OAAO,EACPC,QAAQ,EACRyxB,IAAI,EACJC,IAAI,EACJH,QAAQ,EACRC,SAAS,GACV,KAA+B3U,QAOtC,IAAI4mC,EAAW,SAAUxmC,GAErB,SAASwmC,IACL,OAAkB,OAAXxmC,GAAmBA,EAAOkd,MAAMv9B,KAAMm9B,YAAcn9B,IAC/D,CAwCA,OA3CA,QAAU6mD,EAASxmC,GAInBwmC,EAAQvmD,UAAUmkD,YAAc,SAAUhlD,GACtC,OAAO,QAAaknD,EAAqBlnD,EAC7C,EACAonD,EAAQvmD,UAAUwmD,SAAW,SAAU5mB,GACnC,IAAIjgB,EAAQjgB,KAAKigB,MACbg4B,EAAOh4B,EAAMigB,GACjB,GAAY,MAAR+X,EACA,OAAOA,EAEX,IAnBa1oC,EAmBTw3C,GAnBSx3C,EAmBiB0Q,EAAM4O,QAjBf,iBAAXtf,GACPA,EAAOpM,OAASoM,EAAOnM,OAiBpB6c,EAAM4O,MAAQ7uB,KAAK8uB,QACzB,IAAKi4B,EACD,OAAO,EAEX,IAAIC,EAAmB,UAAR9mB,EAAkB,SAAW,QACxC+mB,EAAehnC,EAAM+mC,GACzB,OAAoB,MAAhBC,EACOF,EAAY7mB,GAGZ6mB,EAAY7mB,GAAO6mB,EAAYC,GAAYC,CAE1D,EACAJ,EAAQvmD,UAAUwf,SAAW,WACzB,OAAO9f,KAAK8mD,SAAS,QACzB,EACAD,EAAQvmD,UAAUyf,UAAY,WAC1B,OAAO/f,KAAK8mD,SAAS,SACzB,EACAD,EAAQvmD,UAAUykD,uBAAyB,WACvC,OAAO6B,CACX,EACAC,EAAQvmD,UAAUiC,gBAAkB,WAChC,IAAI0d,EAAQjgB,KAAKigB,MAIjB,OAHKjgB,KAAKukD,QACNvkD,KAAKukD,MAAQ,IAAI,IAAatkC,EAAMvd,GAAK,EAAGud,EAAMtd,GAAK,EAAG3C,KAAK8f,WAAY9f,KAAK+f,cAE7E/f,KAAKukD,KAChB,EACOsC,CACX,CA7Cc,CA6CZ,MACFA,EAAQvmD,UAAUiN,KAAO,QACzB,iECrEI1M,EAAI,GACJqmD,EAA0B,SAAU7mC,GAEpC,SAAS6mC,IACL,IAAIrpC,EAAmB,OAAXwC,GAAmBA,EAAOkd,MAAMv9B,KAAMm9B,YAAcn9B,KAMhE,OALA6d,EAAM2M,UAAW,EACjB3M,EAAM+C,aAAc,EACpB/C,EAAMspC,cAAgB,GACtBtpC,EAAMupC,uBAAyB,GAC/BvpC,EAAMwpC,QAAU,EACTxpC,CACX,CA+FA,OAxGA,QAAUqpC,EAAwB7mC,GAUlC6mC,EAAuB5mD,UAAUgF,SAAW,SAAUC,EAAIC,GACtDD,EAAGuK,KAAKtK,EAASxF,KACrB,EACAknD,EAAuB5mD,UAAU2iD,SAAW,WACxCjjD,KAAKigB,MAAQ,CAAC,CAClB,EACAinC,EAAuB5mD,UAAU+0B,UAAY,WACzC,OAAOr1B,KAAKqnD,OAChB,EACAH,EAAuB5mD,UAAUi1B,gBAAkB,WAC/Cv1B,KAAKqnD,QAAUrnD,KAAKmnD,cAAchhD,MACtC,EACA+gD,EAAuB5mD,UAAUgnD,iBAAmB,WAChDtnD,KAAKmnD,cAAgB,GACrBnnD,KAAKonD,uBAAyB,GAC9BpnD,KAAKqnD,QAAU,EACfrnD,KAAKgB,aACLhB,KAAKwqB,UAAW,CACpB,EACA08B,EAAuB5mD,UAAUm1B,0BAA4B,WACzDz1B,KAAKonD,uBAAyB,EAClC,EACAF,EAAuB5mD,UAAUinD,eAAiB,SAAUjyB,EAAakyB,GACjEA,EACAxnD,KAAKonD,uBAAuB1+C,KAAK4sB,GAGjCt1B,KAAKmnD,cAAcz+C,KAAK4sB,GAE5Bt1B,KAAKgB,YACT,EACAkmD,EAAuB5mD,UAAUmnD,gBAAkB,SAAUxyB,EAAcuyB,GACvEA,EAAgBA,IAAiB,EACjC,IAAK,IAAIniD,EAAI,EAAGA,EAAI4vB,EAAa9uB,OAAQd,IACrCrF,KAAKunD,eAAetyB,EAAa5vB,GAAImiD,EAE7C,EACAN,EAAuB5mD,UAAU40B,gBAAkB,WAC/C,OAAOl1B,KAAKmnD,aAChB,EACAD,EAAuB5mD,UAAU00B,wBAA0B,WACvD,OAAOh1B,KAAKonD,sBAChB,EACAF,EAAuB5mD,UAAUonD,uBAAyB,SAAUniD,GAChE,IAAK,IAAIF,EAAIrF,KAAKqnD,QAAShiD,EAAIrF,KAAKmnD,cAAchhD,OAAQd,IACtDE,GAAMA,EAAGvF,KAAKmnD,cAAc9hD,IAEhC,IAASA,EAAI,EAAGA,EAAIrF,KAAKonD,uBAAuBjhD,OAAQd,IACpDE,GAAMA,EAAGvF,KAAKonD,uBAAuB/hD,GAE7C,EACA6hD,EAAuB5mD,UAAUa,OAAS,WACtCnB,KAAKoB,kBACL,IAAK,IAAIiE,EAAIrF,KAAKqnD,QAAShiD,EAAIrF,KAAKmnD,cAAchhD,OAAQd,IAAK,EACvDiwB,EAAct1B,KAAKmnD,cAAc9hD,IACzBpD,OAASjC,KACrBs1B,EAAYn0B,SACZm0B,EAAYrzB,OAAS,IACzB,CACA,IAASoD,EAAI,EAAGA,EAAIrF,KAAKonD,uBAAuBjhD,OAAQd,IAAK,CACzD,IAAIiwB,KAAct1B,KAAKonD,uBAAuB/hD,IAClCpD,OAASjC,KACrBs1B,EAAYn0B,SACZm0B,EAAYrzB,OAAS,IACzB,CACJ,EACAilD,EAAuB5mD,UAAUiC,gBAAkB,WAC/C,IAAKvC,KAAKukD,MAAO,CAEb,IADA,IAAIthC,EAAO,IAAI,IAAaM,IAAUA,KAAWA,KAAWA,KACnDle,EAAI,EAAGA,EAAIrF,KAAKmnD,cAAchhD,OAAQd,IAAK,CAChD,IAAIiwB,EAAct1B,KAAKmnD,cAAc9hD,GACjCqhD,EAAYpxB,EAAY/yB,kBAAkB64B,QAC1C9F,EAAY6S,sBACZue,EAAUlkD,eAAe8yB,EAAYsS,kBAAkB/mC,IAE3DoiB,EAAKW,MAAM8iC,EACf,CACA1mD,KAAKukD,MAAQthC,CACjB,CACA,OAAOjjB,KAAKukD,KAChB,EACA2C,EAAuB5mD,UAAU23B,QAAU,SAAUv1B,EAAGC,GACpD,IAAIglD,EAAW3nD,KAAKkpC,sBAAsBxmC,EAAGC,GAE7C,GADW3C,KAAKuC,kBACP01B,QAAQ0vB,EAAS,GAAIA,EAAS,IACnC,IAAK,IAAItiD,EAAI,EAAGA,EAAIrF,KAAKmnD,cAAchhD,OAAQd,IAAK,CAEhD,GADkBrF,KAAKmnD,cAAc9hD,GACrB4yB,QAAQv1B,EAAGC,GACvB,OAAO,CAEf,CAEJ,OAAO,CACX,EACOukD,CACX,CA1G6B,CA0G3B,MACF,2CC7GIU,EAAkB,SAAUvnC,GAE5B,SAASunC,EAAellD,EAAGC,EAAGmY,EAAIC,EAAInC,EAAYivC,GAC9C,IAAIhqC,EAAQwC,EAAOvQ,KAAK9P,KAAM4Y,IAAe5Y,KAO7C,OANA6d,EAAMnb,EAAS,MAALA,EAAY,EAAIA,EAC1Bmb,EAAMlb,EAAS,MAALA,EAAY,EAAIA,EAC1Bkb,EAAM/C,GAAW,MAANA,EAAa,EAAIA,EAC5B+C,EAAM9C,GAAW,MAANA,EAAa,EAAIA,EAC5B8C,EAAMtQ,KAAO,SACbsQ,EAAMhD,OAASgtC,IAAe,EACvBhqC,CACX,CACA,OAXA,QAAU+pC,EAAgBvnC,GAWnBunC,CACX,CAbqB,UAanB,GACF,6ICfO,SAASrwB,EAAcC,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,EAAIlW,EAAW/qB,EAAGC,GACxE,GAAkB,IAAd8qB,EACA,OAAO,EAEX,IAAImK,EAAKnK,EACT,QAAK9qB,EAAI80B,EAAKG,GAAMj1B,EAAIg1B,EAAKC,GAAMj1B,EAAIoY,EAAK6c,GAAMj1B,EAAIghC,EAAK/L,GACnDj1B,EAAI80B,EAAKG,GAAMj1B,EAAIg1B,EAAKC,GAAMj1B,EAAIoY,EAAK6c,GAAMj1B,EAAIghC,EAAK/L,GACtDl1B,EAAI80B,EAAKI,GAAMl1B,EAAIg1B,EAAKE,GAAMl1B,EAAIoY,EAAK8c,GAAMl1B,EAAIghC,EAAK9L,GACtDl1B,EAAI80B,EAAKI,GAAMl1B,EAAIg1B,EAAKE,GAAMl1B,EAAIoY,EAAK8c,GAAMl1B,EAAIghC,EAAK9L,IAGtDkwB,EAAA,GAAwBtwB,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,EAAIjhC,EAAGC,EAAG,OAC1Di1B,EAAK,CACrB,0BCbIuB,EAAgB,EAAV9mB,KAAKE,GACR,SAAS,EAAcuxB,EAAIC,EAAI/oB,EAAGgpB,EAAYC,EAAUrC,EAAenU,EAAW/qB,EAAGC,GACxF,GAAkB,IAAd8qB,EACA,OAAO,EAEX,IAAImK,EAAKnK,EACT/qB,GAAKohC,EACLnhC,GAAKohC,EACL,IAAIY,EAAItyB,KAAKW,KAAKtQ,EAAIA,EAAIC,EAAIA,GAC9B,GAAKgiC,EAAI/M,EAAK5c,GAAO2pB,EAAI/M,EAAK5c,EAC1B,OAAO,EAEX,GAAI3I,KAAKwlB,IAAImM,EAAaC,GAAY9K,EAAM,KACxC,OAAO,EAEX,GAAIyI,EAAe,CACf,IAAI9J,EAAMkM,EACVA,GAAa,OAAgBC,GAC7BA,GAAW,OAAgBnM,EAC/B,MAEIkM,GAAa,OAAgBA,GAC7BC,GAAW,OAAgBA,GAE3BD,EAAaC,IACbA,GAAY9K,GAEhB,IAAIE,EAAQhnB,KAAKy2B,MAAMnmC,EAAGD,GAI1B,OAHI22B,EAAQ,IACRA,GAASF,GAELE,GAAS2K,GAAc3K,GAAS4K,GAChC5K,EAAQF,GAAO6K,GAAc3K,EAAQF,GAAO8K,CACxD,gBC3BI5D,EAAM2B,EAAA,EAAU3B,IAChB,EAAgB,EAAVhuB,KAAKE,GACXwlB,EAAU,KAId,IAAIoU,EAAQ,EAAE,GAAI,GAAI,GAClBc,EAAU,EAAE,GAAI,GAMpB,SAAS8a,EAAavwB,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,EAAIjhC,EAAGC,GACrD,GAAKA,EAAI80B,GAAM90B,EAAIg1B,GAAMh1B,EAAIoY,GAAMpY,EAAIghC,GAC/BhhC,EAAI80B,GAAM90B,EAAIg1B,GAAMh1B,EAAIoY,GAAMpY,EAAIghC,EACtC,OAAO,EAEX,IATI7L,EASAkwB,EAASF,EAAA,GAAkBrwB,EAAIE,EAAI5c,EAAI4oB,EAAIhhC,EAAGwpC,GAClD,GAAe,IAAX6b,EACA,OAAO,EAOP,IAJA,IAAIztC,EAAI,EACJ0tC,GAAY,EACZC,OAAM,EACNC,OAAM,EACD9iD,EAAI,EAAGA,EAAI2iD,EAAQ3iD,IAAK,CAC7B,IAAIk0B,EAAI4S,EAAM9mC,GACV+iD,EAAc,IAAN7uB,GAAiB,IAANA,EAAW,GAAM,EAC/BuuB,EAAA,GAActwB,EAAIE,EAAI5c,EAAI4oB,EAAInK,GAC9B72B,IAGLulD,EAAW,IACXA,EAAWH,EAAA,GAAmBrwB,EAAIE,EAAI5c,EAAI4oB,EAAIsJ,GAC1CA,EAAQ,GAAKA,EAAQ,IAAMgb,EAAW,IA3BlDnwB,WAAMmV,EAAQ,GAClBA,EAAQ,GAAKA,EAAQ,GACrBA,EAAQ,GAAKnV,GA4BDowB,EAAMJ,EAAA,GAAcrwB,EAAIE,EAAI5c,EAAI4oB,EAAIsJ,EAAQ,IACxCgb,EAAW,IACXE,EAAML,EAAA,GAAcrwB,EAAIE,EAAI5c,EAAI4oB,EAAIsJ,EAAQ,MAGnC,IAAbgb,EACI1uB,EAAI0T,EAAQ,GACZ1yB,GAAK2tC,EAAMzwB,EAAK2wB,GAAQA,EAEnB7uB,EAAI0T,EAAQ,GACjB1yB,GAAK4tC,EAAMD,EAAME,GAAQA,EAGzB7tC,GAAKopB,EAAKwkB,EAAMC,GAAQA,EAIxB7uB,EAAI0T,EAAQ,GACZ1yB,GAAK2tC,EAAMzwB,EAAK2wB,GAAQA,EAGxB7tC,GAAKopB,EAAKukB,EAAME,GAAQA,EAGpC,CACA,OAAO7tC,CAEf,CACA,SAAS8tC,EAAiB7wB,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAIrY,EAAGC,GACjD,GAAKA,EAAI80B,GAAM90B,EAAIg1B,GAAMh1B,EAAIoY,GACrBpY,EAAI80B,GAAM90B,EAAIg1B,GAAMh1B,EAAIoY,EAC5B,OAAO,EAEX,IAAIitC,EAASF,EAAA,GAAsBrwB,EAAIE,EAAI5c,EAAIpY,EAAGwpC,GAClD,GAAe,IAAX6b,EACA,OAAO,EAGP,IAAIzuB,EAAIuuB,EAAA,GAAwBrwB,EAAIE,EAAI5c,GACxC,GAAIwe,GAAK,GAAKA,GAAK,EAAG,CAGlB,IAFA,IAAIhf,EAAI,EACJ+tC,EAAKR,EAAA,GAAkBrwB,EAAIE,EAAI5c,EAAIwe,GAC9Bl0B,EAAI,EAAGA,EAAI2iD,EAAQ3iD,IAAK,CAC7B,IAAI+iD,EAAqB,IAAbjc,EAAM9mC,IAAyB,IAAb8mC,EAAM9mC,GAAY,GAAM,EAC7CyiD,EAAA,GAAkBtwB,EAAIE,EAAI5c,EAAIqxB,EAAM9mC,IACpC3C,IAGLypC,EAAM9mC,GAAKk0B,EACXhf,GAAK+tC,EAAK7wB,EAAK2wB,GAAQA,EAGvB7tC,GAAKQ,EAAKutC,EAAKF,GAAQA,EAE/B,CACA,OAAO7tC,CACX,CAEQ6tC,EAAqB,IAAbjc,EAAM,IAAyB,IAAbA,EAAM,GAAY,GAAM,EAEtD,OADS2b,EAAA,GAAkBtwB,EAAIE,EAAI5c,EAAIqxB,EAAM,IACpCzpC,EACE,EAEJqY,EAAK0c,EAAK2wB,GAAQA,CAGrC,CACA,SAASG,EAAWzkB,EAAIC,EAAI/oB,EAAGgpB,EAAYC,EAAUrC,EAAel/B,EAAGC,GAEnE,IADAA,GAAKohC,GACG/oB,GAAKrY,GAAKqY,EACd,OAAO,EAEX,IAAI8c,EAAMzlB,KAAKW,KAAKgI,EAAIA,EAAIrY,EAAIA,GAChCwpC,EAAM,IAAMrU,EACZqU,EAAM,GAAKrU,EACX,IAAI0wB,EAASn2C,KAAKwlB,IAAImM,EAAaC,GACnC,GAAIukB,EAAS,KACT,OAAO,EAEX,GAAIA,GAAU,EAAM,KAAM,CACtBxkB,EAAa,EACbC,EAAW,EACX,IAAIzK,EAAMoI,EAAgB,GAAK,EAC/B,OAAIl/B,GAAKypC,EAAM,GAAKrI,GAAMphC,GAAKypC,EAAM,GAAKrI,EAC/BtK,EAGA,CAEf,CACA,GAAIwK,EAAaC,EAAU,CACvB,IAAIwkB,EAAQzkB,EACZA,EAAaC,EACbA,EAAWwkB,CACf,CACIzkB,EAAa,IACbA,GAAc,EACdC,GAAY,GAGhB,IADA,IAAI1pB,EAAI,EACClV,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAIo0B,EAAK0S,EAAM9mC,GACf,GAAIo0B,EAAKqK,EAAKphC,EAAG,CACb,IAAI22B,EAAQhnB,KAAKy2B,MAAMnmC,EAAG82B,GACtBD,EAAMoI,EAAgB,GAAK,EAC3BvI,EAAQ,IACRA,EAAQ,EAAMA,IAEbA,GAAS2K,GAAc3K,GAAS4K,GAC7B5K,EAAQ,GAAO2K,GAAc3K,EAAQ,GAAO4K,KAC5C5K,EAAQhnB,KAAKE,GAAK,GAAK8mB,EAAkB,IAAVhnB,KAAKE,KACpCinB,GAAOA,GAEXjf,GAAKif,EAEb,CACJ,CACA,OAAOjf,CACX,CACA,SAASmuC,EAAYp2B,EAAM7E,EAAWk7B,EAAUjmD,EAAGC,GAU/C,IATA,IAOI+0B,EACAC,EApKetkB,EAAG+F,EA4JlBmpB,EAAOjQ,EAAKiQ,KACZz5B,EAAMwpB,EAAKxpB,MACXyR,EAAI,EACJ2qB,EAAK,EACLC,EAAK,EACL3N,EAAK,EACLC,EAAK,EAGApyB,EAAI,EAAGA,EAAIyD,GAAM,CACtB,IAAI27B,EAAMlC,EAAKl9B,KACX+/B,EAAgB,IAAN//B,EAYd,OAXIo/B,IAAQpE,EAAIC,GAAKj7B,EAAI,IAChBsjD,IACDpuC,IAAK,EAAA+e,EAAA,GAAY4L,EAAIC,EAAI3N,EAAIC,EAAI/0B,EAAGC,KAGxCyiC,IAGA5N,EAFA0N,EAAK3C,EAAKl9B,GAGVoyB,EAFA0N,EAAK5C,EAAKl9B,EAAI,IAIVo/B,GACJ,KAAKpE,EAAIC,EAGL4E,EAFA1N,EAAK+K,EAAKl9B,KAGV8/B,EAFA1N,EAAK8K,EAAKl9B,KAGV,MACJ,KAAKg7B,EAAIE,EACL,GAAIooB,GACA,GAAIC,EAAA,EAAmB1jB,EAAIC,EAAI5C,EAAKl9B,GAAIk9B,EAAKl9B,EAAI,GAAIooB,EAAW/qB,EAAGC,GAC/D,OAAO,OAIX4X,IAAK,EAAA+e,EAAA,GAAY4L,EAAIC,EAAI5C,EAAKl9B,GAAIk9B,EAAKl9B,EAAI,GAAI3C,EAAGC,IAAM,EAE5DuiC,EAAK3C,EAAKl9B,KACV8/B,EAAK5C,EAAKl9B,KACV,MACJ,KAAKg7B,EAAIG,EACL,GAAImoB,GACA,GAAI,EAAoBzjB,EAAIC,EAAI5C,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,GAAIk9B,EAAKl9B,EAAI,GAAIooB,EAAW/qB,EAAGC,GAC5G,OAAO,OAIX4X,GAAKwtC,EAAa7iB,EAAIC,EAAI5C,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,GAAIk9B,EAAKl9B,EAAI,GAAI3C,EAAGC,IAAM,EAEzGuiC,EAAK3C,EAAKl9B,KACV8/B,EAAK5C,EAAKl9B,KACV,MACJ,KAAKg7B,EAAII,EACL,GAAIkoB,GACA,GAAIE,EAAA,EAAwB3jB,EAAIC,EAAI5C,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,GAAIk9B,EAAKl9B,EAAI,GAAIooB,EAAW/qB,EAAGC,GAC1F,OAAO,OAIX4X,GAAK8tC,EAAiBnjB,EAAIC,EAAI5C,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,GAAIk9B,EAAKl9B,EAAI,GAAI3C,EAAGC,IAAM,EAEvFuiC,EAAK3C,EAAKl9B,KACV8/B,EAAK5C,EAAKl9B,KACV,MACJ,KAAKg7B,EAAIK,EACL,IAAIoD,EAAKvB,EAAKl9B,KACV0+B,EAAKxB,EAAKl9B,KACVggC,EAAK9C,EAAKl9B,KACVigC,EAAK/C,EAAKl9B,KACVwnC,EAAQtK,EAAKl9B,KACbmjD,EAASjmB,EAAKl9B,KAClBA,GAAK,EACL,IAAIu8B,KAAmB,EAAIW,EAAKl9B,MAChCqyB,EAAKrlB,KAAKC,IAAIu6B,GAASxH,EAAKvB,EAC5BnM,EAAKtlB,KAAKI,IAAIo6B,GAASvH,EAAKvB,EACvBqB,GAID5N,EAAKE,EACLD,EAAKE,GAJLpd,IAAK,EAAA+e,EAAA,GAAY4L,EAAIC,EAAIzN,EAAIC,EAAIj1B,EAAGC,GAMxC,IAAImmD,GAAMpmD,EAAIohC,GAAMwB,EAAKD,EAAKvB,EAC9B,GAAI6kB,GACA,GAAI,EAAkB7kB,EAAIC,EAAIuB,EAAIuH,EAAOA,EAAQ2b,EAAQ5mB,EAAenU,EAAWq7B,EAAInmD,GACnF,OAAO,OAIX4X,GAAKguC,EAAWzkB,EAAIC,EAAIuB,EAAIuH,EAAOA,EAAQ2b,EAAQ5mB,EAAeknB,EAAInmD,GAE1EuiC,EAAK7yB,KAAKC,IAAIu6B,EAAQ2b,GAAUnjB,EAAKvB,EACrCqB,EAAK9yB,KAAKI,IAAIo6B,EAAQ2b,GAAUljB,EAAKvB,EACrC,MACJ,KAAK1D,EAAIO,EAOL,GANApJ,EAAK0N,EAAK3C,EAAKl9B,KACfoyB,EAAK0N,EAAK5C,EAAKl9B,KAGfqyB,EAAKF,EAFO+K,EAAKl9B,KAGjBsyB,EAAKF,EAFQ8K,EAAKl9B,KAGdsjD,GACA,GAAIC,EAAA,EAAmBpxB,EAAIC,EAAIC,EAAID,EAAIhK,EAAW/qB,EAAGC,IAC9CimD,EAAA,EAAmBlxB,EAAID,EAAIC,EAAIC,EAAIlK,EAAW/qB,EAAGC,IACjDimD,EAAA,EAAmBlxB,EAAIC,EAAIH,EAAIG,EAAIlK,EAAW/qB,EAAGC,IACjDimD,EAAA,EAAmBpxB,EAAIG,EAAIH,EAAIC,EAAIhK,EAAW/qB,EAAGC,GACpD,OAAO,OAIX4X,IAAK,EAAA+e,EAAA,GAAY5B,EAAID,EAAIC,EAAIC,EAAIj1B,EAAGC,GACpC4X,IAAK,EAAA+e,EAAA,GAAY9B,EAAIG,EAAIH,EAAIC,EAAI/0B,EAAGC,GAExC,MACJ,KAAK09B,EAAIM,EACL,GAAIgoB,GACA,GAAIC,EAAA,EAAmB1jB,EAAIC,EAAI3N,EAAIC,EAAIhK,EAAW/qB,EAAGC,GACjD,OAAO,OAIX4X,IAAK,EAAA+e,EAAA,GAAY4L,EAAIC,EAAI3N,EAAIC,EAAI/0B,EAAGC,GAExCuiC,EAAK1N,EACL2N,EAAK1N,EAGjB,CAIA,OAHKkxB,IA9Rct1C,EA8Ra8xB,EA9RV/rB,EA8Rcqe,EA7R7BplB,KAAKwlB,IAAIxkB,EAAI+F,GAAK2e,KA8RrBxd,IAAK,EAAA+e,EAAA,GAAY4L,EAAIC,EAAI3N,EAAIC,EAAI/0B,EAAGC,IAAM,GAEjC,IAAN4X,CACX,2DCnSWwuC,GAAqB,QAAS,CACrCrkD,KAAM,OACNC,OAAQ,KACRqtB,cAAe,EACf1D,YAAa,EACbI,cAAe,EACff,eAAgB,EAChBF,UAAW,EACXu7B,QAAS,OACTC,WAAY,GACZp7B,eAAe,EACfmG,aAAa,GACd,MACQk1B,EAA+B,CACtCjpC,OAAO,QAAS,CACZvb,MAAM,EACNC,QAAQ,EACRqtB,eAAe,EACf1D,aAAa,EACbI,eAAe,EACff,gBAAgB,EAChBF,WAAW,EACXw7B,YAAY,GACb,KAA+BhpC,QAElCkpC,EAAiB,KAAoB5pD,OAAO,CAAC,YAC7C,UAAW,IAAK,KAAM,SAAU,WA0WpC,EAxWY,SAAU8gB,GAElB,SAAS+oC,EAAKn1C,GACV,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAyVwB,IAChBqpD,EAQR,OArWA,QAAUD,EAAM/oC,GAIhB+oC,EAAK9oD,UAAUa,OAAS,WACpB,IAAI0c,EAAQ7d,KACZqgB,EAAO/f,UAAUa,OAAO2O,KAAK9P,MAC7B,IAAIigB,EAAQjgB,KAAKigB,MACjB,GAAIA,EAAMqpC,MAAO,CACb,IAAIC,EAAUvpD,KAAKwpD,SAAWxpD,KAAKwpD,UAAY,IAAIJ,EAC/CG,EAAQj4B,YAAc83B,EAAK9oD,UAAUgxB,YACrCi4B,EAAQj4B,UAAY,SAAUvP,GAC1BlE,EAAMyT,UAAUvP,EAAKlE,EAAM0T,MAC/B,GAEJg4B,EAAQ/7C,QAAS,EACjB,IAAIi8C,EAAeF,EAAQtpC,MAC3B,IAAK,IAAIvgB,KAAOugB,EACRwpC,EAAa/pD,KAASugB,EAAMvgB,KAC5B+pD,EAAa/pD,GAAOugB,EAAMvgB,IAGlC+pD,EAAa/kD,KAAOub,EAAMvb,KAAOub,EAAMqpC,MAAQ,KAC/CG,EAAaH,MAAQ,KACrBG,EAAaz5B,YAAc,KAC3B/P,EAAM+T,cAAgBy1B,EAAa9kD,OAAS,MAC5C,IAAK,IAAIU,EAAI,EAAGA,EAAI8jD,EAAehjD,SAAUd,EACzCkkD,EAAQJ,EAAe9jD,IAAMrF,KAAKmpD,EAAe9jD,IAErDkkD,EAAQloD,SAAW,IACvB,MACSrB,KAAKwpD,WACVxpD,KAAKwpD,SAAW,KAExB,EACAJ,EAAK9oD,UAAUopD,gBAAkB,WAC7B,OAAO1pD,KAAKwpD,QAChB,EACAJ,EAAK9oD,UAAUD,MAAQ,SAAUN,GAC7B,IAAImG,GAAU,QAAKnG,GACnBC,KAAKuxB,MAAQvxB,KAAK2pD,kBAClB,IAAIC,EAAe5pD,KAAK6pD,kBACpBD,GACA5pD,KAAKijD,SAAS2G,GAElB,IAAK,IAAIvkD,EAAI,EAAGA,EAAIa,EAAQC,OAAQd,IAAK,CACrC,IAAI3F,EAAMwG,EAAQb,GACdK,EAAQ3F,EAAML,GACN,UAARA,EACKM,KAAKigB,OAIN,QAAOjgB,KAAKigB,MAAOva,GAHnB1F,KAAKijD,SAASv9C,GAML,UAARhG,GACL,QAAOM,KAAKuxB,MAAO7rB,GAGnB2a,EAAO/f,UAAUmF,OAAOqK,KAAK9P,KAAMN,EAAKgG,EAEhD,CACK1F,KAAKigB,OACNjgB,KAAKijD,SAAS,CAAC,EAEvB,EACAmG,EAAK9oD,UAAUupD,gBAAkB,WAC7B,OAAO,IACX,EACAT,EAAK9oD,UAAUqpD,gBAAkB,WAC7B,MAAO,CAAC,CACZ,EACAP,EAAK9oD,UAAU2D,gBAAkB,WAC7B,OAAOjE,KAAK+xB,SAChB,EACAq3B,EAAK9oD,UAAU8D,kBAAoB,WAC/B,IAAI0lD,EAAW9pD,KAAKigB,MAAMvb,KAC1B,GAAiB,SAAbolD,EAAqB,CACrB,IAAI,QAASA,GAAW,CACpB,IAAIC,GAAU,QAAID,EAAU,GAC5B,OAAIC,EAAU,GACH,KAEFA,EAAU,GACR,KAEJ,IACX,CACK,GAAID,EACL,OAAO,IAEf,CACA,OAAO,IACX,EACAV,EAAK9oD,UAAU+D,oBAAsB,SAAUP,GAC3C,IAAIgmD,EAAW9pD,KAAKigB,MAAMvb,KAC1B,IAAI,QAASolD,GAAW,CACpB,IAAIl/C,EAAK5K,KAAK8E,KAGd,MAFoB8F,IAAMA,EAAG7F,iBACX,QAAIjB,EAAU,GAAK,KAEjC,OAAOgmD,CAEf,CACJ,EACAV,EAAK9oD,UAAUgxB,UAAY,SAAUvP,EAAKioC,EAAU73B,GAAW,EAC/Di3B,EAAK9oD,UAAUwzB,YAAc,WACzB9zB,KAAKqB,UAAY,IACrB,EACA+nD,EAAK9oD,UAAU2pD,oBAAsB,SAAU93B,GAI3C,OAHCnyB,KAAKsyB,MAAQtyB,KAAKuyB,kBACnBvyB,KAAKsyB,KAAKvH,YACV/qB,KAAKsxB,UAAUtxB,KAAKsyB,KAAMtyB,KAAKuxB,MAAOY,GAC/BnyB,KAAKsyB,IAChB,EACA82B,EAAK9oD,UAAUiyB,gBAAkB,WAC7BvyB,KAAKsyB,KAAO,IAAI0P,EAAA,GAAU,EAC9B,EACAonB,EAAK9oD,UAAU8vB,UAAY,WACvB,IAAInQ,EAAQjgB,KAAKigB,MACbtb,EAASsb,EAAMtb,OACnB,QAAmB,MAAVA,GAA6B,SAAXA,KAAuBsb,EAAMwN,UAAY,GACxE,EACA27B,EAAK9oD,UAAUyxB,QAAU,WACrB,IACIrtB,EADQ1E,KAAKigB,MACAvb,KACjB,OAAe,MAARA,GAAyB,SAATA,CAC3B,EACA0kD,EAAK9oD,UAAUiC,gBAAkB,WAC7B,IAAI0gB,EAAOjjB,KAAKukD,MACZtkC,EAAQjgB,KAAKigB,MACbiqC,GAAmBjnC,EACvB,GAAIinC,EAAiB,CACjB,IAAIC,GAAc,EACbnqD,KAAKsyB,OACN63B,GAAc,EACdnqD,KAAKuyB,mBAET,IAAID,EAAOtyB,KAAKsyB,MACZ63B,GAAgBnqD,KAAKqB,QAAU,QAC/BixB,EAAKvH,YACL/qB,KAAKsxB,UAAUgB,EAAMtyB,KAAKuxB,OAAO,GACjCvxB,KAAK8zB,eAET7Q,EAAOqP,EAAK/vB,iBAChB,CAEA,GADAvC,KAAKukD,MAAQthC,EACTjjB,KAAKowB,aAAepwB,KAAKsyB,MAAQtyB,KAAKsyB,KAAKxpB,MAAQ,EAAG,CACtD,IAAIshD,EAAapqD,KAAKqqD,cAAgBrqD,KAAKqqD,YAAcpnC,EAAKmY,SAC9D,GAAIp7B,KAAKqB,SAAW6oD,EAAiB,CACjCE,EAAW9nD,KAAK2gB,GAChB,IAAIqnC,EAAYrqC,EAAM4N,cAAgB7tB,KAAK8tB,eAAiB,EACxDvT,EAAI0F,EAAMwN,UACd,IAAKztB,KAAK+xB,UAAW,CACjB,IAAIw4B,EAAyBvqD,KAAKuqD,uBAClChwC,EAAIlI,KAAKmE,IAAI+D,EAA6B,MAA1BgwC,EAAiC,EAAIA,EACzD,CACID,EAAY,QACZF,EAAWjnD,OAASoX,EAAI+vC,EACxBF,EAAWhnD,QAAUmX,EAAI+vC,EACzBF,EAAW1nD,GAAK6X,EAAI+vC,EAAY,EAChCF,EAAWznD,GAAK4X,EAAI+vC,EAAY,EAExC,CACA,OAAOF,CACX,CACA,OAAOnnC,CACX,EACAmmC,EAAK9oD,UAAU23B,QAAU,SAAUv1B,EAAGC,GAClC,IAAIglD,EAAW3nD,KAAKkpC,sBAAsBxmC,EAAGC,GACzCsgB,EAAOjjB,KAAKuC,kBACZ0d,EAAQjgB,KAAKigB,MAGjB,GAFAvd,EAAIilD,EAAS,GACbhlD,EAAIglD,EAAS,GACT1kC,EAAKgV,QAAQv1B,EAAGC,GAAI,CACpB,IAAI6nD,EAAYxqD,KAAKsyB,KACrB,GAAItyB,KAAKowB,YAAa,CAClB,IAAI3C,EAAYxN,EAAMwN,UAClB68B,EAAYrqC,EAAM4N,cAAgB7tB,KAAK8tB,eAAiB,EAC5D,GAAIw8B,EAAY,QACPtqD,KAAK+xB,YACNtE,EAAYpb,KAAKmE,IAAIiX,EAAWztB,KAAKuqD,yBDoFtD,SAAuBC,EAAW/8B,EAAW/qB,EAAGC,GACnD,OAAO+lD,EAAY8B,EAAW/8B,GAAW,EAAM/qB,EAAGC,EACtD,CCpFwB,CAA0B6nD,EAAW/8B,EAAY68B,EAAW5nD,EAAGC,IAC/D,OAAO,CAGnB,CACA,GAAI3C,KAAK+xB,UACL,ODyET,SAAiBy4B,EAAW9nD,EAAGC,GAClC,OAAO+lD,EAAY8B,EAAW,GAAG,EAAO9nD,EAAGC,EAC/C,CC3EuB,CAAoB6nD,EAAW9nD,EAAGC,EAEjD,CACA,OAAO,CACX,EACAymD,EAAK9oD,UAAUiiD,WAAa,WACxBviD,KAAKqB,SAAW,KACZrB,KAAKukD,QACLvkD,KAAKukD,MAAQ,MAEbvkD,KAAKwpD,UACLxpD,KAAKwpD,SAASjH,aAElBviD,KAAKgB,YACT,EACAooD,EAAK9oD,UAAUyL,MAAQ,WACnB/L,KAAK6E,aACL7E,KAAKuiD,YACT,EACA6G,EAAK9oD,UAAUmqD,aAAe,SAAUp+C,GACpC,OAAOrM,KAAKoM,QAAQ,QAASC,EACjC,EACA+8C,EAAK9oD,UAAUmM,sBAAwB,SAAU23C,GAC3B,UAAdA,EACApkD,KAAK6E,aAEc,UAAdu/C,EACLpkD,KAAKuiD,aAGLviD,KAAKgB,YAEb,EACAooD,EAAK9oD,UAAUmF,OAAS,SAAU/F,EAAKgG,GACvB,UAARhG,EACAM,KAAK0qD,SAAShlD,GAGd2a,EAAO/f,UAAUmF,OAAOqK,KAAK9P,KAAMN,EAAKgG,EAEhD,EACA0jD,EAAK9oD,UAAUoqD,SAAW,SAAUzkD,EAAUP,GAC1C,IAAI6rB,EAAQvxB,KAAKuxB,MAWjB,OAVKA,IACDA,EAAQvxB,KAAKuxB,MAAQ,CAAC,GAEF,iBAAbtrB,EACPsrB,EAAMtrB,GAAYP,GAGlB,QAAO6rB,EAAOtrB,GAElBjG,KAAKuiD,aACEviD,IACX,EACAopD,EAAK9oD,UAAUgiD,aAAe,WAC1B,SAAUtiD,KAAKqB,QAAU,KAC7B,EACA+nD,EAAK9oD,UAAUmkD,YAAc,SAAUhlD,GACnC,OAAO,QAAaspD,EAAoBtpD,EAC5C,EACA2pD,EAAK9oD,UAAUgG,mBAAqB,SAAUD,GAC1Cga,EAAO/f,UAAUgG,mBAAmBwJ,KAAK9P,KAAMqG,GAC/C,IAAIE,EAAcvG,KAAKwG,aACnBH,EAAQkrB,QAAUhrB,EAAYgrB,QAC9BhrB,EAAYgrB,OAAQ,QAAO,CAAC,EAAGvxB,KAAKuxB,OAE5C,EACA63B,EAAK9oD,UAAU8H,eAAiB,SAAUX,EAAWM,EAAOxB,EAAamB,EAAmBwC,EAAYrC,GACpGwY,EAAO/f,UAAU8H,eAAe0H,KAAK9P,KAAMyH,EAAWM,EAAOxB,EAAamB,EAAmBwC,EAAYrC,GACzG,IACI8iD,EADAxgD,IAAyBpC,GAASL,GAoBtC,GAlBIK,GAASA,EAAMwpB,MACXrnB,EACIxC,EACAijD,EAAc5iD,EAAMwpB,OAGpBo5B,GAAc,QAAO,CAAC,EAAGpkD,EAAYgrB,QACrC,QAAOo5B,EAAa5iD,EAAMwpB,SAI9Bo5B,GAAc,QAAO,CAAC,EAAGjjD,EAAoB1H,KAAKuxB,MAAQhrB,EAAYgrB,QACtE,QAAOo5B,EAAa5iD,EAAMwpB,QAGzBpnB,IACLwgD,EAAcpkD,EAAYgrB,OAE1Bo5B,EACA,GAAIzgD,EAAY,CACZlK,KAAKuxB,OAAQ,QAAO,CAAC,EAAGvxB,KAAKuxB,OAG7B,IAFA,IAAIq5B,EAA0B,CAAC,EAC3BC,GAAY,QAAKF,GACZtlD,EAAI,EAAGA,EAAIwlD,EAAU1kD,OAAQd,IAAK,CACvC,IAAI3F,EAAMmrD,EAAUxlD,GACY,iBAArBslD,EAAYjrD,GACnBM,KAAKuxB,MAAM7xB,GAAOirD,EAAYjrD,GAG9BkrD,EAAwBlrD,GAAOirD,EAAYjrD,EAEnD,CACAM,KAAKwK,iBAAiB/C,EAAW,CAC7B8pB,MAAOq5B,GACR/iD,EACP,MAEI7H,KAAKuxB,MAAQo5B,EACb3qD,KAAKuiD,YAGjB,EACA6G,EAAK9oD,UAAU6I,aAAe,SAAU/I,GAGpC,IAFA,IACI0qD,EADA5hD,EAAcmX,EAAO/f,UAAU6I,aAAa2G,KAAK9P,KAAMI,GAElDiF,EAAI,EAAGA,EAAIjF,EAAO+F,OAAQd,IAAK,CACpC,IAAI0C,EAAQ3H,EAAOiF,GACf0C,EAAMwpB,QACNu5B,EAAcA,GAAe,CAAC,EAC9B9qD,KAAK2kD,YAAYmG,EAAa/iD,EAAMwpB,OAE5C,CAIA,OAHIu5B,IACA5hD,EAAYqoB,MAAQu5B,GAEjB5hD,CACX,EACAkgD,EAAK9oD,UAAUykD,uBAAyB,WACpC,OAAOmE,CACX,EACAE,EAAK9oD,UAAU+wB,WAAa,WACxB,OAAO,CACX,EACA+3B,EAAKzL,OAAS,SAAUoN,GACpB,IAAIC,EAAO,SAAU3qC,GAEjB,SAAS2qC,EAAI/2C,GACT,IAAI4J,EAAQwC,EAAOvQ,KAAK9P,KAAMiU,IAASjU,KAEvC,OADA+qD,EAAaE,MAAQF,EAAaE,KAAKn7C,KAAK+N,EAAO5J,GAC5C4J,CACX,CAOA,OAZA,QAAUmtC,EAAK3qC,GAMf2qC,EAAI1qD,UAAUupD,gBAAkB,WAC5B,OAAO,QAAMkB,EAAa9qC,MAC9B,EACA+qC,EAAI1qD,UAAUqpD,gBAAkB,WAC5B,OAAO,QAAMoB,EAAax5B,MAC9B,EACOy5B,CACX,CAdU,CAcR5B,GACF,IAAK,IAAI1pD,KAAOqrD,EACqB,mBAAtBA,EAAarrD,KACpBsrD,EAAI1qD,UAAUZ,GAAOqrD,EAAarrD,IAG1C,OAAOsrD,CACX,EACA5B,EAAK/7C,mBACGg8C,EAAYD,EAAK9oD,WACXiN,KAAO,OACjB87C,EAAUkB,uBAAyB,EACnClB,EAAU91B,uBAAyB,EACnC81B,EAAU6B,kBAAmB,EAC7B7B,EAAUv3B,WAAY,OACtBu3B,EAAUhoD,QAAU,KAAa,KAAoB,OAElD+nD,CACX,CAvWW,CAuWTrG,EAAA,yCC1YEoI,EAAkB,SAAU9qC,GAE5B,SAAS8qC,EAAezoD,EAAGC,EAAGqY,EAAGpC,EAAYivC,GACzC,IAAIhqC,EAAQwC,EAAOvQ,KAAK9P,KAAM4Y,IAAe5Y,KAM7C,OALA6d,EAAMnb,EAAS,MAALA,EAAY,GAAMA,EAC5Bmb,EAAMlb,EAAS,MAALA,EAAY,GAAMA,EAC5Bkb,EAAM7C,EAAS,MAALA,EAAY,GAAMA,EAC5B6C,EAAMtQ,KAAO,SACbsQ,EAAMhD,OAASgtC,IAAe,EACvBhqC,CACX,CACA,OAVA,QAAUstC,EAAgB9qC,GAUnB8qC,CACX,CAZqB,UAYnB,GACF,+FCTWC,GAAsB,QAAS,CACtCp3B,aAAa,EACbG,KAAM,KACNzxB,EAAG,EACHC,EAAG,EACHb,UAAW,OACXsyB,aAAc,MACd60B,WAAY,GACb,MACCoC,EAAS,SAAUhrC,GAEnB,SAASgrC,IACL,OAAkB,OAAXhrC,GAAmBA,EAAOkd,MAAMv9B,KAAMm9B,YAAcn9B,IAC/D,CAwCA,OA3CA,QAAUqrD,EAAOhrC,GAIjBgrC,EAAM/qD,UAAU8vB,UAAY,WACxB,IAAInQ,EAAQjgB,KAAKigB,MACbtb,EAASsb,EAAMtb,OACnB,OAAiB,MAAVA,GAA6B,SAAXA,GAAqBsb,EAAMwN,UAAY,CACpE,EACA49B,EAAM/qD,UAAUyxB,QAAU,WACtB,IACIrtB,EADQ1E,KAAKigB,MACAvb,KACjB,OAAe,MAARA,GAAyB,SAATA,CAC3B,EACA2mD,EAAM/qD,UAAUmkD,YAAc,SAAUhlD,GACpC,OAAO,QAAa2rD,EAAqB3rD,EAC7C,EACA4rD,EAAM/qD,UAAUgrD,gBAAkB,SAAUroC,GACxCjjB,KAAKukD,MAAQthC,CACjB,EACAooC,EAAM/qD,UAAUiC,gBAAkB,WAC9B,IAAI0d,EAAQjgB,KAAKigB,MACjB,IAAKjgB,KAAKukD,MAAO,CACb,IAAIrwB,EAAOjU,EAAMiU,KACT,MAARA,EAAgBA,GAAQ,GAAOA,EAAO,GACtC,IAAIjR,GAAO,QAAgBiR,EAAMjU,EAAMkU,KAAMlU,EAAMne,UAAWme,EAAMmU,cAGpE,GAFAnR,EAAKvgB,GAAKud,EAAMvd,GAAK,EACrBugB,EAAKtgB,GAAKsd,EAAMtd,GAAK,EACjB3C,KAAKowB,YAAa,CAClB,IAAI7V,EAAI0F,EAAMwN,UACdxK,EAAKvgB,GAAK6X,EAAI,EACd0I,EAAKtgB,GAAK4X,EAAI,EACd0I,EAAK9f,OAASoX,EACd0I,EAAK7f,QAAUmX,CACnB,CACAva,KAAKukD,MAAQthC,CACjB,CACA,OAAOjjB,KAAKukD,KAChB,EACA8G,EAAMh+C,sBACeg+C,EAAM/qD,UACZ0jD,mBAAqB,IAE7BqH,CACX,CA7CY,CA6CV,MACFA,EAAM/qD,UAAUiN,KAAO,QACvB,2JC3DIg+C,EAAY,gCACT,SAASC,EAAat3B,EAAMu3B,EAAgBt3B,EAAMu3B,EAAUC,GAC/D,IAAKF,EACD,MAAO,GAEX,IAAI9yB,GAAazE,EAAO,IAAIzV,MAAM,MAClCktC,EAAUC,EAAuBH,EAAgBt3B,EAAMu3B,EAAUC,GACjE,IAAK,IAAItmD,EAAI,EAAGyD,EAAM6vB,EAAUxyB,OAAQd,EAAIyD,EAAKzD,IAC7CszB,EAAUtzB,GAAKwmD,EAAmBlzB,EAAUtzB,GAAIsmD,GAEpD,OAAOhzB,EAAUvvB,KAAK,KAC1B,CACA,SAASwiD,EAAuBH,EAAgBt3B,EAAMu3B,EAAUC,GAC5DA,EAAUA,GAAW,CAAC,EACtB,IAAIG,GAAe,QAAO,CAAC,EAAGH,GAC9BG,EAAa33B,KAAOA,EACpBu3B,GAAW,QAAUA,EAAU,OAC/BI,EAAaC,eAAgB,QAAUJ,EAAQI,cAAe,GAC9D,IAAIC,EAAUF,EAAaE,SAAU,QAAUL,EAAQK,QAAS,GAChEF,EAAaG,aAAc,QAAS,IAAK93B,GACzC,IAAI+3B,EAAeJ,EAAaI,cAAe,QAAS,IAAK/3B,GAC7D23B,EAAaK,aAAc,QAAUR,EAAQQ,YAAa,IAE1D,IADA,IAAIC,EAAeX,EAAiBp5C,KAAKmE,IAAI,EAAGi1C,EAAiB,GACxDpmD,EAAI,EAAGA,EAAI2mD,GAAWI,GAAgBF,EAAc7mD,IACzD+mD,GAAgBF,EAEpB,IAAIG,GAAgB,QAASX,EAAUv3B,GAUvC,OATIk4B,EAAgBD,IAChBV,EAAW,GACXW,EAAgB,GAEpBD,EAAeX,EAAiBY,EAChCP,EAAaJ,SAAWA,EACxBI,EAAaO,cAAgBA,EAC7BP,EAAaM,aAAeA,EAC5BN,EAAaL,eAAiBA,EACvBK,CACX,CACA,SAASD,EAAmBS,EAAUX,GAClC,IAAIF,EAAiBE,EAAQF,eACzBt3B,EAAOw3B,EAAQx3B,KACfi4B,EAAeT,EAAQS,aAC3B,IAAKX,EACD,MAAO,GAEX,IAAIh+B,GAAY,QAAS6+B,EAAUn4B,GACnC,GAAI1G,GAAag+B,EACb,OAAOa,EAEX,IAAK,IAAIr2C,EAAI,GAAIA,IAAK,CAClB,GAAIwX,GAAa2+B,GAAgBn2C,GAAK01C,EAAQI,cAAe,CACzDO,GAAYX,EAAQD,SACpB,KACJ,CACA,IAAIa,EAAkB,IAANt2C,EACVu2C,EAAeF,EAAUF,EAAcT,EAAQO,aAAcP,EAAQM,aACrEx+B,EAAY,EACRpb,KAAK6E,MAAMo1C,EAASnmD,OAASimD,EAAe3+B,GAC5C,EACV6+B,EAAWA,EAASG,OAAO,EAAGF,GAC9B9+B,GAAY,QAAS6+B,EAAUn4B,EACnC,CAIA,MAHiB,KAAbm4B,IACAA,EAAWX,EAAQQ,aAEhBG,CACX,CACA,SAASE,EAAet4B,EAAMk4B,EAAcF,EAAcD,GAGtD,IAFA,IAAI9oD,EAAQ,EACRkC,EAAI,EACCyD,EAAMorB,EAAK/tB,OAAQd,EAAIyD,GAAO3F,EAAQipD,EAAc/mD,IAAK,CAC9D,IAAIqnD,EAAWx4B,EAAKgkB,WAAW7yC,GAC/BlC,GAAU,GAAKupD,GAAYA,GAAY,IAAOR,EAAeD,CACjE,CACA,OAAO5mD,CACX,CA+DA,IAAIsnD,EACA,WACA,EAGAC,EACA,SAAsBC,GAClB7sD,KAAK6sD,OAAS,GACVA,IACA7sD,KAAK6sD,OAASA,EAEtB,EAGAC,EACA,WACI9sD,KAAKmD,MAAQ,EACbnD,KAAKoD,OAAS,EACdpD,KAAKosD,aAAe,EACpBpsD,KAAK+sD,cAAgB,EACrB/sD,KAAKgtD,WAAa,EAClBhtD,KAAKitD,YAAc,EACnBjtD,KAAKktD,MAAQ,EACjB,EA6HJ,SAASC,EAAWC,EAAOtb,EAAK7xB,EAAOotC,EAAUC,GAC7C,IAKIC,EACAC,EANAC,EAAqB,KAAR3b,EACb4b,EAAaJ,GAAartC,EAAM0tC,KAAKL,IAAc,CAAC,EACpDJ,EAAQE,EAAMF,MACd/4B,EAAOu5B,EAAWv5B,MAAQlU,EAAMkU,KAChCy5B,GAAU,EAGd,GAAIP,EAAU,CACV,IAAIQ,EAAeH,EAAWjsC,QAC1BqsC,EAAgBD,EAAeA,EAAa,GAAKA,EAAa,GAAK,EACvE,GAAwB,MAApBH,EAAWvqD,OAAsC,SAArBuqD,EAAWvqD,MAAkB,CACzD,IAAI4qD,GAAe,QAAaL,EAAWvqD,MAAOkqD,EAASlqD,OAAS2qD,EAChEZ,EAAM/mD,OAAS,GACX4nD,EAAeV,EAASW,WAAaX,EAASlqD,QAC9CoqD,EAAWzb,EAAIrzB,MAAM,MACrBmvC,GAAU,GAGlBP,EAASW,WAAaD,CAC1B,KACK,CACD,IAAIzV,EAAM2V,EAASnc,EAAK3d,EAAMk5B,EAASlqD,MAAOkqD,EAASa,SAAUb,EAASW,YAC1EX,EAASW,WAAa1V,EAAI0V,WAAaF,EACvCN,EAAclV,EAAIkV,YAClBD,EAAWjV,EAAI4U,KACnB,CACJ,MAEIK,EAAWzb,EAAIrzB,MAAM,MAEzB,IAAK,IAAIpZ,EAAI,EAAGA,EAAIkoD,EAASpnD,OAAQd,IAAK,CACtC,IAAI6uB,EAAOq5B,EAASloD,GAChB8oD,EAAQ,IAAIxB,EAYhB,GAXAwB,EAAMb,UAAYA,EAClBa,EAAMj6B,KAAOA,EACbi6B,EAAMC,cAAgBl6B,IAASu5B,EACC,iBAArBC,EAAWvqD,MAClBgrD,EAAMhrD,MAAQuqD,EAAWvqD,MAGzBgrD,EAAMhrD,MAAQqqD,EACRA,EAAYnoD,IACZ,QAAS6uB,EAAMC,GAEpB9uB,GAAMuoD,EAQPV,EAAMxkD,KAAK,IAAIkkD,EAAa,CAACuB,SARb,CAChB,IAAItB,GAAUK,EAAMA,EAAM/mD,OAAS,KAAO+mD,EAAM,GAAK,IAAIN,IAAiBC,OACtEwB,EAAYxB,EAAO1mD,OACR,IAAdkoD,GAAmBxB,EAAO,GAAGuB,aACvBvB,EAAO,GAAKsB,GACXj6B,IAASm6B,GAAaZ,IAAeZ,EAAOnkD,KAAKylD,EAC7D,CAIJ,CACJ,CAQA,IAAIG,GAAe,QAAO,UAAU7vC,MAAM,KAAK,SAAUhf,EAAK8uD,GAE1D,OADA9uD,EAAI8uD,IAAM,EACH9uD,CACX,GAAG,CAAC,GACJ,SAAS+uD,EAAgBD,GACrB,OAZJ,SAA4BA,GACxB,IAAIE,EAAOF,EAAGrW,WAAW,GACzB,OAAOuW,GAAQ,IAAQA,GAAQ,KACxBA,GAAQ,KAASA,GAAQ,MACzBA,GAAQ,MAAUA,GAAQ,MAC1BA,GAAQ,MAAUA,GAAQ,IACrC,CAMQC,CAAmBH,MACfD,EAAaC,EAMzB,CACA,SAASN,EAAS/5B,EAAMC,EAAM1G,EAAWkhC,EAAYC,GAOjD,IANA,IAAI1B,EAAQ,GACRM,EAAc,GACd5E,EAAO,GACPiG,EAAc,GACdC,EAAmB,EACnBd,EAAa,EACR3oD,EAAI,EAAGA,EAAI6uB,EAAK/tB,OAAQd,IAAK,CAClC,IAAIkpD,EAAKr6B,EAAK66B,OAAO1pD,GACrB,GAAW,OAAPkpD,EAAJ,CAaA,IAAIS,GAAU,QAAST,EAAIp6B,GACvB86B,GAASN,IAAsBH,EAAgBD,IAC9CrB,EAAM/mD,OAEL6nD,EAAagB,EAAUvhC,EADvBmhC,EAAiBZ,EAAagB,EAAUvhC,GAErCugC,GAYIpF,GAAQiG,KACTI,GACKrG,IACDA,EAAOiG,EACPA,EAAc,GAEdb,EADAc,EAAmB,GAGvB5B,EAAMxkD,KAAKkgD,GACX4E,EAAY9kD,KAAKslD,EAAac,GAC9BD,GAAeN,EAEf3F,EAAO,GACPoF,EAFAc,GAAoBE,IAKhBH,IACAjG,GAAQiG,EACRA,EAAc,GACdC,EAAmB,GAEvB5B,EAAMxkD,KAAKkgD,GACX4E,EAAY9kD,KAAKslD,GACjBpF,EAAO2F,EACPP,EAAagB,IAnCbC,GACA/B,EAAMxkD,KAAKmmD,GACXrB,EAAY9kD,KAAKomD,GACjBD,EAAcN,EACdO,EAAmBE,IAGnB9B,EAAMxkD,KAAK6lD,GACXf,EAAY9kD,KAAKsmD,KAgC7BhB,GAAcgB,EACVC,GACAJ,GAAeN,EACfO,GAAoBE,IAGhBH,IACAjG,GAAQiG,EACRA,EAAc,GACdC,EAAmB,GAEvBlG,GAAQ2F,GA1DZ,MAXQM,IACAjG,GAAQiG,EACRb,GAAcc,GAElB5B,EAAMxkD,KAAKkgD,GACX4E,EAAY9kD,KAAKslD,GACjBpF,EAAO,GACPiG,EAAc,GACdC,EAAmB,EACnBd,EAAa,CA8DrB,CAgBA,OAfKd,EAAM/mD,QAAWyiD,IAClBA,EAAO10B,EACP26B,EAAc,GACdC,EAAmB,GAEnBD,IACAjG,GAAQiG,GAERjG,IACAsE,EAAMxkD,KAAKkgD,GACX4E,EAAY9kD,KAAKslD,IAEA,IAAjBd,EAAM/mD,SACN6nD,GAAcY,GAEX,CACHZ,WAAYA,EACZd,MAAOA,EACPM,YAAaA,EAErB,sEC1cI0B,EAA0B,CAC1BxqD,KAAM,QAGCyqD,EAA+B,CACtClvC,OAAO,QAAS,CACZvb,MAAM,EACNC,QAAQ,EACR2pB,aAAa,EACbI,eAAe,EACfjB,WAAW,EACX8qB,UAAU,EACV6W,YAAY,EACZjsD,OAAO,EACPC,QAAQ,EACRisD,iBAAiB,EACjBC,gBAAgB,EAChBC,mBAAmB,EACnBC,mBAAmB,EACnBxqD,iBAAiB,EACjByc,SAAS,EACTguC,aAAa,EACb9tC,aAAa,EACb+tC,cAAc,GACf,KAA+BzvC,QAElC0vC,EAAU,SAAUtvC,GAEpB,SAASsvC,EAAO17C,GACZ,IAAI4J,EAAQwC,EAAOvQ,KAAK9P,OAASA,KAKjC,OAJA6d,EAAMtQ,KAAO,OACbsQ,EAAM0nC,UAAY,GAClB1nC,EAAM+xC,cAAgBV,EACtBrxC,EAAMtd,KAAK0T,GACJ4J,CACX,CAqaA,OA7aA,QAAU8xC,EAAQtvC,GASlBsvC,EAAOrvD,UAAUklD,YAAc,WAC3B,OAAOxlD,KAAKulD,SAChB,EACAoK,EAAOrvD,UAAUa,OAAS,WACtBkf,EAAO/f,UAAUa,OAAO2O,KAAK9P,MACzBA,KAAK6vB,gBACL7vB,KAAK6vD,kBAET,IAAK,IAAIxqD,EAAI,EAAGA,EAAIrF,KAAKulD,UAAUp/C,OAAQd,IAAK,CAC5C,IAAIwgD,EAAQ7lD,KAAKulD,UAAUlgD,GAC3BwgD,EAAMhlC,OAAS7gB,KAAK6gB,OACpBglC,EAAMj9B,EAAI5oB,KAAK4oB,EACfi9B,EAAMX,GAAKllD,KAAKklD,GAChBW,EAAMxC,QAAUrjD,KAAKqjD,QACrBwC,EAAMV,OAASnlD,KAAKmlD,OACpBU,EAAMzC,UAAYpjD,KAAKojD,SAC3B,CACJ,EACAuM,EAAOrvD,UAAUc,gBAAkB,WAC/B,IAAIS,EAAqB7B,KAAK6B,mBAC1BA,GACAA,EAAmBT,kBACfS,EAAmBf,YACnBd,KAAKc,UAAYe,EAAmBf,YAIxCuf,EAAO/f,UAAUc,gBAAgB0O,KAAK9P,KAE9C,EACA2vD,EAAOrvD,UAAUsnC,kBAAoB,SAAU/mC,GAC3C,IAAIgB,EAAqB7B,KAAK6B,mBAC9B,OAAOA,EACDA,EAAmB+lC,kBAAkB/mC,GACrCwf,EAAO/f,UAAUsnC,kBAAkB93B,KAAK9P,KAAMa,EACxD,EACA8uD,EAAOrvD,UAAUooC,qBAAuB,WAKpC,OAJI1oC,KAAK2K,eACL3K,KAAK2K,aAAa+9B,uBAClB1oC,KAAK2K,aAAarJ,iBAAgB,IAE/B+e,EAAO/f,UAAUooC,qBAAqB54B,KAAK9P,KACtD,EACA2vD,EAAOrvD,UAAUuvD,gBAAkB,WAwZhC,IAA4B5vC,EAvZ3BjgB,KAAK8vD,aAAe,EAwZxBC,EAD+B9vC,EAtZRjgB,KAAKigB,QAwZ5B,QAAKA,EAAM0tC,KAAMoC,GAvZb/vD,KAAKigB,MAAM0tC,KACL3tD,KAAKgwD,mBACLhwD,KAAKiwD,oBACXjwD,KAAKulD,UAAUp/C,OAASnG,KAAK8vD,aAC7B9vD,KAAKwkD,cACT,EACAmL,EAAOrvD,UAAUuK,YAAc,SAAUD,GACrCyV,EAAO/f,UAAUuK,YAAYiF,KAAK9P,KAAM4K,GACxC,IAAK,IAAIvF,EAAI,EAAGA,EAAIrF,KAAKulD,UAAUp/C,OAAQd,IACvCrF,KAAKulD,UAAUlgD,GAAGP,KAAO8F,CAEjC,EACA+kD,EAAOrvD,UAAUyK,iBAAmB,SAAUH,GAC1CyV,EAAO/f,UAAUyK,iBAAiB+E,KAAK9P,KAAM4K,GAC7C,IAAK,IAAIvF,EAAI,EAAGA,EAAIrF,KAAKulD,UAAUp/C,OAAQd,IACvCrF,KAAKulD,UAAUlgD,GAAGP,KAAO,IAEjC,EACA6qD,EAAOrvD,UAAUiC,gBAAkB,WAI/B,GAHIvC,KAAK6vB,gBACL7vB,KAAK6vD,mBAEJ7vD,KAAKukD,MAAO,CAKb,IAJA,IAAIjB,EAAU,IAAIvgC,EAAA,EAAa,EAAG,EAAG,EAAG,GACpC0iC,EAAWzlD,KAAKulD,UAChBkB,EAAS,GACTxjC,EAAO,KACF5d,EAAI,EAAGA,EAAIogD,EAASt/C,OAAQd,IAAK,CACtC,IAAIwgD,EAAQJ,EAASpgD,GACjBqhD,EAAYb,EAAMtjD,kBAClBzB,EAAY+kD,EAAMje,kBAAkB6e,GACpC3lD,GACAwiD,EAAQhhD,KAAKokD,GACbpD,EAAQ9gD,eAAe1B,IACvBmiB,EAAOA,GAAQqgC,EAAQloB,SAClBxX,MAAM0/B,KAGXrgC,EAAOA,GAAQyjC,EAAUtrB,SACpBxX,MAAM8iC,EAEnB,CACA1mD,KAAKukD,MAAQthC,GAAQqgC,CACzB,CACA,OAAOtjD,KAAKukD,KAChB,EACAoL,EAAOrvD,UAAUsE,oBAAsB,SAAUsrD,GAC7ClwD,KAAK4vD,cAAgBM,GAAoBhB,CAC7C,EACAS,EAAOrvD,UAAUsF,eAAiB,SAAU2C,GACpC,CAGR,EACAonD,EAAOrvD,UAAUqkD,YAAc,SAAUC,EAAaC,GAClD,IAAKA,EACD,OAAOD,EAEX,IAAIuL,EAAatL,EAAY8I,KACzByC,EAAaxL,EAAY+I,MAASwC,GAAc,CAAC,EASrD,OARA,QAAOvL,EAAaC,GAChBsL,GAAcC,GACdpwD,KAAKqwD,WAAWD,EAAYD,GAC5BvL,EAAY+I,KAAOyC,GAEdA,IACLxL,EAAY+I,KAAOyC,GAEhBxL,CACX,EACA+K,EAAOrvD,UAAU+vD,WAAa,SAAUD,EAAYD,GAEhD,IADA,IAAIG,GAAY,QAAKH,GACZ9qD,EAAI,EAAGA,EAAIirD,EAAUnqD,OAAQd,IAAK,CACvC,IAAIkrD,EAAWD,EAAUjrD,GACzB+qD,EAAWG,GAAYH,EAAWG,IAAa,CAAC,GAChD,QAAOH,EAAWG,GAAWJ,EAAWI,GAC5C,CACJ,EACAZ,EAAOrvD,UAAUykD,uBAAyB,WACtC,OAAOoK,CACX,EACAQ,EAAOrvD,UAAUkwD,kBAAoB,SAAUzT,GAC3C,IAAI8I,EAAQ7lD,KAAKulD,UAAUvlD,KAAK8vD,cAOhC,OANKjK,GAAWA,aAAiB9I,IAC7B8I,EAAQ,IAAI9I,GAEhB/8C,KAAKulD,UAAUvlD,KAAK8vD,gBAAkBjK,EACtCA,EAAM/gD,KAAO9E,KAAK8E,KAClB+gD,EAAM5jD,OAASjC,KACR6lD,CACX,EACA8J,EAAOrvD,UAAU2vD,kBAAoB,WACjC,IAAIhwC,EAAQjgB,KAAKigB,MACbwwC,EAAWxwC,EAAMkU,MAAQ,KACzBu8B,EAAczwC,EAAMwB,QAEpBkvC,ED7GL,SAAwBz8B,EAAMjU,GACzB,MAARiU,IAAiBA,GAAQ,IACzB,IASIg5B,EATA0D,EAAW3wC,EAAM2wC,SACjBnvC,EAAUxB,EAAMwB,QAChB0S,EAAOlU,EAAMkU,KACb08B,EAAwB,aAAbD,EACXE,GAAuB,QAAc38B,GACrCi7B,GAAa,QAAUnvC,EAAMmvC,WAAY0B,GACzCC,IAAkB9wC,EAAqB,gBACvC+wC,EAA8C,aAAvB/wC,EAAMgxC,aAC7B9tD,EAAQ8c,EAAM9c,MAQd4pD,GAFAG,EAJS,MAAT/pD,GAA+B,UAAbytD,GAAqC,aAAbA,EAIlC18B,EAAOA,EAAKzV,MAAM,MAAQ,GAH1ByV,EAAO+5B,EAAS/5B,EAAMjU,EAAMkU,KAAMhxB,EAAoB,aAAbytD,EAAyB,GAAG1D,MAAQ,IAK/D/mD,OAASipD,EAC/BhsD,GAAS,QAAU6c,EAAM7c,OAAQ2pD,GACrC,GAAIA,EAAgB3pD,GAAU4tD,EAAsB,CAChD,IAAIE,EAAY7+C,KAAK6E,MAAM9T,EAASgsD,GACpClC,EAAQA,EAAM7jD,MAAM,EAAG6nD,EAC3B,CACA,GAAIh9B,GAAQ28B,GAAqB,MAAT1tD,EAKpB,IAJA,IAAIwoD,EAAUC,EAAuBzoD,EAAOgxB,EAAMlU,EAAMyrC,SAAU,CAC9DM,QAAS/rC,EAAMkxC,gBACfhF,YAAalsC,EAAMksC,cAEd9mD,EAAI,EAAGA,EAAI6nD,EAAM/mD,OAAQd,IAC9B6nD,EAAM7nD,GAAKwmD,EAAmBqB,EAAM7nD,GAAIsmD,GAGhD,IAAIsB,EAAc7pD,EACdgpD,EAAe,EACnB,IAAS/mD,EAAI,EAAGA,EAAI6nD,EAAM/mD,OAAQd,IAC9B+mD,EAAe/5C,KAAKmE,KAAI,QAAS02C,EAAM7nD,GAAI8uB,GAAOi4B,GAEzC,MAATjpD,IACAA,EAAQipD,GAEZ,IAAIY,EAAaZ,EASjB,OARI3qC,IACAwrC,GAAexrC,EAAQ,GAAKA,EAAQ,GACpCurC,GAAcvrC,EAAQ,GAAKA,EAAQ,GACnCte,GAASse,EAAQ,GAAKA,EAAQ,IAE9BsvC,IACA/D,EAAa7pD,GAEV,CACH+pD,MAAOA,EACP9pD,OAAQA,EACR4pD,WAAYA,EACZC,YAAaA,EACbmC,WAAYA,EACZ0B,qBAAsBA,EACtB1E,aAAcA,EACdW,cAAeA,EACf5pD,MAAOA,EAEf,CCgD2BiuD,CADRC,EAAapxC,GACgBA,GACpCqxC,EAAaC,EAAmBtxC,GAChC8wC,IAAkB9wC,EAAqB,gBACvCgtC,EAAc0D,EAAa1D,YAC3BD,EAAa2D,EAAa3D,WAC1BZ,EAAeuE,EAAavE,aAC5BzzB,EAAYg4B,EAAazD,MACzBkC,EAAauB,EAAavB,WAC1BxF,EAAe5pD,KAAK4vD,cACpB4B,EAAQvxC,EAAMvd,GAAK,EACnB+uD,EAAQxxC,EAAMtd,GAAK,EACnBb,EAAYme,EAAMrd,OAASgnD,EAAahnD,OAAS,OACjDC,EAAgBod,EAAMpd,eAAiB+mD,EAAa/mD,eAAiB,MACrE6uD,EAAQF,EACRG,GAAQ,QAAYF,EAAOd,EAAa5D,cAAelqD,GAC3D,GAAIyuD,GAAcZ,EAAa,CAC3B,IAAIkB,GAAO,QAAYJ,EAAOxE,EAAYlrD,GACtC+vD,GAAO,QAAYJ,EAAOxE,EAAapqD,GAC3CyuD,GAActxD,KAAK8xD,kBAAkB7xC,EAAOA,EAAO2xC,EAAMC,EAAM7E,EAAYC,EAC/E,CACA0E,GAASvC,EAAa,EAClBsB,IACAgB,EAAQK,EAAmBP,EAAO1vD,EAAW4uD,GACvB,QAAlB7tD,EACA8uD,GAASjB,EAAY,GAEE,WAAlB7tD,IACL8uD,GAASjB,EAAY,KAkB7B,IAfA,IAAIsB,EAAmB,EACnBC,GAAiB,EACjBnuD,GAAWouD,EAAQ,SAAUjyC,EAC3BA,EAAMvb,MACLutD,GAAiB,EAAMrI,EAAallD,QACvCX,GAAaouD,EAAU,WAAYlyC,EACjCA,EAAMtb,OACJosD,GACKnH,EAAa5lD,aAAciuD,EAE9B,MADCD,EAtNa,EAsNiCpI,EAAajlD,UAElEytD,EAAYnyC,EAAMqvC,eAAiB,EACnC+C,EAAmC,MAAfpyC,EAAM9c,QACH,aAAnB8c,EAAM2wC,UAA8C,UAAnB3wC,EAAM2wC,UAA2C,aAAnB3wC,EAAM2wC,UACzEE,EAAuBH,EAAaG,qBAC/BzrD,EAAI,EAAGA,EAAIszB,EAAUxyB,OAAQd,IAAK,CACvC,IAAIkH,EAAKvM,KAAKwwD,kBAAkBnF,EAAA,GAC5BiH,EAAa/lD,EAAGk4C,cACpBl4C,EAAG02C,SAASqP,GACZA,EAAWp+B,KAAOyE,EAAUtzB,GAC5BitD,EAAW5vD,EAAIgvD,EACfY,EAAW3vD,EAAIgvD,EACX7vD,IACAwwD,EAAWxwD,UAAYA,GAE3BwwD,EAAWl+B,aAAe,SAC1Bk+B,EAAW9jC,QAAUvO,EAAMuO,QAC3B8jC,EAAWt+B,aAAc,EACrBo+B,IACAE,EAAW5P,WAAaziC,EAAMqvC,gBAAkB,EAChDgD,EAAWtiC,YAAc/P,EAAMovC,iBAAmB,cAClDiD,EAAW3P,cAAgB1iC,EAAMsvC,mBAAqB,EACtD+C,EAAW1P,cAAgB3iC,EAAMuvC,mBAAqB,GAE1D8C,EAAW3tD,OAASZ,EACpBuuD,EAAW5tD,KAAOZ,EACdC,IACAuuD,EAAW7kC,UAAYxN,EAAMwN,WAAaukC,EAC1CM,EAAW5kC,SAAWzN,EAAMyN,SAC5B4kC,EAAW3kC,eAAiB1N,EAAM0N,gBAAkB,GAExD2kC,EAAWn+B,KAAOs8B,EAClB8B,EAAgBD,EAAYryC,GAC5B0xC,GAASvC,EACLiD,GACA9lD,EAAG++C,gBAAgB,IAAIvoC,EAAA,GAAa,QAAYuvC,EAAW5vD,EAAGud,EAAM9c,MAAOmvD,EAAWxwD,YAAY,QAAYwwD,EAAW3vD,EAAGmuD,EAAsBwB,EAAWl+B,cAAeg4B,EAAc0E,GAElM,CACJ,EACAnB,EAAOrvD,UAAU0vD,iBAAmB,WAChC,IAAI/vC,EAAQjgB,KAAKigB,MAEb0wC,EDtGL,SAAuBz8B,EAAMjU,GAChC,IAAI0wC,EAAe,IAAI7D,EAEvB,GADQ,MAAR54B,IAAiBA,GAAQ,KACpBA,EACD,OAAOy8B,EAUX,IARA,IAOI/T,EAPA4V,EAAWvyC,EAAM9c,MACjBsvD,EAAYxyC,EAAM7c,OAClBwtD,EAAW3wC,EAAM2wC,SACjBvD,EAAyB,UAAbuD,GAAqC,aAAbA,GAAwC,MAAZ4B,EAE9D,KADA,CAAErvD,MAAOqvD,EAAUxE,WAAY,EAAGE,SAAuB,aAAb0C,GAE9Cp0B,EAAY+uB,EAAU/uB,UAAY,EAEI,OAAlCogB,EAAS2O,EAAUhtC,KAAK2V,KAAgB,CAC5C,IAAIw+B,EAAe9V,EAAOuJ,MACtBuM,EAAel2B,GACf2wB,EAAWwD,EAAcz8B,EAAKy+B,UAAUn2B,EAAWk2B,GAAezyC,EAAOotC,GAE7EF,EAAWwD,EAAc/T,EAAO,GAAI38B,EAAOotC,EAAUzQ,EAAO,IAC5DpgB,EAAY+uB,EAAU/uB,SAC1B,CACIA,EAAYtI,EAAK/tB,QACjBgnD,EAAWwD,EAAcz8B,EAAKy+B,UAAUn2B,EAAWtI,EAAK/tB,QAAS8Z,EAAOotC,GAE5E,IAAIuF,EAAc,GACdC,EAAmB,EACnBC,EAAkB,EAClBC,EAAa9yC,EAAMwB,QACnBovC,EAAwB,aAAbD,EACXoC,EAAsC,aAAvB/yC,EAAMgxC,aACzB,SAASgC,EAAWrK,EAAMn7B,EAAW2hC,GACjCxG,EAAKzlD,MAAQsqB,EACbm7B,EAAKwG,WAAaA,EAClByD,GAAoBzD,EACpB0D,EAAkBzgD,KAAKmE,IAAIs8C,EAAiBrlC,EAChD,CACAylC,EAAO,IAAK,IAAI7tD,EAAI,EAAGA,EAAIsrD,EAAazD,MAAM/mD,OAAQd,IAAK,CAIvD,IAHA,IAAIujD,EAAO+H,EAAazD,MAAM7nD,GAC1B+pD,EAAa,EACb3hC,EAAY,EACPxX,EAAI,EAAGA,EAAI2yC,EAAKiE,OAAO1mD,OAAQ8P,IAAK,CACzC,IACIy3C,GADAS,EAAQvF,EAAKiE,OAAO52C,IACDq3C,WAAartC,EAAM0tC,KAAKQ,EAAMb,YAAc,CAAC,EAChEoD,EAAcvC,EAAMuC,YAAchD,EAAWjsC,QAC7C0xC,EAAWzC,EAAcA,EAAY,GAAKA,EAAY,GAAK,EAC3Dv8B,EAAOg6B,EAAMh6B,KAAOu5B,EAAWv5B,MAAQlU,EAAMkU,KACjDg6B,EAAMpB,eAAgB,QAAc54B,GACpC,IAAIi/B,GAAc,QAAU1F,EAAWtqD,OAAQ+qD,EAAMpB,eAOrD,GANAoB,EAAMkF,YAAcD,EACpB1C,IAAgB0C,GAAe1C,EAAY,GAAKA,EAAY,IAC5DvC,EAAM/qD,OAASgwD,EACfjF,EAAMiB,YAAa,QAAU1B,EAAW0B,WAAYnvC,EAAMmvC,WAAYgE,GACtEjF,EAAMvrD,MAAQ8qD,GAAcA,EAAW9qD,OAASqd,EAAMrd,MACtDurD,EAAMtrD,cAAgB6qD,GAAcA,EAAW7qD,eAAiB,SAC5DmwD,GAA6B,MAAbP,GAAqBI,EAAmB1E,EAAMiB,WAAaqD,EAAW,CAClFx8C,EAAI,GACJ2yC,EAAKiE,OAASjE,EAAKiE,OAAOxjD,MAAM,EAAG4M,GACnCg9C,EAAWrK,EAAMn7B,EAAW2hC,GAC5BuB,EAAazD,MAAQyD,EAAazD,MAAM7jD,MAAM,EAAGhE,EAAI,IAGrDsrD,EAAazD,MAAQyD,EAAazD,MAAM7jD,MAAM,EAAGhE,GAErD,MAAM6tD,CACV,CACA,IAAII,EAAkB5F,EAAWvqD,MAC7BowD,EAA4C,MAAnBD,GAA+C,SAApBA,EACxD,GAA+B,iBAApBA,GAAuF,MAAvDA,EAAgBvE,OAAOuE,EAAgBntD,OAAS,GACvFgoD,EAAMqF,aAAeF,EACrBV,EAAYlqD,KAAKylD,GACjBA,EAAM/B,cAAe,QAAS+B,EAAMj6B,KAAMC,OAEzC,CACD,GAAIo/B,EAAwB,CACxB,IAAIE,EAAsB/F,EAAW1oD,gBACjC0uD,EAAQD,GAAuBA,EAAoB5kC,MACnD6kC,IACAA,EAAQ,KAA2BA,GAC/B,KAAyBA,KACzBvF,EAAMhrD,MAAQkP,KAAKmE,IAAI23C,EAAMhrD,MAAOuwD,EAAMvwD,MAAQiwD,EAAcM,EAAMtwD,SAGlF,CACA,IAAIuwD,EAAmB9C,GAAwB,MAAZ2B,EAC7BA,EAAW/kC,EAAY,KACL,MAApBkmC,GAA4BA,EAAmBxF,EAAMhrD,OAChDowD,GAA0BI,EAAmBR,GAC9ChF,EAAMj6B,KAAO,GACbi6B,EAAMhrD,MAAQgrD,EAAM/B,aAAe,IAGnC+B,EAAMj6B,KAAOs3B,EAAa2C,EAAMj6B,KAAMy/B,EAAmBR,EAAUh/B,EAAMlU,EAAMyrC,SAAU,CAAEM,QAAS/rC,EAAMkxC,kBAC1GhD,EAAMhrD,MAAQgrD,EAAM/B,cAAe,QAAS+B,EAAMj6B,KAAMC,IAI5Dg6B,EAAM/B,cAAe,QAAS+B,EAAMj6B,KAAMC,EAElD,CACAg6B,EAAMhrD,OAASgwD,EACf1lC,GAAa0gC,EAAMhrD,MACnBuqD,IAAe0B,EAAa/8C,KAAKmE,IAAI44C,EAAYjB,EAAMiB,YAC3D,CACA6D,EAAWrK,EAAMn7B,EAAW2hC,EAChC,CASA,IARAuB,EAAa3D,WAAa2D,EAAaxtD,OAAQ,QAAUqvD,EAAUM,GACnEnC,EAAa1D,YAAc0D,EAAavtD,QAAS,QAAUqvD,EAAWI,GACtElC,EAAa5D,cAAgB8F,EAC7BlC,EAAavE,aAAe0G,EACxBC,IACApC,EAAa3D,YAAc+F,EAAW,GAAKA,EAAW,GACtDpC,EAAa1D,aAAe8F,EAAW,GAAKA,EAAW,IAElD1tD,EAAI,EAAGA,EAAIutD,EAAYzsD,OAAQd,IAAK,CACzC,IAAI8oD,EACAqF,GADArF,EAAQyE,EAAYvtD,IACCmuD,aACzBrF,EAAMhrD,MAAQkzB,SAASm9B,EAAc,IAAM,IAAM7C,EAAaxtD,KAClE,CACA,OAAOwtD,CACX,CClB2BiD,CADRvC,EAAapxC,GACeA,GACnCmsC,EAAeuE,EAAaxtD,MAC5B6pD,EAAa2D,EAAa3D,WAC1BC,EAAc0D,EAAa1D,YAC3ByD,EAAczwC,EAAMwB,QACpB+vC,EAAQvxC,EAAMvd,GAAK,EACnB+uD,EAAQxxC,EAAMtd,GAAK,EACnBinD,EAAe5pD,KAAK4vD,cACpB9tD,EAAYme,EAAMrd,OAASgnD,EAAahnD,MACxCC,EAAgBod,EAAMpd,eAAiB+mD,EAAa/mD,cACpD+uD,GAAO,QAAYJ,EAAOxE,EAAYlrD,GACtC+vD,GAAO,QAAYJ,EAAOxE,EAAapqD,GACvCgxD,EAAQjC,EACRkC,EAAUjC,EACVnB,IACAmD,GAASnD,EAAY,GACrBoD,GAAWpD,EAAY,IAE3B,IAAIqD,EAASF,EAAQzH,EACjBmF,EAAmBtxC,IACnBjgB,KAAK8xD,kBAAkB7xC,EAAOA,EAAO2xC,EAAMC,EAAM7E,EAAYC,GAGjE,IADA,IAAI8D,IAAkB9wC,EAAqB,gBAClC5a,EAAI,EAAGA,EAAIsrD,EAAazD,MAAM/mD,OAAQd,IAAK,CAWhD,IAVA,IAAIujD,EAAO+H,EAAazD,MAAM7nD,GAC1BwnD,EAASjE,EAAKiE,OACdmH,EAAanH,EAAO1mD,OACpBipD,EAAaxG,EAAKwG,WAClB6E,EAAgBrL,EAAKzlD,MACrB+wD,EAAY,EACZC,EAAYN,EACZO,EAAaL,EACbM,EAAaL,EAAa,EAC1B7F,OAAQ,EACL+F,EAAYF,MACX7F,EAAQtB,EAAOqH,IAAmBtxD,OAAyB,SAAhBurD,EAAMvrD,QACrD5C,KAAKs0D,YAAYnG,EAAOluC,EAAOmvC,EAAY0E,EAASK,EAAW,OAAQpD,GACvEkD,GAAiB9F,EAAMhrD,MACvBgxD,GAAahG,EAAMhrD,MACnB+wD,IAEJ,KAAOG,GAAc,GAC+B,WAA5ClG,EAAQtB,EAAOwH,IAAmBzxD,OACtC5C,KAAKs0D,YAAYnG,EAAOluC,EAAOmvC,EAAY0E,EAASM,EAAY,QAASrD,GACzEkD,GAAiB9F,EAAMhrD,MACvBixD,GAAcjG,EAAMhrD,MACpBkxD,IAGJ,IADAF,IAAc/H,GAAgB+H,EAAYN,IAAUE,EAASK,GAAcH,GAAiB,EACrFC,GAAaG,GAChBlG,EAAQtB,EAAOqH,GACfl0D,KAAKs0D,YAAYnG,EAAOluC,EAAOmvC,EAAY0E,EAASK,EAAYhG,EAAMhrD,MAAQ,EAAG,SAAU4tD,GAC3FoD,GAAahG,EAAMhrD,MACnB+wD,IAEJJ,GAAW1E,CACf,CACJ,EACAO,EAAOrvD,UAAUg0D,YAAc,SAAUnG,EAAOluC,EAAOmvC,EAAY0E,EAASpxD,EAAGZ,EAAWyyD,GACtF,IAAI7G,EAAaztC,EAAM0tC,KAAKQ,EAAMb,YAAc,CAAC,EACjDI,EAAWx5B,KAAOi6B,EAAMj6B,KACxB,IAAIrxB,EAAgBsrD,EAAMtrD,cACtBF,EAAImxD,EAAU1E,EAAa,EACT,QAAlBvsD,EACAF,EAAImxD,EAAU3F,EAAM/qD,OAAS,EAEN,WAAlBP,IACLF,EAAImxD,EAAU1E,EAAajB,EAAM/qD,OAAS,IAE5B+qD,EAAMC,cAAgBmD,EAAmB7D,IAC7C1tD,KAAK8xD,kBAAkBpE,EAAYztC,EAAqB,UAAdne,EAClDY,EAAIyrD,EAAMhrD,MACI,WAAdrB,EACIY,EAAIyrD,EAAMhrD,MAAQ,EAClBT,EAAGC,EAAIwrD,EAAM/qD,OAAS,EAAG+qD,EAAMhrD,MAAOgrD,EAAM/qD,QACtD,IAAI2tD,IAAiBrD,EAAW1oD,gBAC5B0rD,EAAcvC,EAAMuC,YACpBA,IACAhuD,EAAIqvD,EAAmBrvD,EAAGZ,EAAW4uD,GACrC/tD,GAAKwrD,EAAM/qD,OAAS,EAAIstD,EAAY,GAAKvC,EAAMkF,YAAc,GAEjE,IAAI9mD,EAAKvM,KAAKwwD,kBAAkBnF,EAAA,GAC5BiH,EAAa/lD,EAAGk4C,cACpBl4C,EAAG02C,SAASqP,GACZ,IAAI1I,EAAe5pD,KAAK4vD,cACpBqC,GAAiB,EACjBD,EAAmB,EACnBluD,EAAWouD,EAAQ,SAAUxE,EAAaA,EAAWhpD,KACnD,SAAUub,EAAQA,EAAMvb,MACnButD,GAAiB,EAAMrI,EAAallD,OAC3CX,EAAaouD,EAAU,WAAYzE,EAAaA,EAAW/oD,OACzD,WAAYsb,EAAQA,EAAMtb,OACpBosD,GACIwD,GACC3K,EAAa5lD,aAAciuD,EAC9B,MADkDD,EA/VxC,EA+VsFpI,EAAajlD,SAEvHytD,EAAY1E,EAAW4B,eAAiB,GACrCrvC,EAAMqvC,eAAiB,EAC9BgD,EAAWp+B,KAAOi6B,EAAMj6B,KACxBo+B,EAAW5vD,EAAIA,EACf4vD,EAAW3vD,EAAIA,EACXyvD,IACAE,EAAW5P,WAAagL,EAAW4B,gBAAkBrvC,EAAMqvC,gBAAkB,EAC7EgD,EAAWtiC,YAAc09B,EAAW2B,iBAAmBpvC,EAAMovC,iBAAmB,cAChFiD,EAAW3P,cAAgB+K,EAAW6B,mBAAqBtvC,EAAMsvC,mBAAqB,EACtF+C,EAAW1P,cAAgB8K,EAAW8B,mBAAqBvvC,EAAMuvC,mBAAqB,GAE1F8C,EAAWxwD,UAAYA,EACvBwwD,EAAWl+B,aAAe,SAC1Bk+B,EAAWn+B,KAAOg6B,EAAMh6B,MAAQ,KAChCm+B,EAAW9jC,SAAU,QAAUk/B,EAAWl/B,QAASvO,EAAMuO,QAAS,GAClE+jC,EAAgBD,EAAY5E,GACxB3pD,IACAuuD,EAAW7kC,WAAY,QAAUigC,EAAWjgC,UAAWxN,EAAMwN,UAAWukC,GACxEM,EAAW5kC,UAAW,QAAUggC,EAAWhgC,SAAUzN,EAAMyN,UAC3D4kC,EAAW3kC,eAAiB1N,EAAM0N,gBAAkB,EACpD2kC,EAAW3tD,OAASZ,GAEpBD,IACAwuD,EAAW5tD,KAAOZ,GAEtB,IAAI0wD,EAAYrG,EAAM/B,aAClBqI,EAAatG,EAAMpB,cACvBxgD,EAAG++C,gBAAgB,IAAIvoC,EAAA,GAAa,QAAYuvC,EAAW5vD,EAAG8xD,EAAWlC,EAAWxwD,YAAY,QAAYwwD,EAAW3vD,EAAG8xD,EAAYnC,EAAWl+B,cAAeogC,EAAWC,GAC/K,EACA9E,EAAOrvD,UAAUwxD,kBAAoB,SAAU7xC,EAAOy0C,EAAUhyD,EAAGC,EAAGQ,EAAOC,GACzE,IAOIuxD,EACAC,EA+BIC,EAvCJpB,EAAsBxzC,EAAMjb,gBAC5B8vD,EAAkB70C,EAAM0B,YACxBozC,EAAkB90C,EAAMwvC,YACxBuF,EAAYvB,GAAuBA,EAAoB5kC,MACvDomC,EAAsBxB,IAAwBuB,EAC9CE,EAAmBj1C,EAAMyvC,aACzBzhD,EAAOjO,KAGX,GAAIi1D,GAAuBh1C,EAAMmvC,YAAe0F,GAAmBC,EAAkB,EACjFJ,EAAS30D,KAAKwwD,kBAAkB2E,EAAA,IACzBlS,SAAS0R,EAAOlQ,eACvBkQ,EAAO10C,MAAMvb,KAAO,KACpB,IAAI0wD,EAAYT,EAAOpjC,MACvB6jC,EAAU1yD,EAAIA,EACd0yD,EAAUzyD,EAAIA,EACdyyD,EAAUjyD,MAAQA,EAClBiyD,EAAUhyD,OAASA,EACnBgyD,EAAUp6C,EAAIk6C,EACdP,EAAOpS,YACX,CACA,GAAI0S,GACIJ,EAAYF,EAAO10C,OACbvb,KAAO+uD,GAAuB,KACxCoB,EAAUvmC,aAAc,QAAUrO,EAAMqO,YAAa,QAEpD,GAAI0mC,EAAW,EAChBJ,EAAQ50D,KAAKwwD,kBAAkB,OACzB/7B,OAAS,WACXxmB,EAAKpJ,YACT,EACA,IAAIwwD,EAAWT,EAAM30C,MACrBo1C,EAASxmC,MAAQ4kC,EAAoB5kC,MACrCwmC,EAAS3yD,EAAIA,EACb2yD,EAAS1yD,EAAIA,EACb0yD,EAASlyD,MAAQA,EACjBkyD,EAASjyD,OAASA,CACtB,CACI0xD,GAAmBC,KACfF,EAAYF,EAAO10C,OACbwN,UAAYqnC,EACtBD,EAAUlwD,OAASowD,EACnBF,EAAUnmC,eAAgB,QAAUzO,EAAMyO,cAAe,GACzDmmC,EAAUnnC,SAAWzN,EAAMq1C,WAC3BT,EAAUlnC,eAAiB1N,EAAMs1C,kBAAoB,EACrDZ,EAAOpK,uBAAyB,EAC5BoK,EAAO5iC,WAAa4iC,EAAOvkC,cAC3BykC,EAAU7gC,aAAc,EACxB6gC,EAAUpnC,WAAa,IAG/B,IAAI+nC,GAAeb,GAAUC,GAAO30C,MACpCu1C,EAAY9S,WAAaziC,EAAMyiC,YAAc,EAC7C8S,EAAYxlC,YAAc/P,EAAM+P,aAAe,cAC/CwlC,EAAY7S,cAAgB1iC,EAAM0iC,eAAiB,EACnD6S,EAAY5S,cAAgB3iC,EAAM2iC,eAAiB,EACnD4S,EAAYhnC,SAAU,QAAUvO,EAAMuO,QAASkmC,EAASlmC,QAAS,EACrE,EACAmhC,EAAO8F,SAAW,SAAUx1C,GACxB,IAAIkU,EAAO,GASX,OARIuhC,EAAgBz1C,KAChBkU,EAAO,CACHlU,EAAM01C,UACN11C,EAAM21C,WACNC,EAAc51C,EAAMs4B,UACpBt4B,EAAM61C,YAAc,cACtB1sD,KAAK,MAEJ+qB,IAAQ,QAAKA,IAASlU,EAAMwwC,UAAYxwC,EAAMkU,IACzD,EACOw7B,CACX,CA/aa,CA+aX5M,EAAA,IACEgT,EAAmB,CAAE71C,MAAM,EAAMqqB,MAAO,EAAGyrB,OAAQ,GACnDC,EAA4B,CAAE91C,IAAK,EAAGqqB,OAAQ,EAAG0rB,OAAQ,GACzDC,EAAa,CAAC,YAAa,aAAc,WAAY,cAClD,SAASN,EAActd,GAC1B,MAAwB,iBAAbA,IACyB,IAA5BA,EAAS50C,QAAQ,QACe,IAA7B40C,EAAS50C,QAAQ,SACW,IAA5B40C,EAAS50C,QAAQ,MAGlBkT,OAAO0hC,GAIN,KAAoB,KAHpBA,EAAW,KAHXA,CAQf,CACA,SAASga,EAAgB3N,EAAaC,GAClC,IAAK,IAAIx/C,EAAI,EAAGA,EAAI8wD,EAAWhwD,OAAQd,IAAK,CACxC,IAAI+wD,EAAWD,EAAW9wD,GACtBkJ,EAAMs2C,EAAYuR,GACX,MAAP7nD,IACAq2C,EAAYwR,GAAY7nD,EAEhC,CACJ,CACO,SAASmnD,EAAgBz1C,GAC5B,OAAyB,MAAlBA,EAAMs4B,UAAoBt4B,EAAM61C,YAAc71C,EAAM21C,UAC/D,CAMA,SAAS7F,EAAe9vC,GACpB,GAAIA,EAAO,CACPA,EAAMkU,KAAOw7B,EAAO8F,SAASx1C,GAC7B,IAAIne,EAAYme,EAAMrd,MACR,WAAdd,IAA2BA,EAAY,UACvCme,EAAMrd,MAAsB,MAAbd,GAAqBi0D,EAAiBj0D,GAAcA,EAAY,OAC/E,IAAIe,EAAgBod,EAAMpd,cACR,WAAlBA,IAA+BA,EAAgB,UAC/Cod,EAAMpd,cAAkC,MAAjBA,GAAyBozD,EAA0BpzD,GAAkBA,EAAgB,MAC1Fod,EAAMwB,UAEpBxB,EAAMwB,SAAU,QAAkBxB,EAAMwB,SAEhD,CACJ,CACA,SAAS0wC,EAAUxtD,EAAQ8oB,GACvB,OAAkB,MAAV9oB,GAAkB8oB,GAAa,GAAgB,gBAAX9oB,GAAuC,SAAXA,EAClE,KACCA,EAAOkqB,OAASlqB,EAAOiU,WACpB,OACAjU,CACd,CACA,SAASutD,EAAQxtD,GACb,OAAgB,MAARA,GAAyB,SAATA,EAClB,KACCA,EAAKmqB,OAASnqB,EAAKkU,WAChB,OACAlU,CACd,CACA,SAASqtD,EAAmBrvD,EAAGZ,EAAW4uD,GACtC,MAAqB,UAAd5uD,EACAY,EAAIguD,EAAY,GACH,WAAd5uD,EACKY,EAAIguD,EAAY,GAAK,EAAIA,EAAY,GAAK,EAC1ChuD,EAAIguD,EAAY,EAC/B,CACA,SAASW,EAAapxC,GAClB,IAAIiU,EAAOjU,EAAMiU,KAEjB,OADQ,MAARA,IAAiBA,GAAQ,IAClBA,CACX,CACA,SAASq9B,EAAmBtxC,GACxB,SAAUA,EAAMjb,iBACTib,EAAMmvC,YACLnvC,EAAM0B,aAAe1B,EAAMwvC,YACvC,CACA,gHCpiBO,IAAI4G,EAAa,EACbC,EAAoB,EACpBC,EAAoB,mICA3BC,EAAmB,IAAI,KAAI,IACxB,SAASC,EAAeC,GAC3B,GAA6B,iBAAlBA,EAA4B,CACnC,IAAIC,EAAeH,EAAiBnoD,IAAIqoD,GACxC,OAAOC,GAAgBA,EAAa9nC,KACxC,CAEI,OAAO6nC,CAEf,CACO,SAASE,EAAoBF,EAAe7nC,EAAOgoC,EAAQpiC,EAAQqiC,GACtE,GAAKJ,EAGA,IAA6B,iBAAlBA,EAA4B,CACxC,GAAK7nC,GAASA,EAAMkoC,eAAiBL,IAAmBG,EACpD,OAAOhoC,EAEX,IAAI8nC,EAAeH,EAAiBnoD,IAAIqoD,GACpCM,EAAc,CAAEH,OAAQA,EAAQtxD,GAAIkvB,EAAQqiC,UAAWA,GAa3D,OAZIH,GAECM,EADDpoC,EAAQ8nC,EAAa9nC,QACG8nC,EAAaO,QAAQxuD,KAAKsuD,KAGlDnoC,EAAQ,KAAY4pB,UAAUie,EAAeS,EAAaA,IACpDJ,aAAeL,EACrBF,EAAiBl+B,IAAIo+B,EAAe7nC,EAAMuoC,eAAiB,CACvDvoC,MAAOA,EACPqoC,QAAS,CAACF,MAGXnoC,CACX,CAEI,OAAO6nC,CACX,CAxBI,OAAO7nC,CAyBf,CACA,SAASsoC,IACL,IAAIR,EAAe32D,KAAKo3D,eACxBp3D,KAAKy0B,OAASz0B,KAAK04C,QAAU14C,KAAKo3D,eAAiB,KACnD,IAAK,IAAI/xD,EAAI,EAAGA,EAAIsxD,EAAaO,QAAQ/wD,OAAQd,IAAK,CAClD,IAAI2xD,EAAcL,EAAaO,QAAQ7xD,GACnCE,EAAKyxD,EAAYzxD,GACrBA,GAAMA,EAAGvF,KAAMg3D,EAAYF,WAC3BE,EAAYH,OAAO9qD,OACvB,CACA4qD,EAAaO,QAAQ/wD,OAAS,CAClC,CACO,SAAS8wD,EAAapoC,GACzB,OAAOA,GAASA,EAAM1rB,OAAS0rB,EAAMzrB,MACzC,wECpDO,SAASkuB,EAAUvP,EAAKwP,EAAO6S,GAClC,IAAIizB,EAAS9lC,EAAM8lC,OACf74C,EAAS+S,EAAM/S,OACnB,GAAIA,GAAUA,EAAOrY,QAAU,EAAG,CAC9B,GAAIkxD,EAAQ,CACR,IAAIC,ECLD,SAAsB94C,EAAQ64C,EAAQE,EAAQC,GACzD,IAIIC,EACAC,EACAziD,EACAuB,EAPAmhD,EAAM,GACNlhB,EAAI,GACJsL,EAAK,GACL5Y,EAAK,GAKT,GAAIquB,EAAY,CACZviD,EAAM,CAACsO,IAAUA,KACjB/M,EAAM,EAAC,KAAW,KAClB,IAAK,IAAInR,EAAI,EAAGyD,EAAM0V,EAAOrY,OAAQd,EAAIyD,EAAKzD,KAC1C,QAAM4P,EAAKA,EAAKuJ,EAAOnZ,KACvB,QAAMmR,EAAKA,EAAKgI,EAAOnZ,KAE3B,QAAM4P,EAAKA,EAAKuiD,EAAW,KAC3B,QAAMhhD,EAAKA,EAAKghD,EAAW,GAC/B,CACA,IAASnyD,EAAI,EAAGyD,EAAM0V,EAAOrY,OAAQd,EAAIyD,EAAKzD,IAAK,CAC/C,IAAIuyD,EAAQp5C,EAAOnZ,GACnB,GAAIkyD,EACAE,EAAYj5C,EAAOnZ,EAAIA,EAAI,EAAIyD,EAAM,GACrC4uD,EAAYl5C,GAAQnZ,EAAI,GAAKyD,OAE5B,CACD,GAAU,IAANzD,GAAWA,IAAMyD,EAAM,EAAG,CAC1B6uD,EAAIjvD,MAAK,QAAQ8V,EAAOnZ,KACxB,QACJ,CAEIoyD,EAAYj5C,EAAOnZ,EAAI,GACvBqyD,EAAYl5C,EAAOnZ,EAAI,EAE/B,EACA,QAAMoxC,EAAGihB,EAAWD,IACpB,QAAQhhB,EAAGA,EAAG4gB,GACd,IAAIr8B,GAAK,QAAW48B,EAAOH,GACvBx8B,GAAK,QAAW28B,EAAOF,GACvBvoB,EAAMnU,EAAKC,EACH,IAARkU,IACAnU,GAAMmU,EACNlU,GAAMkU,IAEV,QAAQ4S,EAAItL,GAAIzb,IAChB,QAAQmO,EAAIsN,EAAGxb,GACf,IAAI48B,GAAM,QAAM,GAAID,EAAO7V,GACvB+V,GAAM,QAAM,GAAIF,EAAOzuB,GACvBquB,KACA,QAAMK,EAAKA,EAAK5iD,IAChB,QAAM4iD,EAAKA,EAAKrhD,IAChB,QAAMshD,EAAKA,EAAK7iD,IAChB,QAAM6iD,EAAKA,EAAKthD,IAEpBmhD,EAAIjvD,KAAKmvD,GACTF,EAAIjvD,KAAKovD,EACb,CAIA,OAHIP,GACAI,EAAIjvD,KAAKivD,EAAII,SAEVJ,CACX,CDxDgCK,CAAax5C,EAAQ64C,EAAQjzB,EAAW7S,EAAM0mC,kBAClEl2C,EAAIkhB,OAAOzkB,EAAO,GAAG,GAAIA,EAAO,GAAG,IAEnC,IADA,IAAI1V,EAAM0V,EAAOrY,OACRd,EAAI,EAAGA,GAAK++B,EAAYt7B,EAAMA,EAAM,GAAIzD,IAAK,CAClD,IAAIyyD,EAAMR,EAAkB,EAAJjyD,GACpB6yD,EAAMZ,EAAkB,EAAJjyD,EAAQ,GAC5BiO,EAAIkL,GAAQnZ,EAAI,GAAKyD,GACzBiZ,EAAI0hB,cAAcq0B,EAAI,GAAIA,EAAI,GAAII,EAAI,GAAIA,EAAI,GAAI5kD,EAAE,GAAIA,EAAE,GAC9D,CACJ,KACK,CACDyO,EAAIkhB,OAAOzkB,EAAO,GAAG,GAAIA,EAAO,GAAG,IAC1BnZ,EAAI,EAAb,IAAK,IAAW03B,EAAIve,EAAOrY,OAAQd,EAAI03B,EAAG13B,IACtC0c,EAAIqhB,OAAO5kB,EAAOnZ,GAAG,GAAImZ,EAAOnZ,GAAG,GAE3C,CACA++B,GAAariB,EAAIqiB,WACrB,CACJ,0GExBA,IAAI3C,EAAQpvB,KAAKovB,MACV,SAAS02B,EAAqBC,EAAaC,EAAYp4C,GAC1D,GAAKo4C,EAAL,CAGA,IAAI3gC,EAAK2gC,EAAW3gC,GAChB5c,EAAKu9C,EAAWv9C,GAChB6c,EAAK0gC,EAAW1gC,GAChB5c,EAAKs9C,EAAWt9C,GACpBq9C,EAAY1gC,GAAKA,EACjB0gC,EAAYt9C,GAAKA,EACjBs9C,EAAYzgC,GAAKA,EACjBygC,EAAYr9C,GAAKA,EACjB,IAAI0S,EAAYxN,GAASA,EAAMwN,UAC/B,OAAKA,GAGDgU,EAAW,EAAL/J,KAAY+J,EAAW,EAAL3mB,KACxBs9C,EAAY1gC,GAAK0gC,EAAYt9C,GAAKowC,EAAiBxzB,EAAIjK,GAAW,IAElEgU,EAAW,EAAL9J,KAAY8J,EAAW,EAAL1mB,KACxBq9C,EAAYzgC,GAAKygC,EAAYr9C,GAAKmwC,EAAiBvzB,EAAIlK,GAAW,IAE/D2qC,GARIA,CAXX,CAoBJ,CACO,SAASE,EAAqBF,EAAaC,EAAYp4C,GAC1D,GAAKo4C,EAAL,CAGA,IAAIh1D,EAAUg1D,EAAW31D,EACrBY,EAAU+0D,EAAW11D,EACrB41D,EAAcF,EAAWl1D,MACzBq1D,EAAeH,EAAWj1D,OAC9Bg1D,EAAY11D,EAAIW,EAChB+0D,EAAYz1D,EAAIW,EAChB80D,EAAYj1D,MAAQo1D,EACpBH,EAAYh1D,OAASo1D,EACrB,IAAI/qC,EAAYxN,GAASA,EAAMwN,UAC/B,OAAKA,GAGL2qC,EAAY11D,EAAIwoD,EAAiB7nD,EAASoqB,GAAW,GACrD2qC,EAAYz1D,EAAIuoD,EAAiB5nD,EAASmqB,GAAW,GACrD2qC,EAAYj1D,MAAQkP,KAAKmE,IAAI00C,EAAiB7nD,EAAUk1D,EAAa9qC,GAAW,GAAS2qC,EAAY11D,EAAmB,IAAhB61D,EAAoB,EAAI,GAChIH,EAAYh1D,OAASiP,KAAKmE,IAAI00C,EAAiB5nD,EAAUk1D,EAAc/qC,GAAW,GAAS2qC,EAAYz1D,EAAoB,IAAjB61D,EAAqB,EAAI,GAC5HJ,GANIA,CAXX,CAkBJ,CACO,SAASlN,EAAiB9oD,EAAUqrB,EAAWgrC,GAClD,IAAKhrC,EACD,OAAOrrB,EAEX,IAAIs2D,EAAkBj3B,EAAiB,EAAXr/B,GAC5B,OAAQs2D,EAAkBj3B,EAAMhU,IAAc,GAAM,EAC9CirC,EAAkB,GACjBA,GAAmBD,EAAqB,GAAK,IAAM,CAC9D,gDCrDIE,EACA,WACI34D,KAAK8jC,GAAK,EACV9jC,KAAK+jC,GAAK,EACV/jC,KAAKgb,EAAI,EACThb,KAAKgkC,WAAa,EAClBhkC,KAAKikC,SAAqB,EAAV5xB,KAAKE,GACrBvS,KAAK44D,WAAY,CACrB,EAIAC,EAAO,SAAUx4C,GAEjB,SAASw4C,EAAI5kD,GACT,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAsBA,OAzBA,QAAU64D,EAAKx4C,GAIfw4C,EAAIv4D,UAAUupD,gBAAkB,WAC5B,MAAO,CACHllD,OAAQ,OACRD,KAAM,KAEd,EACAm0D,EAAIv4D,UAAUqpD,gBAAkB,WAC5B,OAAO,IAAIgP,CACf,EACAE,EAAIv4D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GACrC,IAAI7uB,EAAI6uB,EAAMuS,GACVnhC,EAAI4uB,EAAMwS,GACV/oB,EAAI3I,KAAKmE,IAAI+a,EAAMvW,EAAG,GACtBgpB,EAAazS,EAAMyS,WACnBC,EAAW1S,EAAM0S,SACjB20B,EAAYrnC,EAAMqnC,UAClBE,EAAQzmD,KAAKC,IAAI0xB,GACjB+0B,EAAQ1mD,KAAKI,IAAIuxB,GACrBjiB,EAAIkhB,OAAO61B,EAAQ99C,EAAItY,EAAGq2D,EAAQ/9C,EAAIrY,GACtCof,EAAI8hB,IAAInhC,EAAGC,EAAGqY,EAAGgpB,EAAYC,GAAW20B,EAC5C,EACOC,CACX,CA3BU,CA2BR,MACFA,EAAIv4D,UAAUiN,KAAO,MACrB,0ECvCIqI,EAAM,GACNojD,EACA,WACIh5D,KAAK03B,GAAK,EACV13B,KAAK23B,GAAK,EACV33B,KAAK8a,GAAK,EACV9a,KAAK+a,GAAK,EACV/a,KAAKi5D,KAAO,EACZj5D,KAAKk5D,KAAO,EACZl5D,KAAKkP,QAAU,CACnB,EAIJ,SAASiqD,EAAa5nC,EAAOgI,EAAG6/B,GAC5B,IAAIC,EAAO9nC,EAAM8nC,KACbC,EAAO/nC,EAAM+nC,KACjB,OAAY,MAARD,GAAwB,MAARC,EACT,EACFF,EAAY,KAAoB,MAAS7nC,EAAMmG,GAAInG,EAAM0nC,KAAM1nC,EAAM8nC,KAAM9nC,EAAMzW,GAAIye,IACrF6/B,EAAY,KAAoB,MAAS7nC,EAAMoG,GAAIpG,EAAM2nC,KAAM3nC,EAAM+nC,KAAM/nC,EAAMxW,GAAIwe,IAInF,EACF6/B,EAAY,KAAwB,MAAa7nC,EAAMmG,GAAInG,EAAM0nC,KAAM1nC,EAAMzW,GAAIye,IACjF6/B,EAAY,KAAwB,MAAa7nC,EAAMoG,GAAIpG,EAAM2nC,KAAM3nC,EAAMxW,GAAIwe,GAG9F,CACA,IAAIggC,EAAe,SAAUl5C,GAEzB,SAASk5C,EAAYtlD,GACjB,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAwDA,OA3DA,QAAUu5D,EAAal5C,GAIvBk5C,EAAYj5D,UAAUupD,gBAAkB,WACpC,MAAO,CACHllD,OAAQ,OACRD,KAAM,KAEd,EACA60D,EAAYj5D,UAAUqpD,gBAAkB,WACpC,OAAO,IAAIqP,CACf,EACAO,EAAYj5D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GAC7C,IAAImG,EAAKnG,EAAMmG,GACXC,EAAKpG,EAAMoG,GACX7c,EAAKyW,EAAMzW,GACXC,EAAKwW,EAAMxW,GACXk+C,EAAO1nC,EAAM0nC,KACbC,EAAO3nC,EAAM2nC,KACbG,EAAO9nC,EAAM8nC,KACbC,EAAO/nC,EAAM+nC,KACbpqD,EAAUqiB,EAAMriB,QACJ,IAAZA,IAGJ6S,EAAIkhB,OAAOvL,EAAIC,GACH,MAAR0hC,GAAwB,MAARC,GACZpqD,EAAU,KACV,QAAmBwoB,EAAIuhC,EAAMn+C,EAAI5L,EAAS0G,GAC1CqjD,EAAOrjD,EAAI,GACXkF,EAAKlF,EAAI,IACT,QAAmB+hB,EAAIuhC,EAAMn+C,EAAI7L,EAAS0G,GAC1CsjD,EAAOtjD,EAAI,GACXmF,EAAKnF,EAAI,IAEbmM,EAAI6hB,iBAAiBq1B,EAAMC,EAAMp+C,EAAIC,KAGjC7L,EAAU,KACV,QAAewoB,EAAIuhC,EAAMI,EAAMv+C,EAAI5L,EAAS0G,GAC5CqjD,EAAOrjD,EAAI,GACXyjD,EAAOzjD,EAAI,GACXkF,EAAKlF,EAAI,IACT,QAAe+hB,EAAIuhC,EAAMI,EAAMv+C,EAAI7L,EAAS0G,GAC5CsjD,EAAOtjD,EAAI,GACX0jD,EAAO1jD,EAAI,GACXmF,EAAKnF,EAAI,IAEbmM,EAAI0hB,cAAcw1B,EAAMC,EAAMG,EAAMC,EAAMx+C,EAAIC,IAEtD,EACAw+C,EAAYj5D,UAAUk5D,QAAU,SAAUjgC,GACtC,OAAO4/B,EAAan5D,KAAKuxB,MAAOgI,GAAG,EACvC,EACAggC,EAAYj5D,UAAUm5D,UAAY,SAAUlgC,GACxC,IAAIjmB,EAAI6lD,EAAan5D,KAAKuxB,MAAOgI,GAAG,GACpC,OAAO,KAAejmB,EAAGA,EAC7B,EACOimD,CACX,CA7DkB,CA6DhB,MAEFA,EAAYj5D,UAAUiN,KAAO,eAC7B,oDChGImsD,EACA,WACI15D,KAAK8jC,GAAK,EACV9jC,KAAK+jC,GAAK,EACV/jC,KAAKgb,EAAI,CACb,EAIA2+C,EAAU,SAAUt5C,GAEpB,SAASs5C,EAAO1lD,GACZ,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAQA,OAXA,QAAU25D,EAAQt5C,GAIlBs5C,EAAOr5D,UAAUqpD,gBAAkB,WAC/B,OAAO,IAAI+P,CACf,EACAC,EAAOr5D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GACxCxP,EAAIkhB,OAAO1R,EAAMuS,GAAKvS,EAAMvW,EAAGuW,EAAMwS,IACrChiB,EAAI8hB,IAAItS,EAAMuS,GAAIvS,EAAMwS,GAAIxS,EAAMvW,EAAG,EAAa,EAAV3I,KAAKE,GACjD,EACOonD,CACX,CAba,CAaX,MAEFA,EAAOr5D,UAAUiN,KAAO,SACxB,oDCzBIqsD,EACA,WACI55D,KAAK8jC,GAAK,EACV9jC,KAAK+jC,GAAK,EACV/jC,KAAKqlC,GAAK,EACVrlC,KAAKslC,GAAK,CACd,EAIAu0B,EAAW,SAAUx5C,GAErB,SAASw5C,EAAQ5lD,GACb,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAmBA,OAtBA,QAAU65D,EAASx5C,GAInBw5C,EAAQv5D,UAAUqpD,gBAAkB,WAChC,OAAO,IAAIiQ,CACf,EACAC,EAAQv5D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GACzC,IAAI/gB,EAAI,SACJ9N,EAAI6uB,EAAMuS,GACVnhC,EAAI4uB,EAAMwS,GACV1wB,EAAIke,EAAM8T,GACVjsB,EAAImY,EAAM+T,GACV0D,EAAK31B,EAAI7C,EACTy4B,EAAK7vB,EAAI5I,EACbuR,EAAIkhB,OAAOvgC,EAAI2Q,EAAG1Q,GAClBof,EAAI0hB,cAAc/gC,EAAI2Q,EAAG1Q,EAAIsmC,EAAIvmC,EAAIsmC,EAAIrmC,EAAIyW,EAAG1W,EAAGC,EAAIyW,GACvD2I,EAAI0hB,cAAc/gC,EAAIsmC,EAAIrmC,EAAIyW,EAAG1W,EAAI2Q,EAAG1Q,EAAIsmC,EAAIvmC,EAAI2Q,EAAG1Q,GACvDof,EAAI0hB,cAAc/gC,EAAI2Q,EAAG1Q,EAAIsmC,EAAIvmC,EAAIsmC,EAAIrmC,EAAIyW,EAAG1W,EAAGC,EAAIyW,GACvD2I,EAAI0hB,cAAc/gC,EAAIsmC,EAAIrmC,EAAIyW,EAAG1W,EAAI2Q,EAAG1Q,EAAIsmC,EAAIvmC,EAAI2Q,EAAG1Q,GACvDof,EAAIqiB,WACR,EACOy1B,CACX,CAxBc,CAwBZ,MACFA,EAAQv5D,UAAUiN,KAAO,UACzB,+DCnCIusD,EAA8B,CAAC,EAC/BC,EACA,WACI/5D,KAAK03B,GAAK,EACV13B,KAAK23B,GAAK,EACV33B,KAAK8a,GAAK,EACV9a,KAAK+a,GAAK,EACV/a,KAAKkP,QAAU,CACnB,EAIA8qD,EAAQ,SAAU35C,GAElB,SAAS25C,EAAK/lD,GACV,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CA8CA,OAjDA,QAAUg6D,EAAM35C,GAIhB25C,EAAK15D,UAAUupD,gBAAkB,WAC7B,MAAO,CACHllD,OAAQ,OACRD,KAAM,KAEd,EACAs1D,EAAK15D,UAAUqpD,gBAAkB,WAC7B,OAAO,IAAIoQ,CACf,EACAC,EAAK15D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GACtC,IAAImG,EACAC,EACA7c,EACAC,EACJ,GAAI/a,KAAKkrD,iBAAkB,CACvB,IAAI+O,GAAiB,QAAqBH,EAA6BvoC,EAAOvxB,KAAKigB,OACnFyX,EAAKuiC,EAAeviC,GACpBC,EAAKsiC,EAAetiC,GACpB7c,EAAKm/C,EAAen/C,GACpBC,EAAKk/C,EAAel/C,EACxB,MAEI2c,EAAKnG,EAAMmG,GACXC,EAAKpG,EAAMoG,GACX7c,EAAKyW,EAAMzW,GACXC,EAAKwW,EAAMxW,GAEf,IAAI7L,EAAUqiB,EAAMriB,QACJ,IAAZA,IAGJ6S,EAAIkhB,OAAOvL,EAAIC,GACXzoB,EAAU,IACV4L,EAAK4c,GAAM,EAAIxoB,GAAW4L,EAAK5L,EAC/B6L,EAAK4c,GAAM,EAAIzoB,GAAW6L,EAAK7L,GAEnC6S,EAAIqhB,OAAOtoB,EAAIC,GACnB,EACAi/C,EAAK15D,UAAUk5D,QAAU,SAAUlmD,GAC/B,IAAIie,EAAQvxB,KAAKuxB,MACjB,MAAO,CACHA,EAAMmG,IAAM,EAAIpkB,GAAKie,EAAMzW,GAAKxH,EAChCie,EAAMoG,IAAM,EAAIrkB,GAAKie,EAAMxW,GAAKzH,EAExC,EACO0mD,CACX,CAnDW,CAmDT,MACFA,EAAK15D,UAAUiN,KAAO,OACtB,+DCjEI2sD,EACA,WACIl6D,KAAKwe,OAAS,KACdxe,KAAKq3D,OAAS,EACdr3D,KAAKi4D,iBAAmB,IAC5B,EAIAkC,EAAW,SAAU95C,GAErB,SAAS85C,EAAQlmD,GACb,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAOA,OAVA,QAAUm6D,EAAS95C,GAInB85C,EAAQ75D,UAAUqpD,gBAAkB,WAChC,OAAO,IAAIuQ,CACf,EACAC,EAAQ75D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GACzC,IAAqBxP,EAAKwP,GAAO,EACrC,EACO4oC,CACX,CAZc,CAYZ,MAEFA,EAAQ75D,UAAUiN,KAAO,UACzB,+DCxBI6sD,EACA,WACIp6D,KAAKwe,OAAS,KACdxe,KAAKkP,QAAU,EACflP,KAAKq3D,OAAS,EACdr3D,KAAKi4D,iBAAmB,IAC5B,EAIAoC,EAAY,SAAUh6C,GAEtB,SAASg6C,EAASpmD,GACd,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAaA,OAhBA,QAAUq6D,EAAUh6C,GAIpBg6C,EAAS/5D,UAAUupD,gBAAkB,WACjC,MAAO,CACHllD,OAAQ,OACRD,KAAM,KAEd,EACA21D,EAAS/5D,UAAUqpD,gBAAkB,WACjC,OAAO,IAAIyQ,CACf,EACAC,EAAS/5D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GAC1C,IAAqBxP,EAAKwP,GAAO,EACrC,EACO8oC,CACX,CAlBe,CAkBb,MACFA,EAAS/5D,UAAUiN,KAAO,WAC1B,mGC7BI+sD,EACA,WACIt6D,KAAK0C,EAAI,EACT1C,KAAK2C,EAAI,EACT3C,KAAKmD,MAAQ,EACbnD,KAAKoD,OAAS,CAClB,EAIA02D,EAA8B,CAAC,EAC/B3E,EAAQ,SAAU90C,GAElB,SAAS80C,EAAKlhD,GACV,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAkCA,OArCA,QAAUm1D,EAAM90C,GAIhB80C,EAAK70D,UAAUqpD,gBAAkB,WAC7B,OAAO,IAAI2Q,CACf,EACAnF,EAAK70D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GACtC,IAAI7uB,EACAC,EACAQ,EACAC,EACJ,GAAIpD,KAAKkrD,iBAAkB,CACvB,IAAI+O,GAAiB,EAAA/O,EAAA,IAAqB4O,EAA6BvoC,EAAOvxB,KAAKigB,OACnFvd,EAAIu3D,EAAev3D,EACnBC,EAAIs3D,EAAet3D,EACnBQ,EAAQ82D,EAAe92D,MACvBC,EAAS62D,EAAe72D,OACxB62D,EAAej/C,EAAIuW,EAAMvW,EACzBuW,EAAQ0oC,CACZ,MAEIv3D,EAAI6uB,EAAM7uB,EACVC,EAAI4uB,EAAM5uB,EACVQ,EAAQouB,EAAMpuB,MACdC,EAASmuB,EAAMnuB,OAEdmuB,EAAMvW,EC3CZ,SAAmB+G,EAAKwP,GAC3B,IAKIgpC,EACAC,EACAC,EACAC,EAmCAC,EA3CAj4D,EAAI6uB,EAAM7uB,EACVC,EAAI4uB,EAAM5uB,EACVQ,EAAQouB,EAAMpuB,MACdC,EAASmuB,EAAMnuB,OACf4X,EAAIuW,EAAMvW,EAKV7X,EAAQ,IACRT,GAAQS,EACRA,GAASA,GAETC,EAAS,IACTT,GAAQS,EACRA,GAAUA,GAEG,iBAAN4X,EACPu/C,EAAKC,EAAKC,EAAKC,EAAK1/C,EAEfA,aAAanL,MACD,IAAbmL,EAAE7U,OACFo0D,EAAKC,EAAKC,EAAKC,EAAK1/C,EAAE,GAEJ,IAAbA,EAAE7U,QACPo0D,EAAKE,EAAKz/C,EAAE,GACZw/C,EAAKE,EAAK1/C,EAAE,IAEM,IAAbA,EAAE7U,QACPo0D,EAAKv/C,EAAE,GACPw/C,EAAKE,EAAK1/C,EAAE,GACZy/C,EAAKz/C,EAAE,KAGPu/C,EAAKv/C,EAAE,GACPw/C,EAAKx/C,EAAE,GACPy/C,EAAKz/C,EAAE,GACP0/C,EAAK1/C,EAAE,IAIXu/C,EAAKC,EAAKC,EAAKC,EAAK,EAGpBH,EAAKC,EAAKr3D,IAEVo3D,GAAMp3D,GADNw3D,EAAQJ,EAAKC,GAEbA,GAAMr3D,EAAQw3D,GAEdF,EAAKC,EAAKv3D,IAEVs3D,GAAMt3D,GADNw3D,EAAQF,EAAKC,GAEbA,GAAMv3D,EAAQw3D,GAEdH,EAAKC,EAAKr3D,IAEVo3D,GAAMp3D,GADNu3D,EAAQH,EAAKC,GAEbA,GAAMr3D,EAASu3D,GAEfJ,EAAKG,EAAKt3D,IAEVm3D,GAAMn3D,GADNu3D,EAAQJ,EAAKG,GAEbA,GAAMt3D,EAASu3D,GAEnB54C,EAAIkhB,OAAOvgC,EAAI63D,EAAI53D,GACnBof,EAAIqhB,OAAO1gC,EAAIS,EAAQq3D,EAAI73D,GACpB,IAAP63D,GAAYz4C,EAAI8hB,IAAInhC,EAAIS,EAAQq3D,EAAI73D,EAAI63D,EAAIA,GAAKnoD,KAAKE,GAAK,EAAG,GAC9DwP,EAAIqhB,OAAO1gC,EAAIS,EAAOR,EAAIS,EAASq3D,GAC5B,IAAPA,GAAY14C,EAAI8hB,IAAInhC,EAAIS,EAAQs3D,EAAI93D,EAAIS,EAASq3D,EAAIA,EAAI,EAAGpoD,KAAKE,GAAK,GACtEwP,EAAIqhB,OAAO1gC,EAAIg4D,EAAI/3D,EAAIS,GAChB,IAAPs3D,GAAY34C,EAAI8hB,IAAInhC,EAAIg4D,EAAI/3D,EAAIS,EAASs3D,EAAIA,EAAIroD,KAAKE,GAAK,EAAGF,KAAKE,IACnEwP,EAAIqhB,OAAO1gC,EAAGC,EAAI43D,GACX,IAAPA,GAAYx4C,EAAI8hB,IAAInhC,EAAI63D,EAAI53D,EAAI43D,EAAIA,EAAIloD,KAAKE,GAAc,IAAVF,KAAKE,GAC1D,CD3BY,CAA0BwP,EAAKwP,GAH/BxP,EAAIkB,KAAKvgB,EAAGC,EAAGQ,EAAOC,EAK9B,EACA+xD,EAAK70D,UAAU+wB,WAAa,WACxB,OAAQrxB,KAAKuxB,MAAMpuB,QAAUnD,KAAKuxB,MAAMnuB,MAC5C,EACO+xD,CACX,CAvCW,CAuCT/L,EAAA,IACF+L,EAAK70D,UAAUiN,KAAO,OACtB,sDEtDIqtD,EACA,WACI56D,KAAK8jC,GAAK,EACV9jC,KAAK+jC,GAAK,EACV/jC,KAAKgb,EAAI,EACThb,KAAK66D,GAAK,CACd,EAIAC,EAAQ,SAAUz6C,GAElB,SAASy6C,EAAK7mD,GACV,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAaA,OAhBA,QAAU86D,EAAMz6C,GAIhBy6C,EAAKx6D,UAAUqpD,gBAAkB,WAC7B,OAAO,IAAIiR,CACf,EACAE,EAAKx6D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GACtC,IAAI7uB,EAAI6uB,EAAMuS,GACVnhC,EAAI4uB,EAAMwS,GACV5K,EAAgB,EAAV9mB,KAAKE,GACfwP,EAAIkhB,OAAOvgC,EAAI6uB,EAAMvW,EAAGrY,GACxBof,EAAI8hB,IAAInhC,EAAGC,EAAG4uB,EAAMvW,EAAG,EAAGme,GAAK,GAC/BpX,EAAIkhB,OAAOvgC,EAAI6uB,EAAMspC,GAAIl4D,GACzBof,EAAI8hB,IAAInhC,EAAGC,EAAG4uB,EAAMspC,GAAI,EAAG1hC,GAAK,EACpC,EACO2hC,CACX,CAlBW,CAkBT,MACFA,EAAKx6D,UAAUiN,KAAO,OACtB,+FC/BIgF,EAAKF,KAAKE,GACV4mB,EAAW,EAAL5mB,EACN2uB,EAAU7uB,KAAKI,IACfwuB,EAAU5uB,KAAKC,IACfyoD,EAAW1oD,KAAKy6B,KAChBkuB,EAAY3oD,KAAKy2B,MACjB3H,EAAU9uB,KAAKwlB,IACf2T,EAAWn5B,KAAKW,KAChB0mB,EAAUrnB,KAAKmE,IACf6D,EAAUhI,KAAK4C,IACftU,EAAI,KAaR,SAASs6D,EAAsBzjC,EAAIC,EAAIC,EAAIC,EAAIwM,EAAQ+2B,EAAItC,GACvD,IAAIuC,EAAM3jC,EAAKE,EACX0jC,EAAM3jC,EAAKE,EACXwO,GAAMyyB,EAAYsC,GAAMA,GAAM1vB,EAAS2vB,EAAMA,EAAMC,EAAMA,GACzDpyB,EAAK7C,EAAKi1B,EACVnyB,GAAM9C,EAAKg1B,EACXE,EAAM7jC,EAAKwR,EACXsyB,EAAM7jC,EAAKwR,EACXsyB,EAAM7jC,EAAKsR,EACXwyB,EAAM7jC,EAAKsR,EACXwyB,GAAOJ,EAAME,GAAO,EACpBG,GAAOJ,EAAME,GAAO,EACpB/6D,EAAK86D,EAAMF,EACX36D,EAAK86D,EAAMF,EACXpgC,EAAKz6B,EAAKA,EAAKC,EAAKA,EACpBsa,EAAImpB,EAAS+2B,EACb9nD,EAAIioD,EAAMG,EAAMD,EAAMD,EACtB32B,GAAKjkC,EAAK,GAAK,EAAI,GAAK8qC,EAAS9R,EAAQ,EAAG1e,EAAIA,EAAIkgB,EAAK9nB,EAAIA,IAC7DuoD,GAAOvoD,EAAI1S,EAAKD,EAAKkkC,GAAKzJ,EAC1B0gC,IAAQxoD,EAAI3S,EAAKC,EAAKikC,GAAKzJ,EAC3B2gC,GAAOzoD,EAAI1S,EAAKD,EAAKkkC,GAAKzJ,EAC1B4gC,IAAQ1oD,EAAI3S,EAAKC,EAAKikC,GAAKzJ,EAC3B6gC,EAAMJ,EAAMF,EACZO,EAAMJ,EAAMF,EACZO,EAAMJ,EAAMJ,EACZS,EAAMJ,EAAMJ,EAKhB,OAJIK,EAAMA,EAAMC,EAAMA,EAAMC,EAAMA,EAAMC,EAAMA,IAC1CP,EAAME,EACND,EAAME,GAEH,CACHh4B,GAAI63B,EACJ53B,GAAI63B,EACJpkC,IAAKwR,EACLvR,IAAKwR,EACLvR,GAAIikC,GAAOx3B,EAASnpB,EAAI,GACxB2c,GAAIikC,GAAOz3B,EAASnpB,EAAI,GAEhC,CA0BO,SAASsW,EAAUvP,EAAKwP,GAC3B,IAAIhI,EACA4a,EAASzK,EAAQnI,EAAMvW,EAAG,GAC1BmhD,EAAcziC,EAAQnI,EAAMspC,IAAM,EAAG,GACrCuB,EAAYj4B,EAAS,EAEzB,GAAKi4B,GADgBD,EAAc,EACnC,CAOA,GAJKC,IACDj4B,EAASg4B,EACTA,EAAc,GAEdA,EAAch4B,EAAQ,CACtB,IAAIrM,EAAMqM,EACVA,EAASg4B,EACTA,EAAcrkC,CAClB,CACA,IAAIkM,EAAazS,EAAMyS,WAAYC,EAAW1S,EAAM0S,SACpD,IAAIptB,MAAMmtB,KAAentB,MAAMotB,GAA/B,CAGA,IAAIH,EAAKvS,EAAMuS,GAAIC,EAAKxS,EAAMwS,GAC1B60B,IAAcrnC,EAAMqnC,UACpB/0B,EAAM1C,EAAQ8C,EAAWD,GACzBq4B,EAAMx4B,EAAM1K,GAAO0K,EAAM1K,EAE7B,GADAkjC,EAAM17D,IAAMkjC,EAAMw4B,GACZl4B,EAASxjC,EAGV,GAAIkjC,EAAM1K,EAAMx4B,EACjBohB,EAAIkhB,OAAOa,EAAKK,EAASlD,EAAQ+C,GAAaD,EAAKI,EAASjD,EAAQ8C,IACpEjiB,EAAI8hB,IAAIC,EAAIC,EAAII,EAAQH,EAAYC,GAAW20B,GAC3CuD,EAAcx7D,IACdohB,EAAIkhB,OAAOa,EAAKq4B,EAAcl7B,EAAQgD,GAAWF,EAAKo4B,EAAcj7B,EAAQ+C,IAC5EliB,EAAI8hB,IAAIC,EAAIC,EAAIo4B,EAAal4B,EAAUD,EAAY40B,QAGtD,CACD,IAAI0D,OAAW,EACXC,OAAS,EACTC,OAAW,EACXC,OAAS,EACTC,OAAO,EACPC,OAAO,EACPC,OAAO,EACPC,OAAO,EACPC,OAAS,EACTC,OAAS,EACTC,OAAgB,EAChBC,OAAgB,EAChBC,OAAM,EACNC,OAAM,EACNC,OAAO,EACPC,OAAO,EACPC,EAAMn5B,EAASlD,EAAQ+C,GACvBu5B,EAAMp5B,EAASjD,EAAQ8C,GACvBw5B,EAAOrB,EAAcl7B,EAAQgD,GAC7Bw5B,EAAOtB,EAAcj7B,EAAQ+C,GAC7By5B,EAAS75B,EAAMljC,EACnB,GAAI+8D,EAAQ,CACR,IAAIC,EAAepsC,EAAMosC,aACrBA,IAC0CrB,GAA1C/yC,EAxFhB,SAA+B2xC,GAC3B,IAAIpzB,EACJ,IAAI,QAAQozB,GAAK,CACb,IAAIpyD,EAAMoyD,EAAG/0D,OACb,IAAK2C,EACD,OAAOoyD,EAGPpzB,EADQ,IAARh/B,EACM,CAACoyD,EAAG,GAAIA,EAAG,GAAI,EAAG,GAEX,IAARpyD,EACC,CAACoyD,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,IAElB,IAARpyD,EACCoyD,EAAG37D,OAAO27D,EAAG,IAGbA,CAEd,MAEIpzB,EAAM,CAACozB,EAAIA,EAAIA,EAAIA,GAEvB,OAAOpzB,CACX,CAgEqB81B,CAAsBD,IAA6B,GAAIpB,EAAShzC,EAAG,GAAIizC,EAAWjzC,EAAG,GAAIkzC,EAASlzC,EAAG,IAE9G,IAAIs0C,EAAS18B,EAAQgD,EAASg4B,GAAe,EAO7C,GANAO,EAAOriD,EAAQwjD,EAAQrB,GACvBG,EAAOtiD,EAAQwjD,EAAQpB,GACvBG,EAAOviD,EAAQwjD,EAAQvB,GACvBO,EAAOxiD,EAAQwjD,EAAQtB,GACvBS,EAAgBF,EAASpjC,EAAQgjC,EAAMC,GACvCM,EAAgBF,EAASrjC,EAAQkjC,EAAMC,IACnCC,EAASn8D,GAAKo8D,EAASp8D,KACvBu8D,EAAM/4B,EAASlD,EAAQgD,GACvBk5B,EAAMh5B,EAASjD,EAAQ+C,GACvBm5B,EAAOjB,EAAcl7B,EAAQ+C,GAC7Bq5B,EAAOlB,EAAcj7B,EAAQ8C,GACzBH,EAAMtxB,GAAI,CACV,IAAIurD,EA1JxB,SAAmBtmC,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,GAC3C,IAAIo6B,EAAOrmC,EAAKF,EACZwmC,EAAOrmC,EAAKF,EACZwmC,EAAOv6B,EAAK5oB,EACZojD,EAAOv6B,EAAK5oB,EACZwe,EAAI2kC,EAAOH,EAAOE,EAAOD,EAC7B,KAAIzkC,EAAIA,EAAI54B,GAIZ,MAAO,CAAC62B,GADR+B,GAAK0kC,GAAQxmC,EAAK1c,GAAMmjD,GAAQ1mC,EAAK1c,IAAOye,GAC3BwkC,EAAMtmC,EAAK8B,EAAIykC,EACpC,CA+I+Bt6C,CAAU45C,EAAKC,EAAKH,EAAMC,EAAMH,EAAKC,EAAKK,EAAMC,GAC3D,GAAIK,EAAM,CACN,IAAItmC,EAAK8lC,EAAMQ,EAAK,GAChBrmC,EAAK8lC,EAAMO,EAAK,GAChBpmC,EAAKwlC,EAAMY,EAAK,GAChBnmC,GAAKwlC,EAAMW,EAAK,GAChBzqD,GAAI,EAAI6tB,EAAQ65B,GAAUvjC,EAAKE,EAAKD,EAAKE,KAAO6T,EAAShU,EAAKA,EAAKC,EAAKA,GAAM+T,EAAS9T,EAAKA,EAAKC,GAAKA,MAAQ,GAC9Gve,GAAIoyB,EAASsyB,EAAK,GAAKA,EAAK,GAAKA,EAAK,GAAKA,EAAK,IACpDd,EAAgB3iD,EAAQyiD,GAAS34B,EAAS/qB,KAAM/F,GAAI,IACpD4pD,EAAgB5iD,EAAQ0iD,GAASZ,EAAc/iD,KAAM/F,GAAI,GAC7D,CACJ,CAER,CACA,GAAKqqD,EAGA,GAAIV,EAAgBr8D,EAAG,CACxB,IAAIw9D,GAAU9jD,EAAQmiD,EAAUQ,GAC5BoB,GAAQ/jD,EAAQoiD,EAAQO,GACxBqB,GAAMpD,EAAsBmC,EAAMC,EAAMC,EAAKC,EAAKp5B,EAAQg6B,GAASvF,GACnE0F,GAAMrD,EAAsBiC,EAAKC,EAAKK,EAAMC,EAAMt5B,EAAQi6B,GAAOxF,GACrE72C,EAAIkhB,OAAOa,EAAKu6B,GAAIv6B,GAAKu6B,GAAI7mC,GAAIuM,EAAKs6B,GAAIt6B,GAAKs6B,GAAI5mC,IAC/CulC,EAAgBF,GAAUqB,KAAYC,GACtCr8C,EAAI8hB,IAAIC,EAAKu6B,GAAIv6B,GAAIC,EAAKs6B,GAAIt6B,GAAIi5B,EAAehC,EAAUqD,GAAI5mC,GAAI4mC,GAAI7mC,IAAKwjC,EAAUsD,GAAI7mC,GAAI6mC,GAAI9mC,KAAMohC,IAGxGuF,GAAU,GAAKp8C,EAAI8hB,IAAIC,EAAKu6B,GAAIv6B,GAAIC,EAAKs6B,GAAIt6B,GAAIo6B,GAASnD,EAAUqD,GAAI5mC,GAAI4mC,GAAI7mC,IAAKwjC,EAAUqD,GAAI1mC,GAAI0mC,GAAI3mC,KAAMkhC,GACjH72C,EAAI8hB,IAAIC,EAAIC,EAAII,EAAQ62B,EAAUqD,GAAIt6B,GAAKs6B,GAAI1mC,GAAI0mC,GAAIv6B,GAAKu6B,GAAI3mC,IAAKsjC,EAAUsD,GAAIv6B,GAAKu6B,GAAI3mC,GAAI2mC,GAAIx6B,GAAKw6B,GAAI5mC,KAAMkhC,GACnHwF,GAAQ,GAAKr8C,EAAI8hB,IAAIC,EAAKw6B,GAAIx6B,GAAIC,EAAKu6B,GAAIv6B,GAAIq6B,GAAOpD,EAAUsD,GAAI3mC,GAAI2mC,GAAI5mC,IAAKsjC,EAAUsD,GAAI7mC,GAAI6mC,GAAI9mC,KAAMohC,GAErH,MAEI72C,EAAIkhB,OAAOa,EAAKw5B,EAAKv5B,EAAKw5B,GAC1Bx7C,EAAI8hB,IAAIC,EAAIC,EAAII,EAAQH,EAAYC,GAAW20B,QAnB/C72C,EAAIkhB,OAAOa,EAAKw5B,EAAKv5B,EAAKw5B,GAqB9B,GAAMpB,EAAcx7D,GAAO+8D,EAGtB,GAAIT,EAAgBt8D,EAAG,CACpBw9D,GAAU9jD,EAAQiiD,EAAUW,GAE5BoB,GAAMpD,EAAsBuC,EAAMC,EAAMP,EAAKC,EAAKhB,IADlDiC,GAAQ/jD,EAAQkiD,EAAQU,IAC+CrE,GACvE0F,GAAMrD,EAAsBqC,EAAKC,EAAKH,EAAMC,EAAMlB,GAAcgC,GAASvF,GAC7E72C,EAAIqhB,OAAOU,EAAKu6B,GAAIv6B,GAAKu6B,GAAI7mC,GAAIuM,EAAKs6B,GAAIt6B,GAAKs6B,GAAI5mC,IAC/CwlC,EAAgBF,GAAUoB,KAAYC,GACtCr8C,EAAI8hB,IAAIC,EAAKu6B,GAAIv6B,GAAIC,EAAKs6B,GAAIt6B,GAAIk5B,EAAejC,EAAUqD,GAAI5mC,GAAI4mC,GAAI7mC,IAAKwjC,EAAUsD,GAAI7mC,GAAI6mC,GAAI9mC,KAAMohC,IAGxGwF,GAAQ,GAAKr8C,EAAI8hB,IAAIC,EAAKu6B,GAAIv6B,GAAIC,EAAKs6B,GAAIt6B,GAAIq6B,GAAOpD,EAAUqD,GAAI5mC,GAAI4mC,GAAI7mC,IAAKwjC,EAAUqD,GAAI1mC,GAAI0mC,GAAI3mC,KAAMkhC,GAC7G72C,EAAI8hB,IAAIC,EAAIC,EAAIo4B,EAAanB,EAAUqD,GAAIt6B,GAAKs6B,GAAI1mC,GAAI0mC,GAAIv6B,GAAKu6B,GAAI3mC,IAAKsjC,EAAUsD,GAAIv6B,GAAKu6B,GAAI3mC,GAAI2mC,GAAIx6B,GAAKw6B,GAAI5mC,IAAKkhC,GACvHuF,GAAU,GAAKp8C,EAAI8hB,IAAIC,EAAKw6B,GAAIx6B,GAAIC,EAAKu6B,GAAIv6B,GAAIo6B,GAASnD,EAAUsD,GAAI3mC,GAAI2mC,GAAI5mC,IAAKsjC,EAAUsD,GAAI7mC,GAAI6mC,GAAI9mC,KAAMohC,GAEzH,MAEI72C,EAAIqhB,OAAOU,EAAK05B,EAAMz5B,EAAK05B,GAC3B17C,EAAI8hB,IAAIC,EAAIC,EAAIo4B,EAAal4B,EAAUD,EAAY40B,QAnBnD72C,EAAIqhB,OAAOU,EAAK05B,EAAMz5B,EAAK05B,EAqBnC,MA5GI17C,EAAIkhB,OAAOa,EAAIC,GA6GnBhiB,EAAIqiB,WApHJ,CAbA,CAkIJ,CC/NA,IAAIm6B,EACA,WACIv+D,KAAK8jC,GAAK,EACV9jC,KAAK+jC,GAAK,EACV/jC,KAAK66D,GAAK,EACV76D,KAAKgb,EAAI,EACThb,KAAKgkC,WAAa,EAClBhkC,KAAKikC,SAAqB,EAAV5xB,KAAKE,GACrBvS,KAAK44D,WAAY,EACjB54D,KAAK29D,aAAe,CACxB,EAIAa,EAAU,SAAUn+C,GAEpB,SAASm+C,EAAOvqD,GACZ,OAAOoM,EAAOvQ,KAAK9P,KAAMiU,IAASjU,IACtC,CAWA,OAdA,QAAUw+D,EAAQn+C,GAIlBm+C,EAAOl+D,UAAUqpD,gBAAkB,WAC/B,OAAO,IAAI4U,CACf,EACAC,EAAOl+D,UAAUgxB,UAAY,SAAUvP,EAAKwP,GACxC,EAA4BxP,EAAKwP,EACrC,EACAitC,EAAOl+D,UAAU+wB,WAAa,WAC1B,OAAOrxB,KAAKuxB,MAAMyS,aAAehkC,KAAKuxB,MAAM0S,UACrCjkC,KAAKuxB,MAAMvW,IAAMhb,KAAKuxB,MAAMspC,EACvC,EACO2D,CACX,CAhBa,CAgBXpV,EAAA,IACFoV,EAAOl+D,UAAUiN,KAAO,SACxB,yHClCI2zB,EAAU7uB,KAAKI,IACfwuB,EAAU5uB,KAAKC,IACfC,EAAKF,KAAKE,GACV4mB,EAAgB,EAAV9mB,KAAKE,GACXksD,EAAS,IAAMlsD,EACfmsD,EAAoB,WACpB,SAASA,IACT,CA4FA,OA3FAA,EAAiBp+D,UAAUszB,MAAQ,SAAU+qC,GACzC3+D,KAAK4+D,QAAS,EACd5+D,KAAK6+D,GAAK,GACV7+D,KAAK8+D,KAAO,GACZ9+D,KAAK++D,GAAK1sD,KAAKO,IAAI,GAAI+rD,GAAa,EACxC,EACAD,EAAiBp+D,UAAU2iC,OAAS,SAAUvgC,EAAGC,GAC7C3C,KAAKg/D,KAAK,IAAKt8D,EAAGC,EACtB,EACA+7D,EAAiBp+D,UAAU8iC,OAAS,SAAU1gC,EAAGC,GAC7C3C,KAAKg/D,KAAK,IAAKt8D,EAAGC,EACtB,EACA+7D,EAAiBp+D,UAAUmjC,cAAgB,SAAU/gC,EAAGC,EAAGmY,EAAIC,EAAI2oB,EAAIC,GACnE3jC,KAAKg/D,KAAK,IAAKt8D,EAAGC,EAAGmY,EAAIC,EAAI2oB,EAAIC,EACrC,EACA+6B,EAAiBp+D,UAAUsjC,iBAAmB,SAAUlhC,EAAGC,EAAGmY,EAAIC,GAC9D/a,KAAKg/D,KAAK,IAAKt8D,EAAGC,EAAGmY,EAAIC,EAC7B,EACA2jD,EAAiBp+D,UAAUujC,IAAM,SAAUC,EAAIC,EAAI/oB,EAAGgpB,EAAYC,EAAUrC,GACxE5hC,KAAKumC,QAAQzC,EAAIC,EAAI/oB,EAAGA,EAAG,EAAGgpB,EAAYC,EAAUrC,EACxD,EACA88B,EAAiBp+D,UAAUimC,QAAU,SAAUzC,EAAIC,EAAIsB,EAAIC,EAAIc,EAAKpC,EAAYC,EAAUrC,GACtF,IAAI4mB,EAASvkB,EAAWD,EACpB40B,GAAah3B,EACbq9B,EAAiB5sD,KAAKwlB,IAAI2wB,GAC1B0W,GAAW,QAAaD,EAAiB9lC,KACrCy/B,EAAYpQ,GAAUrvB,GAAOqvB,GAAUrvB,GAC3CgmC,EAAe3W,EAAS,EAAIA,EAASrvB,EAAOqvB,EAASrvB,EAAMA,EAC3DimC,GAAQ,EAERA,IADAF,KAGK,QAAaD,IAITE,GAAgB5sD,KAAUqmD,EAEvC,IAAIphC,EAAKsM,EAAKuB,EAAKpE,EAAQ+C,GACvBvM,EAAKsM,EAAKuB,EAAKpE,EAAQ8C,GACvBhkC,KAAK4+D,QACL5+D,KAAKg/D,KAAK,IAAKxnC,EAAIC,GAEvB,IAAI4nC,EAAOhtD,KAAKovB,MAAM2E,EAAMq4B,GAC5B,GAAIS,EAAU,CACV,IAAI5rD,EAAI,EAAItT,KAAK++D,GACbO,GAAY1G,EAAY,GAAK,IAAMz/B,EAAM7lB,GAC7CtT,KAAKg/D,KAAK,IAAK35B,EAAIC,EAAI+5B,EAAM,GAAIzG,EAAW90B,EAAKuB,EAAKpE,EAAQ+C,EAAas7B,GAAWv7B,EAAKuB,EAAKpE,EAAQ8C,EAAas7B,IACjHhsD,EAAI,KACJtT,KAAKg/D,KAAK,IAAK35B,EAAIC,EAAI+5B,EAAM,GAAIzG,EAAWphC,EAAIC,EAExD,KACK,CACD,IAAI/0B,EAAIohC,EAAKuB,EAAKpE,EAAQgD,GACtBthC,EAAIohC,EAAKuB,EAAKpE,EAAQ+C,GAC1BjkC,KAAKg/D,KAAK,IAAK35B,EAAIC,EAAI+5B,GAAOD,GAAQxG,EAAWl2D,EAAGC,EACxD,CACJ,EACA+7D,EAAiBp+D,UAAU2iB,KAAO,SAAUvgB,EAAGC,EAAG4X,EAAG6hB,GACjDp8B,KAAKg/D,KAAK,IAAKt8D,EAAGC,GAClB3C,KAAKg/D,KAAK,IAAKzkD,EAAG,GAClBva,KAAKg/D,KAAK,IAAK,EAAG5iC,GAClBp8B,KAAKg/D,KAAK,KAAMzkD,EAAG,GACnBva,KAAKg/D,KAAK,IACd,EACAN,EAAiBp+D,UAAU8jC,UAAY,WAC/BpkC,KAAK6+D,GAAG14D,OAAS,GACjBnG,KAAKg/D,KAAK,IAElB,EACAN,EAAiBp+D,UAAU0+D,KAAO,SAAUv6B,EAAKpxB,EAAG+F,EAAGsrB,EAAGC,EAAGhkC,EAAGikC,EAAGC,EAAGzI,GAGlE,IAFA,IAAImjC,EAAO,GACPjsD,EAAItT,KAAK++D,GACJ15D,EAAI,EAAGA,EAAI83B,UAAUh3B,OAAQd,IAAK,CACvC,IAAIkJ,EAAM4uB,UAAU93B,GACpB,GAAIwR,MAAMtI,GAEN,YADAvO,KAAK2X,UAAW,GAGpB4nD,EAAK72D,KAAK2J,KAAKovB,MAAMlzB,EAAM+E,GAAKA,EACpC,CACAtT,KAAK6+D,GAAGn2D,KAAK+7B,EAAM86B,EAAKn2D,KAAK,MAC7BpJ,KAAK4+D,OAAiB,MAARn6B,CAClB,EACAi6B,EAAiBp+D,UAAUk/D,YAAc,WACrCx/D,KAAK8+D,KAAO9+D,KAAK2X,SAAW,GAAK3X,KAAK6+D,GAAGz1D,KAAK,IAC9CpJ,KAAK6+D,GAAK,EACd,EACAH,EAAiBp+D,UAAUm/D,OAAS,WAChC,OAAOz/D,KAAK8+D,IAChB,EACOJ,CACX,CA/FuB,GAgGvB,0BCjGIgB,EAAO,OACPC,EAAYttD,KAAKovB,MASrB,IAAIm+B,EAAc,CAAC,UAAW,aAAc,YACxCC,GAAiB,QAAID,GAAa,SAAUtvC,GAAQ,MAAO,UAAYA,EAAKwvC,aAAe,IAChF,SAASC,EAAgBC,EAAY//C,EAAO1T,EAAIhL,GAC3D,IAAIitB,EAA2B,MAAjBvO,EAAMuO,QAAkB,EAAIvO,EAAMuO,QAChD,GAAIjiB,aAAc,KACdyzD,EAAW,UAAWxxC,OAD1B,CAIA,GAhBJ,SAAqBvO,GACjB,IAAIvb,EAAOub,EAAMvb,KACjB,OAAe,MAARA,GAAgBA,IAASg7D,CACpC,CAaQO,CAAYhgD,GAAQ,CACpB,IAAIvb,GAAO,QAAeub,EAAMvb,MAChCs7D,EAAW,OAAQt7D,EAAK6R,OACxB,IAAI+X,EAAmC,MAArBrO,EAAMqO,YAClBrO,EAAMqO,YAAc5pB,EAAK8pB,QAAUA,EACnC9pB,EAAK8pB,QAAUA,GACjBjtB,GAAe+sB,EAAc,IAC7B0xC,EAAW,eAAgB1xC,EAEnC,MAEI0xC,EAAW,OAAQN,GAEvB,GAzBJ,SAAuBz/C,GACnB,IAAItb,EAASsb,EAAMtb,OACnB,OAAiB,MAAVA,GAAkBA,IAAW+6D,CACxC,CAsBQQ,CAAcjgD,GAAQ,CACtB,IAAItb,GAAS,QAAesb,EAAMtb,QAClCq7D,EAAW,SAAUr7D,EAAO4R,OAC5B,IAAI4pD,EAAclgD,EAAM4N,cAClBthB,EAAGuhB,eACH,EACFsyC,EAAeD,GAAelgD,EAAMwN,WAAa,GAAK0yC,EAAc,EACpEzxC,EAAuC,MAAvBzO,EAAMyO,cACpBzO,EAAMyO,cAAgB/pB,EAAO6pB,QAAUA,EACvC7pB,EAAO6pB,QAAUA,EACnBwF,EAAc/T,EAAM+T,YAUxB,IATIzyB,GAA+B,IAAhB6+D,IACfJ,EAAW,eAAgBI,IAE3B7+D,GAAeyyB,IACfgsC,EAAW,cAAehsC,EAAc,SAAW,SAEnDzyB,GAAemtB,EAAgB,IAC/BsxC,EAAW,iBAAkBtxC,GAE7BzO,EAAMyN,SAAU,CAChB,IAAInE,GAAK,OAAYhd,GAAKmhB,EAAWnE,EAAG,GAAIoE,EAAiBpE,EAAG,GAC5DmE,IACAC,EAAiBgyC,EAAUhyC,GAAkB,GAC7CqyC,EAAW,mBAAoBtyC,EAAStkB,KAAK,OACzCukB,GAAkBpsB,IAClBy+D,EAAW,oBAAqBryC,GAG5C,MACSpsB,GACLy+D,EAAW,mBAAoBN,GAEnC,IAAK,IAAIr6D,EAAI,EAAGA,EAAIu6D,EAAYz5D,OAAQd,IAAK,CACzC,IAAImS,EAAWooD,EAAYv6D,GAC3B,GAAI9D,GAAe0e,EAAMzI,KAAc,KAAmBA,GAAW,CACjE,IAAIjJ,EAAM0R,EAAMzI,IAAa,KAAmBA,GAChDjJ,GAAOyxD,EAAWH,EAAex6D,GAAIkJ,EACzC,CACJ,CACJ,MACShN,GACLy+D,EAAW,SAAUN,EAxDzB,CA0DJ,gBC9EWW,EAAQ,6BACRC,EAAU,+BACVC,EAAQ,gCACRC,EAAgB,uCACpB,SAAS74C,EAAcvgB,GAC1B,OAAOsgB,SAAS+4C,gBAAgBJ,EAAOj5D,EAC3C,CAEO,SAASs5D,EAAYC,EAAKjhE,EAAKkhE,EAAOnb,EAAUvxB,GACnD,MAAO,CACHysC,IAAKA,EACLC,MAAOA,GAAS,CAAC,EACjBnb,SAAUA,EACVvxB,KAAMA,EACNx0B,IAAKA,EAEb,CAqBO,SAASmhE,EAAct0D,EAAI0H,GAE9B,IAAI6sD,GADJ7sD,EAAOA,GAAQ,CAAC,GACH8sD,QAAU,KAAO,GAQ9B,OAPA,SAASC,EAAkBz0D,GACvB,IAAIk5C,EAAWl5C,EAAGk5C,SAAUkb,EAAMp0D,EAAGo0D,IAAKC,EAAQr0D,EAAGq0D,MAAO1sC,EAAO3nB,EAAG2nB,KACtE,OAzBR,SAA2B9sB,EAAMw5D,GAC7B,IAAIK,EAAW,GACf,GAAIL,EACA,IAAK,IAAIlhE,KAAOkhE,EAAO,CACnB,IAAIryD,EAAMqyD,EAAMlhE,GACZwhE,EAAOxhE,GACC,IAAR6O,KAGa,IAARA,GAAuB,MAAPA,IACrB2yD,GAAQ,KAAQ3yD,EAAM,KAE1B0yD,EAASv4D,KAAKw4D,GAClB,CAEJ,MAAO,IAAM95D,EAAO,IAAM65D,EAAS73D,KAAK,KAAO,GACnD,CASe+3D,CAAkBR,EAAKC,IACf,UAARD,GAAkB,QAAWzsC,GAAQA,GAAQ,KAC7CuxB,EAAW,GAAKqb,GAAI,QAAIrb,GAAU,SAAUI,GAAS,OAAOmb,EAAkBnb,EAAQ,IAAGz8C,KAAK03D,GAAKA,EAAI,KAT3G,KAUsBH,EAVR,IAWrB,CACOK,CAAkBz0D,EAC7B,CA2BO,SAAS60D,EAAiBC,GAC7B,MAAO,CACHA,KAAMA,EACNC,YAAa,CAAC,EACdC,aAAc,CAAC,EACfC,cAAe,CAAC,EAChBC,cAAe,CAAC,EAChBC,KAAM,CAAC,EACPC,SAAU,CAAC,EACXC,SAAU,CAAC,EACXC,YAAa,EACbC,WAAY,EACZC,UAAW,EACXC,YAAa,EACbC,WAAY,EACZC,YAAa,EAErB,CACO,SAASC,EAAeh/D,EAAOC,EAAQqiD,EAAU2c,GACpD,OAAO1B,EAAY,MAAO,OAAQ,CAC9B,MAASv9D,EACT,OAAUC,EACV,MAASi9D,EACT,cAAeC,EACf,QAAW,MACX,YAAe,OACf,UAAW8B,GAAa,OAASj/D,EAAQ,IAAMC,GAChDqiD,EACP,2DCjGW4c,EAAa,CACpB1wD,QAAS,gBACTC,SAAU,gBACVC,WAAY,gBACZL,YAAa,eACbC,aAAc,eACdC,eAAgB,gBAChBI,UAAW,eACXC,WAAY,eACZC,aAAc,gBACdC,UAAW,gBACXC,WAAY,gBACZC,aAAc,gBACdC,aAAc,gBACdI,cAAe,gBACfE,gBAAiB,gBACjBC,cAAe,eACfE,eAAgB,eAChBC,iBAAkB,gBAClBC,WAAY,gBACZE,YAAa,gBACbC,cAAe,iBAEfovD,EAAqB,mBACzB,SAASC,EAAgBh2D,EAAIi2D,EAASlwC,GAClC,IAAIf,GAAQ,QAAO,CAAC,EAAGhlB,EAAGglB,QAC1B,QAAOA,EAAOixC,GACdj2D,EAAG+kB,UAAUgB,EAAMf,GACnB,IAAIkxC,EAAiB,IAAI,EAIzB,OAHAA,EAAe7uC,OAAM,QAAiBrnB,IACtC+lB,EAAKyB,YAAY0uC,EAAgB,GACjCA,EAAejD,cACRiD,EAAehD,QAC1B,CACA,SAASiD,EAAmB57D,EAAQhG,GAChC,IAAIuC,EAAUvC,EAAUuC,QAASC,EAAUxC,EAAUwC,SACjDD,GAAWC,KACXwD,EAAOw7D,GAAsBj/D,EAAU,MAAQC,EAAU,KAEjE,CACO,IAAIq/D,EAAoB,CAC3Bj+D,KAAM,OACN8pB,QAAS,UACTf,UAAW,eACXE,eAAgB,qBAEpB,SAASi1C,EAAaC,EAASh2D,GAC3B,IAAIi2D,EAAgBj2D,EAAMw0D,KAAO,QAAUx0D,EAAMi1D,aAEjD,OADAj1D,EAAM+0D,SAASkB,GAAiBD,EACzBC,CACX,CAsCA,SAASC,EAAc1zD,GACnB,OAAO,QAASA,GACVgzD,EAAWhzD,GACP,gBAAkBgzD,EAAWhzD,GAAU,KACvC,OAAsBA,GAAUA,EAAS,GAC7C,EACV,CACO,SAAS2zD,EAAmBz2D,EAAIq0D,EAAO/zD,EAAOo2D,GACjD,IAAI/iE,EAAYqM,EAAGrM,UACf4I,EAAM5I,EAAUiG,OAChB+8D,EAAgB,GACpB,GAAI32D,aAAc21C,EAAA,EAAc,CAC5B,IAAIr6C,EAjDZ,SAAwC0E,EAAIq0D,EAAO/zD,GAC/C,IAEIs2D,EACAC,EAHAhhB,EAAQ71C,EAAGglB,MAAM6wB,MACjBihB,EAAe,CAAC,EA4BpB,IAzBA,QAAKjhB,GAAO,SAAU9vB,GAClB,IAAIgxC,EAAWlC,EAAiBv0D,EAAMw0D,MACtCiC,EAASr3D,WAAY,EACrB+2D,EAAmB1wC,EAAM,CAAC,EAAGgxC,GAAU,GACvC,IAAI1B,EAAW0B,EAAS1B,SACpBD,EAAW2B,EAAS3B,SACpB4B,GAAY,QAAK3B,GACjB94D,EAAMy6D,EAAUp9D,OACpB,GAAK2C,EAAL,CAIA,IAAI06D,EAAW5B,EADfwB,EAAmBG,EAAUz6D,EAAM,IAEnC,IAAK,IAAIoG,KAAWs0D,EAAU,CAC1B,IAAI1qD,EAAK0qD,EAASt0D,GAClBm0D,EAAan0D,GAAWm0D,EAAan0D,IAAY,CAAEy1B,EAAG,IACtD0+B,EAAan0D,GAASy1B,GAAK7rB,EAAG6rB,GAAK,EACvC,CACA,IAAK,IAAI8+B,KAAa9B,EAAU,CAC5B,IAAIpzD,EAAMozD,EAAS8B,GAAWx3D,UAC1BsC,EAAI5K,QAAQy/D,IAAqB,IACjCD,EAAkB50D,EAE1B,CAbA,CAcJ,IACK40D,EAAL,CAGAvC,EAAMj8B,GAAI,EACV,IAAIm+B,EAAgBF,EAAaS,EAAcx2D,GAC/C,OAAOs2D,EAAgBtxB,QAAQuxB,EAAkBN,EAHjD,CAIJ,CAa2BY,CAA+Bn3D,EAAIq0D,EAAO/zD,GAC7D,GAAIhF,EACAq7D,EAAcx6D,KAAKb,QAElB,IAAKiB,EACN,MAER,MACK,IAAKA,EACN,OAGJ,IADA,IAAI66D,EAAiB,CAAC,EACbt+D,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CAC1B,IAAIoB,EAAWvG,EAAUmF,GACrBu+D,EAAS,CAACn9D,EAASoV,aAAe,IAAO,KACzCxM,EAAS0zD,EAAct8D,EAASkX,UAAUtO,QAC1Ca,EAAQzJ,EAASqV,WACjBzM,EACAu0D,EAAOl7D,KAAK2G,GAGZu0D,EAAOl7D,KAAK,UAEZwH,GACA0zD,EAAOl7D,KAAKwH,EAAQ,IAAO,KAE3BzJ,EAASG,WACTg9D,EAAOl7D,KAAK,YAEhB,IAAI6C,EAAMq4D,EAAOx6D,KAAK,KACtBu6D,EAAep4D,GAAOo4D,EAAep4D,IAAQ,CAACA,EAAK,IACnDo4D,EAAep4D,GAAK,GAAG7C,KAAKjC,EAChC,CACA,SAASo9D,EAAyBC,GAC9B,IA0DIxxC,EA1DApyB,EAAY4jE,EAAc,GAC1Bh7D,EAAM5I,EAAUiG,OAChB49D,EAAe,CAAC,EAChBC,EAAW,CAAC,EACZC,EAAW,CAAC,EACZC,EAAkC,4BACtC,SAASC,EAA0B19D,EAAU29D,EAAQC,GAGjD,IAFA,IAAInoD,EAASzV,EAASmX,YAClB5E,EAAUvS,EAASoV,aACdrL,EAAI,EAAGA,EAAI0L,EAAO/V,OAAQqK,IAAK,CACpC,IAAI2L,EAAQD,EAAO1L,GACnB,GAAI2L,EAAMhE,eAAgB,CACtB,IAAIe,EAAMiD,EAAM1E,UACZ6sD,EAAWnoD,EAAM3E,SAErB,GADA6sD,IAAkBC,EAAWD,EAAcC,IACvCA,EACA,IAAK,IAAIj/D,EAAI,EAAGA,EAAI6T,EAAI/S,OAAQd,IAAK,CACjC,IAAIyT,EAAKI,EAAI7T,GACT6J,EAAUmD,KAAKovB,MAAM3oB,EAAGR,KAAOU,EAAU,KAAO,IAChDurD,EAAWxB,EAAcjqD,EAAGzJ,QAC5BkJ,EAAWO,EAAGP,WACd,QAASA,KAAa,QAASA,MAC/B6rD,EAAOl1D,GAAWk1D,EAAOl1D,IAAY,CAAC,EACtCk1D,EAAOl1D,GAASo1D,GAAYxrD,EAAGP,SAC3BgsD,IACAH,EAAOl1D,GAASg1D,GAAmCK,GAG/D,CAER,CACJ,CACJ,CACA,IAAK,IAAIl/D,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,EAEtBg4C,GADA52C,EAAWvG,EAAUmF,IACCwB,YAIF,UAAfw2C,GACL8mB,EAA0B19D,EAAUu9D,IAHnCf,GAAakB,EAA0B19D,EAAUs9D,EAK1D,CACA,IAAK,IAAI70D,KAAW60D,EAAc,CAC9B,IAAIjjE,EAAY,CAAC,GACjB,QAAcA,EAAWyL,IACzB,QAAOzL,EAAWijE,EAAa70D,IAC/B,IAAI4iC,GAAM,QAAsBhxC,GAC5B0jE,EAAiBT,EAAa70D,GAASg1D,GAC3CD,EAAS/0D,GAAW4iC,EAAM,CACtBhxC,UAAWgxC,GACX,CAAC,EACL4wB,EAAmBuB,EAAS/0D,GAAUpO,GAClC0jE,IACAP,EAAS/0D,GAASg1D,GAAmCM,EAE7D,CAGA,IAAIC,GAAkB,EACtB,IAAK,IAAIv1D,KAAW80D,EAAU,CAC1BC,EAAS/0D,GAAW+0D,EAAS/0D,IAAY,CAAC,EAC1C,IAAIk2B,GAAW9S,EACXkyC,EAAiBR,EAAS90D,GAASg1D,GACnC9+B,IACA9S,EAAO,IAAI0P,EAAA,GAEf,IAAIxM,EAAQlD,EAAKxpB,MACjBwpB,EAAKsB,QACLqwC,EAAS/0D,GAASy1B,EAAI49B,EAAgBh2D,EAAIy3D,EAAS90D,GAAUojB,GAC7D,IAAIoyC,EAASpyC,EAAKxpB,MAClB,IAAKs8B,GAAW5P,IAAUkvC,EAAQ,CAC9BD,GAAkB,EAClB,KACJ,CACID,IACAP,EAAS/0D,GAASg1D,GAAmCM,EAE7D,CAEA,IAAKC,EACD,IAAK,IAAIv1D,KAAW+0D,SACTA,EAAS/0D,GAASy1B,EAGjC,IAAKs+B,EACD,IAAS59D,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CAC1B,IAAIoB,EACA42C,EACe,WADfA,GADA52C,EAAWvG,EAAUmF,IACCwB,aAEtBs9D,EAA0B19D,EAAUw9D,GAAU,SAAUzsD,GAAY,OAAOmrD,EAAkBnrD,EAAW,GAEhH,CAEJ,IAEImtD,EAFAC,GAAW,QAAKX,GAChBY,GAAyB,EAE7B,IAASx/D,EAAI,EAAGA,EAAIu/D,EAASz+D,OAAQd,IAAK,CACtC,IAAIoQ,EAAKmvD,EAASv/D,EAAI,GAClBqQ,EAAKkvD,EAASv/D,GAClB,GAAI4+D,EAASxuD,GAAI6sD,KAAwB2B,EAASvuD,GAAI4sD,GAAqB,CACvEuC,GAAyB,EACzB,KACJ,CACAF,EAAkBV,EAASxuD,GAAI6sD,EACnC,CACA,GAAIuC,GAA0BF,EAAiB,CAC3C,IAAK,IAAIz1D,KAAW+0D,EACZA,EAAS/0D,GAASozD,WACX2B,EAAS/0D,GAASozD,GAGjC1B,EAAM0B,GAAsBqC,CAChC,CACA,IAAI,QAAOC,GAAU,SAAU11D,GAAW,OAAO,QAAK+0D,EAAS/0D,IAAU/I,OAAS,CAAG,IAAGA,OAEpF,OADoBy8D,EAAaqB,EAAUp3D,GACpB,IAAMi3D,EAAc,GAAK,OAExD,CACA,IAAK,IAAIpkE,KAAOikE,EAAgB,EACxB97D,EAAeg8D,EAAyBF,EAAejkE,MAEvDwjE,EAAcx6D,KAAKb,EAE3B,CACA,GAAIq7D,EAAc/8D,OAAQ,CACtB,IAAIs9D,EAAY52D,EAAMw0D,KAAO,QAAUx0D,EAAMg1D,cAC7Ch1D,EAAM80D,SAAS,IAAM8B,GAAa,CAC9Bx3D,UAAWi3D,EAAc95D,KAAK,MAElCw3D,EAAa,MAAI6C,CACrB,CACJ,0BCrQIhiC,EAAQpvB,KAAKovB,MACjB,SAASqjC,EAAYv2D,GACjB,OAAOA,IAAO,QAASA,EAAIghC,IAC/B,CACA,SAASw1B,EAAax2D,GAClB,OAAOA,IAAO,QAAWA,EAAIy2D,UACjC,CACA,SAASC,EAAcrE,EAAO3gD,EAAO1T,EAAIM,GACrCkzD,GAAgB,SAAUrgE,EAAK6O,GAC3B,IAAI22D,EAAuB,SAARxlE,GAA0B,WAARA,EACjCwlE,IAAgB,QAAW32D,GAC3B42D,GAAYllD,EAAO2gD,EAAOlhE,EAAKmN,GAE1Bq4D,IAAgB,OAAU32D,GAC/B62D,GAAW74D,EAAIq0D,EAAOlhE,EAAKmN,GAG3B+zD,EAAMlhE,GAAO6O,CAErB,GAAG0R,EAAO1T,GAAI,GA+MlB,SAAmBA,EAAIq0D,EAAO/zD,GAC1B,IAAIoT,EAAQ1T,EAAG0T,MACf,IAAI,QAAUA,GAAQ,CAClB,IAAIolD,GAAY,QAAa94D,GACzB+0D,EAAcz0D,EAAMy0D,YACpBgE,EAAWhE,EAAY+D,GAC3B,IAAKC,EAAU,CACX,IAAIC,EAAch5D,EAAG8mB,iBACjB/N,EAASigD,EAAY,GACrBhgD,EAASggD,EAAY,GACzB,IAAKjgD,IAAWC,EACZ,OAEJ,IAAIwuB,EAAU9zB,EAAM0iC,eAAiB,EACjCxO,EAAUl0B,EAAM2iC,eAAiB,EACjC4iB,EAASvlD,EAAMyiC,WACfn5B,GAAK,QAAetJ,EAAM+P,aAAcxB,EAAUjF,EAAGiF,QAASjY,EAAQgT,EAAGhT,MAGzEkvD,EAFQD,EAAS,EAAIlgD,EAEE,IADfkgD,EAAS,EAAIjgD,EAEzB+/C,EAAWz4D,EAAMw0D,KAAO,KAAOx0D,EAAMk1D,YACrCl1D,EAAM60D,KAAK4D,GAAY5E,EAAY,SAAU4E,EAAU,CACnD,GAAMA,EACN,EAAK,QACL,EAAK,QACL,MAAS,OACT,OAAU,QACX,CACC5E,EAAY,eAAgB,GAAI,CAC5B,GAAM3sB,EAAUzuB,EAChB,GAAM6uB,EAAU5uB,EAChB,aAAgBkgD,EAChB,cAAelvD,EACf,gBAAiBiY,MAGzB8yC,EAAY+D,GAAaC,CAC7B,CACA1E,EAAMtjC,QAAS,QAASgoC,EAC5B,CACJ,CAtPII,CAAUn5D,EAAIq0D,EAAO/zD,EACzB,CACA,SAAS84D,EAAc9kE,GACnB,OAAO,QAAaA,EAAE,GAAK,KACpB,QAAaA,EAAE,MACf,QAAaA,EAAE,MACf,QAAaA,EAAE,GAAK,EAC/B,CAIA,SAASsuB,EAAayxC,EAAO//D,EAAG+kE,GAC5B,GAAI/kE,KAJR,SAAqBA,GACjB,OAAO,QAAaA,EAAE,MAAO,QAAaA,EAAE,GAChD,CAEeglE,CAAYhlE,KAAM8kE,EAAc9kE,IAAK,CAC5C,IAAIm1C,EAAM4vB,EAAW,GAAK,IAC1BhF,EAAM9/D,UAAY6kE,EAAc9kE,GAC1B,aAAe4gC,EAAM5gC,EAAE,GAAKm1C,GAAOA,EAAM,IAAMvU,EAAM5gC,EAAE,GAAKm1C,GAAOA,EAAM,KAAM,QAAan1C,EACtG,CACJ,CACA,SAASilE,EAAiBv0C,EAAOqvC,EAAO5qB,GAGpC,IAFA,IAAIx3B,EAAS+S,EAAM/S,OACfunD,EAAS,GACJ1gE,EAAI,EAAGA,EAAImZ,EAAOrY,OAAQd,IAC/B0gE,EAAOr9D,KAAK+4B,EAAMjjB,EAAOnZ,GAAG,GAAK2wC,GAAOA,GACxC+vB,EAAOr9D,KAAK+4B,EAAMjjB,EAAOnZ,GAAG,GAAK2wC,GAAOA,GAE5C4qB,EAAMpiD,OAASunD,EAAO38D,KAAK,IAC/B,CACA,SAAS48D,GAAkBz0C,GACvB,OAAQA,EAAM8lC,MAClB,CAeA,IAd4B4O,GACpBC,GAaJC,GAAmB,CACnBC,OAAQ,EAfgBH,GAeI,CAAC,KAAM,KAAM,KAdrCC,IAAiB,QAAID,IAAM,SAAUI,GACrC,MAAwB,iBAATA,EAAoB,CAACA,EAAMA,GAAQA,CACtD,IACO,SAAU90C,EAAOqvC,EAAO5qB,GAC3B,IAAK,IAAI3wC,EAAI,EAAGA,EAAI6gE,GAAe//D,OAAQd,IAAK,CAC5C,IAAIghE,EAAOH,GAAe7gE,GACtBkJ,EAAMgjB,EAAM80C,EAAK,IACV,MAAP93D,IACAqyD,EAAMyF,EAAK,IAAM5kC,EAAMlzB,EAAMynC,GAAOA,EAE5C,CACJ,IAIAswB,SAAU,CAACR,EAAkBE,IAC7BO,QAAS,CAACT,EAAkBE,KAWzB,SAASQ,GAAaj6D,EAAIM,GAC7B,IAAIoT,EAAQ1T,EAAG0T,MACXsR,EAAQhlB,EAAGglB,MACXk1C,EAAgBN,GAAiB55D,EAAGgB,MACpCqzD,EAAQ,CAAC,EACTzoD,EAAetL,EAAMZ,UACrBy6D,EAAY,OACZ10C,EAAgBzlB,EAAG0T,MAAM+R,cACzB2sC,EAAa9xD,EAAM+4D,WAAY,QAAiBr5D,IAAQ,EAC5D,IAAIk6D,GACI55D,EAAM85D,YACLF,EAAc,KAAOA,EAAc,GAAGl1C,IACtCpZ,GArBb,SAA2B5L,GAEvB,IADA,IAAIrM,EAAYqM,EAAGrM,UACVmF,EAAI,EAAGA,EAAInF,EAAUiG,OAAQd,IAClC,GAAgC,UAA5BnF,EAAUmF,GAAGwB,WACb,OAAO,EAGf,OAAO,CACX,CAa6B+/D,CAAkBr6D,IAClCylB,EAAgB,EAKpB,CACD,IAAI60C,GAAiBt6D,EAAG+lB,MAAQ/lB,EAAG+1C,eAC9B/1C,EAAG+lB,MACJ/lB,EAAGgmB,kBAEP,IAAID,EAAO/lB,EAAG+lB,KACVu0C,IACAv0C,EAAKvH,YACLxe,EAAG+kB,UAAUgB,EAAM/lB,EAAGglB,OACtBhlB,EAAGunB,eAEP,IAAIgzC,EAAcx0C,EAAKqQ,aACnBokC,EAAQx6D,EACRk2D,EAAiBsE,EAAMC,iBACvBD,EAAME,mBAAqBH,GACvBrE,GACDzwC,IAAkB+0C,EAAMG,yBACtBzE,IACDA,EAAiBsE,EAAMC,iBAAmB,IAAI,GAElDvE,EAAe7uC,MAAM+qC,GACrBrsC,EAAKyB,YAAY0uC,EAAgBzwC,GACjCywC,EAAejD,cACfuH,EAAME,iBAAmBH,EACzBC,EAAMG,uBAAyBl1C,GAEnC4uC,EAAMj8B,EAAI89B,EAAehD,QAC7B,KAhC6B,CACzBiH,EAAYn6D,EAAGgB,KACf,IAAIyoC,EAAM3jC,KAAKO,IAAI,GAAI+rD,GACvB8H,EAAc,GAAGl1C,EAAOqvC,EAAO5qB,EACnC,CAgCA,OAHA7mB,EAAayxC,EAAOr0D,EAAGzL,WACvBmkE,EAAcrE,EAAO3gD,EAAO1T,EAAIM,GAChCA,EAAMZ,WAAa+2D,EAAmBz2D,EAAIq0D,EAAO/zD,GAC1C6zD,EAAYgG,EAAWn6D,EAAGtM,GAAK,GAAI2gE,EAC9C,CAuFO,SAAS5vC,GAAMzkB,EAAIM,GACtB,OAAIN,aAAc68C,EAAA,GACPod,GAAaj6D,EAAIM,GAEnBN,aAAc,KA1FpB,SAAuBA,EAAIM,GAC9B,IAAIoT,EAAQ1T,EAAG0T,MACX4O,EAAQ5O,EAAM4O,MASlB,GARIA,KAAU,QAASA,KACfi2C,EAAYj2C,GACZA,EAAQA,EAAM0gB,IAETw1B,EAAal2C,KAClBA,EAAQA,EAAMm2C,cAGjBn2C,EAAL,CAGA,IAAInsB,EAAIud,EAAMvd,GAAK,EACfC,EAAIsd,EAAMtd,GAAK,EAGfi+D,EAAQ,CACRuG,KAAMt4C,EACN1rB,MAJK8c,EAAM9c,MAKXC,OAJK6c,EAAM7c,QAef,OATIV,IACAk+D,EAAMl+D,EAAIA,GAEVC,IACAi+D,EAAMj+D,EAAIA,GAEdwsB,EAAayxC,EAAOr0D,EAAGzL,WACvBmkE,EAAcrE,EAAO3gD,EAAO1T,EAAIM,GAChCA,EAAMZ,WAAa+2D,EAAmBz2D,EAAIq0D,EAAO/zD,GAC1C6zD,EAAY,QAASn0D,EAAGtM,GAAK,GAAI2gE,EAnBxC,CAoBJ,CA0DewG,CAAc76D,EAAIM,GAEpBN,aAAc8+C,EAAA,EA1DpB,SAAuB9+C,EAAIM,GAC9B,IAAIoT,EAAQ1T,EAAG0T,MACXiU,EAAOjU,EAAMiU,KAEjB,GADQ,MAARA,IAAiBA,GAAQ,IACpBA,IAAQrd,MAAMoJ,EAAMvd,KAAMmU,MAAMoJ,EAAMtd,GAA3C,CAGA,IAAIwxB,EAAOlU,EAAMkU,MAAQ,KACrBzxB,EAAIud,EAAMvd,GAAK,EACfC,GAAI,QAAYsd,EAAMtd,GAAK,GAAG,QAAcwxB,GAAOlU,EAAMmU,cAGzDwsC,EAAQ,CACR,oBAAqB,UACrB,cAJY,KAAqB3gD,EAAMne,YACpCme,EAAMne,WAKb,IAAI,QAAgBme,GAAQ,CACxB,IAAIonD,EAAmB,GACnB1R,EAAY11C,EAAM01C,UAClBpd,GAAW,QAAct4B,EAAMs4B,UACnC,IAAK3hB,WAAW2hB,GACZ,OAEJ,IAAIud,EAAa71C,EAAM61C,YAAc,KACjCF,EAAa31C,EAAM21C,WACvByR,GAAoB,aAAe9uB,EAAW,gBAAkBud,EAAa,IACzEH,GAA2B,WAAdA,IACb0R,GAAoB,cAAgB1R,EAAY,KAEhDC,GAA6B,WAAfA,IACdyR,GAAoB,eAAiBzR,EAAa,KAEtDgL,EAAM3gD,MAAQonD,CAClB,MAEIzG,EAAM3gD,MAAQ,SAAWkU,EAc7B,OAZID,EAAK+e,MAAM,QACX2tB,EAAM,aAAe,YAErBl+D,IACAk+D,EAAMl+D,EAAIA,GAEVC,IACAi+D,EAAMj+D,EAAIA,GAEdwsB,EAAayxC,EAAOr0D,EAAGzL,WACvBmkE,EAAcrE,EAAO3gD,EAAO1T,EAAIM,GAChCA,EAAMZ,WAAa+2D,EAAmBz2D,EAAIq0D,EAAO/zD,GAC1C6zD,EAAY,OAAQn0D,EAAGtM,GAAK,GAAI2gE,OAAOrrB,EAAWrhB,EA3CzD,CA4CJ,CASeozC,CAAc/6D,EAAIM,QADxB,CAGT,CA0CO,SAASs4D,GAAYllD,EAAO2gD,EAAO95D,EAAQ+F,GAC9C,IACI06D,EADAh5D,EAAM0R,EAAMnZ,GAEZ0gE,EAAgB,CAChB,cAAiBj5D,EAAIsM,OACf,iBACA,qBAEV,IAAI,QAAiBtM,GACjBg5D,EAAc,iBACdC,EAAc9vC,GAAKnpB,EAAI7L,EACvB8kE,EAAc7vC,GAAKppB,EAAI5L,EACvB6kE,EAAc1sD,GAAKvM,EAAIuM,GACvB0sD,EAAczsD,GAAKxM,EAAIwM,OAEtB,MAAI,QAAiBxM,GAUtB,cATAg5D,EAAc,iBACdC,EAAc1jC,IAAK,QAAUv1B,EAAI7L,EAAG,IACpC8kE,EAAczjC,IAAK,QAAUx1B,EAAI5L,EAAG,IACpC6kE,EAAcxsD,GAAI,QAAUzM,EAAIyM,EAAG,GAOvC,CAGA,IAFA,IAAIysD,EAASl5D,EAAIqK,WACbA,EAAa,GACRvT,EAAI,EAAGyD,EAAM2+D,EAAOthE,OAAQd,EAAIyD,IAAOzD,EAAG,CAC/C,IAAI7B,EAAoC,KAA3B,QAAOikE,EAAOpiE,GAAG7B,QAAgB,IAC1CkkE,EAAYD,EAAOpiE,GAAGkR,MACtBgT,GAAK,QAAem+C,GAAYnxD,EAAQgT,EAAGhT,MAAOiY,EAAUjF,EAAGiF,QAC/Dm5C,EAAa,CACb,OAAUnkE,GAEdmkE,EAAW,cAAgBpxD,EACvBiY,EAAU,IACVm5C,EAAW,gBAAkBn5C,GAEjC5V,EAAWlQ,KAAKg4D,EAAY,OAAQr7D,EAAI,GAAIsiE,GAChD,CACA,IACIC,EAAc/G,EADEH,EAAY6G,EAAa,GAAIC,EAAe5uD,IAE5D4oD,EAAgB30D,EAAM20D,cACtBqG,EAAarG,EAAcoG,GAC1BC,IACDA,EAAah7D,EAAMw0D,KAAO,KAAOx0D,EAAMm1D,cACvCR,EAAcoG,GAAeC,EAC7BL,EAAcvnE,GAAK4nE,EACnBh7D,EAAM60D,KAAKmG,GAAcnH,EAAY6G,EAAaM,EAAYL,EAAe5uD,IAEjFgoD,EAAM95D,IAAU,QAAS+gE,EAC7B,CACO,SAASzC,GAAW74D,EAAIq0D,EAAO95D,EAAQ+F,GAC1C,IAOIg5C,EAPAt3C,EAAMhC,EAAG0T,MAAMnZ,GACfsc,EAAe7W,EAAGhK,kBAClBulE,EAAe,CAAC,EAChB74C,EAAS1gB,EAAI0gB,OACb84C,EAAsB,cAAX94C,EACX+4C,EAAqB,aAAX/4C,EACVg5C,EAAqB,aAAXh5C,EAEd,IAAI,QAAe1gB,GAAM,CACrB,IAAI25D,EAAe35D,EAAI45D,WACnBC,EAAgB75D,EAAI85D,YACpBC,OAAW,EACXC,EAAeh6D,EAAIsgB,MAUvB,IATI,QAAS05C,GACTD,EAAWC,EAENzD,EAAYyD,GACjBD,EAAWC,EAAah5B,IAEnBw1B,EAAawD,KAClBD,EAAWC,EAAavD,aAEP,oBAAVrsB,MAAuB,CAC9B,IAAI6vB,EAAS,qEACb,QAAON,EAAcM,IACrB,QAAOJ,EAAeI,EAC1B,MACK,GAAoB,MAAhBN,GAAyC,MAAjBE,EAAuB,CACpD,IAAIK,EAAmB,SAAUC,EAAOC,GACpC,GAAID,EAAO,CACP,IAAIE,EAAQF,EAAMG,IACd1lE,EAAQ+kE,GAAgBS,EAAIxlE,MAC5BC,EAASglE,GAAiBO,EAAIvlE,OAChB,YAAdslE,EAAM/H,MACFqH,GACA5kE,EAAS,EACTD,GAASigB,EAAajgB,OAEjB8kE,IACL9kE,EAAQ,EACRC,GAAUggB,EAAahgB,SAG/BslE,EAAM9H,MAAMz9D,MAAQA,EACpBulE,EAAM9H,MAAMx9D,OAASA,EACjBwlE,IACAA,EAAMxoD,aAAa,QAASjd,GAC5BylE,EAAMxoD,aAAa,SAAUhd,GAErC,CACJ,EACI0lE,GAAe,QAAoBR,EAAU,KAAM/7D,GAAI,SAAUo8D,GACjEZ,GAAYU,EAAiBM,EAAcJ,GAC3CF,EAAiB5iB,EAAO8iB,EAC5B,IACIG,GAAgBA,EAAa3lE,OAAS2lE,EAAa1lE,SACnD8kE,EAAeA,GAAgBY,EAAa3lE,MAC5CilE,EAAgBA,GAAiBU,EAAa1lE,OAEtD,CACAyiD,EAAQ6a,EAAY,QAAS,MAAO,CAChCyG,KAAMmB,EACNnlE,MAAO+kE,EACP9kE,OAAQglE,IAEZN,EAAa3kE,MAAQ+kE,EACrBJ,EAAa1kE,OAASglE,CAC1B,MACS75D,EAAIy6D,aACTnjB,GAAQ,QAAMt3C,EAAIy6D,YAClBlB,EAAa3kE,MAAQoL,EAAI06D,SACzBnB,EAAa1kE,OAASmL,EAAI26D,WAE9B,GAAKrjB,EAAL,CAGA,IAAIsjB,EACAC,EACArB,EACAoB,EAAeC,EAAgB,EAE1BpB,GACLoB,EAAgB,EAChBD,EAAerB,EAAa3kE,MAAQigB,EAAajgB,OAE5C8kE,GACLkB,EAAe,EACfC,EAAgBtB,EAAa1kE,OAASggB,EAAahgB,QAGnD0kE,EAAauB,aAAe,iBAEZ,MAAhBF,GAAyBtyD,MAAMsyD,KAC/BrB,EAAa3kE,MAAQgmE,GAEJ,MAAjBC,GAA0BvyD,MAAMuyD,KAChCtB,EAAa1kE,OAASgmE,GAE1B,IAAIE,GAAmB,QAAsB/6D,GAC7C+6D,IAAqBxB,EAAawB,iBAAmBA,GACrD,IAAIP,EAAerI,EAAY,UAAW,GAAIoH,EAAc,CAACjiB,IACzD0jB,EAAa1I,EAAckI,GAC3BxH,EAAe10D,EAAM00D,aACrBiI,EAAYjI,EAAagI,GACxBC,IACDA,EAAY38D,EAAMw0D,KAAO,KAAOx0D,EAAMo1D,aACtCV,EAAagI,GAAcC,EAC3B1B,EAAa7nE,GAAKupE,EAClBT,EAAel8D,EAAM60D,KAAK8H,GAAa9I,EAAY,UAAW8I,EAAW1B,EAAc,CAACjiB,KAE5F+a,EAAM95D,IAAU,QAAS0iE,EAnCzB,CAoCJ,CACO,SAAS3jE,GAAYqF,EAAU01D,EAAO/zD,GACzC,IAAI40D,EAAgB50D,EAAM40D,cAAeC,EAAO70D,EAAM60D,KAClD+H,EAAahI,EAAcv2D,EAASjL,IACxC,IAAKwpE,EAAY,CAEb,IAAIC,EAAgB,CAChBzpE,GAFJwpE,EAAa58D,EAAMw0D,KAAO,KAAOx0D,EAAMq1D,eAIvCT,EAAcv2D,EAASjL,IAAMwpE,EAC7B/H,EAAK+H,GAAc/I,EAAY,WAAY+I,EAAYC,EAAe,CAAClD,GAAat7D,EAAU2B,IAClG,CACA+zD,EAAM,cAAe,QAAS6I,EAClC,CC3cO,SAASE,GAAez1C,GAC3B,OAAOxM,SAASiiD,eAAez1C,EACnC,CAIO,SAASrI,GAAac,EAAYi9C,EAASC,GAC9Cl9C,EAAWd,aAAa+9C,EAASC,EACrC,CACO,SAASj9C,GAAY0lB,EAAMuT,GAC9BvT,EAAK1lB,YAAYi5B,EACrB,CACO,SAAS/9B,GAAYwqB,EAAMuT,GAC9BvT,EAAKxqB,YAAY+9B,EACrB,CACO,SAASl5B,GAAW2lB,GACvB,OAAOA,EAAK3lB,UAChB,CACO,SAASf,GAAY0mB,GACxB,OAAOA,EAAK1mB,WAChB,CAIO,SAAShmB,GAAe0sC,EAAMpe,GACjCoe,EAAK/pC,YAAc2rB,CACvB,CCvBA,IAAI41C,GAAY,GACZC,GAAQ,IACRC,GAAYtJ,EAAY,GAAI,IAChC,SAASuJ,GAAQ72D,GACb,YAAamiC,IAANniC,CACX,CACA,SAAS82D,GAAM92D,GACX,YAAamiC,IAANniC,CACX,CACA,SAAS+2D,GAAkB1kB,EAAU2kB,EAAUC,GAE3C,IADA,IAAI3rC,EAAM,CAAC,EACFr5B,EAAI+kE,EAAU/kE,GAAKglE,IAAUhlE,EAAG,CACrC,IAAI3F,EAAM+lD,EAASpgD,GAAG3F,SACV61C,IAAR71C,IAMAg/B,EAAIh/B,GAAO2F,EAEnB,CACA,OAAOq5B,CACX,CACA,SAAS4rC,GAAUC,EAAQC,GACvB,IAAIC,EAAYF,EAAO7qE,MAAQ8qE,EAAO9qE,IAEtC,OADgB6qE,EAAO5J,MAAQ6J,EAAO7J,KAClB8J,CACxB,CACA,SAASC,GAAUC,GACf,IAAItlE,EACAogD,EAAWklB,EAAMllB,SACjBkb,EAAMgK,EAAMhK,IAChB,GAAIuJ,GAAMvJ,GAAM,CACZ,IAAIkI,EAAO8B,EAAM9B,IAAMlhD,EAAcg5C,GAErC,GADAiK,GAAYZ,GAAWW,IACnB,QAAQllB,GACR,IAAKpgD,EAAI,EAAGA,EAAIogD,EAASt/C,SAAUd,EAAG,CAClC,IAAIkpD,EAAK9I,EAASpgD,GACR,MAANkpD,GACA,GAAgBsa,EAAK6B,GAAUnc,GAEvC,MAEK2b,GAAMS,EAAMz2C,SAAU,QAASy2C,EAAMz2C,OAC1C,GAAgB20C,EAAK,GAAmB8B,EAAMz2C,MAEtD,MAEIy2C,EAAM9B,IAAM,GAAmB8B,EAAMz2C,MAEzC,OAAOy2C,EAAM9B,GACjB,CACA,SAASgC,GAAUC,EAAWC,EAAQC,EAAQC,EAAUZ,GACpD,KAAOY,GAAYZ,IAAUY,EAAU,CACnC,IAAI1c,EAAKyc,EAAOC,GACN,MAAN1c,GACA,GAAiBuc,EAAWJ,GAAUnc,GAAKwc,EAEnD,CACJ,CACA,SAASG,GAAaJ,EAAWE,EAAQC,EAAUZ,GAC/C,KAAOY,GAAYZ,IAAUY,EAAU,CACnC,IAAI1c,EAAKyc,EAAOC,GAChB,GAAU,MAAN1c,EACA,GAAI2b,GAAM3b,EAAGoS,KAET,GADe,GAAepS,EAAGsa,KACPta,EAAGsa,UAG7B,GAAgBiC,EAAWvc,EAAGsa,IAG1C,CACJ,CACO,SAAS+B,GAAYO,EAAUR,GAClC,IAAIjrE,EACAmpE,EAAM8B,EAAM9B,IACZuC,EAAWD,GAAYA,EAASvK,OAAS,CAAC,EAC1CA,EAAQ+J,EAAM/J,OAAS,CAAC,EAC5B,GAAIwK,IAAaxK,EAAjB,CAGA,IAAKlhE,KAAOkhE,EAAO,CACf,IAAIyK,EAAMzK,EAAMlhE,GACN0rE,EAAS1rE,KACP2rE,KACI,IAARA,EACAxC,EAAIzoD,aAAa1gB,EAAK,KAET,IAAR2rE,EACLxC,EAAIyC,gBAAgB5rE,GAGhBA,EAAIw4C,WAAW,KAAO6xB,GACtBlB,EAAIzoD,aAAa1gB,EAAK2rE,GAET,gBAAR3rE,GAAiC,UAARA,EAC9BmpE,EAAI0C,eAAehL,EAAO7gE,EAAK2rE,GAE1B3rE,EAAIw4C,WAAW,KAAO4xB,GAC3BjB,EAAI0C,eAAe/K,EAAe9gE,EAAK2rE,GAElC3rE,EAAIw4C,WAAW,KAAO4xB,GAC3BjB,EAAI0C,eAAejL,EAAS5gE,EAAK2rE,GAGjCxC,EAAIzoD,aAAa1gB,EAAK2rE,GAItC,CACA,IAAK3rE,KAAO0rE,EACF1rE,KAAOkhE,GACTiI,EAAIyC,gBAAgB5rE,EAhC5B,CAmCJ,CAiFA,SAAS8rE,GAAWL,EAAUR,GAC1B,IAAI9B,EAAO8B,EAAM9B,IAAMsC,EAAStC,IAC5B4C,EAAQN,EAAS1lB,SACjB8I,EAAKoc,EAAMllB,SACX0lB,IAAaR,IAGjBC,GAAYO,EAAUR,GAClBV,GAAQU,EAAMz2C,MACVg2C,GAAMuB,IAAUvB,GAAM3b,GAClBkd,IAAUld,GA1F1B,SAAwBuc,EAAWW,EAAOC,GAatC,IAZA,IAQIC,EACAC,EACAC,EAVAC,EAAc,EACdC,EAAc,EACdC,EAAYP,EAAMtlE,OAAS,EAC3B8lE,EAAgBR,EAAM,GACtBS,EAAcT,EAAMO,GACpBG,EAAYT,EAAMvlE,OAAS,EAC3BimE,EAAgBV,EAAM,GACtBW,EAAcX,EAAMS,GAKjBL,GAAeE,GAAaD,GAAeI,GACzB,MAAjBF,EACAA,EAAgBR,IAAQK,GAEJ,MAAfI,EACLA,EAAcT,IAAQO,GAEA,MAAjBI,EACLA,EAAgBV,IAAQK,GAEJ,MAAfM,EACLA,EAAcX,IAAQS,GAEjB7B,GAAU2B,EAAeG,IAC9BZ,GAAWS,EAAeG,GAC1BH,EAAgBR,IAAQK,GACxBM,EAAgBV,IAAQK,IAEnBzB,GAAU4B,EAAaG,IAC5Bb,GAAWU,EAAaG,GACxBH,EAAcT,IAAQO,GACtBK,EAAcX,IAAQS,IAEjB7B,GAAU2B,EAAeI,IAC9Bb,GAAWS,EAAeI,GAC1B,GAAiBvB,EAAWmB,EAAcpD,IAAK,GAAgBqD,EAAYrD,MAC3EoD,EAAgBR,IAAQK,GACxBO,EAAcX,IAAQS,IAEjB7B,GAAU4B,EAAaE,IAC5BZ,GAAWU,EAAaE,GACxB,GAAiBtB,EAAWoB,EAAYrD,IAAKoD,EAAcpD,KAC3DqD,EAAcT,IAAQO,GACtBI,EAAgBV,IAAQK,KAGpB9B,GAAQ0B,KACRA,EAAcxB,GAAkBsB,EAAOK,EAAaE,IAGpD/B,GADJ2B,EAAWD,EAAYS,EAAc1sE,QAKjCmsE,EAAYJ,EAAMG,IACJjL,MAAQyL,EAAczL,IAJpC,GAAiBmK,EAAWJ,GAAU0B,GAAgBH,EAAcpD,MAQhE2C,GAAWK,EAAWO,GACtBX,EAAMG,QAAYr2B,EAClB,GAAiBu1B,EAAWe,EAAUhD,IAAKoD,EAAcpD,MAGjEuD,EAAgBV,IAAQK,KAG5BD,GAAeE,GAAaD,GAAeI,KACvCL,EAAcE,EAEdnB,GAAUC,EADuB,MAAxBY,EAAMS,EAAY,GAAa,KAAOT,EAAMS,EAAY,GAAGtD,IACvC6C,EAAOK,EAAaI,GAGjDjB,GAAaJ,EAAWW,EAAOK,EAAaE,GAGxD,CAYgBM,CAAezD,EAAK4C,EAAOld,GAG1B2b,GAAM3b,IACP2b,GAAMiB,EAASj3C,OACf,GAAmB20C,EAAK,IAE5BgC,GAAUhC,EAAK,KAAMta,EAAI,EAAGA,EAAGpoD,OAAS,IAEnC+jE,GAAMuB,GACXP,GAAarC,EAAK4C,EAAO,EAAGA,EAAMtlE,OAAS,GAEtC+jE,GAAMiB,EAASj3C,OACpB,GAAmB20C,EAAK,IAGvBsC,EAASj3C,OAASy2C,EAAMz2C,OACzBg2C,GAAMuB,IACNP,GAAarC,EAAK4C,EAAO,EAAGA,EAAMtlE,OAAS,GAE/C,GAAmB0iE,EAAK8B,EAAMz2C,OAEtC,gBCpOIq4C,GAAQ,EAoPZ,OAnPkB,WACd,SAASC,EAAWrmD,EAAMC,EAASnS,GAS/B,GARAjU,KAAKuN,KAAO,MACZvN,KAAK6L,aA4MF,WACC,CAGR,EA/MI7L,KAAKusB,YA2MF,WACC,CAGR,EA9MIvsB,KAAKomB,QAAUA,EACfpmB,KAAK6mB,MAAQ5S,GAAO,QAAO,CAAC,EAAGA,GAC/BjU,KAAKmmB,KAAOA,EACZnmB,KAAK8pC,IAAM,KAAOyiC,KAClBvsE,KAAKysE,UAAYtK,EAAeluD,EAAK9Q,MAAO8Q,EAAK7Q,QAC7C+iB,IAASlS,EAAKy4D,IAAK,CACnB,IAAIC,EAAW3sE,KAAK4sE,UAAYllD,SAASC,cAAc,OACvDglD,EAAS1sD,MAAM2H,QAAU,oCACzB,IAAIilD,EAAS7sE,KAAK8sE,QAAU9sE,KAAKysE,UAAU5D,IAAMlhD,EAAc,OAC/DijD,GAAY,KAAM5qE,KAAKysE,WACvBE,EAAS7kD,YAAY+kD,GACrB1mD,EAAK2B,YAAY6kD,EACrB,CACA3sE,KAAKwkB,OAAOvQ,EAAK9Q,MAAO8Q,EAAK7Q,OACjC,CAyLA,OAxLAopE,EAAWlsE,UAAUynB,QAAU,WAC3B,OAAO/nB,KAAKuN,IAChB,EACAi/D,EAAWlsE,UAAU2nB,gBAAkB,WACnC,OAAOjoB,KAAK4sE,SAChB,EACAJ,EAAWlsE,UAAU4nB,sBAAwB,WACzC,IAAIC,EAAenoB,KAAKioB,kBACxB,GAAIE,EACA,MAAO,CACHC,WAAYD,EAAaC,YAAc,EACvCC,UAAWF,EAAaE,WAAa,EAGjD,EACAmkD,EAAWlsE,UAAUysE,UAAY,WAC7B,OAAO/sE,KAAK8sE,OAChB,EACAN,EAAWlsE,UAAUwL,QAAU,WAC3B,GAAI9L,KAAKmmB,KAAM,CACX,IAAIwkD,EAAQ3qE,KAAKgtE,cAAc,CAC3BrG,YAAY,IAEhBgE,EAAM/J,MAAM3gD,MAAQ,kDDyLjB,SAAekrD,EAAUR,GACpC,GAAIL,GAAUa,EAAUR,GACpBa,GAAWL,EAAUR,OAEpB,CACD,IAAI9B,EAAMsC,EAAStC,IACfoE,EAAW,GAAepE,GAC9B6B,GAAUC,GACO,OAAbsC,IACA,GAAiBA,EAAUtC,EAAM9B,IAAK,GAAgBA,IACtDqC,GAAa+B,EAAU,CAAC9B,GAAW,EAAG,GAE9C,CAEJ,CCtMY+B,CAAMltE,KAAKysE,UAAW9B,GACtB3qE,KAAKysE,UAAY9B,CACrB,CACJ,EACA6B,EAAWlsE,UAAU6sE,iBAAmB,SAAU5gE,GAC9C,OAAOykB,GAAMzkB,EAAI60D,EAAiBphE,KAAK8pC,KAC3C,EACA0iC,EAAWlsE,UAAU0sE,cAAgB,SAAU/4D,GAC3CA,EAAOA,GAAQ,CAAC,EAChB,IAAIsU,EAAOvoB,KAAKomB,QAAQoC,gBAAe,GACnCrlB,EAAQnD,KAAKonB,OACbhkB,EAASpD,KAAKqnB,QACdxa,EAAQu0D,EAAiBphE,KAAK8pC,KAClCj9B,EAAMZ,UAAYgI,EAAKhI,UACvBY,EAAM85D,WAAa1yD,EAAK0yD,WACxB95D,EAAM+4D,SAAW3xD,EAAK2xD,SACtB,IAAIngB,EAAW,GACX2nB,EAAUptE,KAAKqtE,SAwJ3B,SAA+BlqE,EAAOC,EAAQ4B,EAAiB6H,GAC3D,IAAIugE,EACJ,GAAIpoE,GAAuC,SAApBA,EAQnB,GAPAooE,EAAU1M,EAAY,OAAQ,KAAM,CAChCv9D,MAAOA,EACPC,OAAQA,EACRV,EAAG,IACHC,EAAG,IACH1C,GAAI,OAEJ,QAAW+E,GACXmgE,GAAY,CAAEzgE,KAAMM,GAAmBooE,EAAQxM,MAAO,OAAQ/zD,QAE7D,IAAI,OAAU7H,GACfogE,GAAW,CACPnlD,MAAO,CACHvb,KAAMM,GAEV+G,MAAO,KACPxJ,gBAAiB,WAAc,MAAO,CAAGY,MAAOA,EAAOC,OAAQA,EAAW,GAC3EgqE,EAAQxM,MAAO,OAAQ/zD,OAEzB,CACD,IAAI0c,GAAK,QAAevkB,GAAkBuR,EAAQgT,EAAGhT,MAAOiY,EAAUjF,EAAGiF,QACzE4+C,EAAQxM,MAAMl8D,KAAO6R,EACrBiY,EAAU,IAAM4+C,EAAQxM,MAAM,gBAAkBpyC,EACpD,CAEJ,OAAO4+C,CACX,CArLsCE,CAAsBnqE,EAAOC,EAAQpD,KAAK8oB,iBAAkBjc,GAC1FugE,GAAW3nB,EAAS/8C,KAAK0kE,GACzB,IAAIG,EAAat5D,EAAK2xD,SACuC,KAAtD5lE,KAAKwtE,WAAa9M,EAAY,IAAK,OAAQ,CAAC,EAAG,IACtD1gE,KAAK2oB,WAAWJ,EAAM1b,EAAO0gE,EAAYA,EAAU9nB,SAAWA,GAC9D8nB,GAAa9nB,EAAS/8C,KAAK6kE,GAC3B,IAAI7L,GAAO,SAAI,QAAK70D,EAAM60D,OAAO,SAAUzhE,GAAM,OAAO4M,EAAM60D,KAAKzhE,EAAK,IAIxE,GAHIyhE,EAAKv7D,QACLs/C,EAAS/8C,KAAKg4D,EAAY,OAAQ,OAAQ,CAAC,EAAGgB,IAE9CztD,EAAKhI,UAAW,CAChB,IAAIwhE,EL5BT,SAAsBC,EAAeC,EAAgB15D,GAExD,IAAI6sD,GADJ7sD,EAAOA,GAAQ,CAAC,GACH8sD,QAAU,KAAO,GAC1B6M,EAAe,KAAO9M,EACtB+M,EAAa/M,EAAI,IACjBgN,GAAY,SAAI,QAAKJ,IAAgB,SAAUjK,GAC/C,OAAOA,EAAYmK,GAAe,SAAI,QAAKF,EAAcjK,KAAa,SAAUa,GAC5E,OAAOA,EAAW,IAAMoJ,EAAcjK,GAAWa,GAAY,GACjE,IAAGl7D,KAAK03D,GAAK+M,CACjB,IAAGzkE,KAAK03D,GACJiN,GAAa,SAAI,QAAKJ,IAAiB,SAAU7K,GACjD,MAAO,cAAgBA,EAAgB8K,GAAe,SAAI,QAAKD,EAAe7K,KAAiB,SAAU5zD,GACrG,OAAOA,EAAU0+D,GAAe,SAAI,QAAKD,EAAe7K,GAAe5zD,KAAW,SAAUo1D,GACxF,IAAI/1D,EAAMo/D,EAAe7K,GAAe5zD,GAASo1D,GAIjD,MAHiB,MAAbA,IACA/1D,EAAM,SAAYA,EAAM,MAErB+1D,EAAW,IAAM/1D,EAAM,GAClC,IAAGnF,KAAK03D,GAAK+M,CACjB,IAAGzkE,KAAK03D,GAAK+M,CACjB,IAAGzkE,KAAK03D,GACR,OAAKgN,GAAcC,EAGZ,CAAC,YAAaD,EAAWC,EAAY,OAAO3kE,KAAK03D,GAF7C,EAGf,CKGkCkN,CAAanhE,EAAM80D,SAAU90D,EAAM+0D,SAAU,CAAEb,SAAS,IAC9E,GAAI0M,EAAiB,CACjB,IAAIQ,EAAYvN,EAAY,QAAS,MAAO,CAAC,EAAG,GAAI+M,GACpDhoB,EAAS/8C,KAAKulE,EAClB,CACJ,CACA,OAAO9L,EAAeh/D,EAAOC,EAAQqiD,EAAUxxC,EAAKmuD,WACxD,EACAoK,EAAWlsE,UAAU4tE,eAAiB,SAAUj6D,GAE5C,OADAA,EAAOA,GAAQ,CAAC,EACT4sD,EAAc7gE,KAAKgtE,cAAc,CACpC/gE,WAAW,QAAUgI,EAAKk6D,cAAc,GACxCxH,YAAY,EACZf,UAAU,EACVxD,YAAY,QAAUnuD,EAAKmuD,YAAY,KACvC,CAAErB,SAAS,GACnB,EACAyL,EAAWlsE,UAAUgsB,mBAAqB,SAAUtnB,GAChDhF,KAAK8oB,iBAAmB9jB,CAC5B,EACAwnE,EAAWlsE,UAAU8tE,WAAa,WAC9B,OAAOpuE,KAAKwtE,YAAcxtE,KAAKwtE,WAAW3E,GAC9C,EACA2D,EAAWlsE,UAAUqoB,WAAa,SAAUJ,EAAM1b,EAAO+I,GAOrD,IANA,IAGIy4D,EACAl4C,EAJAm4C,EAAU/lD,EAAKpiB,OACfooE,EAAuB,GACvBC,EAA4B,EAG5BC,EAAmB,EACdppE,EAAI,EAAGA,EAAIipE,EAASjpE,IAAK,CAC9B,IAAIiwB,EAAc/M,EAAKljB,GACvB,IAAKiwB,EAAY8tB,UAAW,CACxB,IAAInyB,EAAYqE,EAAYpE,YACxBpoB,EAAMmoB,GAAaA,EAAU9qB,QAAU,EACvCuoE,EAAUv4C,GAAiBA,EAAchwB,QAAU,EACnDwoE,OAAM,EACV,IAAKA,EAAMt8D,KAAKmE,IAAI1N,EAAM,EAAG4lE,EAAU,GAAIC,GAAO,KAC1C19C,IAAakF,GACVlF,EAAU09C,KAASx4C,EAAcw4C,IAFSA,KAMrD,IAAK,IAAIziD,EAAMwiD,EAAU,EAAGxiD,EAAMyiD,EAAKziD,IAEnCmiD,EAAuBE,IADvBC,EACwE,GAE5E,IAAK,IAAII,EAAMD,EAAM,EAAGC,EAAM9lE,EAAK8lE,IAAO,CACtC,IAAIC,EAAa,CAAC,EAClBhpE,GAAYorB,EAAU29C,GAAMC,EAAYhiE,GACxC,IAAIg4B,EAAI67B,EAAY,IAAK,UAAY+N,IAAoBI,EAAY,KACpER,EAAuBA,EAAqB5oB,SAAW7vC,GAAKlN,KAAKm8B,GAClE0pC,EAAqBC,KAA+B3pC,EACpDwpC,EAAuBxpC,CAC3B,CACA1O,EAAgBlF,EAChB,IAAIla,EAAMia,GAAMsE,EAAazoB,GACzBkK,IACCs3D,EAAuBA,EAAqB5oB,SAAW7vC,GAAKlN,KAAKqO,EAE1E,CACJ,CACJ,EACAy1D,EAAWlsE,UAAUkkB,OAAS,SAAUrhB,EAAOC,GAC3C,IAAI6Q,EAAOjU,KAAK6mB,MACZV,EAAOnmB,KAAKmmB,KACZwmD,EAAW3sE,KAAK4sE,UASpB,GARS,MAATzpE,IAAkB8Q,EAAK9Q,MAAQA,GACrB,MAAVC,IAAmB6Q,EAAK7Q,OAASA,GAC7B+iB,GAAQwmD,IACRA,EAAS1sD,MAAM4M,QAAU,OACzB1pB,GAAQ,SAAQgjB,EAAM,EAAGlS,GACzB7Q,GAAS,SAAQ+iB,EAAM,EAAGlS,GAC1B04D,EAAS1sD,MAAM4M,QAAU,IAEzB7sB,KAAKonB,SAAWjkB,GAASnD,KAAKqnB,UAAYjkB,EAAQ,CAGlD,GAFApD,KAAKonB,OAASjkB,EACdnD,KAAKqnB,QAAUjkB,EACXupE,EAAU,CACV,IAAImC,EAAgBnC,EAAS1sD,MAC7B6uD,EAAc3rE,MAAQA,EAAQ,KAC9B2rE,EAAc1rE,OAASA,EAAS,IACpC,CACA,IAAK,OAAUpD,KAAK8oB,kBAahB9oB,KAAK8L,cAb8B,CACnC,IAAI+gE,EAAS7sE,KAAK8sE,QACdD,IACAA,EAAOzsD,aAAa,QAASjd,GAC7B0pE,EAAOzsD,aAAa,SAAUhd,IAElC,IAAI2rE,EAAO/uE,KAAKqtE,UAAYrtE,KAAKqtE,SAASxE,IACtCkG,IACAA,EAAK3uD,aAAa,QAASjd,GAC3B4rE,EAAK3uD,aAAa,SAAUhd,GAEpC,CAIJ,CACJ,EACAopE,EAAWlsE,UAAUwf,SAAW,WAC5B,OAAO9f,KAAKonB,MAChB,EACAolD,EAAWlsE,UAAUyf,UAAY,WAC7B,OAAO/f,KAAKqnB,OAChB,EACAmlD,EAAWlsE,UAAU0sB,QAAU,WACvBhtB,KAAKmmB,OACLnmB,KAAKmmB,KAAKa,UAAY,IAE1BhnB,KAAK8sE,QACD9sE,KAAK4sE,UACD5sE,KAAKomB,QACDpmB,KAAKysE,UACDzsE,KAAKqtE,SACDrtE,KAAKwtE,WAAa,IAC1C,EACAhB,EAAWlsE,UAAUmkB,MAAQ,WACrBzkB,KAAK8sE,UACL9sE,KAAK8sE,QAAQ9lD,UAAY,MAE7BhnB,KAAKysE,UAAY,IACrB,EACAD,EAAWlsE,UAAU0kE,UAAY,SAAUgK,GACvC,IAAIl9B,EAAM9xC,KAAKkuE,iBACXe,EAAS,sBACb,OAAID,GACAl9B,GAAM,QAAaA,KACLm9B,EAAS,UAAYn9B,EAEhCm9B,EAAS,iBAAmBC,mBAAmBp9B,EAC1D,EACO06B,CACX,CA7MiB,+dCJb7M,EAAYttD,KAAKovB,MACd,SAAS0tC,EAAe54D,GAC3B,IAAIiY,EACJ,GAAKjY,GAAmB,gBAAVA,GAGT,GAAqB,iBAAVA,GAAsBA,EAAM5S,QAAQ,SAAW,EAAG,CAC9D,IAAImkC,GAAM,QAAMvxB,GACZuxB,IACAvxB,EAAQ,OAASuxB,EAAI,GAAK,IAAMA,EAAI,GAAK,IAAMA,EAAI,GAAK,IACxDtZ,EAAUsZ,EAAI,GAEtB,OARIvxB,EAAQ,OASZ,MAAO,CACHA,MAAOA,EACPiY,QAAoB,MAAXA,EAAkB,EAAIA,EAEvC,CACA,IAAIuJ,EAAU,KACP,SAASgU,EAAajrC,GACzB,OAAOA,EAAYi3B,GAAWj3B,GAAai3B,CAC/C,CACO,SAASq3C,EAAOtuE,GACnB,OAAO6+D,EAAsB,IAAZ7+D,GAAmB,GACxC,CACO,SAASuuE,EAAOvuE,GACnB,OAAO6+D,EAAsB,IAAZ7+D,GAAmB,GACxC,CAIO,SAASwuE,EAAazuE,GACzB,MAAO,UACDuuE,EAAOvuE,EAAE,IAAM,IACfuuE,EAAOvuE,EAAE,IAAM,IACfuuE,EAAOvuE,EAAE,IAAM,IACfuuE,EAAOvuE,EAAE,IAAM,IACfwuE,EAAOxuE,EAAE,IAAM,IACfwuE,EAAOxuE,EAAE,IACT,GACV,CACO,IAAI0uE,EAAuB,CAC9BrvD,KAAM,QACNqqB,MAAO,MACPyrB,OAAQ,SACRE,OAAQ,UAEL,SAASx9B,EAAY/1B,EAAGysD,EAAYh7B,GAOvC,MANqB,QAAjBA,EACAzxB,GAAKysD,EAAa,EAEI,WAAjBh7B,IACLzxB,GAAKysD,EAAa,GAEfzsD,CACX,CACO,SAASyvD,EAAUnyC,GACtB,OAAOA,IACCA,EAAMyiC,YAAcziC,EAAM0iC,eAAiB1iC,EAAM2iC,cAC7D,CACO,SAAS4sB,EAAal6C,GACzB,IAAIrV,EAAQqV,EAAYrV,MACpBslD,EAAcjwC,EAAYjC,iBAC9B,MAAO,CACHpT,EAAM+P,aACL/P,EAAMyiC,YAAc,GAAG+sB,QAAQ,IAC/BxvD,EAAM0iC,eAAiB,GAAG8sB,QAAQ,IAClCxvD,EAAM2iC,eAAiB,GAAG6sB,QAAQ,GACnClK,EAAY,GACZA,EAAY,IACdn8D,KAAK,IACX,CAWO,SAASsmE,EAAenhE,GAC3B,OAAOA,KAAUA,EAAIsgB,KACzB,CAIO,SAAS8gD,EAAUphE,GACtB,OAAOmhE,EAAenhE,IAJnB,SAAsBA,GACzB,OAAOA,KAAUA,EAAIy6D,UACzB,CAEkC4G,CAAarhE,EAC/C,CACO,SAASshE,EAAiBthE,GAC7B,MAAoB,WAAbA,EAAIhB,IACf,CACO,SAASuiE,EAAiBvhE,GAC7B,MAAoB,WAAbA,EAAIhB,IACf,CACO,SAASkM,EAAWlL,GACvB,OAAOA,IAAqB,WAAbA,EAAIhB,MACC,WAAbgB,EAAIhB,KACf,CACO,SAASwiE,EAAS9vE,GACrB,MAAO,QAAUA,EAAK,GAC1B,CACO,SAAS+vE,EAAiBzjE,GAC7B,IAAI8V,EAAQ9V,EAAG8mB,iBACX4kB,EAAO5lC,KAAKmE,IAAI6L,EAAM,GAAIA,EAAM,IACpC,OAAOhQ,KAAKmE,IAAInE,KAAK4xC,KAAK5xC,KAAKi8B,IAAI2J,GAAQ5lC,KAAKi8B,IAAI,KAAM,EAC9D,CACO,SAAS2hC,EAAsBnvE,GAClC,IAAI4B,EAAI5B,EAAU4B,GAAK,EACnBC,EAAI7B,EAAU6B,GAAK,EACnBK,GAAYlC,EAAUkC,UAAY,GAAK,KACvCsiB,GAAS,QAAUxkB,EAAUwkB,OAAQ,GACrCC,GAAS,QAAUzkB,EAAUykB,OAAQ,GACrCyiB,EAAQlnC,EAAUknC,OAAS,EAC3BC,EAAQnnC,EAAUmnC,OAAS,EAC3BqQ,EAAM,GAaV,OAZI51C,GAAKC,IACL21C,EAAI5vC,KAAK,aAAehG,EAAI,MAAQC,EAAI,OAExCK,GACAs1C,EAAI5vC,KAAK,UAAY1F,EAAW,KAErB,IAAXsiB,GAA2B,IAAXC,GAChB+yB,EAAI5vC,KAAK,SAAW4c,EAAS,IAAMC,EAAS,MAE5CyiB,GAASC,IACTqQ,EAAI5vC,KAAK,QAAUi3D,EAAU33B,EAAQ,MAAoB,QAAU23B,EAAU13B,EAAQ,MAAoB,QAEtGqQ,EAAIlvC,KAAK,IACpB,CACO,IAAI8mE,EACH,IAAIlxD,kBAAmB,QAAWC,OAAOkxD,MAClC,SAAUr+B,GACb,OAAO7yB,OAAOkxD,KAAKC,SAASlB,mBAAmBp9B,IACnD,EAEkB,oBAAXu+B,OACA,SAAUv+B,GACb,OAAOu+B,OAAOrzB,KAAKlL,GAAKgK,SAAS,SACrC,EAEG,SAAUhK,GAIb,OAAO,IACX,iPCtJAw+B,EAAiB,CACjB,YAAe,CAAC,EAAG,EAAG,EAAG,GAAI,UAAa,CAAC,IAAK,IAAK,IAAK,GAC1D,aAAgB,CAAC,IAAK,IAAK,IAAK,GAAI,KAAQ,CAAC,EAAG,IAAK,IAAK,GAC1D,WAAc,CAAC,IAAK,IAAK,IAAK,GAAI,MAAS,CAAC,IAAK,IAAK,IAAK,GAC3D,MAAS,CAAC,IAAK,IAAK,IAAK,GAAI,OAAU,CAAC,IAAK,IAAK,IAAK,GACvD,MAAS,CAAC,EAAG,EAAG,EAAG,GAAI,eAAkB,CAAC,IAAK,IAAK,IAAK,GACzD,KAAQ,CAAC,EAAG,EAAG,IAAK,GAAI,WAAc,CAAC,IAAK,GAAI,IAAK,GACrD,MAAS,CAAC,IAAK,GAAI,GAAI,GAAI,UAAa,CAAC,IAAK,IAAK,IAAK,GACxD,UAAa,CAAC,GAAI,IAAK,IAAK,GAAI,WAAc,CAAC,IAAK,IAAK,EAAG,GAC5D,UAAa,CAAC,IAAK,IAAK,GAAI,GAAI,MAAS,CAAC,IAAK,IAAK,GAAI,GACxD,eAAkB,CAAC,IAAK,IAAK,IAAK,GAAI,SAAY,CAAC,IAAK,IAAK,IAAK,GAClE,QAAW,CAAC,IAAK,GAAI,GAAI,GAAI,KAAQ,CAAC,EAAG,IAAK,IAAK,GACnD,SAAY,CAAC,EAAG,EAAG,IAAK,GAAI,SAAY,CAAC,EAAG,IAAK,IAAK,GACtD,cAAiB,CAAC,IAAK,IAAK,GAAI,GAAI,SAAY,CAAC,IAAK,IAAK,IAAK,GAChE,UAAa,CAAC,EAAG,IAAK,EAAG,GAAI,SAAY,CAAC,IAAK,IAAK,IAAK,GACzD,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,YAAe,CAAC,IAAK,EAAG,IAAK,GAC9D,eAAkB,CAAC,GAAI,IAAK,GAAI,GAAI,WAAc,CAAC,IAAK,IAAK,EAAG,GAChE,WAAc,CAAC,IAAK,GAAI,IAAK,GAAI,QAAW,CAAC,IAAK,EAAG,EAAG,GACxD,WAAc,CAAC,IAAK,IAAK,IAAK,GAAI,aAAgB,CAAC,IAAK,IAAK,IAAK,GAClE,cAAiB,CAAC,GAAI,GAAI,IAAK,GAAI,cAAiB,CAAC,GAAI,GAAI,GAAI,GACjE,cAAiB,CAAC,GAAI,GAAI,GAAI,GAAI,cAAiB,CAAC,EAAG,IAAK,IAAK,GACjE,WAAc,CAAC,IAAK,EAAG,IAAK,GAAI,SAAY,CAAC,IAAK,GAAI,IAAK,GAC3D,YAAe,CAAC,EAAG,IAAK,IAAK,GAAI,QAAW,CAAC,IAAK,IAAK,IAAK,GAC5D,QAAW,CAAC,IAAK,IAAK,IAAK,GAAI,WAAc,CAAC,GAAI,IAAK,IAAK,GAC5D,UAAa,CAAC,IAAK,GAAI,GAAI,GAAI,YAAe,CAAC,IAAK,IAAK,IAAK,GAC9D,YAAe,CAAC,GAAI,IAAK,GAAI,GAAI,QAAW,CAAC,IAAK,EAAG,IAAK,GAC1D,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,WAAc,CAAC,IAAK,IAAK,IAAK,GAC/D,KAAQ,CAAC,IAAK,IAAK,EAAG,GAAI,UAAa,CAAC,IAAK,IAAK,GAAI,GACtD,KAAQ,CAAC,IAAK,IAAK,IAAK,GAAI,MAAS,CAAC,EAAG,IAAK,EAAG,GACjD,YAAe,CAAC,IAAK,IAAK,GAAI,GAAI,KAAQ,CAAC,IAAK,IAAK,IAAK,GAC1D,SAAY,CAAC,IAAK,IAAK,IAAK,GAAI,QAAW,CAAC,IAAK,IAAK,IAAK,GAC3D,UAAa,CAAC,IAAK,GAAI,GAAI,GAAI,OAAU,CAAC,GAAI,EAAG,IAAK,GACtD,MAAS,CAAC,IAAK,IAAK,IAAK,GAAI,MAAS,CAAC,IAAK,IAAK,IAAK,GACtD,SAAY,CAAC,IAAK,IAAK,IAAK,GAAI,cAAiB,CAAC,IAAK,IAAK,IAAK,GACjE,UAAa,CAAC,IAAK,IAAK,EAAG,GAAI,aAAgB,CAAC,IAAK,IAAK,IAAK,GAC/D,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,WAAc,CAAC,IAAK,IAAK,IAAK,GAC/D,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,qBAAwB,CAAC,IAAK,IAAK,IAAK,GACzE,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,WAAc,CAAC,IAAK,IAAK,IAAK,GAC/D,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,UAAa,CAAC,IAAK,IAAK,IAAK,GAC9D,YAAe,CAAC,IAAK,IAAK,IAAK,GAAI,cAAiB,CAAC,GAAI,IAAK,IAAK,GACnE,aAAgB,CAAC,IAAK,IAAK,IAAK,GAAI,eAAkB,CAAC,IAAK,IAAK,IAAK,GACtE,eAAkB,CAAC,IAAK,IAAK,IAAK,GAAI,eAAkB,CAAC,IAAK,IAAK,IAAK,GACxE,YAAe,CAAC,IAAK,IAAK,IAAK,GAAI,KAAQ,CAAC,EAAG,IAAK,EAAG,GACvD,UAAa,CAAC,GAAI,IAAK,GAAI,GAAI,MAAS,CAAC,IAAK,IAAK,IAAK,GACxD,QAAW,CAAC,IAAK,EAAG,IAAK,GAAI,OAAU,CAAC,IAAK,EAAG,EAAG,GACnD,iBAAoB,CAAC,IAAK,IAAK,IAAK,GAAI,WAAc,CAAC,EAAG,EAAG,IAAK,GAClE,aAAgB,CAAC,IAAK,GAAI,IAAK,GAAI,aAAgB,CAAC,IAAK,IAAK,IAAK,GACnE,eAAkB,CAAC,GAAI,IAAK,IAAK,GAAI,gBAAmB,CAAC,IAAK,IAAK,IAAK,GACxE,kBAAqB,CAAC,EAAG,IAAK,IAAK,GAAI,gBAAmB,CAAC,GAAI,IAAK,IAAK,GACzE,gBAAmB,CAAC,IAAK,GAAI,IAAK,GAAI,aAAgB,CAAC,GAAI,GAAI,IAAK,GACpE,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,UAAa,CAAC,IAAK,IAAK,IAAK,GAC9D,SAAY,CAAC,IAAK,IAAK,IAAK,GAAI,YAAe,CAAC,IAAK,IAAK,IAAK,GAC/D,KAAQ,CAAC,EAAG,EAAG,IAAK,GAAI,QAAW,CAAC,IAAK,IAAK,IAAK,GACnD,MAAS,CAAC,IAAK,IAAK,EAAG,GAAI,UAAa,CAAC,IAAK,IAAK,GAAI,GACvD,OAAU,CAAC,IAAK,IAAK,EAAG,GAAI,UAAa,CAAC,IAAK,GAAI,EAAG,GACtD,OAAU,CAAC,IAAK,IAAK,IAAK,GAAI,cAAiB,CAAC,IAAK,IAAK,IAAK,GAC/D,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,cAAiB,CAAC,IAAK,IAAK,IAAK,GAClE,cAAiB,CAAC,IAAK,IAAK,IAAK,GAAI,WAAc,CAAC,IAAK,IAAK,IAAK,GACnE,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,KAAQ,CAAC,IAAK,IAAK,GAAI,GACxD,KAAQ,CAAC,IAAK,IAAK,IAAK,GAAI,KAAQ,CAAC,IAAK,IAAK,IAAK,GACpD,WAAc,CAAC,IAAK,IAAK,IAAK,GAAI,OAAU,CAAC,IAAK,EAAG,IAAK,GAC1D,IAAO,CAAC,IAAK,EAAG,EAAG,GAAI,UAAa,CAAC,IAAK,IAAK,IAAK,GACpD,UAAa,CAAC,GAAI,IAAK,IAAK,GAAI,YAAe,CAAC,IAAK,GAAI,GAAI,GAC7D,OAAU,CAAC,IAAK,IAAK,IAAK,GAAI,WAAc,CAAC,IAAK,IAAK,GAAI,GAC3D,SAAY,CAAC,GAAI,IAAK,GAAI,GAAI,SAAY,CAAC,IAAK,IAAK,IAAK,GAC1D,OAAU,CAAC,IAAK,GAAI,GAAI,GAAI,OAAU,CAAC,IAAK,IAAK,IAAK,GACtD,QAAW,CAAC,IAAK,IAAK,IAAK,GAAI,UAAa,CAAC,IAAK,GAAI,IAAK,GAC3D,UAAa,CAAC,IAAK,IAAK,IAAK,GAAI,UAAa,CAAC,IAAK,IAAK,IAAK,GAC9D,KAAQ,CAAC,IAAK,IAAK,IAAK,GAAI,YAAe,CAAC,EAAG,IAAK,IAAK,GACzD,UAAa,CAAC,GAAI,IAAK,IAAK,GAAI,IAAO,CAAC,IAAK,IAAK,IAAK,GACvD,KAAQ,CAAC,EAAG,IAAK,IAAK,GAAI,QAAW,CAAC,IAAK,IAAK,IAAK,GACrD,OAAU,CAAC,IAAK,GAAI,GAAI,GAAI,UAAa,CAAC,GAAI,IAAK,IAAK,GACxD,OAAU,CAAC,IAAK,IAAK,IAAK,GAAI,MAAS,CAAC,IAAK,IAAK,IAAK,GACvD,MAAS,CAAC,IAAK,IAAK,IAAK,GAAI,WAAc,CAAC,IAAK,IAAK,IAAK,GAC3D,OAAU,CAAC,IAAK,IAAK,EAAG,GAAI,YAAe,CAAC,IAAK,IAAK,GAAI,IAE9D,SAASC,EAAalrE,GAElB,OADAA,EAAIgN,KAAKovB,MAAMp8B,IACJ,EAAI,EAAIA,EAAI,IAAM,IAAMA,CACvC,CAKA,SAASmrE,EAAc5rC,GACnB,OAAOA,EAAI,EAAI,EAAIA,EAAI,EAAI,EAAIA,CACnC,CACA,SAAS6rC,EAAYliE,GACjB,IAAIujC,EAAMvjC,EACV,OAAIujC,EAAI3rC,QAAyC,MAA/B2rC,EAAIid,OAAOjd,EAAI3rC,OAAS,GAC/BoqE,EAAa35C,WAAWkb,GAAO,IAAM,KAEzCy+B,EAAal6C,SAASyb,EAAK,IACtC,CACA,SAAS4+B,EAAcniE,GACnB,IAAIujC,EAAMvjC,EACV,OAAIujC,EAAI3rC,QAAyC,MAA/B2rC,EAAIid,OAAOjd,EAAI3rC,OAAS,GAC/BqqE,EAAc55C,WAAWkb,GAAO,KAEpC0+B,EAAc55C,WAAWkb,GACpC,CACA,SAAS6+B,EAAY/+C,EAAIqkB,EAAI7Z,GAOzB,OANIA,EAAI,EACJA,GAAK,EAEAA,EAAI,IACTA,GAAK,GAED,EAAJA,EAAQ,EACDxK,GAAMqkB,EAAKrkB,GAAMwK,EAAI,EAExB,EAAJA,EAAQ,EACD6Z,EAEH,EAAJ7Z,EAAQ,EACDxK,GAAMqkB,EAAKrkB,IAAO,EAAI,EAAIwK,GAAK,EAEnCxK,CACX,CACA,SAASg/C,EAAWv9D,EAAG+F,EAAG9F,GACtB,OAAOD,GAAK+F,EAAI/F,GAAKC,CACzB,CACA,SAASu9D,EAAQj7D,EAAKoF,EAAG6pB,EAAGzrB,EAAG/F,GAK3B,OAJAuC,EAAI,GAAKoF,EACTpF,EAAI,GAAKivB,EACTjvB,EAAI,GAAKwD,EACTxD,EAAI,GAAKvC,EACFuC,CACX,CACA,SAASk7D,EAASl7D,EAAKvC,GAKnB,OAJAuC,EAAI,GAAKvC,EAAE,GACXuC,EAAI,GAAKvC,EAAE,GACXuC,EAAI,GAAKvC,EAAE,GACXuC,EAAI,GAAKvC,EAAE,GACJuC,CACX,CACA,IAAIm7D,EAAa,IAAI,KAAI,IACrBC,EAAiB,KACrB,SAASC,EAAWC,EAAUC,GACtBH,GACAF,EAASE,EAAgBG,GAE7BH,EAAiBD,EAAWz4C,IAAI44C,EAAUF,GAAmBG,EAAQ9nE,QACzE,CACO,SAAS+nE,EAAMF,EAAUC,GAC5B,GAAKD,EAAL,CAGAC,EAAUA,GAAW,GACrB,IAAIE,EAASN,EAAW1iE,IAAI6iE,GAC5B,GAAIG,EACA,OAAOP,EAASK,EAASE,GAG7B,IAAIv/B,GADJo/B,GAAsB,IACHr/B,QAAQ,KAAM,IAAIiuB,cACrC,GAAIhuB,KAAOw+B,EAGP,OAFAQ,EAASK,EAASb,EAAex+B,IACjCm/B,EAAWC,EAAUC,GACdA,EAEX,IAaYG,EAbRC,EAASz/B,EAAI3rC,OACjB,GAAsB,MAAlB2rC,EAAIid,OAAO,GACX,OAAe,IAAXwiB,GAA2B,IAAXA,GACZD,EAAKj7C,SAASyb,EAAIzoC,MAAM,EAAG,GAAI,MACvB,GAAKioE,GAAM,MAIvBT,EAAQM,GAAgB,KAALG,IAAe,GAAY,KAALA,IAAe,EAAU,IAALA,GAAoB,IAALA,IAAc,EAAU,GAALA,GAAmB,GAALA,IAAa,EAAe,IAAXC,EAAel7C,SAASyb,EAAIzoC,MAAM,GAAI,IAAM,GAAM,GAChL4nE,EAAWC,EAAUC,GACdA,QALHN,EAAQM,EAAS,EAAG,EAAG,EAAG,GAOd,IAAXI,GAA2B,IAAXA,GACjBD,EAAKj7C,SAASyb,EAAIzoC,MAAM,EAAG,GAAI,MACvB,GAAKioE,GAAM,UAIvBT,EAAQM,GAAe,SAALG,IAAkB,IAAU,MAALA,IAAgB,EAAQ,IAALA,EAAsB,IAAXC,EAAel7C,SAASyb,EAAIzoC,MAAM,GAAI,IAAM,IAAO,GAC1H4nE,EAAWC,EAAUC,GACdA,QALHN,EAAQM,EAAS,EAAG,EAAG,EAAG,QAOlC,EAEJ,IAAIK,EAAK1/B,EAAInuC,QAAQ,KACjB8tE,EAAK3/B,EAAInuC,QAAQ,KACrB,IAAY,IAAR6tE,GAAaC,EAAK,IAAMF,EAAQ,CAChC,IAAIG,EAAQ5/B,EAAI2a,OAAO,EAAG+kB,GACtBG,EAAS7/B,EAAI2a,OAAO+kB,EAAK,EAAGC,GAAMD,EAAK,IAAI/yD,MAAM,KACjDtZ,EAAQ,EACZ,OAAQusE,GACJ,IAAK,OACD,GAAsB,IAAlBC,EAAOxrE,OACP,OAAyB,IAAlBwrE,EAAOxrE,OACR0qE,EAAQM,GAAUQ,EAAO,IAAKA,EAAO,IAAKA,EAAO,GAAI,GACrDd,EAAQM,EAAS,EAAG,EAAG,EAAG,GAEpChsE,EAAQurE,EAAciB,EAAOzzD,OACjC,IAAK,MACD,OAAIyzD,EAAOxrE,QAAU,GACjB0qE,EAAQM,EAASV,EAAYkB,EAAO,IAAKlB,EAAYkB,EAAO,IAAKlB,EAAYkB,EAAO,IAAuB,IAAlBA,EAAOxrE,OAAehB,EAAQurE,EAAciB,EAAO,KAC5IV,EAAWC,EAAUC,GACdA,QAGPN,EAAQM,EAAS,EAAG,EAAG,EAAG,GAGlC,IAAK,OACD,OAAsB,IAAlBQ,EAAOxrE,YACP0qE,EAAQM,EAAS,EAAG,EAAG,EAAG,IAG9BQ,EAAO,GAAKjB,EAAciB,EAAO,IACjCC,EAAUD,EAAQR,GAClBF,EAAWC,EAAUC,GACdA,GACX,IAAK,MACD,OAAsB,IAAlBQ,EAAOxrE,YACP0qE,EAAQM,EAAS,EAAG,EAAG,EAAG,IAG9BS,EAAUD,EAAQR,GAClBF,EAAWC,EAAUC,GACdA,GACX,QACI,OAEZ,CACAN,EAAQM,EAAS,EAAG,EAAG,EAAG,EAlF1B,CAoFJ,CACA,SAASS,EAAUC,EAAM56D,GACrB,IAAImlB,GAAOxF,WAAWi7C,EAAK,IAAM,IAAO,KAAO,IAAO,IAClDz+D,EAAIs9D,EAAcmB,EAAK,IACvB90C,EAAI2zC,EAAcmB,EAAK,IACvB57B,EAAKlZ,GAAK,GAAMA,GAAK3pB,EAAI,GAAK2pB,EAAI3pB,EAAI2pB,EAAI3pB,EAC1Cwe,EAAS,EAAJmL,EAAQkZ,EAMjB,OAJA46B,EADA55D,EAAOA,GAAQ,GACDs5D,EAA8C,IAAjCI,EAAY/+C,EAAIqkB,EAAI7Z,EAAI,EAAI,IAAWm0C,EAAsC,IAAzBI,EAAY/+C,EAAIqkB,EAAI7Z,IAAWm0C,EAA8C,IAAjCI,EAAY/+C,EAAIqkB,EAAI7Z,EAAI,EAAI,IAAW,GAC9I,IAAhBy1C,EAAK1rE,SACL8Q,EAAK,GAAK46D,EAAK,IAEZ56D,CACX,CAkDO,SAAS66D,EAAKv7D,EAAOw7D,GACxB,IAAI7sE,EAAWksE,EAAM76D,GACrB,GAAIrR,EAAU,CACV,IAAK,IAAIG,EAAI,EAAGA,EAAI,EAAGA,IAEfH,EAASG,GADT0sE,EAAQ,EACM7sE,EAASG,IAAM,EAAI0sE,GAAS,GAG1B,IAAM7sE,EAASG,IAAM0sE,EAAQ7sE,EAASG,GAAM,EAE5DH,EAASG,GAAK,IACdH,EAASG,GAAK,IAETH,EAASG,GAAK,IACnBH,EAASG,GAAK,GAGtB,OAAO2sE,EAAU9sE,EAA8B,IAApBA,EAASiB,OAAe,OAAS,MAChE,CACJ,CAOO,SAAS8rE,EAASC,EAAiBzK,EAAQ7xD,GAC9C,GAAM6xD,GAAUA,EAAOthE,QACd+rE,GAAmB,GAAKA,GAAmB,EADpD,CAIAt8D,EAAMA,GAAO,GACb,IAAIlQ,EAAQwsE,GAAmBzK,EAAOthE,OAAS,GAC3C+tD,EAAY7hD,KAAK6E,MAAMxR,GACvB2uD,EAAahiD,KAAK4xC,KAAKv+C,GACvBysE,EAAY1K,EAAOvT,GACnBke,EAAa3K,EAAOpT,GACpBge,EAAK3sE,EAAQwuD,EAKjB,OAJAt+C,EAAI,GAAK26D,EAAaK,EAAWuB,EAAU,GAAIC,EAAW,GAAIC,IAC9Dz8D,EAAI,GAAK26D,EAAaK,EAAWuB,EAAU,GAAIC,EAAW,GAAIC,IAC9Dz8D,EAAI,GAAK26D,EAAaK,EAAWuB,EAAU,GAAIC,EAAW,GAAIC,IAC9Dz8D,EAAI,GAAK46D,EAAcI,EAAWuB,EAAU,GAAIC,EAAW,GAAIC,IACxDz8D,CAZP,CAaJ,CAEO,SAASwxB,EAAK8qC,EAAiBzK,EAAQ6K,GAC1C,GAAM7K,GAAUA,EAAOthE,QACd+rE,GAAmB,GAAKA,GAAmB,EADpD,CAIA,IAAIxsE,EAAQwsE,GAAmBzK,EAAOthE,OAAS,GAC3C+tD,EAAY7hD,KAAK6E,MAAMxR,GACvB2uD,EAAahiD,KAAK4xC,KAAKv+C,GACvBysE,EAAYf,EAAM3J,EAAOvT,IACzBke,EAAahB,EAAM3J,EAAOpT,IAC1Bge,EAAK3sE,EAAQwuD,EACb39C,EAAQy7D,EAAU,CAClBzB,EAAaK,EAAWuB,EAAU,GAAIC,EAAW,GAAIC,IACrD9B,EAAaK,EAAWuB,EAAU,GAAIC,EAAW,GAAIC,IACrD9B,EAAaK,EAAWuB,EAAU,GAAIC,EAAW,GAAIC,IACrD7B,EAAcI,EAAWuB,EAAU,GAAIC,EAAW,GAAIC,KACvD,QACH,OAAOC,EACD,CACE/7D,MAAOA,EACP29C,UAAWA,EACXG,WAAYA,EACZ3uD,MAAOA,GAET6Q,CApBN,CAqBJ,CAEO,SAASg8D,EAAUh8D,EAAO6lB,EAAGhpB,EAAG2pB,GACnC,IA/RmB13B,EA+RfH,EAAWksE,EAAM76D,GACrB,GAAIA,EAKA,OAJArR,EA5HR,SAAmB+R,GACf,GAAKA,EAAL,CAGA,IAOIu7D,EACA1R,EARAlgC,EAAI3pB,EAAK,GAAK,IACdw7D,EAAIx7D,EAAK,GAAK,IACdm1B,EAAIn1B,EAAK,GAAK,IACdy7D,EAAOrgE,KAAK4C,IAAI2rB,EAAG6xC,EAAGrmC,GACtBumC,EAAOtgE,KAAKmE,IAAIoqB,EAAG6xC,EAAGrmC,GACtBtK,EAAQ6wC,EAAOD,EACfnyC,GAAKoyC,EAAOD,GAAQ,EAGxB,GAAc,IAAV5wC,EACA0wC,EAAI,EACJ1R,EAAI,MAEH,CAEGA,EADAvgC,EAAI,GACAuB,GAAS6wC,EAAOD,GAGhB5wC,GAAS,EAAI6wC,EAAOD,GAE5B,IAAIE,IAAYD,EAAO/xC,GAAK,EAAMkB,EAAQ,GAAMA,EAC5C+wC,IAAYF,EAAOF,GAAK,EAAM3wC,EAAQ,GAAMA,EAC5CgxC,IAAYH,EAAOvmC,GAAK,EAAMtK,EAAQ,GAAMA,EAC5ClB,IAAM+xC,EACNH,EAAIM,EAASD,EAERJ,IAAME,EACXH,EAAK,EAAI,EAAKI,EAASE,EAElB1mC,IAAMumC,IACXH,EAAK,EAAI,EAAKK,EAASD,GAEvBJ,EAAI,IACJA,GAAK,GAELA,EAAI,IACJA,GAAK,EAEb,CACA,IAAIX,EAAO,CAAK,IAAJW,EAAS1R,EAAGvgC,GAIxB,OAHe,MAAXtpB,EAAK,IACL46D,EAAKnpE,KAAKuO,EAAK,IAEZ46D,CA5CP,CA6CJ,CA4EmBkB,CAAU7tE,GAChB,MAALk3B,IAAcl3B,EAAS,IAlSRG,EAkS2B+2B,GAjS9C/2B,EAAIgN,KAAKovB,MAAMp8B,IACJ,EAAI,EAAIA,EAAI,IAAM,IAAMA,IAiS1B,MAAL+N,IAAclO,EAAS,GAAKwrE,EAAct9D,IACrC,MAAL2pB,IAAc73B,EAAS,GAAKwrE,EAAc3zC,IACnCi1C,EAAUJ,EAAU1sE,GAAW,OAE9C,CACO,SAAS8tE,EAAYz8D,EAAOpR,GAC/B,IAAID,EAAWksE,EAAM76D,GACrB,GAAIrR,GAAqB,MAATC,EAEZ,OADAD,EAAS,GAAKsrE,EAAcrrE,GACrB6sE,EAAU9sE,EAAU,OAEnC,CACO,SAAS8sE,EAAUiB,EAAU1lE,GAChC,GAAK0lE,GAAaA,EAAS9sE,OAA3B,CAGA,IAAI+qE,EAAW+B,EAAS,GAAK,IAAMA,EAAS,GAAK,IAAMA,EAAS,GAIhE,MAHa,SAAT1lE,GAA4B,SAATA,GAA4B,SAATA,IACtC2jE,GAAY,IAAM+B,EAAS,IAExB1lE,EAAO,IAAM2jE,EAAW,GAL/B,CAMJ,CACO,SAASgC,EAAI38D,EAAO48D,GACvB,IAAIrrC,EAAMspC,EAAM76D,GAChB,OAAOuxB,GACA,KAAQA,EAAI,GAAK,KAAQA,EAAI,GAAK,KAAQA,EAAI,IAAMA,EAAI,GAAK,KACzD,EAAIA,EAAI,IAAMqrC,EACnB,CACV,oQC9YI9yC,WAAM,EAAUA,IACpB,SAAS+yC,EAAY//D,EAAG+F,GACpB,OAAO/G,KAAKwlB,IAAIxkB,EAAI+F,GAAK,IAC7B,CACO,SAASi6D,EAAmB/gD,GAC/B,IAGIghD,EAgCA57C,EACAC,EACA7c,EACAC,EAtCAwnB,EAAOjQ,EAAKiQ,KACZz5B,EAAMwpB,EAAKxpB,MACXyqE,EAAoB,GAEpBruC,EAAK,EACLC,EAAK,EACL3N,EAAK,EACLC,EAAK,EACT,SAAS+7C,EAAiB9wE,EAAGC,GACrB2wE,GAAkBA,EAAentE,OAAS,GAC1CotE,EAAkB7qE,KAAK4qE,GAE3BA,EAAiB,CAAC5wE,EAAGC,EACzB,CACA,SAAS8wE,EAAQj8C,EAAIC,EAAIC,EAAIC,GACnBy7C,EAAY57C,EAAIE,IAAO07C,EAAY37C,EAAIE,IACzC27C,EAAe5qE,KAAK8uB,EAAIC,EAAIC,EAAIC,EAAID,EAAIC,EAEhD,CACA,SAAS+7C,EAAO1vC,EAAYC,EAAUH,EAAIC,EAAIsB,EAAIC,GAC9C,IAAIxD,EAAQzvB,KAAKwlB,IAAIoM,EAAWD,GAC5Bl7B,EAA4B,EAAtBuJ,KAAKo3B,IAAI3H,EAAQ,GAAS,EAChCtI,EAAMyK,EAAWD,GAAc,EAAI,EACnC2vC,EAAKthE,KAAKC,IAAI0xB,GACd4vC,EAAKvhE,KAAKI,IAAIuxB,GACd6vC,EAAKxhE,KAAKC,IAAI2xB,GACd6vC,EAAKzhE,KAAKI,IAAIwxB,GACdvM,EAAKi8C,EAAKtuC,EAAKvB,EACfnM,EAAKi8C,EAAKtuC,EAAKvB,EACfgwC,EAAKF,EAAKxuC,EAAKvB,EACfkwC,EAAKF,EAAKxuC,EAAKvB,EACfkwC,EAAK5uC,EAAKv8B,EAAM0wB,EAChB06C,EAAK5uC,EAAKx8B,EAAM0wB,EACpB85C,EAAe5qE,KAAKgvB,EAAKu8C,EAAKL,EAAIj8C,EAAKu8C,EAAKP,EAAII,EAAKE,EAAKH,EAAIE,EAAKE,EAAKL,EAAIE,EAAIC,EACpF,CAKA,IAAK,IAAI3uE,EAAI,EAAGA,EAAIyD,GAAM,CACtB,IAAI27B,EAAMlC,EAAKl9B,KACX+/B,EAAgB,IAAN//B,EAUd,OATI+/B,IAGA5N,EAFA0N,EAAK3C,EAAKl9B,GAGVoyB,EAFA0N,EAAK5C,EAAKl9B,EAAI,GAGVo/B,IAAQpE,EAAIE,GAAKkE,IAAQpE,EAAIG,GAAKiE,IAAQpE,EAAII,IAC9C6yC,EAAiB,CAAC97C,EAAIC,KAGtBgN,GACJ,KAAKpE,EAAIC,EACL4E,EAAK1N,EAAK+K,EAAKl9B,KACf8/B,EAAK1N,EAAK8K,EAAKl9B,KACfmuE,EAAiBh8C,EAAIC,GACrB,MACJ,KAAK4I,EAAIE,EAGLkzC,EAAQvuC,EAAIC,EAFZzN,EAAK6K,EAAKl9B,KACVsyB,EAAK4K,EAAKl9B,MAEV6/B,EAAKxN,EACLyN,EAAKxN,EACL,MACJ,KAAK0I,EAAIG,EACL8yC,EAAe5qE,KAAK65B,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,KAAMk9B,EAAKl9B,KAAM6/B,EAAK3C,EAAKl9B,KAAM8/B,EAAK5C,EAAKl9B,MAC1F,MACJ,KAAKg7B,EAAII,EACL/I,EAAK6K,EAAKl9B,KACVsyB,EAAK4K,EAAKl9B,KACVyV,EAAKynB,EAAKl9B,KACV0V,EAAKwnB,EAAKl9B,KACViuE,EAAe5qE,KAAKw8B,EAAK,EAAI,GAAKxN,EAAKwN,GAAKC,EAAK,EAAI,GAAKxN,EAAKwN,GAAKrqB,EAAK,EAAI,GAAK4c,EAAK5c,GAAKC,EAAK,EAAI,GAAK4c,EAAK5c,GAAKD,EAAIC,GACxHmqB,EAAKpqB,EACLqqB,EAAKpqB,EACL,MACJ,KAAKslB,EAAIK,EACL,IAAIoD,EAAKvB,EAAKl9B,KACV0+B,EAAKxB,EAAKl9B,KACVggC,EAAK9C,EAAKl9B,KACVigC,EAAK/C,EAAKl9B,KACV2+B,EAAazB,EAAKl9B,KAClB4+B,EAAW1B,EAAKl9B,KAAO2+B,EAC3B3+B,GAAK,EACL,IAAIu8B,GAAiBW,EAAKl9B,KAC1BqyB,EAAKrlB,KAAKC,IAAI0xB,GAAcqB,EAAKvB,EACjCnM,EAAKtlB,KAAKI,IAAIuxB,GAAcsB,EAAKvB,EAC7BqB,EAGAouC,EAFAh8C,EAAKE,EACLD,EAAKE,GAIL87C,EAAQvuC,EAAIC,EAAIzN,EAAIC,GAExBuN,EAAK7yB,KAAKC,IAAI2xB,GAAYoB,EAAKvB,EAC/BqB,EAAK9yB,KAAKI,IAAIwxB,GAAYqB,EAAKvB,EAE/B,IADA,IAAIlvB,GAAQ+sB,GAAiB,EAAI,GAAKvvB,KAAKE,GAAK,EACvC8mB,EAAQ2K,EAAYpC,EAAgBvI,EAAQ4K,EAAW5K,EAAQ4K,EAAU5K,GAASxkB,EAAM,CAG7F6+D,EAAOr6C,EAFSuI,EAAgBvvB,KAAKmE,IAAI6iB,EAAQxkB,EAAMovB,GACjD5xB,KAAK4C,IAAIokB,EAAQxkB,EAAMovB,GACJH,EAAIC,EAAIsB,EAAIC,EACzC,CACA,MACJ,KAAKjF,EAAIO,EACLpJ,EAAK0N,EAAK3C,EAAKl9B,KACfoyB,EAAK0N,EAAK5C,EAAKl9B,KACfqyB,EAAKF,EAAK+K,EAAKl9B,KACfsyB,EAAKF,EAAK8K,EAAKl9B,KACfmuE,EAAiB97C,EAAID,GACrBg8C,EAAQ/7C,EAAID,EAAIC,EAAIC,GACpB87C,EAAQ/7C,EAAIC,EAAIH,EAAIG,GACpB87C,EAAQj8C,EAAIG,EAAIH,EAAIC,GACpBg8C,EAAQj8C,EAAIC,EAAIC,EAAID,GACpB,MACJ,KAAK4I,EAAIM,EACL2yC,GAAkBG,EAAQvuC,EAAIC,EAAI3N,EAAIC,GACtCyN,EAAK1N,EACL2N,EAAK1N,EAGjB,CAIA,OAHI67C,GAAkBA,EAAentE,OAAS,GAC1CotE,EAAkB7qE,KAAK4qE,GAEpBC,CACX,CACA,SAASY,EAAe38C,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,EAAI/tB,EAAKyM,GACzD,GAAI+wD,EAAY57C,EAAIE,IAAO07C,EAAY37C,EAAIE,IAAOy7C,EAAYt4D,EAAI4oB,IAAO0vC,EAAYr4D,EAAI4oB,GACrF/tB,EAAIlN,KAAKg7B,EAAIC,OADjB,CAIA,IAAIywC,EAAiB,EAAI/xD,EACrBgyD,EAAqBD,EAAiBA,EACtC3zE,EAAKijC,EAAKlM,EACV92B,EAAKijC,EAAKlM,EACVkN,EAAItyB,KAAKW,KAAKvS,EAAKA,EAAKC,EAAKA,GACjCD,GAAMkkC,EACNjkC,GAAMikC,EACN,IAAIs3B,EAAMvkC,EAAKF,EACX0kC,EAAMvkC,EAAKF,EACX68C,EAAMx5D,EAAK4oB,EACX6wC,EAAMx5D,EAAK4oB,EACX6wC,EAAYvY,EAAMA,EAAMC,EAAMA,EAC9BuY,EAAYH,EAAMA,EAAMC,EAAMA,EAClC,GAAIC,EAAYH,GAAsBI,EAAYJ,EAC9Cz+D,EAAIlN,KAAKg7B,EAAIC,OADjB,CAIA,IAAI+wC,EAAWj0E,EAAKw7D,EAAMv7D,EAAKw7D,EAC3ByY,GAAYl0E,EAAK6zE,EAAM5zE,EAAK6zE,EAGhC,GAFYC,EAAYE,EAAWA,EAEvBL,GAAsBK,GAAY,GADlCD,EAAYE,EAAWA,EAEpBN,GAAsBM,GAAY,EAC7C/+D,EAAIlN,KAAKg7B,EAAIC,OAFjB,CAKA,IAAIixC,EAAU,GACVC,EAAU,IACd,QAAer9C,EAAIE,EAAI5c,EAAI4oB,EAAI,GAAKkxC,IACpC,QAAen9C,EAAIE,EAAI5c,EAAI4oB,EAAI,GAAKkxC,GACpCV,EAAeS,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,GAAIj/D,EAAKyM,GACpH8xD,EAAeS,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,GAAIj/D,EAAKyM,EANpH,CATA,CAjBA,CAiCJ,CClKA,SAASyyD,EAAiBC,EAASC,EAAQC,GACvC,IAAIC,EAAUH,EAAQC,GAClBG,EAAaJ,EAAQ,EAAIC,GACzBI,EAAQ/iE,KAAKwlB,IAAIq9C,EAAUC,GAC3BE,EAAWhjE,KAAK4xC,KAAK5xC,KAAKW,KAAKoiE,EAAQH,IACvCK,EAAcjjE,KAAK6E,MAAM+9D,EAAQI,GACjB,IAAhBC,IACAA,EAAc,EACdD,EAAWJ,GAGf,IADA,IAAIM,EAAQ,GACHlwE,EAAI,EAAGA,EAAIgwE,EAAUhwE,IAC1BkwE,EAAM7sE,KAAK4sE,GAEf,IACIE,EAAWP,EADII,EAAWC,EAE9B,GAAIE,EAAW,EACX,IAASnwE,EAAI,EAAGA,EAAImwE,EAAUnwE,IAC1BkwE,EAAMlwE,EAAIgwE,IAAa,EAG/B,OAAOE,CACX,CACA,SAASE,EAAaC,EAAaT,EAAOU,GAWtC,IAVA,IAAI9a,EAAK6a,EAAY7a,GACjB7/C,EAAI06D,EAAY16D,EAChBgpB,EAAa0xC,EAAY1xC,WACzBC,EAAWyxC,EAAYzxC,SACvB5K,EAAQhnB,KAAKwlB,IAAIoM,EAAWD,GAC5B4xC,EAASv8C,EAAQre,EACjB43D,EAAS53D,EAAI6/C,EACbgb,EAAaD,EAASvjE,KAAKwlB,IAAI+6C,GAC/B2C,EAAQT,EAAiB,CAACc,EAAQhD,GAASiD,EAAa,EAAI,EAAGZ,GAC/DC,GAAWW,EAAax8C,EAAQu5C,GAAU2C,EAAMpvE,OAC3C2vE,EAAM,EAAGA,EAAMP,EAAMpvE,OAAQ2vE,IAElC,IADA,IAAIX,GAAcU,EAAajD,EAASv5C,GAASk8C,EAAMO,GAC9CC,EAAS,EAAGA,EAASR,EAAMO,GAAMC,IAAU,CAChD,IAAIC,EAAW,CAAC,EACZH,GACAG,EAAShyC,WAAaA,EAAakxC,EAAUY,EAC7CE,EAAS/xC,SAAWD,EAAakxC,GAAWY,EAAM,GAClDE,EAASnb,GAAKA,EAAKsa,EAAaY,EAChCC,EAASh7D,EAAI6/C,EAAKsa,GAAcY,EAAS,KAGzCC,EAAShyC,WAAaA,EAAamxC,EAAaY,EAChDC,EAAS/xC,SAAWD,EAAamxC,GAAcY,EAAS,GACxDC,EAASnb,GAAKA,EAAKqa,EAAUY,EAC7BE,EAASh7D,EAAI6/C,EAAKqa,GAAWY,EAAM,IAEvCE,EAASpd,UAAY8c,EAAY9c,UACjCod,EAASlyC,GAAK4xC,EAAY5xC,GAC1BkyC,EAASjyC,GAAK2xC,EAAY3xC,GAC1B4xC,EAAUjtE,KAAKstE,EACnB,CAER,CAyBA,SAASC,EAAev+C,EAAIC,EAAI7c,EAAIC,GAChC,OAAO2c,EAAK3c,EAAKD,EAAK6c,CAC1B,CACA,SAASu+C,EAAkBC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAC1D,IAAIC,EAAKN,EAAMF,EACXS,EAAKN,EAAMF,EACXS,EAAKJ,EAAMF,EACXO,EAAKJ,EAAMF,EACXO,EAAiBd,EAAeY,EAAIC,EAAIH,EAAIC,GAChD,GAAIvkE,KAAKwlB,IAAIk/C,GAAkB,KAC3B,OAAO,KAEX,IAEIzjE,EAAI2iE,EAFIE,EAAMI,EACNH,EAAMI,EACmBK,EAAIC,GAAMC,EAC/C,OAAIzjE,EAAI,GAAKA,EAAI,EACN,KAEJ,IAAImzB,EAAA,EAAMnzB,EAAIqjE,EAAKR,EAAK7iE,EAAIsjE,EAAKR,EAC5C,CACA,SAASY,EAAaC,EAAIC,EAAOC,GAC7B,IAAI39C,EAAM,IAAIiN,EAAA,EACdA,EAAA,EAAMlH,IAAI/F,EAAK29C,EAAOD,GACtB19C,EAAIgG,YACJ,IAAI43C,EAAO,IAAI3wC,EAAA,EAGf,OAFAA,EAAA,EAAMlH,IAAI63C,EAAMH,EAAIC,GACVE,EAAK33C,IAAIjG,EAEvB,CACA,SAAS69C,EAAUC,EAAML,GACrB,IAAI3gE,EAAOghE,EAAKA,EAAKnxE,OAAS,GAC1BmQ,GAAQA,EAAK,KAAO2gE,EAAG,IAAM3gE,EAAK,KAAO2gE,EAAG,IAGhDK,EAAK5uE,KAAKuuE,EACd,CAiDA,SAASM,EAAoBC,GACzB,IAAIh5D,EAASg5D,EAAah5D,OACtBvJ,EAAM,GACNuB,EAAM,IACV,QAAWgI,EAAQvJ,EAAKuB,GACxB,IAAI4M,EAAe,IAAIL,EAAA,EAAa9N,EAAI,GAAIA,EAAI,GAAIuB,EAAI,GAAKvB,EAAI,GAAIuB,EAAI,GAAKvB,EAAI,IAC9E9R,EAAQigB,EAAajgB,MACrBC,EAASggB,EAAahgB,OACtBV,EAAI0gB,EAAa1gB,EACjBC,EAAIygB,EAAazgB,EACjB80E,EAAM,IAAIhxC,EAAA,EACVixC,EAAM,IAAIjxC,EAAA,EAWd,OAVItjC,EAAQC,GACRq0E,EAAI/0E,EAAIg1E,EAAIh1E,EAAIA,EAAIS,EAAQ,EAC5Bs0E,EAAI90E,EAAIA,EACR+0E,EAAI/0E,EAAIA,EAAIS,IAGZq0E,EAAI90E,EAAI+0E,EAAI/0E,EAAIA,EAAIS,EAAS,EAC7Bq0E,EAAI/0E,EAAIA,EACRg1E,EAAIh1E,EAAIA,EAAIS,GApEpB,SAA4Bqb,EAAQ04D,EAAOC,GAGvC,IAFA,IAAIruE,EAAM0V,EAAOrY,OACbwxE,EAAgB,GACXtyE,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CAC1B,IAAIoQ,EAAK+I,EAAOnZ,GACZqQ,EAAK8I,GAAQnZ,EAAI,GAAKyD,GACtB8uE,EAAiB1B,EAAkBzgE,EAAG,GAAIA,EAAG,GAAIC,EAAG,GAAIA,EAAG,GAAIwhE,EAAMx0E,EAAGw0E,EAAMv0E,EAAGw0E,EAAMz0E,EAAGy0E,EAAMx0E,GAChGi1E,GACAD,EAAcjvE,KAAK,CACfmvE,OAAQb,EAAaY,EAAgBV,EAAOC,GAC5CF,GAAIW,EACJpuE,IAAKnE,GAGjB,CACA,GAAIsyE,EAAcxxE,OAAS,EACvB,MAAO,CAAC,CAAEqY,OAAQA,GAAU,CAAEA,OAAQA,IAE1Cm5D,EAAcx+D,MAAK,SAAU9F,EAAG+F,GAC5B,OAAO/F,EAAEwkE,OAASz+D,EAAEy+D,MACxB,IACA,IAAIC,EAAWH,EAAc,GACzBI,EAAWJ,EAAcA,EAAcxxE,OAAS,GACpD,GAAI4xE,EAASvuE,IAAMsuE,EAAStuE,IAAK,CAC7B,IAAIsuB,EAAMggD,EACVA,EAAWC,EACXA,EAAWjgD,CACf,CACA,IAAIkgD,EAAc,CAACF,EAASb,GAAGv0E,EAAGo1E,EAASb,GAAGt0E,GAC1Cs1E,EAAc,CAACF,EAASd,GAAGv0E,EAAGq1E,EAASd,GAAGt0E,GAC1Cu1E,EAAW,CAACF,GACZG,EAAW,CAACF,GAChB,IAAS5yE,EAAIyyE,EAAStuE,IAAM,EAAGnE,GAAK0yE,EAASvuE,IAAKnE,IAC9CgyE,EAAUa,EAAU15D,EAAOnZ,GAAGgE,SAIlC,IAFAguE,EAAUa,EAAUD,GACpBZ,EAAUa,EAAUF,GACX3yE,EAAI0yE,EAASvuE,IAAM,EAAGnE,GAAKyyE,EAAStuE,IAAMV,EAAKzD,IACpDgyE,EAAUc,EAAU35D,EAAOnZ,EAAIyD,GAAKO,SAIxC,OAFAguE,EAAUc,EAAUH,GACpBX,EAAUc,EAAUF,GACb,CAAC,CACAz5D,OAAQ05D,GACT,CACC15D,OAAQ25D,GAEpB,CAuBWC,CAAmB55D,EAAQi5D,EAAKC,EAC3C,CACA,SAASW,EAAsBpqC,EAAS1c,EAAO0jD,EAAOr/D,GAClD,GAAc,IAAVq/D,EACAr/D,EAAIlN,KAAK6oB,OAER,CACD,IAAI8nB,EAAMhnC,KAAK6E,MAAM+9D,EAAQ,GACzB11C,EAAM0O,EAAQ1c,GAClB8mD,EAAsBpqC,EAAS1O,EAAI,GAAI8Z,EAAKzjC,GAC5CyiE,EAAsBpqC,EAAS1O,EAAI,GAAI01C,EAAQ57B,EAAKzjC,EACxD,CACA,OAAOA,CACX,CAqBO,SAAS6I,EAAM6T,EAAM2iD,GACxB,IAEIqD,EAFA3C,EAAY,GACZpkD,EAAQe,EAAKf,MAEjB,OAAQe,EAAK/kB,MACT,IAAK,QAzKb,SAAoB6nD,EAAW6f,EAAOU,GAUlC,IATA,IAAIxyE,EAAQiyD,EAAUjyD,MAClBC,EAASgyD,EAAUhyD,OACnBm1E,EAAkBp1E,EAAQC,EAC1BmyE,EAAQT,EAAiB,CAAC3xE,EAAOC,GAASm1E,EAAkB,EAAI,EAAGtD,GACnEuD,EAAaD,EAAkB,QAAU,SACzCE,EAAgBF,EAAkB,SAAW,QAC7CvD,EAASuD,EAAkB,IAAM,IACjCG,EAAYH,EAAkB,IAAM,IACpCrD,EAAU9f,EAAUojB,GAAcjD,EAAMpvE,OACnC2vE,EAAM,EAAGA,EAAMP,EAAMpvE,OAAQ2vE,IAElC,IADA,IAAIX,EAAa/f,EAAUqjB,GAAiBlD,EAAMO,GACzCC,EAAS,EAAGA,EAASR,EAAMO,GAAMC,IAAU,CAChD,IAAIC,EAAW,CAAC,EAChBA,EAAShB,GAAUc,EAAMZ,EACzBc,EAAS0C,GAAa3C,EAASZ,EAC/Ba,EAASwC,GAActD,EACvBc,EAASyC,GAAiBtD,EAC1Ba,EAAStzE,GAAK0yD,EAAU1yD,EACxBszE,EAASrzE,GAAKyyD,EAAUzyD,EACxBgzE,EAAUjtE,KAAKstE,EACnB,CAER,CAmJY2C,CAAWpnD,EAAO0jD,EAAOU,GACzB2C,EAAenjB,EAAA,EACf,MACJ,IAAK,SACDsgB,EAAalkD,EAAO0jD,EAAOU,GAC3B2C,EAAe9Z,EAAA,EACf,MACJ,IAAK,SACDiX,EAAa,CACT5a,GAAI,EAAG7/C,EAAGuW,EAAMvW,EAAGgpB,WAAY,EAAGC,SAAoB,EAAV5xB,KAAKE,GACjDuxB,GAAIvS,EAAMuS,GAAIC,GAAIxS,EAAMwS,IACzBkxC,EAAOU,GACV2C,EAAe9Z,EAAA,EACf,MACJ,QACI,IAAI39D,EAAIyxB,EAAKoW,uBACTrmB,EAAQxhB,EAAIwR,KAAKW,KAAKX,KAAKmE,IAAI3V,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAIA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,KAAO,EACxF+3E,GAAW,QDjFpB,SAAwBtmD,EAAMjQ,GACjC,IAAIkxD,EAAoBF,EAAmB/gD,GACvCsmD,EAAW,GACfv2D,EAAQA,GAAS,EACjB,IAAK,IAAIhd,EAAI,EAAGA,EAAIkuE,EAAkBptE,OAAQd,IAAK,CAC/C,IAAIwzE,EAAUtF,EAAkBluE,GAC5BkhE,EAAU,GACV/uC,EAAKqhD,EAAQ,GACbphD,EAAKohD,EAAQ,GACjBtS,EAAQ79D,KAAK8uB,EAAIC,GACjB,IAAK,IAAIjnB,EAAI,EAAGA,EAAIqoE,EAAQ1yE,QAAS,CACjC,IAAIuxB,EAAKmhD,EAAQroE,KACbmnB,EAAKkhD,EAAQroE,KACbsK,EAAK+9D,EAAQroE,KACbuK,EAAK89D,EAAQroE,KACbkzB,EAAKm1C,EAAQroE,KACbmzB,EAAKk1C,EAAQroE,KACjB2jE,EAAe38C,EAAIC,EAAIC,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,EAAI4iC,EAASlkD,GACxDmV,EAAKkM,EACLjM,EAAKkM,CACT,CACAi1C,EAASlwE,KAAK69D,EAClB,CACA,OAAOqS,CACX,CCyD+BE,CAAexmD,EAAK23B,sBAAuB5nC,IAAQ,SAAUi1D,GAAQ,OA9BpG,SAAwB94D,GAEpB,IADA,IAAI5I,EAAM,GACDvQ,EAAI,EAAGA,EAAImZ,EAAOrY,QACvByP,EAAIlN,KAAK,CAAC8V,EAAOnZ,KAAMmZ,EAAOnZ,OAElC,OAAOuQ,CACX,CAwB2GmjE,CAAezB,EAAO,IACjH0B,EAAeJ,EAASzyE,OAC5B,GAAqB,IAAjB6yE,EACAX,EAAsBd,EAAqB,CACvC/4D,OAAQo6D,EAAS,IAClB3D,EAAOU,QAET,GAAIqD,IAAiB/D,EACtB,IAAK,IAAI5vE,EAAI,EAAGA,EAAI2zE,EAAc3zE,IAC9BswE,EAAUjtE,KAAK,CACX8V,OAAQo6D,EAASvzE,SAIxB,CACD,IAAI4zE,EAAc,EACdC,GAAQ,QAAIN,GAAU,SAAUtB,GAChC,IAAIriE,EAAM,GACNuB,EAAM,IACV,QAAW8gE,EAAMriE,EAAKuB,GACtB,IAAI2iE,GAAQ3iE,EAAI,GAAKvB,EAAI,KAAOuB,EAAI,GAAKvB,EAAI,IAE7C,OADAgkE,GAAeE,EACR,CAAE7B,KAAMA,EAAM6B,KAAMA,EAC/B,IACAD,EAAM//D,MAAK,SAAU9F,EAAG+F,GAAK,OAAOA,EAAE+/D,KAAO9lE,EAAE8lE,IAAM,IACrD,IAAIj5D,EAAO+0D,EACX,IAAS5vE,EAAI,EAAGA,EAAI2zE,EAAc3zE,IAAK,CACnC,IAAIghE,EAAO6S,EAAM7zE,GACjB,GAAI6a,GAAQ,EACR,MAEJ,IAAIk5D,EAAY/zE,IAAM2zE,EAAe,EAC/B94D,EACA7N,KAAK4xC,KAAKoiB,EAAK8S,KAAOF,EAAchE,GACtCmE,EAAY,IAGhBf,EAAsBd,EAAqB,CACvC/4D,OAAQ6nD,EAAKiR,MACd8B,EAAWzD,GACdz1D,GAAQk5D,EACZ,CAEJ,CACAd,EAAene,EAAA,EAGvB,IAAKme,EACD,OA3FD,SAAehmD,EAAM2iD,GAExB,IADA,IAAI7yB,EAAQ,GACH/8C,EAAI,EAAGA,EAAI4vE,EAAO5vE,IACvB+8C,EAAM15C,MAAK,QAAU4pB,IAEzB,OAAO8vB,CACX,CAqFehnB,CAAM9I,EAAM2iD,GAEvB,IAtFmB1lE,EAAQzI,EAsFvB8O,EAAM,GACV,IAASvQ,EAAI,EAAGA,EAAIswE,EAAUxvE,OAAQd,IAAK,CACvC,IAAIg0E,EAAU,IAAIf,EAClBe,EAAQ3uB,SAASirB,EAAUtwE,IAzFZkK,EA0FD+iB,GA1FSxrB,EA0FHuyE,GAzFjBh1B,SAAS90C,EAAO0Q,OACvBnZ,EAAO8hB,EAAIrZ,EAAOqZ,EAClB9hB,EAAOo+C,GAAK31C,EAAO21C,GACnBp+C,EAAO+Z,OAAStR,EAAOsR,OAuFnBjL,EAAIlN,KAAK2wE,EACb,CACA,OAAOzjE,CACX,CC/SA,SAAS0jE,EAAaC,EAAUC,GAC5B,IAAI5pE,EAAO2pE,EAASpzE,OAChB6P,EAAOwjE,EAASrzE,OACpB,GAAIyJ,IAASoG,EACT,MAAO,CAACujE,EAAUC,GAWtB,IATA,IAAI5E,EAAU,GACVC,EAAU,GACV4E,EAAc7pE,EAAOoG,EAAOujE,EAAWC,EACvCnjE,EAAahE,KAAK4C,IAAIrF,EAAMoG,GAC5Bs1B,EAAOj5B,KAAKwlB,IAAI7hB,EAAOpG,GAAQ,EAC/B8pE,GAAsBrjE,EAAa,GAAK,EACxCsjE,EAAuBtnE,KAAK4xC,KAAK3Y,EAAOouC,GAAsB,EAC9DE,EAAa,CAACH,EAAY,GAAIA,EAAY,IAC1CjE,EAAWlqC,EACNjmC,EAAI,EAAGA,EAAIgR,GAAa,CAC7B,IAAImhB,EAAKiiD,EAAYp0E,EAAI,GACrBoyB,EAAKgiD,EAAYp0E,EAAI,GACrBqyB,EAAK+hD,EAAYp0E,KACjBsyB,EAAK8hD,EAAYp0E,KACjByV,EAAK2+D,EAAYp0E,KACjB0V,EAAK0+D,EAAYp0E,KACjBq+B,EAAK+1C,EAAYp0E,KACjBs+B,EAAK81C,EAAYp0E,KACrB,GAAImwE,GAAY,EACZoE,EAAWlxE,KAAKgvB,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,OADxC,CAKA,IADA,IAAIk2C,EAAoBxnE,KAAK4C,IAAIugE,EAAUmE,EAAuB,GAAK,EAC9DnpE,EAAI,EAAGA,GAAKqpE,EAAmBrpE,IAAK,CACzC,IAAI8C,EAAI9C,EAAIqpE,GACZ,QAAeriD,EAAIE,EAAI5c,EAAI4oB,EAAIpwB,EAAGshE,IAClC,QAAen9C,EAAIE,EAAI5c,EAAI4oB,EAAIrwB,EAAGuhE,GAClCr9C,EAAKo9C,EAAQ,GACbn9C,EAAKo9C,EAAQ,GACb+E,EAAWlxE,KAAKksE,EAAQ,GAAIC,EAAQ,GAAID,EAAQ,GAAIC,EAAQ,GAAIr9C,EAAIC,GACpEC,EAAKk9C,EAAQ,GACbj9C,EAAKk9C,EAAQ,GACb/5D,EAAK85D,EAAQ,GACb75D,EAAK85D,EAAQ,EACjB,CACAW,GAAYqE,EAAoB,CAdhC,CAeJ,CACA,OAAOJ,IAAgBF,EAAW,CAACK,EAAYJ,GAAY,CAACD,EAAUK,EAC1E,CACA,SAASE,EAAcC,EAAoBC,GAKvC,IAJA,IAAIlxE,EAAMixE,EAAmB5zE,OACzB8zE,EAAQF,EAAmBjxE,EAAM,GACjCoxE,EAAQH,EAAmBjxE,EAAM,GACjC8wE,EAAa,GACRv0E,EAAI,EAAGA,EAAI20E,EAAa7zE,QAC7ByzE,EAAWv0E,KAAO40E,EAClBL,EAAWv0E,KAAO60E,EAEtB,OAAON,CACX,CA8BO,SAASO,EAASphC,GAKrB,IAJA,IAAIqhC,EAAa,EACbt2C,EAAK,EACLC,EAAK,EACLj7B,EAAMiwC,EAAM5yC,OACPd,EAAI,EAAG4Q,EAAInN,EAAM,EAAGzD,EAAIyD,EAAKmN,EAAI5Q,EAAGA,GAAK,EAAG,CACjD,IAAImyB,EAAKuhB,EAAM9iC,GACXwhB,EAAKshB,EAAM9iC,EAAI,GACfyhB,EAAKqhB,EAAM1zC,GACXsyB,EAAKohB,EAAM1zC,EAAI,GACfgO,EAAImkB,EAAKG,EAAKD,EAAKD,EACvB2iD,GAAc/mE,EACdywB,IAAOtM,EAAKE,GAAMrkB,EAClB0wB,IAAOtM,EAAKE,GAAMtkB,CACtB,CACA,OAAmB,IAAf+mE,EACO,CAACrhC,EAAM,IAAM,EAAGA,EAAM,IAAM,GAEhC,CAACjV,EAAKs2C,EAAa,EAAGr2C,EAAKq2C,EAAa,EAAGA,EACtD,CACA,SAASC,EAAmBC,EAAgBC,EAAcC,EAAQC,GAM9D,IALA,IAAIC,GAAeJ,EAAen0E,OAAS,GAAK,EAC5Cw0E,EAAYp3D,IACZq3D,EAAa,EACb9xE,EAAMwxE,EAAen0E,OACrB6P,EAAOlN,EAAM,EACRtF,EAAS,EAAGA,EAASk3E,EAAal3E,IAAU,CAGjD,IAFA,IAAIq3E,EAAwB,EAATr3E,EACfs3E,EAAQ,EACHtqE,EAAI,EAAGA,EAAI1H,EAAK0H,GAAK,EAAG,CAC7B,IAAIhH,EAAY,IAANgH,EAAUqqE,GAAiBA,EAAerqE,EAAI,GAAKwF,EAAO,EAChEwhB,EAAK8iD,EAAe9wE,GAAOgxE,EAAO,GAClC/iD,EAAK6iD,EAAe9wE,EAAM,GAAKgxE,EAAO,GAGtC/5E,EAFK85E,EAAa/pE,GAAKiqE,EAAK,GAElBjjD,EACV92B,EAFK65E,EAAa/pE,EAAI,GAAKiqE,EAAK,GAEtBhjD,EACdqjD,GAASr6E,EAAKA,EAAKC,EAAKA,CAC5B,CACIo6E,EAAQH,IACRA,EAAYG,EACZF,EAAap3E,EAErB,CACA,OAAOo3E,CACX,CACA,SAASnsE,EAAQsqC,GAGb,IAFA,IAAIgiC,EAAS,GACTjyE,EAAMiwC,EAAM5yC,OACPd,EAAI,EAAGA,EAAIyD,EAAKzD,GAAK,EAC1B01E,EAAO11E,GAAK0zC,EAAMjwC,EAAMzD,EAAI,GAC5B01E,EAAO11E,EAAI,GAAK0zC,EAAMjwC,EAAMzD,EAAI,GAEpC,OAAO01E,CACX,CA0EO,SAASC,EAAkB1oD,GAC9B,OAAOA,EAAK2oD,mBAChB,CAIA,IAAIC,EAAsB,eAC1B,SAASC,EAAoB17E,EAAK27E,EAAYC,GAC1C,IAAIC,EAAkBJ,EAAsBE,EACxCG,EAAiB97E,EAAI67E,IAAoB77E,EAAI27E,GAC5C37E,EAAI67E,KACL77E,EAAI67E,GAAmB77E,EAAI27E,IAE/B,IAAIvpC,EAAUwpC,EAAUxpC,QACpB2pC,EAAQH,EAAUG,MAClBzQ,EAASsQ,EAAUtQ,OACvBtrE,EAAI27E,GAAc,WACd,IACI9iC,EADArb,EAAOE,UAUX,OARA4tC,GAAUA,EAAOxtC,MAAMv9B,KAAMi9B,GAEzBqb,EADAzG,EACMA,EAAQtU,MAAMv9B,KAAMi9B,GAGpBs+C,EAAeh+C,MAAMv9B,KAAMi9B,GAErCu+C,GAASA,EAAMj+C,MAAMv9B,KAAMi9B,GACpBqb,CACX,CACJ,CACA,SAASmjC,EAAch8E,EAAK27E,GACxB,IAAIE,EAAkBJ,EAAsBE,EACxC37E,EAAI67E,KACJ77E,EAAI27E,GAAc37E,EAAI67E,GACtB77E,EAAI67E,GAAmB,KAE/B,CACA,SAASI,EAAwBC,EAAcC,GAC3C,IAAK,IAAIv2E,EAAI,EAAGA,EAAIs2E,EAAax1E,OAAQd,IAErC,IADA,IAAIw2E,EAAaF,EAAat2E,GACrBmL,EAAI,EAAGA,EAAIqrE,EAAW11E,QAAS,CACpC,IAAIzD,EAAIm5E,EAAWrrE,GACf7N,EAAIk5E,EAAWrrE,EAAI,GACvBqrE,EAAWrrE,KAAOorE,EAAG,GAAKl5E,EAAIk5E,EAAG,GAAKj5E,EAAIi5E,EAAG,GAC7CC,EAAWrrE,KAAOorE,EAAG,GAAKl5E,EAAIk5E,EAAG,GAAKj5E,EAAIi5E,EAAG,EACjD,CAER,CACA,SAASE,EAAiBC,EAAUC,GAChC,IAAIC,EAAgBF,EAAS9xB,sBACzBiyB,EAAcF,EAAO/xB,sBACrB1gC,EAhND,SAA2B4yD,EAAQC,GAMtC,IALA,IAAI7yD,EACA8yD,EACAC,EACAC,EAAY,GACZC,EAAY,GACPn3E,EAAI,EAAGA,EAAIgN,KAAKmE,IAAI2lE,EAAOh2E,OAAQi2E,EAAOj2E,QAASd,IAAK,CAC7D,IAAIk0E,EAAW4C,EAAO92E,GAClBm0E,EAAW4C,EAAO/2E,GAClBo3E,OAAc,EACdC,OAAc,EACbnD,EAIKC,GAMN6C,EADuCI,GAAvClzD,EAAK+vD,EAAaC,EAAUC,IAA4B,GAExD8C,EAF4DI,EAAcnzD,EAAG,KAJ7EmzD,EAAc5C,EAAcwC,GAAgB/C,EAAUA,GACtDkD,EAAclD,IALdkD,EAAc3C,EAAcuC,GAAgB7C,EAAUA,GACtDkD,EAAclD,GAWlB+C,EAAU7zE,KAAK+zE,GACfD,EAAU9zE,KAAKg0E,EACnB,CACA,MAAO,CAACH,EAAWC,EACvB,CAoLaG,CAAkBtJ,EAAmB4I,GAAgB5I,EAAmB6I,IAAeU,EAAmBrzD,EAAG,GAAIszD,EAAiBtzD,EAAG,GAC1IuzD,EAAoBf,EAASrzC,uBAC7Bq0C,EAAkBf,EAAOtzC,uBAI7Bo0C,GAAqBpB,EAAwBkB,EAAkBE,GAC/DC,GAAmBrB,EAAwBmB,EAAgBE,GAC3D5B,EAAoBa,EAAQ,kBAAmB,CAAEnqC,QALjD,WACI7xC,KAAKc,UAAY,IACrB,IAIAk7E,EAAOl7E,UAAY,KACnB,IAAIk8E,EAtIR,SAAkCC,EAASC,EAAOC,EAAsBC,GAGpE,IAFA,IACIC,EADAzgC,EAAS,GAEJv3C,EAAI,EAAGA,EAAI43E,EAAQ92E,OAAQd,IAAK,CACrC,IAAIi4E,EAAoBL,EAAQ53E,GAC5Bk4E,EAAkBL,EAAM73E,GACxBm1E,EAASL,EAASmD,GAClB7C,EAAON,EAASoD,GACI,MAApBF,IACAA,EAAmB7C,EAAO,GAAK,GAAMC,EAAK,GAAK,GAEnD,IAAI+C,EAAuB,GACvBC,EAAqB,GACrBC,EAAY,EACZ/C,EAAYp3D,IACZo6D,EAAS,GACT70E,EAAMw0E,EAAkBn3E,OACxBk3E,IACAC,EAAoB7uE,EAAQ6uE,IAIhC,IAFA,IAAI95E,EAAgF,EAAvE62E,EAAmBiD,EAAmBC,EAAiB/C,EAAQC,GACxEzkE,EAAOlN,EAAM,EACR0H,EAAI,EAAGA,EAAIwF,EAAMxF,GAAK,EAAG,CAC9B,IAAIhH,GAAOhG,EAASgN,GAAKwF,EAAO,EAChCwnE,EAAqBhtE,EAAI,GAAK8sE,EAAkB9zE,GAAOgxE,EAAO,GAC9DgD,EAAqBhtE,EAAI,GAAK8sE,EAAkB9zE,EAAM,GAAKgxE,EAAO,EACtE,CAGA,GAFAgD,EAAqB,GAAKF,EAAkB95E,GAAUg3E,EAAO,GAC7DgD,EAAqB,GAAKF,EAAkB95E,EAAS,GAAKg3E,EAAO,GAC7D2C,EAAuB,EAEvB,IADA,IAAItoE,EAAOuoE,EAAmBD,EACrB9jD,GAAS+jD,EAAmB,EAAG/jD,GAAS+jD,EAAmB,EAAG/jD,GAASxkB,EAAM,CAClF,IAAI+oE,EAAKvrE,KAAKI,IAAI4mB,GACdwkD,EAAKxrE,KAAKC,IAAI+mB,GACdyhD,EAAQ,EACZ,IAAStqE,EAAI,EAAGA,EAAI8sE,EAAkBn3E,OAAQqK,GAAK,EAAG,CAClD,IAAIgnB,EAAKgmD,EAAqBhtE,GAC1BinB,EAAK+lD,EAAqBhtE,EAAI,GAC9BknB,EAAK6lD,EAAgB/sE,GAAKiqE,EAAK,GAC/B9iD,EAAK4lD,EAAgB/sE,EAAI,GAAKiqE,EAAK,GACnCqD,EAAQpmD,EAAKmmD,EAAKlmD,EAAKimD,EACvBG,EAAQrmD,EAAKkmD,EAAKjmD,EAAKkmD,EAC3BF,EAAOntE,GAAKstE,EACZH,EAAOntE,EAAI,GAAKutE,EAChB,IAAIt9E,EAAKq9E,EAAQtmD,EACb92B,EAAKq9E,EAAQtmD,EACjBqjD,GAASr6E,EAAKA,EAAKC,EAAKA,CAC5B,CACA,GAAIo6E,EAAQH,EAAW,CACnBA,EAAYG,EACZ4C,EAAYrkD,EACZ,IAAK,IAAIx4B,EAAI,EAAGA,EAAI88E,EAAOx3E,OAAQtF,IAC/B48E,EAAmB58E,GAAK88E,EAAO98E,EAEvC,CACJ,MAGA,IAAK,IAAIqrB,EAAM,EAAGA,EAAMpjB,EAAKojB,GAAO,EAChCuxD,EAAmBvxD,GAAOqxD,EAAgBrxD,GAAOuuD,EAAK,GACtDgD,EAAmBvxD,EAAM,GAAKqxD,EAAgBrxD,EAAM,GAAKuuD,EAAK,GAGtE79B,EAAOl0C,KAAK,CACRs0C,KAAMwgC,EACNQ,GAAIP,EACJjD,OAAQA,EACRC,KAAMA,EACNz3E,UAAW06E,GAEnB,CACA,OAAO9gC,CACX,CA8DuBqhC,CAAyBrB,EAAkBC,EAAgB,GAAIxqE,KAAKE,IACnForE,EAAS,GACbxC,EAAoBa,EAAQ,YAAa,CAAEnqC,QAAS,SAAUvf,GAItD,IAHA,IAAIiH,EAAIyiD,EAAOkC,SACX72C,EAAO,EAAI9N,EACX4kD,EAAQ,GACH94E,EAAI,EAAGA,EAAI23E,EAAa72E,OAAQd,IAAK,CAC1C,IAAIghE,EAAO2W,EAAa33E,GACpB23C,EAAOqpB,EAAKrpB,KACZghC,EAAK3X,EAAK2X,GACV3kD,EAAQgtC,EAAKrjE,SAAWu2B,EACxBihD,EAASnU,EAAKmU,OACdC,EAAOpU,EAAKoU,KACZmD,EAAKvrE,KAAKI,IAAI4mB,GACdwkD,EAAKxrE,KAAKC,IAAI+mB,IAClB,QAAK8kD,EAAO3D,EAAQC,EAAMlhD,GAC1B,IAAK,IAAI14B,EAAI,EAAGA,EAAIm8C,EAAK72C,OAAQtF,GAAK,EAAG,CACrC,IAAIu9E,EAAOphC,EAAKn8C,GACZw9E,EAAOrhC,EAAKn8C,EAAI,GAGhB6B,EAAI07E,EAAO/2C,GAFX3P,EAAKsmD,EAAGn9E,IAEe04B,EACvB52B,EAAI07E,EAAOh3C,GAFX1P,EAAKqmD,EAAGn9E,EAAI,IAEW04B,EAC3BokD,EAAO98E,GAAM6B,EAAIm7E,EAAKl7E,EAAIi7E,EAAMO,EAAM,GACtCR,EAAO98E,EAAI,GAAM6B,EAAIk7E,EAAKj7E,EAAIk7E,EAAMM,EAAM,EAC9C,CACA,IAAI3mD,EAAKmmD,EAAO,GACZlmD,EAAKkmD,EAAO,GAChBrrD,EAAK2Q,OAAOzL,EAAIC,GAChB,IAAS52B,EAAI,EAAGA,EAAIm8C,EAAK72C,QAAS,CAC9B,IAAIuxB,EAAKimD,EAAO98E,KACZ82B,EAAKgmD,EAAO98E,KACZia,EAAK6iE,EAAO98E,KACZka,EAAK4iE,EAAO98E,KACZ6iC,EAAKi6C,EAAO98E,KACZ8iC,EAAKg6C,EAAO98E,KACZ22B,IAAOE,GAAMD,IAAOE,GAAM7c,IAAO4oB,GAAM3oB,IAAO4oB,EAC9CrR,EAAK8Q,OAAOM,EAAIC,GAGhBrR,EAAKmR,cAAc/L,EAAIC,EAAI7c,EAAIC,EAAI2oB,EAAIC,GAE3CnM,EAAKkM,EACLjM,EAAKkM,CACT,CACJ,CACJ,GACR,CACO,SAAS26C,EAAUvC,EAAUC,EAAQuC,GACxC,IAAKxC,IAAaC,EACd,OAAOA,EAEX,IAAIwC,EAAUD,EAAc7xE,KACxB+xE,EAAYF,EAAc/xE,OAsB9B,OArBAsvE,EAAiBC,EAAUC,GAC3BA,EAAOkC,SAAW,EAQlBlC,EAAO/uE,UAAU,CACbixE,SAAU,IACX,QAAS,CACR1xE,OAAQ,SAAU8G,GACd0oE,EAAOz5B,aACPk8B,GAAaA,EAAUnrE,EAC3B,EACA5G,KAAM,WAbN+uE,EAAcO,EAAQ,aACtBP,EAAcO,EAAQ,mBACtBA,EAAOkC,UAAY,EACnBlC,EAAOzpD,kBACPypD,EAAOz5B,aAWHi8B,GAAWA,GACf,GACDD,IACIvC,CACX,CACA,SAAS0C,EAAQh8E,EAAGC,EAAGg8E,EAAMC,EAAMpjD,EAAMC,GAErC/4B,EAAK84B,IAASmjD,EAAQ,EAAItsE,KAAKovB,MAAM,OAAS/+B,EAAIi8E,IAASnjD,EAAOmjD,IAClEh8E,EAAK84B,IAASmjD,EAAQ,EAAIvsE,KAAKovB,MAAM,OAAS9+B,EAAIi8E,IAASnjD,EAAOmjD,IAGlE,IAFA,IACI9mD,EADA6M,EAAI,EAECvxB,EAAI,MAAiBA,EAAI,EAAGA,GAAK,EAAG,CACzC,IAAIiyB,EAAK,EACLC,EAAK,GACJ5iC,EAAI0Q,GAAK,IACViyB,EAAK,IAEJ1iC,EAAIyQ,GAAK,IACVkyB,EAAK,GAETX,GAAKvxB,EAAIA,GAAM,EAAIiyB,EAAMC,GACd,IAAPA,IACW,IAAPD,IACA3iC,EAAI0Q,EAAI,EAAI1Q,EACZC,EAAIyQ,EAAI,EAAIzQ,GAEhBm1B,EAAMp1B,EACNA,EAAIC,EACJA,EAAIm1B,EAEZ,CACA,OAAO6M,CACX,CACA,SAASk6C,EAAUC,GACf,IAAIC,EAAOx7D,IACPy7D,EAAOz7D,IACP07D,GAAQ17D,IACR27D,GAAQ37D,IACRo0C,GAAM,QAAImnB,GAAU,SAAUxsD,GAC9B,IAAIrP,EAAOqP,EAAK/vB,kBACZ1B,EAAIyxB,EAAKoW,uBACThmC,EAAIugB,EAAKvgB,EAAIugB,EAAK9f,MAAQ,GAAKtC,EAAIA,EAAE,GAAK,GAC1C8B,EAAIsgB,EAAKtgB,EAAIsgB,EAAK7f,OAAS,GAAKvC,EAAIA,EAAE,GAAK,GAK/C,OAJAk+E,EAAO1sE,KAAK4C,IAAIvS,EAAGq8E,GACnBC,EAAO3sE,KAAK4C,IAAItS,EAAGq8E,GACnBC,EAAO5sE,KAAKmE,IAAI9T,EAAGu8E,GACnBC,EAAO7sE,KAAKmE,IAAI7T,EAAGu8E,GACZ,CAACx8E,EAAGC,EACf,IAQA,OAPY,QAAIg1D,GAAK,SAAUwnB,EAAI31E,GAC/B,MAAO,CACH21E,GAAIA,EACJv2D,EAAG81D,EAAQS,EAAG,GAAIA,EAAG,GAAIJ,EAAMC,EAAMC,EAAMC,GAC3C5sD,KAAMwsD,EAASt1E,GAEvB,IACa2P,MAAK,SAAU9F,EAAG+F,GAAK,OAAO/F,EAAEuV,EAAIxP,EAAEwP,CAAG,IAAG8V,KAAI,SAAU2nC,GAAQ,OAAOA,EAAK/zC,IAAM,GACrG,CAEA,SAAS8sD,EAAkBC,GACvB,OAAO5gE,EAAM4gE,EAAM/sD,KAAM+sD,EAAMpK,MACnC,CAQO,SAASqK,EAAaC,EAAUvD,EAAQuC,GAC3C,IAAIiB,EAAe,IACnB,SAASC,EAAYF,GACjB,IAAK,IAAIl6E,EAAI,EAAGA,EAAIk6E,EAASp5E,OAAQd,IAAK,CACtC,IAAI23C,EAAOuiC,EAASl6E,GAChB21E,EAAkBh+B,GAClByiC,EAAYziC,EAAKwI,eAEZxI,aAAgBoM,EAAA,IACrBo2B,EAAa92E,KAAKs0C,EAE1B,CACJ,CACAyiC,CAAYF,GACZ,IAAIG,EAAgBF,EAAar5E,OACjC,IAAKu5E,EACD,MAtBG,CACHC,gBAAiB,GACjBC,cAAe,GACf3K,MAAO,GAqBX,IACI4K,GADatB,EAAcuB,YAAcV,GACd,CAC3B9sD,KAAM0pD,EAAQ/G,MAAOyK,IAEzB,GAAIG,EAAc15E,SAAWu5E,EAEzB,MA9BG,CACHC,gBAAiB,GACjBC,cAAe,GACf3K,MAAO,GA6BXuK,EAAeX,EAAUW,GACzBK,EAAgBhB,EAAUgB,GAK1B,IAJA,IAAIrB,EAAUD,EAAc7xE,KACxB+xE,EAAYF,EAAc/xE,OAC1BuzE,EAAkBxB,EAAcwB,gBAChCC,EAAoB,IAAIr4C,EAAA,GACnBtiC,EAAI,EAAGA,EAAIq6E,EAAer6E,IAAK,CACpC,IAAI23C,EAAOwiC,EAAan6E,GACpB24E,EAAK6B,EAAcx6E,GACvB24E,EAAG/7E,OAAS+5E,EACZgC,EAAG77E,cAAc69E,GACZD,GACDjE,EAAiB9+B,EAAMghC,EAE/B,CAKA,SAASiC,EAAqBr1E,GAC1B,IAAK,IAAIvF,EAAI,EAAGA,EAAIw6E,EAAc15E,OAAQd,IACtCw6E,EAAcx6E,GAAGwF,YAAYD,EAErC,CAaA,SAASs1E,IACLlE,EAAOf,qBAAsB,EAC7Be,EAAOkC,UAAY,EACnBlC,EAAOx2B,YAAc,KACrBi2B,EAAcO,EAAQ,eACtBP,EAAcO,EAAQ,mBAC1B,CA3BAA,EAAOf,qBAAsB,EAC7Be,EAAOx2B,YAAc,WACjB,OAAOq6B,CACX,EAMA1E,EAAoBa,EAAQ,cAAe,CACvCR,MAAO,SAAU5wE,GACbq1E,EAAqBr1E,EACzB,IAEJuwE,EAAoBa,EAAQ,mBAAoB,CAC5CR,MAAO,SAAU5wE,GACb,IAAK,IAAIvF,EAAI,EAAGA,EAAIw6E,EAAc15E,OAAQd,IACtCw6E,EAAcx6E,GAAG0F,iBAAiBH,EAE1C,IASJ,IAAIu1E,EAAQN,EAAc15E,OAC1B,GAAI45E,EACA,KAAIK,EAAcD,EACdE,EAAW,WAES,MADpBD,IAEIF,IACA1B,GAAWA,IAEnB,EACA,IAASn5E,EAAI,EAAGA,EAAI86E,EAAO96E,IAAK,CAC5B,IAAIi7E,EAAyBP,GAAkB,QAAS,CACpD7vE,OAAQquE,EAAcruE,OAAS,GAAK6vE,EAAgB16E,EAAG86E,EAAOX,EAAan6E,GAAIw6E,EAAcx6E,IAC7FqH,KAAM2zE,GACP9B,GAAiBA,EACpBD,EAAUkB,EAAan6E,GAAIw6E,EAAcx6E,GAAIi7E,EACjD,CAduB,MAiBvBtE,EAAOkC,SAAW,EAClBlC,EAAO/uE,UAAU,CACbixE,SAAU,IACX,QAAS,CACR1xE,OAAQ,SAAU8G,GACd,IAAK,IAAIjO,EAAI,EAAGA,EAAI86E,EAAO96E,IAAK,CAC5B,IAAIwgD,EAAQg6B,EAAcx6E,GAC1BwgD,EAAMq4B,SAAWlC,EAAOkC,SACxBr4B,EAAMtD,YACV,CACAk8B,GAAaA,EAAUnrE,EAC3B,EACA5G,KAAM,WACFwzE,IACA,IAAK,IAAI76E,EAAI,EAAGA,EAAIk6E,EAASp5E,OAAQd,IACjCo2E,EAAc8D,EAASl6E,GAAI,mBAE/Bm5E,GAAWA,GACf,GACDD,IAKP,OAHIvC,EAAOl3E,MACPm7E,EAAqBjE,EAAOl3E,MAEzB,CACH66E,gBAAiBH,EACjBI,cAAeC,EACf5K,MAAOkL,EAEf,CACO,SAASI,EAAcxE,EAAUyE,EAAYjC,GAChD,IAAI4B,EAAQK,EAAWr6E,OACnBq5E,EAAe,GACfM,EAAavB,EAAcuB,YAAcV,EAY7C,GAAIpE,EAAkBe,GAAW,EAXjC,SAAS0D,EAAYF,GACjB,IAAK,IAAIl6E,EAAI,EAAGA,EAAIk6E,EAASp5E,OAAQd,IAAK,CACtC,IAAI23C,EAAOuiC,EAASl6E,GAChB21E,EAAkBh+B,GAClByiC,EAAYziC,EAAKwI,eAEZxI,aAAgBoM,EAAA,IACrBo2B,EAAa92E,KAAKs0C,EAE1B,CACJ,CAEIyiC,CAAY1D,EAASv2B,eACrB,IAAIi7B,EAAUjB,EAAar5E,OAC3B,GAAIs6E,EAAUN,EAEV,IADA,IAAI3vE,EAAI,EACCnL,EAAIo7E,EAASp7E,EAAI86E,EAAO96E,IAC7Bm6E,EAAa92E,MAAK,QAAU82E,EAAahvE,IAAMiwE,KAGvDjB,EAAar5E,OAASg6E,CAC1B,KACK,CACDX,EAAeM,EAAW,CAAExtD,KAAMypD,EAAU9G,MAAOkL,IACnD,IAAIrD,EAAoBf,EAASrzC,uBACjC,IAASrjC,EAAI,EAAGA,EAAIm6E,EAAar5E,OAAQd,IACrCm6E,EAAan6E,GAAGwjC,kBAAkBi0C,GAEtC,GAAI0C,EAAar5E,SAAWg6E,EAExB,MA9JD,CACHR,gBAAiB,GACjBC,cAAe,GACf3K,MAAO,EA6JX,CACAuK,EAAeX,EAAUW,GACzBgB,EAAa3B,EAAU2B,GACvB,IAAIT,EAAkBxB,EAAcwB,gBACpC,IAAS16E,EAAI,EAAGA,EAAI86E,EAAO96E,IAAK,CAC5B,IAAIi7E,EAAyBP,GAAkB,QAAS,CACpD7vE,OAAQquE,EAAcruE,OAAS,GAAK6vE,EAAgB16E,EAAG86E,EAAOX,EAAan6E,GAAIm7E,EAAWn7E,KAC3Fk5E,GAAiBA,EACpBD,EAAUkB,EAAan6E,GAAIm7E,EAAWn7E,GAAIi7E,EAC9C,CACA,MAAO,CACHX,gBAAiBH,EACjBI,cAAeY,EACfvL,MAAOuL,EAAWr6E,OAE1B,sFChkBIu6E,sKACAC,EAAmC,CACnC,KAAQ,OACR,OAAU,SACV,eAAgB,YAChB,QAAW,UACX,eAAgB,cAChB,iBAAkB,gBAClB,mBAAoB,WACpB,oBAAqB,iBACrB,iBAAkB,UAClB,kBAAmB,WACnB,oBAAqB,aACrB,cAAe,aACf,YAAa,WACb,aAAc,YACd,cAAe,aACf,cAAe,YACf,WAAc,aACd,QAAW,WAEXC,GAAwC,QAAKD,GAC7CE,EAA4B,CAC5B,qBAAsB,eACtB,aAAc,aAEdC,GAAiC,QAAKD,GACtCE,EAAa,WACb,SAASA,IACL/gF,KAAKghF,MAAQ,CAAC,EACdhhF,KAAKihF,MAAQ,IACjB,CAgTA,OA/SAF,EAAUzgF,UAAU8wE,MAAQ,SAAU8P,EAAKzrC,GACvCA,EAAMA,GAAO,CAAC,EACd,IAAI0rC,GAAM,OAASD,GAMnBlhF,KAAKohF,gBAAkB,GACvB,IAAIj7D,EAAO,IAAI,IACfnmB,KAAKihF,MAAQ96D,EACb,IAAIk7D,EAAQ,GACRC,EAAUH,EAAII,aAAa,YAAc,GACzCp+E,EAAQyzB,WAAYuqD,EAAII,aAAa,UAAY9rC,EAAItyC,OACrDC,EAASwzB,WAAYuqD,EAAII,aAAa,WAAa9rC,EAAIryC,QAC3DyT,MAAM1T,KAAWA,EAAQ,MACzB0T,MAAMzT,KAAYA,EAAS,MAC3Bo+E,EAAgBL,EAAKh7D,EAAM,MAAM,GAAM,GAEvC,IADA,IAOIs7D,EACAC,EARA77B,EAAQs7B,EAAIr1D,WACT+5B,GACH7lD,KAAK2hF,WAAW97B,EAAO1/B,EAAMk7D,EAAO,MAAM,GAAO,GACjDx7B,EAAQA,EAAMj6B,YAMlB,GA8bR,SAAmB81C,EAAMkgB,GACrB,IAAK,IAAIv8E,EAAI,EAAGA,EAAIu8E,EAAez7E,OAAQd,IAAK,CAC5C,IAAIghE,EAAOub,EAAev8E,GAC1BghE,EAAK,GAAGpmD,MAAMomD,EAAK,IAAM3E,EAAK2E,EAAK,GACvC,CACJ,CAvcQwb,CAAU7hF,KAAKghF,MAAOhhF,KAAKohF,iBAC3BphF,KAAKohF,gBAAkB,GAGnBE,EAAS,CACT,IAAIQ,EAAaC,EAAoBT,GACjCQ,EAAW37E,QAAU,IACrBs7E,EAAc,CACV/+E,EAAGk0B,WAAYkrD,EAAW,IAAM,GAChCn/E,EAAGi0B,WAAYkrD,EAAW,IAAM,GAChC3+E,MAAOyzB,WAAWkrD,EAAW,IAC7B1+E,OAAQwzB,WAAWkrD,EAAW,KAG1C,CACA,GAAIL,GAAwB,MAATt+E,GAA2B,MAAVC,IAChCs+E,EAAmBM,EAAqBP,EAAa,CAAE/+E,EAAG,EAAGC,EAAG,EAAGQ,MAAOA,EAAOC,OAAQA,KACpFqyC,EAAIwsC,eAAe,CACpB,IAAIC,EAAS/7D,GACbA,EAAO,IAAI,KACNwgB,IAAIu7C,GACTA,EAAO58D,OAAS48D,EAAO38D,OAASm8D,EAAiBr/D,MACjD6/D,EAAOx/E,EAAIg/E,EAAiBh/E,EAC5Bw/E,EAAOv/E,EAAI++E,EAAiB/+E,CAChC,CAOJ,OALK8yC,EAAI0sC,gBAA2B,MAATh/E,GAA2B,MAAVC,GACxC+iB,EAAKtgB,YAAY,IAAI,IAAK,CACtB0rB,MAAO,CAAE7uB,EAAG,EAAGC,EAAG,EAAGQ,MAAOA,EAAOC,OAAQA,MAG5C,CACH+iB,KAAMA,EACNhjB,MAAOA,EACPC,OAAQA,EACRq+E,YAAaA,EACbC,iBAAkBA,EAClBL,MAAOA,EAEf,EACAN,EAAUzgF,UAAUqhF,WAAa,SAAUS,EAASC,EAAahB,EAAOiB,EAAWC,EAAUC,GACzF,IACIj2E,EADAoa,EAAWy7D,EAAQz7D,SAASm5C,cAE5B2iB,EAAkBH,EAOtB,GANiB,SAAb37D,IACA47D,GAAW,GAEE,SAAb57D,IACA67D,GAAW,GAEE,SAAb77D,GAAoC,WAAbA,EACvBpa,EAAK81E,MAEJ,CACD,IAAKE,EAAU,CACX,IAAIG,EAAWhC,EAAY/5D,GAC3B,GAAI+7D,IAAY,QAAOhC,EAAa/5D,GAAW,CAC3Cpa,EAAKm2E,EAAS5yE,KAAK9P,KAAMoiF,EAASC,GAClC,IAAIM,EAAWP,EAAQb,aAAa,QACpC,GAAIoB,EAAU,CACV,IAAIC,EAAW,CACXx7E,KAAMu7E,EACNL,UAAW,KACXO,gBAAiBl8D,EACjBpa,GAAIA,GAER80E,EAAM34E,KAAKk6E,GACM,MAAbj8D,IACA87D,EAAkBG,EAE1B,MACSN,GACLjB,EAAM34E,KAAK,CACPtB,KAAMk7E,EAAUl7E,KAChBk7E,UAAWA,EACXO,gBAAiBl8D,EACjBpa,GAAIA,IAGZ81E,EAAY17C,IAAIp6B,EACpB,CACJ,CACA,IAAIu2E,EAASC,EAAmBp8D,GAChC,GAAIm8D,IAAU,QAAOC,EAAoBp8D,GAAW,CAChD,IAAIq8D,EAAMF,EAAOhzE,KAAK9P,KAAMoiF,GACxBniF,EAAKmiF,EAAQb,aAAa,MAC1BthF,IACAD,KAAKghF,MAAM/gF,GAAM+iF,EAEzB,CACJ,CACA,GAAIz2E,GAAMA,EAAGkB,QAET,IADA,IAAIo4C,EAAQu8B,EAAQt2D,WACb+5B,GACoB,IAAnBA,EAAMzG,SACNp/C,KAAK2hF,WAAW97B,EAAOt5C,EAAI80E,EAAOoB,EAAiBF,EAAUC,GAErC,IAAnB38B,EAAMzG,UAAkBojC,GAC7BxiF,KAAKijF,WAAWp9B,EAAOt5C,GAE3Bs5C,EAAQA,EAAMj6B,WAG1B,EACAm1D,EAAUzgF,UAAU2iF,WAAa,SAAUb,EAASC,GAChD,IAAInuD,EAAO,IAAI,IAAM,CACjBjU,MAAO,CACHiU,KAAMkuD,EAAQ75E,aAElBiF,QAAQ,EACR9K,EAAG1C,KAAKkjF,QAAU,EAClBvgF,EAAG3C,KAAKmjF,QAAU,IAEtBC,EAAaf,EAAanuD,GAC1BstD,EAAgBY,EAASluD,EAAMl0B,KAAKohF,iBAAiB,GAAO,GAiSpE,SAA4BltD,EAAMmuD,GAC9B,IAAIgB,EAAkBhB,EAAYiB,YAClC,GAAID,EAAiB,CACjB,IAAIjvD,EAAeivD,EAAgBjvD,aAC/BmvD,EAAiBnvD,EAChBA,GAAiC,SAAjBA,EAGK,aAAjBA,EACLmvD,EAAiB,aAEK,gBAAjBnvD,GAAmD,qBAAjBA,EACvCmvD,EAAiB,MAEK,eAAjBnvD,GAAkD,oBAAjBA,EACtCmvD,EAAiB,SAEK,YAAjBnvD,GAA+C,iBAAjBA,IACnCmvD,EAAiB,UAZjBA,EAAiB,aAcrBrvD,EAAKjU,MAAMmU,aAAemvD,CAC9B,CACA,IAAIC,EAAuBnB,EAAYoB,iBACvC,GAAID,EAAsB,CACtB,IAAI1hF,EAAY0hF,EAAqB1hF,UACjC4hF,EAAc5hF,EACdA,IACkB,WAAdA,IACA4hF,EAAc,UAElBxvD,EAAKjU,MAAMne,UAAY4hF,EAE/B,CACJ,CAjUQC,CAAmBzvD,EAAMmuD,GACzB,IAAIuB,EAAY1vD,EAAKjU,MACjBs4B,EAAWqrC,EAAUrrC,SACrBA,GAAYA,EAAW,IACvBqrC,EAAUrrC,SAAW,EACrBrkB,EAAK5O,QAAUizB,EAAW,EAC1BrkB,EAAK3O,QAAUgzB,EAAW,GAE9B,IAAIpkB,GAAQyvD,EAAUrrC,UAAYqrC,EAAU9tB,aAAe,CACvD8tB,EAAUjuB,UACViuB,EAAUhuB,YACTguB,EAAUrrC,UAAY,IAAM,KAC7BqrC,EAAU9tB,YAAc,cAC1B1sD,KAAK,KACPw6E,EAAUzvD,KAAOA,EACjB,IAAIlR,EAAOiR,EAAK3xB,kBAGhB,OAFAvC,KAAKkjF,QAAUjgE,EAAK9f,MACpBk/E,EAAY17C,IAAIzS,GACTA,CACX,EACA6sD,EAAU8C,mBACNnD,EAAc,CACV,EAAK,SAAU0B,EAASC,GACpB,IAAIx9C,EAAI,IAAI,IAGZ,OAFAu+C,EAAaf,EAAax9C,GAC1B28C,EAAgBY,EAASv9C,EAAG7kC,KAAKohF,iBAAiB,GAAO,GAClDv8C,CACX,EACA,KAAQ,SAAUu9C,EAASC,GACvB,IAAIp/D,EAAO,IAAI,IAUf,OATAmgE,EAAaf,EAAap/D,GAC1Bu+D,EAAgBY,EAASn/D,EAAMjjB,KAAKohF,iBAAiB,GAAO,GAC5Dn+D,EAAKynC,SAAS,CACVhoD,EAAGk0B,WAAWwrD,EAAQb,aAAa,MAAQ,KAC3C5+E,EAAGi0B,WAAWwrD,EAAQb,aAAa,MAAQ,KAC3Cp+E,MAAOyzB,WAAWwrD,EAAQb,aAAa,UAAY,KACnDn+E,OAAQwzB,WAAWwrD,EAAQb,aAAa,WAAa,OAEzDt+D,EAAKzV,QAAS,EACPyV,CACX,EACA,OAAU,SAAUm/D,EAASC,GACzB,IAAIjc,EAAS,IAAI,IASjB,OARAgd,EAAaf,EAAajc,GAC1Bob,EAAgBY,EAAShc,EAAQpmE,KAAKohF,iBAAiB,GAAO,GAC9Dhb,EAAO1b,SAAS,CACZ5mB,GAAIlN,WAAWwrD,EAAQb,aAAa,OAAS,KAC7Cx9C,GAAInN,WAAWwrD,EAAQb,aAAa,OAAS,KAC7CvmE,EAAG4b,WAAWwrD,EAAQb,aAAa,MAAQ,OAE/Cnb,EAAO54D,QAAS,EACT44D,CACX,EACA,KAAQ,SAAUgc,EAASC,GACvB,IAAIz5B,EAAO,IAAI,IAUf,OATAw6B,EAAaf,EAAaz5B,GAC1B44B,EAAgBY,EAASx5B,EAAM5oD,KAAKohF,iBAAiB,GAAO,GAC5Dx4B,EAAK8B,SAAS,CACVhzB,GAAId,WAAWwrD,EAAQb,aAAa,OAAS,KAC7C5pD,GAAIf,WAAWwrD,EAAQb,aAAa,OAAS,KAC7CzmE,GAAI8b,WAAWwrD,EAAQb,aAAa,OAAS,KAC7CxmE,GAAI6b,WAAWwrD,EAAQb,aAAa,OAAS,OAEjD34B,EAAKp7C,QAAS,EACPo7C,CACX,EACA,QAAW,SAAUw5B,EAASC,GAC1B,IAAI97C,EAAU,IAAI,IAUlB,OATA68C,EAAaf,EAAa97C,GAC1Bi7C,EAAgBY,EAAS77C,EAASvmC,KAAKohF,iBAAiB,GAAO,GAC/D76C,EAAQmkB,SAAS,CACb5mB,GAAIlN,WAAWwrD,EAAQb,aAAa,OAAS,KAC7Cx9C,GAAInN,WAAWwrD,EAAQb,aAAa,OAAS,KAC7Cl8C,GAAIzO,WAAWwrD,EAAQb,aAAa,OAAS,KAC7Cj8C,GAAI1O,WAAWwrD,EAAQb,aAAa,OAAS,OAEjDh7C,EAAQ/4B,QAAS,EACV+4B,CACX,EACA,QAAW,SAAU67C,EAASC,GAC1B,IACIyB,EADAC,EAAY3B,EAAQb,aAAa,UAEjCwC,IACAD,EAAYE,EAAYD,IAE5B,IAAIxd,EAAU,IAAI,IAAQ,CACtBh1C,MAAO,CACH/S,OAAQslE,GAAa,IAEzBt2E,QAAQ,IAIZ,OAFA41E,EAAaf,EAAa9b,GAC1Bib,EAAgBY,EAAS7b,EAASvmE,KAAKohF,iBAAiB,GAAO,GACxD7a,CACX,EACA,SAAY,SAAU6b,EAASC,GAC3B,IACIyB,EADAC,EAAY3B,EAAQb,aAAa,UAEjCwC,IACAD,EAAYE,EAAYD,IAE5B,IAAIzd,EAAW,IAAI,IAAS,CACxB/0C,MAAO,CACH/S,OAAQslE,GAAa,IAEzBt2E,QAAQ,IAIZ,OAFA41E,EAAaf,EAAa/b,GAC1Bkb,EAAgBY,EAAS9b,EAAUtmE,KAAKohF,iBAAiB,GAAO,GACzD9a,CACX,EACA,MAAS,SAAU8b,EAASC,GACxB,IAAI1Z,EAAM,IAAI,KAWd,OAVAya,EAAaf,EAAa1Z,GAC1B6Y,EAAgBY,EAASzZ,EAAK3oE,KAAKohF,iBAAiB,GAAO,GAC3DzY,EAAItkB,SAAS,CACTx1B,MAAOuzD,EAAQb,aAAa,eAAiBa,EAAQb,aAAa,QAClE7+E,GAAI0/E,EAAQb,aAAa,KACzB5+E,GAAIy/E,EAAQb,aAAa,KACzBp+E,OAAQi/E,EAAQb,aAAa,SAC7Bn+E,QAASg/E,EAAQb,aAAa,YAElC5Y,EAAIn7D,QAAS,EACNm7D,CACX,EACA,KAAQ,SAAUyZ,EAASC,GACvB,IAAI3/E,EAAI0/E,EAAQb,aAAa,MAAQ,IACjC5+E,EAAIy/E,EAAQb,aAAa,MAAQ,IACjC9gF,EAAK2hF,EAAQb,aAAa,OAAS,IACnC7gF,EAAK0hF,EAAQb,aAAa,OAAS,IACvCvhF,KAAKkjF,OAAStsD,WAAWl0B,GAAKk0B,WAAWn2B,GACzCT,KAAKmjF,OAASvsD,WAAWj0B,GAAKi0B,WAAWl2B,GACzC,IAAImkC,EAAI,IAAI,IAGZ,OAFAu+C,EAAaf,EAAax9C,GAC1B28C,EAAgBY,EAASv9C,EAAG7kC,KAAKohF,iBAAiB,GAAO,GAClDv8C,CACX,EACA,MAAS,SAAUu9C,EAASC,GACxB,IAAI3/E,EAAI0/E,EAAQb,aAAa,KACzB5+E,EAAIy/E,EAAQb,aAAa,KACpB,MAAL7+E,IACA1C,KAAKkjF,OAAStsD,WAAWl0B,IAEpB,MAALC,IACA3C,KAAKmjF,OAASvsD,WAAWj0B,IAE7B,IAAIlC,EAAK2hF,EAAQb,aAAa,OAAS,IACnC7gF,EAAK0hF,EAAQb,aAAa,OAAS,IACnC18C,EAAI,IAAI,IAKZ,OAJAu+C,EAAaf,EAAax9C,GAC1B28C,EAAgBY,EAASv9C,EAAG7kC,KAAKohF,iBAAiB,GAAO,GACzDphF,KAAKkjF,QAAUtsD,WAAWn2B,GAC1BT,KAAKmjF,QAAUvsD,WAAWl2B,GACnBmkC,CACX,EACA,KAAQ,SAAUu9C,EAASC,GACvB,IAAI19C,EAAIy9C,EAAQb,aAAa,MAAQ,GACjCjvD,GAAO,QAAiBqS,GAI5B,OAHAy+C,EAAaf,EAAa/vD,GAC1BkvD,EAAgBY,EAAS9vD,EAAMtyB,KAAKohF,iBAAiB,GAAO,GAC5D9uD,EAAK9kB,QAAS,EACP8kB,CACX,IAGDyuD,CACX,CArTgB,GAsTZgC,EAAqB,CACrB,eAAkB,SAAUX,GACxB,IAAI1qD,EAAKrB,SAAS+rD,EAAQb,aAAa,OAAS,IAAK,IACjD5pD,EAAKtB,SAAS+rD,EAAQb,aAAa,OAAS,IAAK,IACjDzmE,EAAKub,SAAS+rD,EAAQb,aAAa,OAAS,KAAM,IAClDxmE,EAAKsb,SAAS+rD,EAAQb,aAAa,OAAS,IAAK,IACjD0C,EAAW,IAAI,IAAevsD,EAAIC,EAAI7c,EAAIC,GAG9C,OAFAmpE,EAAqB9B,EAAS6B,GAC9BE,EAAwB/B,EAAS6B,GAC1BA,CACX,EACA,eAAkB,SAAU7B,GACxB,IAAIt+C,EAAKzN,SAAS+rD,EAAQb,aAAa,OAAS,IAAK,IACjDx9C,EAAK1N,SAAS+rD,EAAQb,aAAa,OAAS,IAAK,IACjDvmE,EAAIqb,SAAS+rD,EAAQb,aAAa,MAAQ,IAAK,IAC/C0C,EAAW,IAAI,IAAengD,EAAIC,EAAI/oB,GAG1C,OAFAkpE,EAAqB9B,EAAS6B,GAC9BE,EAAwB/B,EAAS6B,GAC1BA,CACX,GAEJ,SAASC,EAAqB9B,EAAS6B,GAEb,mBADF7B,EAAQb,aAAa,mBAErC0C,EAASppE,QAAS,EAE1B,CACA,SAASspE,EAAwB/B,EAAS6B,GAEtC,IADA,IAAIj3E,EAAOo1E,EAAQt2D,WACZ9e,GAAM,CACT,GAAsB,IAAlBA,EAAKoyC,UACoC,SAAtCpyC,EAAK2Z,SAASy9D,oBAAgC,CACjD,IAAIC,EAAYr3E,EAAKu0E,aAAa,UAC9B/9E,OAAS,EAETA,EADA6gF,GAAaA,EAAU1gF,QAAQ,KAAO,EAC7B0yB,SAASguD,EAAW,IAAM,IAE9BA,EACIztD,WAAWytD,GAGX,EAEb,IAAIC,EAAY,CAAC,EACjBC,EAAiBv3E,EAAMs3E,EAAWA,GAClC,IAAI5c,EAAY4c,EAAU5c,WACnB16D,EAAKu0E,aAAa,eAClB,UACP0C,EAASrrE,WAAWlQ,KAAK,CACrBlF,OAAQA,EACR+S,MAAOmxD,GAEf,CACA16D,EAAOA,EAAK4e,WAChB,CACJ,CACA,SAASw3D,EAAanhF,EAAQ4jD,GACtB5jD,GAAUA,EAAOwhF,mBACZ59B,EAAM49B,mBACP59B,EAAM49B,iBAAmB,CAAC,IAE9B,QAAS59B,EAAM49B,iBAAkBxhF,EAAOwhF,kBAEhD,CACA,SAASO,EAAYQ,GAGjB,IAFA,IAAIj8D,EAAOw5D,EAAoByC,GAC3BhmE,EAAS,GACJnZ,EAAI,EAAGA,EAAIkjB,EAAKpiB,OAAQd,GAAK,EAAG,CACrC,IAAI3C,EAAIk0B,WAAWrO,EAAKljB,IACpB1C,EAAIi0B,WAAWrO,EAAKljB,EAAI,IAC5BmZ,EAAO9V,KAAK,CAAChG,EAAGC,GACpB,CACA,OAAO6b,CACX,CACA,SAASgjE,EAAgBY,EAAS71E,EAAIq1E,EAAgB6C,EAAiBC,GACnE,IAAIC,EAAOp4E,EACPq4E,EAAiBD,EAAKlB,iBAAmBkB,EAAKlB,kBAAoB,CAAC,EACnEoB,EAAY,CAAC,EACQ,IAArBzC,EAAQhjC,WAsGhB,SAAiCgjC,EAAS9vC,GACtC,IAAIxxC,EAAYshF,EAAQb,aAAa,aACrC,GAAIzgF,EAAW,CACXA,EAAYA,EAAU+wC,QAAQ,KAAM,KACpC,IAAIizC,EAAiB,GACjBC,EAAK,KACTjkF,EAAU+wC,QAAQmzC,GAAgB,SAAUlzC,EAAKvkC,EAAM7H,GAEnD,OADAo/E,EAAep8E,KAAK6E,EAAM7H,GACnB,EACX,IACA,IAAK,IAAIL,EAAIy/E,EAAe3+E,OAAS,EAAGd,EAAI,EAAGA,GAAK,EAAG,CACnD,IAAIK,EAAQo/E,EAAez/E,GACvBkI,EAAOu3E,EAAez/E,EAAI,GAC1B4/E,EAAWlD,EAAoBr8E,GAEnC,OADAq/E,EAAKA,GAAM,OACHx3E,GACJ,IAAK,YACD,KAAiBw3E,EAAIA,EAAI,CAACnuD,WAAWquD,EAAS,IAAKruD,WAAWquD,EAAS,IAAM,OAC7E,MACJ,IAAK,QACD,KAAaF,EAAIA,EAAI,CAACnuD,WAAWquD,EAAS,IAAKruD,WAAWquD,EAAS,IAAMA,EAAS,MAClF,MACJ,IAAK,SACD,KAAcF,EAAIA,GAAKnuD,WAAWquD,EAAS,IAAMC,GACjD,MACJ,IAAK,QACD,IAAIrwD,EAAKxiB,KAAKo3B,IAAI7S,WAAWquD,EAAS,IAAMC,GAC5C,KAAWH,EAAI,CAAC,EAAG,EAAGlwD,EAAI,EAAG,EAAG,GAAIkwD,GACpC,MACJ,IAAK,QACD,IAAIjwD,EAAKziB,KAAKo3B,IAAI7S,WAAWquD,EAAS,IAAMC,GAC5C,KAAWH,EAAI,CAAC,EAAGjwD,EAAI,EAAG,EAAG,EAAG,GAAIiwD,GACpC,MACJ,IAAK,SACDA,EAAG,GAAKnuD,WAAWquD,EAAS,IAC5BF,EAAG,GAAKnuD,WAAWquD,EAAS,IAC5BF,EAAG,GAAKnuD,WAAWquD,EAAS,IAC5BF,EAAG,GAAKnuD,WAAWquD,EAAS,IAC5BF,EAAG,GAAKnuD,WAAWquD,EAAS,IAC5BF,EAAG,GAAKnuD,WAAWquD,EAAS,IAGxC,CACA3yC,EAAKzJ,kBAAkBk8C,EAC3B,CACJ,CAlJQI,CAAwB/C,EAAS71E,GACjCg4E,EAAiBnC,EAASwC,EAAgBC,GACrCJ,GAyKb,SAA6BrC,EAASgD,EAAwBC,GAC1D,IAAK,IAAIhgF,EAAI,EAAGA,EAAIu7E,EAAsCz6E,OAAQd,IAAK,CACnE,IAAIigF,EAAc1E,EAAsCv7E,GAEvC,OADbkgF,EAAYnD,EAAQb,aAAa+D,MAEjCF,EAAuBzE,EAAiC2E,IAAgBC,EAEhF,CACA,IAASlgF,EAAI,EAAGA,EAAIy7E,EAA+B36E,OAAQd,IAAK,CAC5D,IACIkgF,EADAD,EAAcxE,EAA+Bz7E,GAEhC,OADbkgF,EAAYnD,EAAQb,aAAa+D,MAEjCD,EAAgBxE,EAA0ByE,IAAgBC,EAElE,CACJ,CAvLYC,CAAoBpD,EAASwC,EAAgBC,IAGrDF,EAAK1kE,MAAQ0kE,EAAK1kE,OAAS,CAAC,EACD,MAAvB2kE,EAAelgF,OACfigF,EAAK1kE,MAAMvb,KAAO+gF,EAAmBd,EAAM,OAAQC,EAAelgF,KAAMk9E,IAE/C,MAAzBgD,EAAejgF,SACfggF,EAAK1kE,MAAMtb,OAAS8gF,EAAmBd,EAAM,SAAUC,EAAejgF,OAAQi9E,KAElF,QAAK,CACD,YAAa,UAAW,cAAe,gBAAiB,aAAc,aACvE,SAAUpqE,GACuB,MAA5BotE,EAAeptE,KACfmtE,EAAK1kE,MAAMzI,GAAYof,WAAWguD,EAAeptE,IAEzD,KACA,QAAK,CACD,iBAAkB,UAAW,WAAY,aAAc,aAAc,YAAa,cACnF,SAAUA,GACuB,MAA5BotE,EAAeptE,KACfmtE,EAAK1kE,MAAMzI,GAAYotE,EAAeptE,GAE9C,IACIktE,IACAC,EAAKrB,YAAcuB,GAEnBD,EAAel3D,WACfi3D,EAAK1kE,MAAMyN,UAAW,QAAIq0D,EAAoB6C,EAAel3D,WAAW,SAAUokB,GAC9E,OAAOlb,WAAWkb,EACtB,KAE8B,WAA9B8yC,EAAec,YAAyD,aAA9Bd,EAAec,aACzDf,EAAKvhC,WAAY,GAEU,SAA3BwhC,EAAe/3D,UACf83D,EAAKhlF,QAAS,EAEtB,CAmCA,IAAIgmF,EAAW,oBACf,SAASF,EAAmBl5E,EAAIq5E,EAAQ9zC,EAAK8vC,GACzC,IAAIiE,EAAW/zC,GAAOA,EAAImB,MAAM0yC,GAChC,IAAIE,EAQJ,MAHY,SAAR/zC,IACAA,EAAM,MAEHA,EAPH,IAAIg0C,GAAM,QAAKD,EAAS,IACxBjE,EAAel5E,KAAK,CAAC6D,EAAIq5E,EAAQE,GAOzC,CAOA,IAAIC,EAAY,sCAChB,SAAShE,EAAoBiE,GACzB,OAAOA,EAAO/yC,MAAM8yC,IAAc,EACtC,CACA,IAAIf,EAAiB,oEACjBE,EAAkB7yE,KAAKE,GAAK,IA+ChC,IAAI0zE,EAAa,6BACjB,SAAS1B,EAAiBnC,EAASgD,EAAwBC,GACvD,IAKIa,EALAjmE,EAAQmiE,EAAQb,aAAa,SACjC,GAAKthE,EAKL,IAFAgmE,EAAWzpD,UAAY,EAE6B,OAA5C0pD,EAAiBD,EAAW1nE,KAAK0B,KAAiB,CACtD,IAAIkmE,EAAaD,EAAe,GAC5BE,GAAuB,QAAOzF,EAAkCwF,GAC9DxF,EAAiCwF,GACjC,KACFC,IACAhB,EAAuBgB,GAAwBF,EAAe,IAElE,IAAIG,GAAgB,QAAOxF,EAA2BsF,GAChDtF,EAA0BsF,GAC1B,KACFE,IACAhB,EAAgBgB,GAAiBH,EAAe,GAExD,CACJ,CAiBO,SAASlE,EAAqBP,EAAar+D,GAC9C,IAAIkC,EAASlC,EAAajgB,MAAQs+E,EAAYt+E,MAC1CoiB,EAASnC,EAAahgB,OAASq+E,EAAYr+E,OAC3Cif,EAAQhQ,KAAK4C,IAAIqQ,EAAQC,GAC7B,MAAO,CACHlD,MAAOA,EACP3f,IAAK++E,EAAY/+E,EAAI++E,EAAYt+E,MAAQ,GAAKkf,GAASe,EAAa1gB,EAAI0gB,EAAajgB,MAAQ,GAC7FR,IAAK8+E,EAAY9+E,EAAI8+E,EAAYr+E,OAAS,GAAKif,GAASe,EAAazgB,EAAIygB,EAAahgB,OAAS,GAEvG,CACO,SAASkjF,EAASpF,EAAKzrC,GAE1B,OADa,IAAIsrC,GACH3P,MAAM8P,EAAKzrC,EAC7B,wECvnBO,SAAS8wC,EAASpF,IACjB,QAASA,KAETA,GADa,IAAIqF,WACJC,gBAAgBtF,EAAK,aAEtC,IAAIuF,EAAUvF,EAId,IAHyB,IAArBuF,EAAQtnC,WACRsnC,EAAUA,EAAQ56D,YAEoB,QAAnC46D,EAAQ//D,SAASm5C,eAAgD,IAArB4mB,EAAQtnC,UACvDsnC,EAAUA,EAAQ96D,YAEtB,OAAO86D,CACX,8KCZIrmD,EAAM2B,EAAA,EAAU3B,IAChB7hB,EAAS,CAAC,GAAI,GAAI,IAClBgtB,EAAWn5B,KAAKW,KAChB2zE,EAAYt0E,KAAKy2B,MACN,SAAS89C,EAAct0D,EAAMzxB,GACxC,GAAKA,EAAL,CAGA,IAEI4jC,EACAoiD,EACAxhF,EACA4Q,EACAzF,EACA8C,EAPAivB,EAAOjQ,EAAKiQ,KACZz5B,EAAMwpB,EAAKxpB,MAOXw3B,EAAID,EAAIC,EACRE,EAAIH,EAAIG,EACRD,EAAIF,EAAIE,EACRK,EAAIP,EAAIO,EACRF,EAAIL,EAAIK,EACRD,EAAIJ,EAAII,EACZ,IAAKp7B,EAAI,EAAG4Q,EAAI,EAAG5Q,EAAIyD,GAAM,CAIzB,OAHA27B,EAAMlC,EAAKl9B,KACX4Q,EAAI5Q,EACJwhF,EAAS,EACDpiD,GACJ,KAAKnE,EAGL,KAAKC,EACDsmD,EAAS,EACT,MACJ,KAAKrmD,EACDqmD,EAAS,EACT,MACJ,KAAKpmD,EACDomD,EAAS,EACT,MACJ,KAAKnmD,EACD,IAAIh+B,EAAI7B,EAAE,GACN8B,EAAI9B,EAAE,GACNg0B,EAAK2W,EAAS3qC,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACrCi0B,EAAK0W,EAAS3qC,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACrCw4B,EAAQstD,GAAW9lF,EAAE,GAAKi0B,EAAIj0B,EAAE,GAAKg0B,GACzC0N,EAAKl9B,IAAMwvB,EACX0N,EAAKl9B,MAAQ3C,EACb6/B,EAAKl9B,IAAMyvB,EACXyN,EAAKl9B,MAAQ1C,EACb4/B,EAAKl9B,MAAQwvB,EACb0N,EAAKl9B,MAAQyvB,EACbyN,EAAKl9B,MAAQg0B,EACbkJ,EAAKl9B,MAAQg0B,EAEbpjB,EADA5Q,GAAK,EAEL,MACJ,KAAKu7B,EACDttB,EAAE,GAAKivB,EAAKl9B,KACZiO,EAAE,GAAKivB,EAAKl9B,MACZ,QAAiBiO,EAAGA,EAAGzS,GACvB0hC,EAAKtsB,KAAO3C,EAAE,GACdivB,EAAKtsB,KAAO3C,EAAE,GACdA,EAAE,IAAMivB,EAAKl9B,KACbiO,EAAE,IAAMivB,EAAKl9B,MACb,QAAiBiO,EAAGA,EAAGzS,GACvB0hC,EAAKtsB,KAAO3C,EAAE,GACdivB,EAAKtsB,KAAO3C,EAAE,GAEtB,IAAK9C,EAAI,EAAGA,EAAIq2E,EAAQr2E,IAAK,CACzB,IAAIs2E,EAAMtoE,EAAOhO,GACjBs2E,EAAI,GAAKvkD,EAAKl9B,KACdyhF,EAAI,GAAKvkD,EAAKl9B,MACd,QAAiByhF,EAAKA,EAAKjmF,GAC3B0hC,EAAKtsB,KAAO6wE,EAAI,GAChBvkD,EAAKtsB,KAAO6wE,EAAI,EACpB,CACJ,CACAx0D,EAAKmQ,iBAtEL,CAuEJ,gBC3EI,EAAWpwB,KAAKW,KAChBkuB,EAAU7uB,KAAKI,IACfwuB,EAAU5uB,KAAKC,IACfC,EAAKF,KAAKE,GACd,SAASw0E,EAAKtwC,GACV,OAAOpkC,KAAKW,KAAKyjC,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAC5C,CAEA,SAASuwC,EAAOC,EAAGxwC,GACf,OAAQwwC,EAAE,GAAKxwC,EAAE,GAAKwwC,EAAE,GAAKxwC,EAAE,KAAOswC,EAAKE,GAAKF,EAAKtwC,GACzD,CAEA,SAASywC,EAAOD,EAAGxwC,GACf,OAAQwwC,EAAE,GAAKxwC,EAAE,GAAKwwC,EAAE,GAAKxwC,EAAE,IAAM,EAAI,GACnCpkC,KAAKy6B,KAAKk6C,EAAOC,EAAGxwC,GAC9B,CAEA,SAAS0wC,EAAWzvD,EAAIC,EAAI7c,EAAIC,EAAIqsE,EAAIC,EAAIhiD,EAAIC,EAAIgiD,EAAQ7iD,EAAKnS,GAC7D,IAAI8T,EAAMkhD,GAAU/0E,EAAK,KACrBg1E,EAAKtmD,EAAQmF,IAAQ1O,EAAK5c,GAAM,EAC9BomB,EAAQkF,IAAQzO,EAAK5c,GAAM,EAC7BysE,GAAM,EAAItmD,EAAQkF,IAAQ1O,EAAK5c,GAAM,EACnCmmB,EAAQmF,IAAQzO,EAAK5c,GAAM,EAC7B0sE,EAAUF,EAAKA,GAAOliD,EAAKA,GAAOmiD,EAAKA,GAAOliD,EAAKA,GACnDmiD,EAAS,IACTpiD,GAAM,EAASoiD,GACfniD,GAAM,EAASmiD,IAEnB,IAAI7iD,GAAKwiD,IAAOC,GAAM,EAAI,GACpB,GAAYhiD,EAAKA,GAAOC,EAAKA,GACvBD,EAAKA,GAAOmiD,EAAKA,GACjBliD,EAAKA,GAAOiiD,EAAKA,KAAUliD,EAAKA,GAAOmiD,EAAKA,GAC7CliD,EAAKA,GAAOiiD,EAAKA,MAAS,EACjCG,EAAM9iD,EAAIS,EAAKmiD,EAAKliD,EACpBqiD,EAAM/iD,GAAKU,EAAKiiD,EAAKliD,EACrBvB,GAAMpM,EAAK5c,GAAM,EACfmmB,EAAQmF,GAAOshD,EACfxmD,EAAQkF,GAAOuhD,EACjB5jD,GAAMpM,EAAK5c,GAAM,EACfmmB,EAAQkF,GAAOshD,EACfzmD,EAAQmF,GAAOuhD,EACjB96C,EAAQq6C,EAAO,CAAC,EAAG,GAAI,EAAEK,EAAKG,GAAOriD,GAAKmiD,EAAKG,GAAOriD,IACtD2hD,EAAI,EAAEM,EAAKG,GAAOriD,GAAKmiD,EAAKG,GAAOriD,GACnCmR,EAAI,GAAG,EAAI8wC,EAAKG,GAAOriD,IAAM,EAAImiD,EAAKG,GAAOriD,GAC7CkjB,EAAS0+B,EAAOD,EAAGxwC,GAOvB,GANIuwC,EAAOC,EAAGxwC,KAAO,IACjB+R,EAASj2C,GAETy0E,EAAOC,EAAGxwC,IAAM,IAChB+R,EAAS,GAETA,EAAS,EAAG,CACZ,IAAIzd,EAAI14B,KAAKovB,MAAM+mB,EAASj2C,EAAK,KAAO,IACxCi2C,EAAc,EAALj2C,EAAUw4B,EAAI,EAAKx4B,CAChC,CACA+f,EAAK6Q,QAAQsB,EAAKX,EAAIC,EAAIsB,EAAIC,EAAIuH,EAAO2b,EAAQpiB,EAAKihD,EAC1D,CACA,IAAIO,EAAa,mCACb7B,EAAY,sCAsNhB,IAAI8B,EAAW,SAAUxnE,GAErB,SAASwnE,IACL,OAAkB,OAAXxnE,GAAmBA,EAAOkd,MAAMv9B,KAAMm9B,YAAcn9B,IAC/D,CAEA,OALA,QAAU6nF,EAASxnE,GAInBwnE,EAAQvnF,UAAUkC,eAAiB,SAAU3B,GAAK,EAC3CgnF,CACX,CAPc,CAOZz+B,EAAA,IACF,SAAS0+B,EAAYx1D,GACjB,OAAuB,MAAhBA,EAAK+R,OAChB,CACA,SAAS0jD,EAAkBj2C,EAAK79B,GAC5B,IAAIu2C,EAjOR,SAAmCjoB,GAC/B,IAAIjQ,EAAO,IAAI0P,EAAA,EACf,IAAKO,EACD,OAAOjQ,EAEX,IAII01D,EAJAC,EAAM,EACNC,EAAM,EACNC,EAAWF,EACXG,EAAWF,EAEX7nD,EAAM2B,EAAA,EAAU3B,IAChBgoD,EAAU9lD,EAAK0Q,MAAM20C,GACzB,IAAKS,EACD,OAAO/1D,EAEX,IAAK,IAAIyK,EAAI,EAAGA,EAAIsrD,EAAQliF,OAAQ42B,IAAK,CAMrC,IALA,IAAIurD,EAAUD,EAAQtrD,GAClBwrD,EAASD,EAAQv5B,OAAO,GACxBtqB,OAAM,EACNnxB,EAAIg1E,EAAQr1C,MAAM8yC,IAAc,GAChCyC,EAAOl1E,EAAEnN,OACJd,EAAI,EAAGA,EAAImjF,EAAMnjF,IACtBiO,EAAEjO,GAAKuxB,WAAWtjB,EAAEjO,IAGxB,IADA,IAAIu3B,EAAM,EACHA,EAAM4rD,GAAM,CACf,IAAIC,OAAS,EACTC,OAAS,EACTrjD,OAAK,EACLC,OAAK,EACLc,OAAM,EACNghD,OAAK,EACLC,OAAK,EACL3vD,EAAKuwD,EACLtwD,EAAKuwD,EACLp/E,OAAM,EACN6/E,OAAW,EACf,OAAQJ,GACJ,IAAK,IACDN,GAAO30E,EAAEspB,KACTsrD,GAAO50E,EAAEspB,KACT6H,EAAMpE,EAAIE,EACVjO,EAAK6Q,QAAQsB,EAAKwjD,EAAKC,GACvB,MACJ,IAAK,IACDD,EAAM30E,EAAEspB,KACRsrD,EAAM50E,EAAEspB,KACR6H,EAAMpE,EAAIE,EACVjO,EAAK6Q,QAAQsB,EAAKwjD,EAAKC,GACvB,MACJ,IAAK,IACDD,GAAO30E,EAAEspB,KACTsrD,GAAO50E,EAAEspB,KACT6H,EAAMpE,EAAIC,EACVhO,EAAK6Q,QAAQsB,EAAKwjD,EAAKC,GACvBC,EAAWF,EACXG,EAAWF,EACXK,EAAS,IACT,MACJ,IAAK,IACDN,EAAM30E,EAAEspB,KACRsrD,EAAM50E,EAAEspB,KACR6H,EAAMpE,EAAIC,EACVhO,EAAK6Q,QAAQsB,EAAKwjD,EAAKC,GACvBC,EAAWF,EACXG,EAAWF,EACXK,EAAS,IACT,MACJ,IAAK,IACDN,GAAO30E,EAAEspB,KACT6H,EAAMpE,EAAIE,EACVjO,EAAK6Q,QAAQsB,EAAKwjD,EAAKC,GACvB,MACJ,IAAK,IACDD,EAAM30E,EAAEspB,KACR6H,EAAMpE,EAAIE,EACVjO,EAAK6Q,QAAQsB,EAAKwjD,EAAKC,GACvB,MACJ,IAAK,IACDA,GAAO50E,EAAEspB,KACT6H,EAAMpE,EAAIE,EACVjO,EAAK6Q,QAAQsB,EAAKwjD,EAAKC,GACvB,MACJ,IAAK,IACDA,EAAM50E,EAAEspB,KACR6H,EAAMpE,EAAIE,EACVjO,EAAK6Q,QAAQsB,EAAKwjD,EAAKC,GACvB,MACJ,IAAK,IACDzjD,EAAMpE,EAAIG,EACVlO,EAAK6Q,QAAQsB,EAAKnxB,EAAEspB,KAAQtpB,EAAEspB,KAAQtpB,EAAEspB,KAAQtpB,EAAEspB,KAAQtpB,EAAEspB,KAAQtpB,EAAEspB,MACtEqrD,EAAM30E,EAAEspB,EAAM,GACdsrD,EAAM50E,EAAEspB,EAAM,GACd,MACJ,IAAK,IACD6H,EAAMpE,EAAIG,EACVlO,EAAK6Q,QAAQsB,EAAKnxB,EAAEspB,KAASqrD,EAAK30E,EAAEspB,KAASsrD,EAAK50E,EAAEspB,KAASqrD,EAAK30E,EAAEspB,KAASsrD,EAAK50E,EAAEspB,KAASqrD,EAAK30E,EAAEspB,KAASsrD,GAC7GD,GAAO30E,EAAEspB,EAAM,GACfsrD,GAAO50E,EAAEspB,EAAM,GACf,MACJ,IAAK,IACD6rD,EAASR,EACTS,EAASR,EACTp/E,EAAMwpB,EAAKxpB,MACX6/E,EAAWr2D,EAAKiQ,KACZylD,IAAY3nD,EAAIG,IAChBioD,GAAUR,EAAMU,EAAS7/E,EAAM,GAC/B4/E,GAAUR,EAAMS,EAAS7/E,EAAM,IAEnC27B,EAAMpE,EAAIG,EACV9I,EAAKpkB,EAAEspB,KACPjF,EAAKrkB,EAAEspB,KACPqrD,EAAM30E,EAAEspB,KACRsrD,EAAM50E,EAAEspB,KACRtK,EAAK6Q,QAAQsB,EAAKgkD,EAAQC,EAAQhxD,EAAIC,EAAIswD,EAAKC,GAC/C,MACJ,IAAK,IACDO,EAASR,EACTS,EAASR,EACTp/E,EAAMwpB,EAAKxpB,MACX6/E,EAAWr2D,EAAKiQ,KACZylD,IAAY3nD,EAAIG,IAChBioD,GAAUR,EAAMU,EAAS7/E,EAAM,GAC/B4/E,GAAUR,EAAMS,EAAS7/E,EAAM,IAEnC27B,EAAMpE,EAAIG,EACV9I,EAAKuwD,EAAM30E,EAAEspB,KACbjF,EAAKuwD,EAAM50E,EAAEspB,KACbqrD,GAAO30E,EAAEspB,KACTsrD,GAAO50E,EAAEspB,KACTtK,EAAK6Q,QAAQsB,EAAKgkD,EAAQC,EAAQhxD,EAAIC,EAAIswD,EAAKC,GAC/C,MACJ,IAAK,IACDxwD,EAAKpkB,EAAEspB,KACPjF,EAAKrkB,EAAEspB,KACPqrD,EAAM30E,EAAEspB,KACRsrD,EAAM50E,EAAEspB,KACR6H,EAAMpE,EAAII,EACVnO,EAAK6Q,QAAQsB,EAAK/M,EAAIC,EAAIswD,EAAKC,GAC/B,MACJ,IAAK,IACDxwD,EAAKpkB,EAAEspB,KAASqrD,EAChBtwD,EAAKrkB,EAAEspB,KAASsrD,EAChBD,GAAO30E,EAAEspB,KACTsrD,GAAO50E,EAAEspB,KACT6H,EAAMpE,EAAII,EACVnO,EAAK6Q,QAAQsB,EAAK/M,EAAIC,EAAIswD,EAAKC,GAC/B,MACJ,IAAK,IACDO,EAASR,EACTS,EAASR,EACTp/E,EAAMwpB,EAAKxpB,MACX6/E,EAAWr2D,EAAKiQ,KACZylD,IAAY3nD,EAAII,IAChBgoD,GAAUR,EAAMU,EAAS7/E,EAAM,GAC/B4/E,GAAUR,EAAMS,EAAS7/E,EAAM,IAEnCm/E,EAAM30E,EAAEspB,KACRsrD,EAAM50E,EAAEspB,KACR6H,EAAMpE,EAAII,EACVnO,EAAK6Q,QAAQsB,EAAKgkD,EAAQC,EAAQT,EAAKC,GACvC,MACJ,IAAK,IACDO,EAASR,EACTS,EAASR,EACTp/E,EAAMwpB,EAAKxpB,MACX6/E,EAAWr2D,EAAKiQ,KACZylD,IAAY3nD,EAAII,IAChBgoD,GAAUR,EAAMU,EAAS7/E,EAAM,GAC/B4/E,GAAUR,EAAMS,EAAS7/E,EAAM,IAEnCm/E,GAAO30E,EAAEspB,KACTsrD,GAAO50E,EAAEspB,KACT6H,EAAMpE,EAAII,EACVnO,EAAK6Q,QAAQsB,EAAKgkD,EAAQC,EAAQT,EAAKC,GACvC,MACJ,IAAK,IACD7iD,EAAK/xB,EAAEspB,KACP0I,EAAKhyB,EAAEspB,KACPwJ,EAAM9yB,EAAEspB,KACRwqD,EAAK9zE,EAAEspB,KACPyqD,EAAK/zE,EAAEspB,KAKPuqD,EAJAzvD,EAAKuwD,EAAKtwD,EAAKuwD,EACfD,EAAM30E,EAAEspB,KACRsrD,EAAM50E,EAAEspB,KAEqBwqD,EAAIC,EAAIhiD,EAAIC,EAAIc,EAD7C3B,EAAMpE,EAAIK,EAC6CpO,GACvD,MACJ,IAAK,IACD+S,EAAK/xB,EAAEspB,KACP0I,EAAKhyB,EAAEspB,KACPwJ,EAAM9yB,EAAEspB,KACRwqD,EAAK9zE,EAAEspB,KACPyqD,EAAK/zE,EAAEspB,KAKPuqD,EAJAzvD,EAAKuwD,EAAKtwD,EAAKuwD,EACfD,GAAO30E,EAAEspB,KACTsrD,GAAO50E,EAAEspB,KAEoBwqD,EAAIC,EAAIhiD,EAAIC,EAAIc,EAD7C3B,EAAMpE,EAAIK,EAC6CpO,GAGnE,CACe,MAAXi2D,GAA6B,MAAXA,IAClB9jD,EAAMpE,EAAIM,EACVrO,EAAK6Q,QAAQsB,GACbwjD,EAAME,EACND,EAAME,GAEVJ,EAAUvjD,CACd,CAEA,OADAnS,EAAKuB,WACEvB,CACX,CAaoBs2D,CAA0B92C,GACtC+2C,GAAY,QAAO,CAAC,EAAG50E,GAkB3B,OAjBA40E,EAAUv3D,UAAY,SAAUgB,GAC5B,GAAIw1D,EAAYx1D,GAAO,CACnBA,EAAK+R,QAAQmmB,EAAUjoB,OACnBxgB,EAAMuQ,EAAKtQ,eAEXsQ,EAAKyB,YAAYhS,EAAK,EAE9B,KACK,CACD,IAAIA,EAAMuQ,EACVk4B,EAAUz2B,YAAYhS,EAAK,EAC/B,CACJ,EACA8mE,EAAUrmF,eAAiB,SAAU3B,GACjC+lF,EAAcp8B,EAAW3pD,GACzBb,KAAKuiD,YACT,EACOsmC,CACX,CACO,SAASC,EAAiBh3C,EAAK79B,GAClC,OAAO,IAAI4zE,EAAQE,EAAkBj2C,EAAK79B,GAC9C,CACO,SAAS80E,EAAiBj3C,EAAKk3C,GAClC,IAAIH,EAAYd,EAAkBj2C,EAAKk3C,GAWvC,OAVW,SAAU3oE,GAEjB,SAAS2qC,EAAI/2C,GACT,IAAI4J,EAAQwC,EAAOvQ,KAAK9P,KAAMiU,IAASjU,KAGvC,OAFA6d,EAAMrb,eAAiBqmF,EAAUrmF,eACjCqb,EAAMyT,UAAYu3D,EAAUv3D,UACrBzT,CACX,CACA,OAPA,QAAUmtC,EAAK3qC,GAOR2qC,CACX,CATU,CASR68B,EAEN,CACO,SAASoB,EAAUC,EAASj1E,GAG/B,IAFA,IAAI6qE,EAAW,GACXh2E,EAAMogF,EAAQ/iF,OACTd,EAAI,EAAGA,EAAIyD,EAAKzD,IAAK,CAC1B,IAAI8jF,EAASD,EAAQ7jF,GACrBy5E,EAASp2E,KAAKygF,EAAOl/B,qBAAoB,GAC7C,CACA,IAAIm/B,EAAa,IAAIhgC,EAAA,GAAKn1C,GAW1B,OAVAm1E,EAAW72D,kBACX62D,EAAW93D,UAAY,SAAUgB,GAC7B,GAAIw1D,EAAYx1D,GAAO,CACnBA,EAAKgS,WAAWw6C,GAChB,IAAI/8D,EAAMuQ,EAAKtQ,aACXD,GACAuQ,EAAKyB,YAAYhS,EAAK,EAE9B,CACJ,EACOqnE,CACX,CACO,SAASC,EAAUC,EAAYr1E,GAClCA,EAAOA,GAAQ,CAAC,EAChB,IAAIqe,EAAO,IAAI82B,EAAA,GAqBf,OApBIkgC,EAAW/3D,OACXe,EAAKo4B,SAAS4+B,EAAW/3D,OAE7Be,EAAK+xB,SAASilC,EAAWrpE,OACrBhM,EAAKs1E,cACL3C,EAAct0D,EAAKA,KAAMg3D,EAAW5gD,wBAGhCz0B,EAAKu1E,QACLl3D,EAAKuW,kBAAkBygD,EAAW5gD,wBAGlCpW,EAAKnwB,cAAcmnF,GAG3Bh3D,EAAKhB,UAAYg4D,EAAWh4D,UAC5BgB,EAAK9vB,eAAiB8vB,EAAK9vB,eAC3B8vB,EAAK1J,EAAI0gE,EAAW1gE,EACpB0J,EAAK4yB,GAAKokC,EAAWpkC,GACrB5yB,EAAKzR,OAASyoE,EAAWzoE,OAClByR,CACX,mICnXIm3D,EACA,SAAe3iF,EAAQnG,GACnBX,KAAK8G,OAASA,EACd9G,KAAK0pF,UAAY/oF,GAAKA,EAAE+oF,SAC5B,EA6DJ,EA1DiB,WACb,SAASC,EAAU5tD,GACf/7B,KAAK+7B,QAAUA,EACfA,EAAQH,GAAG,YAAa57B,KAAK4pF,WAAY5pF,MACzC+7B,EAAQH,GAAG,YAAa57B,KAAK6pF,MAAO7pF,MACpC+7B,EAAQH,GAAG,UAAW57B,KAAK8pF,SAAU9pF,KACzC,CAkDA,OAjDA2pF,EAAUrpF,UAAUspF,WAAa,SAAUjpF,GAEvC,IADA,IAAIopF,EAAiBppF,EAAEmG,OAChBijF,IAAmBA,EAAenpF,WACrCmpF,EAAiBA,EAAe9nF,QAAU8nF,EAAep/E,aAEzDo/E,IACA/pF,KAAKgqF,gBAAkBD,EACvBA,EAAer8E,UAAW,EAC1B1N,KAAK8oD,GAAKnoD,EAAEozC,QACZ/zC,KAAKiqF,GAAKtpF,EAAEwzC,QACZn0C,KAAK+7B,QAAQmuD,kBAAkB,IAAIT,EAAMM,EAAgBppF,GAAI,YAAaA,EAAEk7B,OAEpF,EACA8tD,EAAUrpF,UAAUupF,MAAQ,SAAUlpF,GAClC,IAAIopF,EAAiB/pF,KAAKgqF,gBAC1B,GAAID,EAAgB,CAChB,IAAIrnF,EAAI/B,EAAEozC,QACNpxC,EAAIhC,EAAEwzC,QACN1zC,EAAKiC,EAAI1C,KAAK8oD,GACdpoD,EAAKiC,EAAI3C,KAAKiqF,GAClBjqF,KAAK8oD,GAAKpmD,EACV1C,KAAKiqF,GAAKtnF,EACVonF,EAAevpF,MAAMC,EAAIC,EAAIC,GAC7BX,KAAK+7B,QAAQmuD,kBAAkB,IAAIT,EAAMM,EAAgBppF,GAAI,OAAQA,EAAEk7B,OACvE,IAAIsuD,EAAanqF,KAAK+7B,QAAQquD,UAAU1nF,EAAGC,EAAGonF,GAAgBjjF,OAC1DujF,EAAiBrqF,KAAKsqF,YAC1BtqF,KAAKsqF,YAAcH,EACfJ,IAAmBI,IACfE,GAAkBF,IAAeE,GACjCrqF,KAAK+7B,QAAQmuD,kBAAkB,IAAIT,EAAMY,EAAgB1pF,GAAI,YAAaA,EAAEk7B,OAE5EsuD,GAAcA,IAAeE,GAC7BrqF,KAAK+7B,QAAQmuD,kBAAkB,IAAIT,EAAMU,EAAYxpF,GAAI,YAAaA,EAAEk7B,OAGpF,CACJ,EACA8tD,EAAUrpF,UAAUwpF,SAAW,SAAUnpF,GACrC,IAAIopF,EAAiB/pF,KAAKgqF,gBACtBD,IACAA,EAAer8E,UAAW,GAE9B1N,KAAK+7B,QAAQmuD,kBAAkB,IAAIT,EAAMM,EAAgBppF,GAAI,UAAWA,EAAEk7B,OACtE77B,KAAKsqF,aACLtqF,KAAK+7B,QAAQmuD,kBAAkB,IAAIT,EAAMzpF,KAAKsqF,YAAa3pF,GAAI,OAAQA,EAAEk7B,OAE7E77B,KAAKgqF,gBAAkB,KACvBhqF,KAAKsqF,YAAc,IACvB,EACOX,CACX,CAzDgB,yBCNZY,EAAc,WACd,SAASA,IACLvqF,KAAKwqF,OAAS,EAClB,CAsCA,OArCAD,EAAWjqF,UAAUmqF,UAAY,SAAU5uD,EAAO/0B,EAAQqf,GAEtD,OADAnmB,KAAK0qF,SAAS7uD,EAAO/0B,EAAQqf,GACtBnmB,KAAK2qF,WAAW9uD,EAC3B,EACA0uD,EAAWjqF,UAAUmkB,MAAQ,WAEzB,OADAzkB,KAAKwqF,OAAOrkF,OAAS,EACdnG,IACX,EACAuqF,EAAWjqF,UAAUoqF,SAAW,SAAU7uD,EAAO/0B,EAAQqf,GACrD,IAAIykE,EAAU/uD,EAAM+uD,QACpB,GAAKA,EAAL,CASA,IANA,IAAIC,EAAY,CACZrsE,OAAQ,GACRosE,QAAS,GACT9jF,OAAQA,EACR+0B,MAAOA,GAEFx2B,EAAI,EAAGyD,EAAM8hF,EAAQzkF,OAAQd,EAAIyD,EAAKzD,IAAK,CAChD,IAAIsvC,EAAQi2C,EAAQvlF,GAChB6I,EAAM,KAAwBiY,EAAMwuB,EAAO,CAAC,GAChDk2C,EAAUrsE,OAAO9V,KAAK,CAACwF,EAAI8lC,IAAK9lC,EAAI+lC,MACpC42C,EAAUD,QAAQliF,KAAKisC,EAC3B,CACA30C,KAAKwqF,OAAO9hF,KAAKmiF,EAbjB,CAcJ,EACAN,EAAWjqF,UAAUqqF,WAAa,SAAU9uD,GACxC,IAAK,IAAIc,KAAamuD,EAClB,GAAIA,EAAYh+D,eAAe6P,GAAY,CACvC,IAAIouD,EAAcD,EAAYnuD,GAAW38B,KAAKwqF,OAAQ3uD,GACtD,GAAIkvD,EACA,OAAOA,CAEf,CAER,EACOR,CACX,CA1CiB,GA4CjB,SAASvoC,EAAKgpC,GACV,IAAIvqF,EAAKuqF,EAAU,GAAG,GAAKA,EAAU,GAAG,GACpCtqF,EAAKsqF,EAAU,GAAG,GAAKA,EAAU,GAAG,GACxC,OAAO34E,KAAKW,KAAKvS,EAAKA,EAAKC,EAAKA,EACpC,CAOA,IAAIoqF,EAAc,CACdG,MAAO,SAAU/uE,EAAQ2f,GACrB,IAAIqvD,EAAWhvE,EAAO/V,OACtB,GAAK+kF,EAAL,CAGA,IAZQF,EAYJG,GAAYjvE,EAAOgvE,EAAW,IAAM,CAAC,GAAG1sE,OACxC4sE,GAAYlvE,EAAOgvE,EAAW,IAAM,CAAC,GAAG1sE,QAAU2sE,EACtD,GAAIC,GACGA,EAASjlF,OAAS,GAClBglF,GACAA,EAAShlF,OAAS,EAAG,CACxB,IAAIklF,EAAarpC,EAAKmpC,GAAYnpC,EAAKopC,IACtCloE,SAASmoE,KAAgBA,EAAa,GACvCxvD,EAAMwvD,WAAaA,EACnB,IAAIC,EApBL,GADKN,EAqBqBG,GAnBlB,GAAG,GAAKH,EAAU,GAAG,IAAM,GACrCA,EAAU,GAAG,GAAKA,EAAU,GAAG,IAAM,GAqBlC,OAFAnvD,EAAM0vD,OAASD,EAAY,GAC3BzvD,EAAM2vD,OAASF,EAAY,GACpB,CACH/9E,KAAM,QACNzG,OAAQoV,EAAO,GAAGpV,OAClB+0B,MAAOA,EAEf,CAlBA,CAmBJ,cCxEA4vD,EAAS,SAoBb,SAASC,IACL,KAAe1rF,KAAK67B,MACxB,CACA,IAAI8vD,EAAc,SAAUtrE,GAExB,SAASsrE,IACL,IAAI9tE,EAAmB,OAAXwC,GAAmBA,EAAOkd,MAAMv9B,KAAMm9B,YAAcn9B,KAEhE,OADA6d,EAAMke,QAAU,KACTle,CACX,CAGA,OARA,QAAU8tE,EAAYtrE,GAMtBsrE,EAAWrrF,UAAU0sB,QAAU,WAAc,EAC7C2+D,EAAWrrF,UAAUsrF,UAAY,WAAc,EACxCD,CACX,CAViB,CAUf7lE,EAAA,GACE+lE,EACA,SAAuBnpF,EAAGC,GACtB3C,KAAK0C,EAAIA,EACT1C,KAAK2C,EAAIA,CACb,EAGAmpF,EAAe,CACf,QAAS,WAAY,aAAc,WACnC,UAAW,YAAa,YAAa,eAErCxoC,EAAU,IAAIvgC,EAAA,EAAa,EAAG,EAAG,EAAG,GACpCgpE,EAAW,SAAU1rE,GAErB,SAAS0rE,EAAQ3lE,EAAS3G,EAASusE,EAAOC,EAAaC,GACnD,IAAIruE,EAAQwC,EAAOvQ,KAAK9P,OAASA,KAUjC,OATA6d,EAAMsuE,SAAW,IAAIN,EAAc,EAAG,GACtChuE,EAAMuI,QAAUA,EAChBvI,EAAM4B,QAAUA,EAChB5B,EAAMouE,YAAcA,EACpBpuE,EAAMuuE,aAAeF,EACrBF,EAAQA,GAAS,IAAIL,EACrB9tE,EAAMmuE,MAAQ,KACdnuE,EAAMwuE,gBAAgBL,GACtBnuE,EAAMyuE,aAAe,IAAI,EAAUzuE,GAC5BA,CACX,CAsJA,OAnKA,QAAUkuE,EAAS1rE,GAcnB0rE,EAAQzrF,UAAU+rF,gBAAkB,SAAUL,GACtChsF,KAAKgsF,OACLhsF,KAAKgsF,MAAMh/D,UAEXg/D,IACA1qE,EAAA,GAAUwqE,GAAc,SAAU1kF,GAC9B4kF,EAAMpwD,IAAMowD,EAAMpwD,GAAGx0B,EAAMpH,KAAKoH,GAAOpH,KAC3C,GAAGA,MACHgsF,EAAMjwD,QAAU/7B,MAEpBA,KAAKgsF,MAAQA,CACjB,EACAD,EAAQzrF,UAAUisF,UAAY,SAAU1wD,GACpC,IAAIn5B,EAAIm5B,EAAMmY,IACVrxC,EAAIk5B,EAAMoY,IACVu4C,EAAYC,EAAkBzsF,KAAM0C,EAAGC,GACvC+pF,EAAc1sF,KAAKmsF,SACnBQ,EAAoBD,EAAY5lF,OAChC6lF,IAAsBA,EAAkB7nF,OAExC6nF,GADAD,EAAc1sF,KAAKoqF,UAAUsC,EAAYhqF,EAAGgqF,EAAY/pF,IACxBmE,QAEpC,IAAI8lF,EAAU5sF,KAAKmsF,SAAWK,EAAY,IAAIX,EAAcnpF,EAAGC,GAAK3C,KAAKoqF,UAAU1nF,EAAGC,GAClFkqF,EAAgBD,EAAQ9lF,OACxBklF,EAAQhsF,KAAKgsF,MACjBA,EAAMJ,WAAaI,EAAMJ,UAAUiB,EAAgBA,EAAc1nC,OAAS,WACtEwnC,GAAqBE,IAAkBF,GACvC3sF,KAAKkqF,kBAAkBwC,EAAa,WAAY7wD,GAEpD77B,KAAKkqF,kBAAkB0C,EAAS,YAAa/wD,GACzCgxD,GAAiBA,IAAkBF,GACnC3sF,KAAKkqF,kBAAkB0C,EAAS,YAAa/wD,EAErD,EACAkwD,EAAQzrF,UAAUwsF,SAAW,SAAUjxD,GACnC,IAAIkxD,EAAelxD,EAAMmxD,eACJ,mBAAjBD,GACA/sF,KAAKkqF,kBAAkBlqF,KAAKmsF,SAAU,WAAYtwD,GAEjC,iBAAjBkxD,GACA/sF,KAAKg9B,QAAQ,YAAa,CAAEzvB,KAAM,YAAasuB,MAAOA,GAE9D,EACAkwD,EAAQzrF,UAAUkkB,OAAS,WACvBxkB,KAAKmsF,SAAW,IAAIN,EAAc,EAAG,EACzC,EACAE,EAAQzrF,UAAU2sF,SAAW,SAAUtwD,EAAWuwD,GAC9C,IAAInxD,EAAU/7B,KAAK28B,GACnBZ,GAAWA,EAAQjsB,KAAK9P,KAAMktF,EAClC,EACAnB,EAAQzrF,UAAU0sB,QAAU,WACxBhtB,KAAKgsF,MAAMh/D,UACXhtB,KAAKomB,QAAU,KACfpmB,KAAKgsF,MAAQ,KACbhsF,KAAKyf,QAAU,IACnB,EACAssE,EAAQzrF,UAAU6sF,eAAiB,SAAUC,GACzC,IAAIpB,EAAQhsF,KAAKgsF,MACjBA,EAAMJ,WAAaI,EAAMJ,UAAUwB,EACvC,EACArB,EAAQzrF,UAAU4pF,kBAAoB,SAAUmD,EAAY1wD,EAAWd,GAEnE,IAAItvB,GADJ8gF,EAAaA,GAAc,CAAC,GACRvmF,OACpB,IAAIyF,IAAMA,EAAGiB,OAAb,CAKA,IAFA,IAAI8/E,EAAY,KAAO3wD,EACnB4wD,EA/HZ,SAAyBC,EAASH,EAAYxxD,GAC1C,MAAO,CACHtuB,KAAMigF,EACN3xD,MAAOA,EACP/0B,OAAQumF,EAAWvmF,OACnB4iF,UAAW2D,EAAW3D,UACtB7zC,cAAc,EACd9B,QAASlY,EAAMmY,IACfG,QAAStY,EAAMoY,IACfw5C,aAAc5xD,EAAM4xD,aACpBlC,OAAQ1vD,EAAM0vD,OACdC,OAAQ3vD,EAAM2vD,OACdH,WAAYxvD,EAAMwvD,WAClBv2C,WAAYjZ,EAAMsZ,QAClBu4C,UAAW7xD,EAAM6xD,UACjBp4C,MAAOzZ,EAAMyZ,MACbtoC,KAAM0+E,EAEd,CA6G0BiC,CAAgBhxD,EAAW0wD,EAAYxxD,GAClDtvB,IACHA,EAAG+gF,KACKC,EAAY13C,eAAiBtpC,EAAG+gF,GAAUx9E,KAAKvD,EAAIghF,IAC3DhhF,EAAGywB,QAAQL,EAAW4wD,GACtBhhF,EAAKA,EAAG5B,aAAe4B,EAAG5B,aAAe4B,EAAGtK,QACxCsrF,EAAY13C,gBAIf03C,EAAY13C,eACb71C,KAAKg9B,QAAQL,EAAW4wD,GACpBvtF,KAAKyf,SAAWzf,KAAKyf,QAAQsM,gBAC7B/rB,KAAKyf,QAAQsM,gBAAe,SAAUlD,GACD,mBAArBA,EAAMykE,IACdzkE,EAAMykE,GAAUx9E,KAAK+Y,EAAO0kE,GAE5B1kE,EAAMmU,SACNnU,EAAMmU,QAAQL,EAAW4wD,EAEjC,IAtBR,CAyBJ,EACAxB,EAAQzrF,UAAU8pF,UAAY,SAAU1nF,EAAGC,EAAGirF,GAC1C,IAAIrlE,EAAOvoB,KAAKomB,QAAQoC,iBACpB5S,EAAM,IAAIi2E,EAAcnpF,EAAGC,GAE/B,GADAkrF,EAAetlE,EAAM3S,EAAKlT,EAAGC,EAAGirF,GAC5B5tF,KAAKosF,eAAiBx2E,EAAI9O,OAAQ,CAKlC,IAJA,IAAIgnF,EAAa,GACb5B,EAAclsF,KAAKosF,aACnB2B,EAAiB7B,EAAc,EAC/B8B,EAAc,IAAIjrE,EAAA,EAAargB,EAAIqrF,EAAgBprF,EAAIorF,EAAgB7B,EAAaA,GAC/E7mF,EAAIkjB,EAAKpiB,OAAS,EAAGd,GAAK,EAAGA,IAAK,CACvC,IAAIkH,EAAKgc,EAAKljB,GACVkH,IAAOqhF,GACHrhF,EAAG5M,QACH4M,EAAG0hF,qBACF1hF,EAAGtK,QAAWsK,EAAGtK,OAAOgsF,sBAC7B3qC,EAAQhhD,KAAKiK,EAAGhK,mBACZgK,EAAGzL,WACHwiD,EAAQ9gD,eAAe+J,EAAGzL,WAE1BwiD,EAAQ5/B,UAAUsqE,IAClBF,EAAWplF,KAAK6D,GAG5B,CACA,GAAIuhF,EAAW3nF,OAIX,IAHA,IACI+nF,EAAY77E,KAAKE,GAAK,GACtB4mB,EAAgB,EAAV9mB,KAAKE,GACNyI,EAAI,EAAGA,EAAI+yE,EAAgB/yE,GAHxB,EAIR,IAAK,IAAI6xB,EAAQ,EAAGA,EAAQ1T,EAAK0T,GAASqhD,EAAW,CAIjD,GADAL,EAAeC,EAAYl4E,EAFlBlT,EAAIsY,EAAI3I,KAAKC,IAAIu6B,GACjBlqC,EAAIqY,EAAI3I,KAAKI,IAAIo6B,GACc+gD,GACpCh4E,EAAI9O,OACJ,OAAO8O,CAEf,CAGZ,CACA,OAAOA,CACX,EACAm2E,EAAQzrF,UAAU6tF,eAAiB,SAAUtyD,EAAOuyD,GAC3CpuF,KAAKquF,cACNruF,KAAKquF,YAAc,IAAI9D,GAE3B,IAAI+D,EAAatuF,KAAKquF,YACZ,UAAVD,GAAqBE,EAAW7pE,QAChC,IAAIsmE,EAAcuD,EAAW7D,UAAU5uD,EAAO77B,KAAKoqF,UAAUvuD,EAAMmY,IAAKnY,EAAMoY,IAAK,MAAMntC,OAAQ9G,KAAKgsF,MAAMzrE,KAE5G,GADU,QAAV6tE,GAAmBE,EAAW7pE,QAC1BsmE,EAAa,CACb,IAAIx9E,EAAOw9E,EAAYx9E,KACvBsuB,EAAM4xD,aAAelgF,EACrB,IAAI+qC,EAAM,IAAIuzC,EACdvzC,EAAIxxC,OAASikF,EAAYjkF,OACzB9G,KAAKkqF,kBAAkB5xC,EAAK/qC,EAAMw9E,EAAYlvD,MAClD,CACJ,EACOkwD,CACX,CArKc,CAqKZjmE,EAAA,GA+BF,SAASyoE,EAAQj5D,EAAa5yB,EAAGC,GAC7B,GAAI2yB,EAAYA,EAAY8vB,UAAY,cAAgB,WAAW1iD,EAAGC,GAAI,CAItE,IAHA,IAAI4J,EAAK+oB,EACLoH,OAAW,EACX/uB,GAAa,EACVpB,GAAI,CAIP,GAHIA,EAAGoB,aACHA,GAAa,IAEZA,EAAY,CACb,IAAIzC,EAAWqB,EAAGvB,cAClB,GAAIE,IAAaA,EAAS+sB,QAAQv1B,EAAGC,GACjC,OAAO,EAEP4J,EAAGiB,SACHkvB,GAAW,EAEnB,CACA,IAAIm6B,EAAStqD,EAAG5B,aAChB4B,EAAKsqD,GAAkBtqD,EAAGtK,MAC9B,CACA,OAAOy6B,GAAW+uD,CACtB,CACA,OAAO,CACX,CACA,SAASoC,EAAetlE,EAAM3S,EAAKlT,EAAGC,EAAGirF,GACrC,IAAK,IAAIvoF,EAAIkjB,EAAKpiB,OAAS,EAAGd,GAAK,EAAGA,IAAK,CACvC,IAAIkH,EAAKgc,EAAKljB,GACVmpF,OAAmB,EACvB,GAAIjiF,IAAOqhF,IACHrhF,EAAG5M,SACH6uF,EAAmBD,EAAQhiF,EAAI7J,EAAGC,OACrCiT,EAAI8zE,YAAc9zE,EAAI8zE,UAAYn9E,GAC/BiiF,IAAqB/C,GAAQ,CAC7B71E,EAAI9O,OAASyF,EACb,KACJ,CAER,CACJ,CACA,SAASkgF,EAAkBgC,EAAiB/rF,EAAGC,GAC3C,IAAI8c,EAAUgvE,EAAgBhvE,QAC9B,OAAO/c,EAAI,GAAKA,EAAI+c,EAAQK,YAAcnd,EAAI,GAAKA,EAAI8c,EAAQM,WACnE,CAzEAuB,EAAA,GAAU,CAAC,QAAS,YAAa,UAAW,aAAc,WAAY,gBAAgB,SAAUla,GAC5F2kF,EAAQzrF,UAAU8G,GAAQ,SAAUy0B,GAChC,IAGI+wD,EACAC,EAJAnqF,EAAIm5B,EAAMmY,IACVrxC,EAAIk5B,EAAMoY,IACVu4C,EAAYC,EAAkBzsF,KAAM0C,EAAGC,GAO3C,GAJa,YAATyE,GAAuBolF,IAEvBK,GADAD,EAAU5sF,KAAKoqF,UAAU1nF,EAAGC,IACJmE,QAEf,cAATM,EACApH,KAAK0uF,QAAU7B,EACf7sF,KAAK2uF,WAAa,CAAC9yD,EAAMmY,IAAKnY,EAAMoY,KACpCj0C,KAAK4uF,MAAQ/B,OAEZ,GAAa,YAATzlF,EACLpH,KAAK4uF,MAAQ/B,OAEZ,GAAa,UAATzlF,EAAkB,CACvB,GAAIpH,KAAK0uF,UAAY1uF,KAAK4uF,QAClB5uF,KAAK2uF,YACN,KAAU3uF,KAAK2uF,WAAY,CAAC9yD,EAAMmY,IAAKnY,EAAMoY,MAAQ,EACxD,OAEJj0C,KAAK2uF,WAAa,IACtB,CACA3uF,KAAKkqF,kBAAkB0C,EAASxlF,EAAMy0B,EAC1C,CACJ,IA6CA,8BCnSIgzD,GAAsB,EAC1B,SAASC,IACDD,IAGJA,GAAsB,EAE1B,CACA,SAASE,EAAiB17E,EAAG+F,GACzB,OAAI/F,EAAEwN,SAAWzH,EAAEyH,OACXxN,EAAEuV,IAAMxP,EAAEwP,EACHvV,EAAE6xC,GAAK9rC,EAAE8rC,GAEb7xC,EAAEuV,EAAIxP,EAAEwP,EAEZvV,EAAEwN,OAASzH,EAAEyH,MACxB,CACA,IAyIA,EAzIe,WACX,SAASmuE,IACLhvF,KAAKivF,OAAS,GACdjvF,KAAKkvF,aAAe,GACpBlvF,KAAKmvF,gBAAkB,EACvBnvF,KAAKovF,oBAAsBL,CAC/B,CAiIA,OAhIAC,EAAQ1uF,UAAUgF,SAAW,SAAUC,EAAIC,GACvC,IAAK,IAAIH,EAAI,EAAGA,EAAIrF,KAAKivF,OAAO9oF,OAAQd,IACpCrF,KAAKivF,OAAO5pF,GAAGC,SAASC,EAAIC,EAEpC,EACAwpF,EAAQ1uF,UAAUkoB,eAAiB,SAAUrnB,EAAQkuF,GACjDA,EAAgBA,IAAiB,EACjC,IAAI9sE,EAAcviB,KAAKkvF,aAIvB,OAHI/tF,GAAWohB,EAAYpc,QACvBnG,KAAKsvF,kBAAkBD,GAEpB9sE,CACX,EACAysE,EAAQ1uF,UAAUgvF,kBAAoB,SAAUD,GAC5CrvF,KAAKmvF,gBAAkB,EAGvB,IAFA,IAAIhjD,EAAQnsC,KAAKivF,OACb1sE,EAAcviB,KAAKkvF,aACd7pF,EAAI,EAAGyD,EAAMqjC,EAAMhmC,OAAQd,EAAIyD,EAAKzD,IACzCrF,KAAKuvF,yBAAyBpjD,EAAM9mC,GAAI,KAAMgqF,GAElD9sE,EAAYpc,OAASnG,KAAKmvF,iBAC1B,EAAAK,EAAA,GAAQjtE,EAAawsE,EACzB,EACAC,EAAQ1uF,UAAUivF,yBAA2B,SAAUhjF,EAAI0kB,EAAWo+D,GAClE,IAAI9iF,EAAG5M,QAAW0vF,EAAlB,CAGA9iF,EAAGtL,eACHsL,EAAGpL,SACHoL,EAAGrL,cACH,IAAIuuF,EAAkBljF,EAAGvB,cACzB,GAAIuB,EAAGoB,WACHsjB,EAAY,UAEX,GAAIw+D,EAAiB,CAElBx+D,EADAA,EACYA,EAAU5nB,QAGV,GAIhB,IAFA,IAAIqmF,EAAkBD,EAClBE,EAAiBpjF,EACdmjF,GACHA,EAAgBztF,OAAS0tF,EACzBD,EAAgBtuF,kBAChB6vB,EAAUvoB,KAAKgnF,GACfC,EAAiBD,EACjBA,EAAkBA,EAAgB1kF,aAE1C,CACA,GAAIuB,EAAGi5C,YAAa,CAEhB,IADA,IAAIC,EAAWl5C,EAAGi5C,cACTngD,EAAI,EAAGA,EAAIogD,EAASt/C,OAAQd,IAAK,CACtC,IAAIwgD,EAAQJ,EAASpgD,GACjBkH,EAAGlL,UACHwkD,EAAMxkD,SAAW,MAErBrB,KAAKuvF,yBAAyB1pC,EAAO50B,EAAWo+D,EACpD,CACA9iF,EAAGlL,QAAU,CACjB,KACK,CACD,IAAIsjF,EAAOp4E,EACP0kB,GAAaA,EAAU9qB,OACvBw+E,EAAKzzD,YAAcD,EAEd0zD,EAAKzzD,aAAeyzD,EAAKzzD,YAAY/qB,OAAS,IACnDw+E,EAAKzzD,YAAc,IAEnBra,MAAM8tE,EAAK/7D,KACXkmE,IACAnK,EAAK/7D,EAAI,GAET/R,MAAM8tE,EAAKz/B,MACX4pC,IACAnK,EAAKz/B,GAAK,GAEVruC,MAAM8tE,EAAK9jE,UACXiuE,IACAnK,EAAK9jE,OAAS,GAElB7gB,KAAKkvF,aAAalvF,KAAKmvF,mBAAqBxK,CAChD,CACA,IAAIp7B,EAAUh9C,EAAGm9C,iBAAmBn9C,EAAGm9C,kBACnCH,GACAvpD,KAAKuvF,yBAAyBhmC,EAASt4B,EAAWo+D,GAEtD,IAAI7mF,EAAY+D,EAAGd,mBACfjD,GACAxI,KAAKuvF,yBAAyB/mF,EAAWyoB,EAAWo+D,GAExD,IAAI7tF,EAAS+K,EAAGnB,iBACZ5J,GACAxB,KAAKuvF,yBAAyB/tF,EAAQyvB,EAAWo+D,EApErD,CAsEJ,EACAL,EAAQ1uF,UAAUsvF,QAAU,SAAUrjF,GAC9BA,EAAGzH,MAAQyH,EAAGzH,KAAKshB,UAAYpmB,MAGnCA,KAAKivF,OAAOvmF,KAAK6D,EACrB,EACAyiF,EAAQ1uF,UAAUuvF,QAAU,SAAUtjF,GAClC,GAAIA,aAAcsD,MACd,IAAK,IAAIxK,EAAI,EAAG03B,EAAIxwB,EAAGpG,OAAQd,EAAI03B,EAAG13B,IAClCrF,KAAK6vF,QAAQtjF,EAAGlH,QAFxB,CAMA,IAAImE,EAAM8X,EAAA,GAAathB,KAAKivF,OAAQ1iF,GAChC/C,GAAO,GACPxJ,KAAKivF,OAAOxlF,OAAOD,EAAK,EAH5B,CAKJ,EACAwlF,EAAQ1uF,UAAUwvF,YAAc,WAC5B9vF,KAAKivF,OAAS,GACdjvF,KAAKkvF,aAAe,GACpBlvF,KAAKmvF,gBAAkB,CAE3B,EACAH,EAAQ1uF,UAAUyvF,SAAW,WACzB,OAAO/vF,KAAKivF,MAChB,EACAD,EAAQ1uF,UAAU0sB,QAAU,WACxBhtB,KAAKkvF,aAAe,KACpBlvF,KAAKivF,OAAS,IAClB,EACOD,CACX,CAxIc,yBChBP,SAASgB,IACZ,OAAO,IAAI5lE,MAAO4lE,SACtB,CACA,ICCQC,EAOAC,EDmIR,EA3IiB,SAAU7vE,GAEvB,SAAS8vE,EAAUl8E,GACf,IAAI4J,EAAQwC,EAAOvQ,KAAK9P,OAASA,KAQjC,OAPA6d,EAAMuyE,UAAW,EACjBvyE,EAAMwyE,MAAQ,EACdxyE,EAAMzJ,YAAc,EACpByJ,EAAMyyE,YAAc,EACpBzyE,EAAMxJ,SAAU,EAChBJ,EAAOA,GAAQ,CAAC,EAChB4J,EAAMuwE,MAAQn6E,EAAKm6E,OAAS,CAAC,EACtBvwE,CACX,CA6HA,OAxIA,QAAUsyE,EAAW9vE,GAYrB8vE,EAAU7vF,UAAUod,QAAU,SAAUJ,GAChCA,EAAKrR,WACLjM,KAAKid,WAAWK,GAEftd,KAAKuwF,OAINvwF,KAAKwwF,MAAMtyD,KAAO5gB,EAClBA,EAAK6gB,KAAOn+B,KAAKwwF,MACjBlzE,EAAK4gB,KAAO,KACZl+B,KAAKwwF,MAAQlzE,GANbtd,KAAKuwF,MAAQvwF,KAAKwwF,MAAQlzE,EAQ9BA,EAAKrR,UAAYjM,IACrB,EACAmwF,EAAU7vF,UAAU4L,YAAc,SAAUzF,GACxCA,EAASwF,UAAYjM,KACrB,IAAIsd,EAAO7W,EAASkX,UAChBL,GACAtd,KAAK0d,QAAQJ,EAErB,EACA6yE,EAAU7vF,UAAU2c,WAAa,SAAUK,GACvC,GAAKA,EAAKrR,UAAV,CAGA,IAAIkyB,EAAO7gB,EAAK6gB,KACZD,EAAO5gB,EAAK4gB,KACZC,EACAA,EAAKD,KAAOA,EAGZl+B,KAAKuwF,MAAQryD,EAEbA,EACAA,EAAKC,KAAOA,EAGZn+B,KAAKwwF,MAAQryD,EAEjB7gB,EAAK4gB,KAAO5gB,EAAK6gB,KAAO7gB,EAAKrR,UAAY,IAfzC,CAgBJ,EACAkkF,EAAU7vF,UAAU6L,eAAiB,SAAU1F,GAC3C,IAAI6W,EAAO7W,EAASkX,UAChBL,GACAtd,KAAKid,WAAWK,GAEpB7W,EAASwF,UAAY,IACzB,EACAkkF,EAAU7vF,UAAUa,OAAS,SAAUsvF,GAInC,IAHA,IAAIn4E,EAAO03E,IAAYhwF,KAAKoU,YACxB0tB,EAAQxpB,EAAOtY,KAAKqwF,MACpB/yE,EAAOtd,KAAKuwF,MACTjzE,GAAM,CACT,IAAIozE,EAAWpzE,EAAK4gB,KACL5gB,EAAKzI,KAAKyD,EAAMwpB,IAE3BxkB,EAAK5I,YACL1U,KAAKid,WAAWK,GAChBA,EAAOozE,GAGPpzE,EAAOozE,CAEf,CACA1wF,KAAKqwF,MAAQ/3E,EACRm4E,IACDzwF,KAAKg9B,QAAQ,QAAS8E,GACtB9hC,KAAKouF,MAAMjtF,QAAUnB,KAAKouF,MAAMjtF,SAExC,EACAgvF,EAAU7vF,UAAUqwF,WAAa,WAC7B,IAAI1iF,EAAOjO,KACXA,KAAKowF,UAAW,GAOhB,EAAArxE,EAAA,IANA,SAASlK,IACD5G,EAAKmiF,YACL,EAAArxE,EAAA,GAAsBlK,IACrB5G,EAAKoG,SAAWpG,EAAK9M,SAE9B,GAEJ,EACAgvF,EAAU7vF,UAAU8O,MAAQ,WACpBpP,KAAKowF,WAGTpwF,KAAKqwF,MAAQL,IACbhwF,KAAKoU,YAAc,EACnBpU,KAAK2wF,aACT,EACAR,EAAU7vF,UAAU0M,KAAO,WACvBhN,KAAKowF,UAAW,CACpB,EACAD,EAAU7vF,UAAU+U,MAAQ,WACnBrV,KAAKqU,UACNrU,KAAKswF,YAAcN,IACnBhwF,KAAKqU,SAAU,EAEvB,EACA87E,EAAU7vF,UAAUgV,OAAS,WACrBtV,KAAKqU,UACLrU,KAAKoU,aAAe47E,IAAYhwF,KAAKswF,YACrCtwF,KAAKqU,SAAU,EAEvB,EACA87E,EAAU7vF,UAAUmkB,MAAQ,WAExB,IADA,IAAInH,EAAOtd,KAAKuwF,MACTjzE,GAAM,CACT,IAAIozE,EAAWpzE,EAAK4gB,KACpB5gB,EAAK6gB,KAAO7gB,EAAK4gB,KAAO5gB,EAAKrR,UAAY,KACzCqR,EAAOozE,CACX,CACA1wF,KAAKuwF,MAAQvwF,KAAKwwF,MAAQ,IAC9B,EACAL,EAAU7vF,UAAUyX,WAAa,WAC7B,OAAqB,MAAd/X,KAAKuwF,KAChB,EACAJ,EAAU7vF,UAAU8L,QAAU,SAAUtF,EAAQ6kD,GAC5CA,EAAUA,GAAW,CAAC,EACtB3rD,KAAKoP,QACL,IAAI3I,EAAW,IAAIyU,EAAA,EAASpU,EAAQ6kD,EAAQt/C,MAE5C,OADArM,KAAKkM,YAAYzF,GACVA,CACX,EACO0pF,CACX,CA1IgB,CA0IdrqE,EAAA,GC3IE8qE,EAAuB5lE,EAAA,EAAIwlB,aAC3BqgD,GAQIX,EAAsB,CACtBY,YAAa,EAAGC,UAAW,EAAGC,YAAa,EAAGC,WAAY,GAMvD,CACHC,MAfAjB,EAAoB,CACpB,QAAS,WAAY,aAAc,QAAS,WAC5C,UAAW,YAAa,YAAa,eAcrCt7C,MAZoB,CACpB,aAAc,WAAY,aAY1Bw8C,QAPsB,KAAWlB,GAAmB,SAAU7oF,GAC9D,IAAIgqF,EAAKhqF,EAAKyqC,QAAQ,QAAS,WAC/B,OAAOq+C,EAAoBpjE,eAAeskE,GAAMA,EAAKhqF,CACzD,MAOAiqF,EACO,CAAC,YAAa,WADrBA,EAES,CAAC,cAAe,aAEzBC,GAAsB,EAC1B,SAASC,EAAmB11D,GACxB,IAAI21D,EAAc31D,EAAM21D,YACxB,MAAuB,QAAhBA,GAAyC,UAAhBA,CACpC,CAYA,SAASC,EAAU51D,GACfA,IAAUA,EAAM6xD,WAAY,EAChC,CAIA,SAASgE,EAAUC,EAAUplF,GAGzB,IAFA,IAAIqlF,EAAQrlF,EACR5K,GAAU,EACPiwF,GAA4B,IAAnBA,EAAMxyC,YACbz9C,EAAUiwF,EAAMC,eACbD,IAAUrlF,GAAMqlF,IAAUD,EAAS1F,cAC3C2F,EAAQA,EAAMjlE,WAElB,OAAOhrB,CACX,CACA,IAAImwF,EACA,SAAyBH,EAAU91D,GAC/B77B,KAAK41C,gBAAkB,KACvB51C,KAAK+xF,yBAA2B,KAChC/xF,KAAK21C,eAAiB,KACtB31C,KAAKuN,KAAOsuB,EAAMtuB,KAClBvN,KAAK8G,OAAS9G,KAAKgyF,cAAgBL,EAASpxE,IAC5CvgB,KAAKwxF,YAAc31D,EAAM21D,YACzBxxF,KAAKq0C,QAAUxY,EAAMwY,QACrBr0C,KAAKu0C,QAAU1Y,EAAM0Y,OACzB,EAGA09C,EAAmB,CACnBC,UAAW,SAAUr2D,GACjBA,GAAQ,QAAe77B,KAAKugB,IAAKsb,GACjC77B,KAAKmyF,oBAAsB,CAACt2D,EAAMmY,IAAKnY,EAAMoY,KAC7Cj0C,KAAKg9B,QAAQ,YAAanB,EAC9B,EACA0wD,UAAW,SAAU1wD,GACjBA,GAAQ,QAAe77B,KAAKugB,IAAKsb,GACjC,IAAIu2D,EAAYpyF,KAAKmyF,qBACjBC,GAAcv2D,EAAMmY,MAAQo+C,EAAU,IAAMv2D,EAAMoY,MAAQm+C,EAAU,IACpEpyF,KAAKqyF,wBAAuB,GAEhCryF,KAAKg9B,QAAQ,YAAanB,EAC9B,EACAy2D,QAAS,SAAUz2D,GACfA,GAAQ,QAAe77B,KAAKugB,IAAKsb,GACjC77B,KAAKqyF,wBAAuB,GAC5BryF,KAAKg9B,QAAQ,UAAWnB,EAC5B,EACAixD,SAAU,SAAUjxD,GAGX61D,EAAU1xF,MAFf67B,GAAQ,QAAe77B,KAAKugB,IAAKsb,IACb02D,WAAa12D,EAAM22D,iBAE/BxyF,KAAKyyF,qBACL52D,EAAMmxD,eAAiB,gBAE3BhtF,KAAKg9B,QAAQ,WAAYnB,GAEjC,EACA62D,MAAO,SAAU72D,GACby1D,GAAsB,EACtBz1D,GAAQ,QAAe77B,KAAKugB,IAAKsb,GACjC77B,KAAKg9B,QAAQ,aAAcnB,EAC/B,EACA82D,WAAY,SAAU92D,GACdy1D,IAGJz1D,GAAQ,QAAe77B,KAAKugB,IAAKsb,GACjC77B,KAAKg9B,QAAQ,aAAcnB,GAC/B,EACA+2D,WAAY,SAAU/2D,GAElB41D,EADA51D,GAAQ,QAAe77B,KAAKugB,IAAKsb,IAEjC77B,KAAK6yF,kBAAoB,IAAIzoE,KAC7BpqB,KAAK+7B,QAAQoyD,eAAetyD,EAAO,SACnCo2D,EAAiB1F,UAAUz8E,KAAK9P,KAAM67B,GACtCo2D,EAAiBC,UAAUpiF,KAAK9P,KAAM67B,EAC1C,EACAi3D,UAAW,SAAUj3D,GAEjB41D,EADA51D,GAAQ,QAAe77B,KAAKugB,IAAKsb,IAEjC77B,KAAK+7B,QAAQoyD,eAAetyD,EAAO,UACnCo2D,EAAiB1F,UAAUz8E,KAAK9P,KAAM67B,EAC1C,EACAk3D,SAAU,SAAUl3D,GAEhB41D,EADA51D,GAAQ,QAAe77B,KAAKugB,IAAKsb,IAEjC77B,KAAK+7B,QAAQoyD,eAAetyD,EAAO,OACnCo2D,EAAiBK,QAAQxiF,KAAK9P,KAAM67B,IAC/B,IAAIzR,MAAWpqB,KAAK6yF,kBApIT,KAqIZZ,EAAiBe,MAAMljF,KAAK9P,KAAM67B,EAE1C,EACAi1D,YAAa,SAAUj1D,GACnBo2D,EAAiBC,UAAUpiF,KAAK9P,KAAM67B,EAC1C,EACAm1D,YAAa,SAAUn1D,GACd01D,EAAmB11D,IACpBo2D,EAAiB1F,UAAUz8E,KAAK9P,KAAM67B,EAE9C,EACAk1D,UAAW,SAAUl1D,GACjBo2D,EAAiBK,QAAQxiF,KAAK9P,KAAM67B,EACxC,EACAo1D,WAAY,SAAUp1D,GACb01D,EAAmB11D,IACpBo2D,EAAiBnF,SAASh9E,KAAK9P,KAAM67B,EAE7C,GAEJ,KAAY,CAAC,QAAS,WAAY,gBAAgB,SAAUz0B,GACxD6qF,EAAiB7qF,GAAQ,SAAUy0B,GAC/BA,GAAQ,QAAe77B,KAAKugB,IAAKsb,GACjC77B,KAAKg9B,QAAQ51B,EAAMy0B,EACvB,CACJ,IACA,IAAIo3D,EAAoB,CACpBjC,YAAa,SAAUn1D,GACd01D,EAAmB11D,IACpBo3D,EAAkB1G,UAAUz8E,KAAK9P,KAAM67B,EAE/C,EACAk1D,UAAW,SAAUl1D,GACjBo3D,EAAkBX,QAAQxiF,KAAK9P,KAAM67B,EACzC,EACA0wD,UAAW,SAAU1wD,GACjB77B,KAAKg9B,QAAQ,YAAanB,EAC9B,EACAy2D,QAAS,SAAUz2D,GACf,IAAIq3D,EAA0BlzF,KAAKyyF,mBACnCzyF,KAAKqyF,wBAAuB,GAC5BryF,KAAKg9B,QAAQ,UAAWnB,GACpBq3D,IACAr3D,EAAMmxD,eAAiB,iBACvBhtF,KAAKg9B,QAAQ,WAAYnB,GAEjC,GAEJ,SAASs3D,EAA4BxB,EAAU9kF,GAC3C,IAAIumF,EAAcvmF,EAAMumF,YACpBpoE,EAAA,EAAI0nB,uBACJ,KAAYm+C,EAAyBM,SAAS,SAAUkC,GACpDC,EAA4BzmF,EAAOwmF,GAAiB,SAAUx3D,GAC1Du3D,EAAYC,GAAiBvjF,KAAK6hF,EAAU91D,EAChD,GACJ,KAGI7Q,EAAA,EAAIynB,sBACJ,KAAYo+C,EAAyBl8C,OAAO,SAAU0+C,GAClDC,EAA4BzmF,EAAOwmF,GAAiB,SAAUx3D,GAC1Du3D,EAAYC,GAAiBvjF,KAAK6hF,EAAU91D,GAlKhE,SAAuBhvB,GACnBA,EAAM0mF,UAAW,EACO,MAApB1mF,EAAM2mF,aACNC,aAAa5mF,EAAM2mF,YACnB3mF,EAAM2mF,WAAa,MAEvB3mF,EAAM2mF,WAAaj0E,YAAW,WAC1B1S,EAAM0mF,UAAW,EACjB1mF,EAAM2mF,WAAa,IACvB,GAAG,IACP,CAyJoBE,CAAc7mF,EAClB,GACJ,IAEJ,KAAYgkF,EAAyBK,OAAO,SAAUmC,GAClDC,EAA4BzmF,EAAOwmF,GAAiB,SAAUx3D,GAC1DA,GAAQ,QAAeA,GAClBhvB,EAAM0mF,UACPH,EAAYC,GAAiBvjF,KAAK6hF,EAAU91D,EAEpD,GACJ,IAER,CACA,SAAS83D,EAA6BhC,EAAU9kF,GAO5C,SAAS+mF,EAAMP,GAQXC,EAA4BzmF,EAAOwmF,GAPnC,SAA6Bx3D,GACzBA,GAAQ,QAAeA,GAClB61D,EAAUC,EAAU91D,EAAM/0B,UAC3B+0B,EA9KhB,SAA8B81D,EAAU91D,GACpC,OAAO,QAAe81D,EAASpxE,IAAK,IAAIuxE,EAAgBH,EAAU91D,IAAQ,EAC9E,CA4KwBg4D,CAAqBlC,EAAU91D,GACvChvB,EAAMumF,YAAYC,GAAiBvjF,KAAK6hF,EAAU91D,GAE1D,GACyE,CAAEi4D,SAAS,GACxF,CAfI9oE,EAAA,EAAI0nB,uBACJ,KAAY2+C,EAAmCuC,GAEzC5oE,EAAA,EAAIynB,sBACV,KAAY4+C,EAAiCuC,EAYrD,CACA,SAASN,EAA4BzmF,EAAOwmF,EAAiBU,EAAUt+C,GACnE5oC,EAAMmnF,QAAQX,GAAmBU,EACjClnF,EAAMonF,aAAaZ,GAAmB59C,GACtC,QAAiB5oC,EAAMqnF,UAAWb,EAAiBU,EAAUt+C,EACjE,CACA,SAAS0+C,EAAyBtnF,GAC9B,IAAImnF,EAAUnnF,EAAMmnF,QACpB,IAAK,IAAIX,KAAmBW,EACpBA,EAAQlnE,eAAeumE,KACvB,QAAoBxmF,EAAMqnF,UAAWb,EAAiBW,EAAQX,GAAkBxmF,EAAMonF,aAAaZ,IAG3GxmF,EAAMmnF,QAAU,CAAC,CACrB,CACA,IAAII,EACA,SAAyBF,EAAWd,GAChCpzF,KAAKg0F,QAAU,CAAC,EAChBh0F,KAAKi0F,aAAe,CAAC,EACrBj0F,KAAKuzF,UAAW,EAChBvzF,KAAKk0F,UAAYA,EACjBl0F,KAAKozF,YAAcA,CACvB,EAuCJ,GApCuB,SAAU/yE,GAE7B,SAASg0E,EAAgB9zE,EAAK0rE,GAC1B,IAAIpuE,EAAQwC,EAAOvQ,KAAK9P,OAASA,KASjC,OARA6d,EAAM40E,oBAAqB,EAC3B50E,EAAM0C,IAAMA,EACZ1C,EAAMouE,YAAcA,EACpBpuE,EAAMy2E,mBAAqB,IAAIF,EAAgB7zE,EAAK0xE,GAChDrB,IACA/yE,EAAM02E,oBAAsB,IAAIH,EAAgB1sE,SAAUurE,IAE9DE,EAA4Bt1E,EAAOA,EAAMy2E,oBAClCz2E,CACX,CAqBA,OAjCA,QAAUw2E,EAAiBh0E,GAa3Bg0E,EAAgB/zF,UAAU0sB,QAAU,WAChCmnE,EAAyBn0F,KAAKs0F,oBAC1B1D,GACAuD,EAAyBn0F,KAAKu0F,oBAEtC,EACAF,EAAgB/zF,UAAUsrF,UAAY,SAAUwB,GAC5CptF,KAAKugB,IAAIN,QAAUjgB,KAAKugB,IAAIN,MAAMklC,OAASioC,GAAe,UAC9D,EACAiH,EAAgB/zF,UAAU+xF,uBAAyB,SAAUmC,GAEzD,GADAx0F,KAAKmyF,oBAAsB,KACvBvB,IACM5wF,KAAKyyF,oBAAwB+B,EAAsB,CACzDx0F,KAAKyyF,mBAAqB+B,EAC1B,IAAIC,EAAqBz0F,KAAKu0F,oBAC9BC,EACMb,EAA6B3zF,KAAMy0F,GACnCN,EAAyBM,EACnC,CACJ,EACOJ,CACX,CAnCsB,CAmCpBvuE,EAAA,sCCjRE4uE,GAAe,CAAC,EAChBC,GAAY,CAAC,EAuBjB,IAAIC,GAAW,WACX,SAASA,EAAQ30F,EAAIsgB,EAAKtM,GACtB,IAAI4J,EAAQ7d,KACZA,KAAK60F,iBAAmB,GACxB70F,KAAK80F,iBAAmB,EACxB90F,KAAK+0F,eAAgB,EACrB/0F,KAAKg1F,oBAAqB,EAC1Bh1F,KAAKi1F,WAAY,EACjBhhF,EAAOA,GAAQ,CAAC,EAChBjU,KAAKugB,IAAMA,EACXvgB,KAAKC,GAAKA,EACV,IAAImmB,EAAU,IAAI,EACd8uE,EAAejhF,EAAKkhF,UAAY,SAC/BT,GAAaQ,KACdA,EAAe,KAAYR,IAAc,IAO7CzgF,EAAK8U,aAAoC,MAArB9U,EAAK8U,cAEnB9U,EAAK8U,aACX,IAAItJ,EAAU,IAAIi1E,GAAaQ,GAAc30E,EAAK6F,EAASnS,EAAMhU,GAC7Dm1F,EAAUnhF,EAAKy4D,KAAOjtD,EAAQ41E,QAClCr1F,KAAKomB,QAAUA,EACfpmB,KAAKyf,QAAUA,EACf,IAQIysE,EARAoJ,EAAgBtqE,EAAA,EAAIsnB,MAAStnB,EAAA,EAAIunB,QAAW6iD,EAE1C,KADA,IAAIG,GAAa91E,EAAQwI,kBAAmBxI,EAAQ0G,MAEtDqvE,EAAmBvhF,EAAKuhF,kBACc,MAApBA,GAAiD,SAArBA,EAC5CxqE,EAAA,EAAIynB,uBACF+iD,KAIJtJ,EAAc,KAAiBj4E,EAAKi4E,YAHf,KAKzBlsF,KAAK+7B,QAAU,IAAI,EAAQ3V,EAAS3G,EAAS61E,EAAa71E,EAAQ0G,KAAM+lE,GACxElsF,KAAKiM,UAAY,IAAI,EAAU,CAC3BmiF,MAAO,CACHjtF,OAAQi0F,EAAU,KAAO,WAAc,OAAOv3E,EAAM43E,QAAO,EAAO,KAGrEL,GACDp1F,KAAKiM,UAAUmD,OAEvB,CAoJA,OAnJAwlF,EAAQt0F,UAAUqmC,IAAM,SAAUp6B,GACzBA,IAGLvM,KAAKomB,QAAQwpE,QAAQrjF,GACrBA,EAAG1B,YAAY7K,MACfA,KAAK8L,UACT,EACA8oF,EAAQt0F,UAAU89B,OAAS,SAAU7xB,GAC5BA,IAGLvM,KAAKomB,QAAQypE,QAAQtjF,GACrBA,EAAGxB,iBAAiB/K,MACpBA,KAAK8L,UACT,EACA8oF,EAAQt0F,UAAUisB,YAAc,SAAUmpE,EAAQ/0E,GAC1C3gB,KAAKyf,QAAQ8M,aACbvsB,KAAKyf,QAAQ8M,YAAYmpE,EAAQ/0E,GAErC3gB,KAAK8L,SACT,EACA8oF,EAAQt0F,UAAUgsB,mBAAqB,SAAUtnB,GACzChF,KAAKyf,QAAQ6M,oBACbtsB,KAAKyf,QAAQ6M,mBAAmBtnB,GAEpChF,KAAK8L,UACL9L,KAAK8oB,iBAAmB9jB,EACxBhF,KAAKi1F,UAjGb,SAAoBjwF,GAChB,IAAKA,EACD,OAAO,EAEX,GAA+B,iBAApBA,EACP,OAAO,SAAIA,EAAiB,GAAK,MAEhC,GAAIA,EAAgB4T,WAAY,CAIjC,IAHA,IAAIA,EAAa5T,EAAgB4T,WAC7B+8E,EAAW,EACX7sF,EAAM8P,EAAWzS,OACZd,EAAI,EAAGA,EAAIyD,EAAKzD,IACrBswF,IAAY,SAAI/8E,EAAWvT,GAAGkR,MAAO,GAGzC,OADAo/E,GAAY7sF,GACM,KACtB,CACA,OAAO,CACX,CA+EyB/D,CAAWC,EAChC,EACA4vF,EAAQt0F,UAAU2E,mBAAqB,WACnC,OAAOjF,KAAK8oB,gBAChB,EACA8rE,EAAQt0F,UAAUs1F,YAAc,SAAUC,GACtC71F,KAAKi1F,UAAYY,CACrB,EACAjB,EAAQt0F,UAAUyE,WAAa,WAC3B,OAAO/E,KAAKi1F,SAChB,EACAL,EAAQt0F,UAAUw1F,mBAAqB,SAAUC,GACxCA,GACD/1F,KAAKiM,UAAU9K,QAAO,GAE1BnB,KAAK+0F,eAAgB,EACrB/0F,KAAKyf,QAAQ3T,UACb9L,KAAK+0F,eAAgB,CACzB,EACAH,EAAQt0F,UAAUwL,QAAU,WACxB9L,KAAK+0F,eAAgB,EACrB/0F,KAAKiM,UAAUmD,OACnB,EACAwlF,EAAQt0F,UAAU01F,MAAQ,WACtBh2F,KAAKy1F,QAAO,EAChB,EACAb,EAAQt0F,UAAUm1F,OAAS,SAAUM,GACjC,IAAIE,EACA7mF,EAAQ4gF,IACRhwF,KAAK+0F,gBACLkB,GAAkB,EAClBj2F,KAAK81F,mBAAmBC,IAExB/1F,KAAKg1F,qBACLiB,GAAkB,EAClBj2F,KAAKk2F,2BAET,IAAI9rD,EAAM4lD,IACNiG,GACAj2F,KAAK80F,iBAAmB,EACxB90F,KAAKg9B,QAAQ,WAAY,CACrBhoB,YAAao1B,EAAMh7B,KAGlBpP,KAAK60F,iBAAmB,IAC7B70F,KAAK80F,mBACD90F,KAAK80F,iBAAmB90F,KAAK60F,kBAC7B70F,KAAKiM,UAAUe,OAG3B,EACA4nF,EAAQt0F,UAAU61F,mBAAqB,SAAUC,GAC7Cp2F,KAAK60F,iBAAmBuB,CAC5B,EACAxB,EAAQt0F,UAAUqM,OAAS,WACvB3M,KAAKiM,UAAUmD,QACfpP,KAAK80F,iBAAmB,CAC5B,EACAF,EAAQt0F,UAAUuL,aAAe,WAC7B7L,KAAKg1F,oBAAqB,CAC9B,EACAJ,EAAQt0F,UAAU41F,wBAA0B,WACxCl2F,KAAKg1F,oBAAqB,EACtBh1F,KAAKyf,QAAQ5T,cAA2C,WAA3B7L,KAAKyf,QAAQsI,WAC1C/nB,KAAKyf,QAAQ5T,cAErB,EACA+oF,EAAQt0F,UAAUkkB,OAAS,SAAUvQ,GACjCA,EAAOA,GAAQ,CAAC,EAChBjU,KAAKyf,QAAQ+E,OAAOvQ,EAAK9Q,MAAO8Q,EAAK7Q,QACrCpD,KAAK+7B,QAAQvX,QACjB,EACAowE,EAAQt0F,UAAU+1F,eAAiB,WAC/Br2F,KAAKiM,UAAUwY,OACnB,EACAmwE,EAAQt0F,UAAUwf,SAAW,WACzB,OAAO9f,KAAKyf,QAAQK,UACxB,EACA80E,EAAQt0F,UAAUyf,UAAY,WAC1B,OAAO/f,KAAKyf,QAAQM,WACxB,EACA60E,EAAQt0F,UAAU6sF,eAAiB,SAAUC,GACzCptF,KAAK+7B,QAAQoxD,eAAeC,EAChC,EACAwH,EAAQt0F,UAAU8pF,UAAY,SAAU1nF,EAAGC,GACvC,OAAO3C,KAAK+7B,QAAQquD,UAAU1nF,EAAGC,EACrC,EACAiyF,EAAQt0F,UAAUs7B,GAAK,SAAUe,EAAW25D,EAAc9wF,GAEtD,OADAxF,KAAK+7B,QAAQH,GAAGe,EAAW25D,EAAc9wF,GAClCxF,IACX,EACA40F,EAAQt0F,UAAUs8B,IAAM,SAAUD,EAAW25D,GACzCt2F,KAAK+7B,QAAQa,IAAID,EAAW25D,EAChC,EACA1B,EAAQt0F,UAAU08B,QAAU,SAAUL,EAAWd,GAC7C77B,KAAK+7B,QAAQiB,QAAQL,EAAWd,EACpC,EACA+4D,EAAQt0F,UAAUmkB,MAAQ,WAEtB,IADA,IAAI0nB,EAAQnsC,KAAKomB,QAAQ2pE,WAChB1qF,EAAI,EAAGA,EAAI8mC,EAAMhmC,OAAQd,IAC1B8mC,EAAM9mC,aAAcigD,GAAA,GACpBnZ,EAAM9mC,GAAG0F,iBAAiB/K,MAGlCA,KAAKomB,QAAQ0pE,cACb9vF,KAAKyf,QAAQgF,OACjB,EACAmwE,EAAQt0F,UAAU0sB,QAAU,WA/MhC,IAAqB/sB,EAgNbD,KAAKiM,UAAUe,OACfhN,KAAKykB,QACLzkB,KAAKomB,QAAQ4G,UACbhtB,KAAKyf,QAAQuN,UACbhtB,KAAK+7B,QAAQ/O,UACbhtB,KAAKiM,UACDjM,KAAKomB,QACDpmB,KAAKyf,QACDzf,KAAK+7B,QAAU,KAxNd97B,EAyNDD,KAAKC,UAxNd00F,GAAU10F,EAyNjB,EACO20F,CACX,CAtMc,GAuMP,SAAS3pC,GAAK1qC,EAAKtM,GACtB,IAAIrJ,EAAK,IAAIgqF,GAAQ,OAAer0E,EAAKtM,GAEzC,OADA0gF,GAAU/pF,EAAG3K,IAAM2K,EACZA,CACX,CAeO,SAAS2rF,GAAgBnvF,EAAM21C,GAClC23C,GAAattF,GAAQ21C,CACzB,yDCtPA,IAAIy5C,EAAgB,SAAS7xD,EAAGvrB,GAI5B,OAHAo9E,EAAgBroF,OAAOsoF,gBAClB,CAAEC,UAAW,cAAgB7mF,OAAS,SAAU80B,EAAGvrB,GAAKurB,EAAE+xD,UAAYt9E,CAAG,GAC1E,SAAUurB,EAAGvrB,GAAK,IAAK,IAAI9F,KAAK8F,EAAOjL,OAAO7N,UAAUwsB,eAAehd,KAAKsJ,EAAG9F,KAAIqxB,EAAErxB,GAAK8F,EAAE9F,GAAI,EAC7FkjF,EAAc7xD,EAAGvrB,EAC5B,EAEO,SAASu9E,EAAUhyD,EAAGvrB,GACzB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAI+wB,UAAU,uBAAyB4N,OAAO3+B,GAAK,iCAE7D,SAASw9E,IAAO52F,KAAKs8C,YAAc3X,CAAG,CADtC6xD,EAAc7xD,EAAGvrB,GAEjBurB,EAAErkC,UAAkB,OAAN8Y,EAAajL,OAAOisB,OAAOhhB,IAAMw9E,EAAGt2F,UAAY8Y,EAAE9Y,UAAW,IAAIs2F,EACnF,CA8E6BzoF,OAAOisB,OAsGXjsB,OAAOisB","sources":["webpack://large-screen-configuration/./node_modules/zrender/lib/Element.js","webpack://large-screen-configuration/./node_modules/zrender/lib/animation/easing.js","webpack://large-screen-configuration/./node_modules/zrender/lib/animation/Clip.js","webpack://large-screen-configuration/./node_modules/zrender/lib/animation/Animator.js","webpack://large-screen-configuration/./node_modules/zrender/lib/animation/cubicEasing.js","webpack://large-screen-configuration/./node_modules/zrender/lib/animation/requestAnimationFrame.js","webpack://large-screen-configuration/./node_modules/zrender/lib/canvas/Layer.js","webpack://large-screen-configuration/./node_modules/zrender/lib/canvas/Painter.js","webpack://large-screen-configuration/./node_modules/zrender/lib/canvas/dashStyle.js","webpack://large-screen-configuration/./node_modules/zrender/lib/canvas/graphic.js","webpack://large-screen-configuration/./node_modules/zrender/lib/canvas/helper.js","webpack://large-screen-configuration/./node_modules/zrender/lib/config.js","webpack://large-screen-configuration/./node_modules/zrender/lib/contain/line.js","webpack://large-screen-configuration/./node_modules/zrender/lib/contain/polygon.js","webpack://large-screen-configuration/./node_modules/zrender/lib/contain/quadratic.js","webpack://large-screen-configuration/./node_modules/zrender/lib/contain/text.js","webpack://large-screen-configuration/./node_modules/zrender/lib/contain/util.js","webpack://large-screen-configuration/./node_modules/zrender/lib/contain/windingLine.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/BoundingRect.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/Eventful.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/LRU.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/OrientedBoundingRect.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/PathProxy.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/Point.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/Transformable.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/WeakMap.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/bbox.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/curve.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/fourPointsTransform.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/dom.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/env.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/event.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/matrix.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/platform.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/timsort.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/util.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/vector.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/CompoundPath.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/Displayable.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/Gradient.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/Group.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/Image.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/IncrementalDisplayable.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/LinearGradient.js","webpack://large-screen-configuration/./node_modules/zrender/lib/contain/cubic.js","webpack://large-screen-configuration/./node_modules/zrender/lib/contain/arc.js","webpack://large-screen-configuration/./node_modules/zrender/lib/contain/path.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/Path.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/RadialGradient.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/TSpan.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/helper/parseText.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/Text.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/constants.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/helper/image.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/helper/poly.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/helper/smoothBezier.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/helper/subPixelOptimize.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/Arc.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/BezierCurve.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/Circle.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/Ellipse.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/Line.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/Polygon.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/Polyline.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/Rect.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/helper/roundRect.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/Ring.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/helper/roundSector.js","webpack://large-screen-configuration/./node_modules/zrender/lib/graphic/shape/Sector.js","webpack://large-screen-configuration/./node_modules/zrender/lib/svg/SVGPathRebuilder.js","webpack://large-screen-configuration/./node_modules/zrender/lib/svg/mapStyleToAttrs.js","webpack://large-screen-configuration/./node_modules/zrender/lib/svg/core.js","webpack://large-screen-configuration/./node_modules/zrender/lib/svg/cssAnimation.js","webpack://large-screen-configuration/./node_modules/zrender/lib/svg/graphic.js","webpack://large-screen-configuration/./node_modules/zrender/lib/svg/domapi.js","webpack://large-screen-configuration/./node_modules/zrender/lib/svg/patch.js","webpack://large-screen-configuration/./node_modules/zrender/lib/svg/Painter.js","webpack://large-screen-configuration/./node_modules/zrender/lib/svg/helper.js","webpack://large-screen-configuration/./node_modules/zrender/lib/tool/color.js","webpack://large-screen-configuration/./node_modules/zrender/lib/tool/convertPath.js","webpack://large-screen-configuration/./node_modules/zrender/lib/tool/dividePath.js","webpack://large-screen-configuration/./node_modules/zrender/lib/tool/morphPath.js","webpack://large-screen-configuration/./node_modules/zrender/lib/tool/parseSVG.js","webpack://large-screen-configuration/./node_modules/zrender/lib/tool/parseXML.js","webpack://large-screen-configuration/./node_modules/zrender/lib/tool/transformPath.js","webpack://large-screen-configuration/./node_modules/zrender/lib/tool/path.js","webpack://large-screen-configuration/./node_modules/zrender/lib/mixin/Draggable.js","webpack://large-screen-configuration/./node_modules/zrender/lib/core/GestureMgr.js","webpack://large-screen-configuration/./node_modules/zrender/lib/Handler.js","webpack://large-screen-configuration/./node_modules/zrender/lib/Storage.js","webpack://large-screen-configuration/./node_modules/zrender/lib/animation/Animation.js","webpack://large-screen-configuration/./node_modules/zrender/lib/dom/HandlerProxy.js","webpack://large-screen-configuration/./node_modules/zrender/lib/zrender.js","webpack://large-screen-configuration/./node_modules/zrender/node_modules/tslib/tslib.es6.js"],"sourcesContent":["import Transformable, { TRANSFORMABLE_PROPS } from './core/Transformable.js';\nimport Animator, { cloneValue } from './animation/Animator.js';\nimport BoundingRect from './core/BoundingRect.js';\nimport Eventful from './core/Eventful.js';\nimport { calculateTextPosition, parsePercent } from './contain/text.js';\nimport { guid, isObject, keys, extend, indexOf, logError, mixin, isArrayLike, isTypedArray, isGradientObject, filter, reduce } from './core/util.js';\nimport { LIGHT_LABEL_COLOR, DARK_LABEL_COLOR } from './config.js';\nimport { parse, stringify } from './tool/color.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nexport var PRESERVED_NORMAL_STATE = '__zr_normal__';\nvar PRIMARY_STATES_KEYS = TRANSFORMABLE_PROPS.concat(['ignore']);\nvar DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n    obj[key] = true;\n    return obj;\n}, { ignore: false });\nvar tmpTextPosCalcRes = {};\nvar tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\nvar Element = (function () {\n    function Element(props) {\n        this.id = guid();\n        this.animators = [];\n        this.currentStates = [];\n        this.states = {};\n        this._init(props);\n    }\n    Element.prototype._init = function (props) {\n        this.attr(props);\n    };\n    Element.prototype.drift = function (dx, dy, e) {\n        switch (this.draggable) {\n            case 'horizontal':\n                dy = 0;\n                break;\n            case 'vertical':\n                dx = 0;\n                break;\n        }\n        var m = this.transform;\n        if (!m) {\n            m = this.transform = [1, 0, 0, 1, 0, 0];\n        }\n        m[4] += dx;\n        m[5] += dy;\n        this.decomposeTransform();\n        this.markRedraw();\n    };\n    Element.prototype.beforeUpdate = function () { };\n    Element.prototype.afterUpdate = function () { };\n    Element.prototype.update = function () {\n        this.updateTransform();\n        if (this.__dirty) {\n            this.updateInnerText();\n        }\n    };\n    Element.prototype.updateInnerText = function (forceUpdate) {\n        var textEl = this._textContent;\n        if (textEl && (!textEl.ignore || forceUpdate)) {\n            if (!this.textConfig) {\n                this.textConfig = {};\n            }\n            var textConfig = this.textConfig;\n            var isLocal = textConfig.local;\n            var innerTransformable = textEl.innerTransformable;\n            var textAlign = void 0;\n            var textVerticalAlign = void 0;\n            var textStyleChanged = false;\n            innerTransformable.parent = isLocal ? this : null;\n            var innerOrigin = false;\n            innerTransformable.copyTransform(textEl);\n            if (textConfig.position != null) {\n                var layoutRect = tmpBoundingRect;\n                if (textConfig.layoutRect) {\n                    layoutRect.copy(textConfig.layoutRect);\n                }\n                else {\n                    layoutRect.copy(this.getBoundingRect());\n                }\n                if (!isLocal) {\n                    layoutRect.applyTransform(this.transform);\n                }\n                if (this.calculateTextPosition) {\n                    this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                else {\n                    calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                innerTransformable.x = tmpTextPosCalcRes.x;\n                innerTransformable.y = tmpTextPosCalcRes.y;\n                textAlign = tmpTextPosCalcRes.align;\n                textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n                var textOrigin = textConfig.origin;\n                if (textOrigin && textConfig.rotation != null) {\n                    var relOriginX = void 0;\n                    var relOriginY = void 0;\n                    if (textOrigin === 'center') {\n                        relOriginX = layoutRect.width * 0.5;\n                        relOriginY = layoutRect.height * 0.5;\n                    }\n                    else {\n                        relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n                        relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n                    }\n                    innerOrigin = true;\n                    innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n                    innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n                }\n            }\n            if (textConfig.rotation != null) {\n                innerTransformable.rotation = textConfig.rotation;\n            }\n            var textOffset = textConfig.offset;\n            if (textOffset) {\n                innerTransformable.x += textOffset[0];\n                innerTransformable.y += textOffset[1];\n                if (!innerOrigin) {\n                    innerTransformable.originX = -textOffset[0];\n                    innerTransformable.originY = -textOffset[1];\n                }\n            }\n            var isInside = textConfig.inside == null\n                ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\n                : textConfig.inside;\n            var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n            var textFill = void 0;\n            var textStroke = void 0;\n            var autoStroke = void 0;\n            if (isInside && this.canBeInsideText()) {\n                textFill = textConfig.insideFill;\n                textStroke = textConfig.insideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getInsideTextFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getInsideTextStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            else {\n                textFill = textConfig.outsideFill;\n                textStroke = textConfig.outsideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getOutsideFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getOutsideStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            textFill = textFill || '#000';\n            if (textFill !== innerTextDefaultStyle.fill\n                || textStroke !== innerTextDefaultStyle.stroke\n                || autoStroke !== innerTextDefaultStyle.autoStroke\n                || textAlign !== innerTextDefaultStyle.align\n                || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n                textStyleChanged = true;\n                innerTextDefaultStyle.fill = textFill;\n                innerTextDefaultStyle.stroke = textStroke;\n                innerTextDefaultStyle.autoStroke = autoStroke;\n                innerTextDefaultStyle.align = textAlign;\n                innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n                textEl.setDefaultTextStyle(innerTextDefaultStyle);\n            }\n            textEl.__dirty |= REDRAW_BIT;\n            if (textStyleChanged) {\n                textEl.dirtyStyle(true);\n            }\n        }\n    };\n    Element.prototype.canBeInsideText = function () {\n        return true;\n    };\n    Element.prototype.getInsideTextFill = function () {\n        return '#fff';\n    };\n    Element.prototype.getInsideTextStroke = function (textFill) {\n        return '#000';\n    };\n    Element.prototype.getOutsideFill = function () {\n        return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n    Element.prototype.getOutsideStroke = function (textFill) {\n        var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n        var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n        if (!colorArr) {\n            colorArr = [255, 255, 255, 1];\n        }\n        var alpha = colorArr[3];\n        var isDark = this.__zr.isDarkMode();\n        for (var i = 0; i < 3; i++) {\n            colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n        }\n        colorArr[3] = 1;\n        return stringify(colorArr, 'rgba');\n    };\n    Element.prototype.traverse = function (cb, context) { };\n    Element.prototype.attrKV = function (key, value) {\n        if (key === 'textConfig') {\n            this.setTextConfig(value);\n        }\n        else if (key === 'textContent') {\n            this.setTextContent(value);\n        }\n        else if (key === 'clipPath') {\n            this.setClipPath(value);\n        }\n        else if (key === 'extra') {\n            this.extra = this.extra || {};\n            extend(this.extra, value);\n        }\n        else {\n            this[key] = value;\n        }\n    };\n    Element.prototype.hide = function () {\n        this.ignore = true;\n        this.markRedraw();\n    };\n    Element.prototype.show = function () {\n        this.ignore = false;\n        this.markRedraw();\n    };\n    Element.prototype.attr = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.attrKV(keyOrObj, value);\n        }\n        else if (isObject(keyOrObj)) {\n            var obj = keyOrObj;\n            var keysArr = keys(obj);\n            for (var i = 0; i < keysArr.length; i++) {\n                var key = keysArr[i];\n                this.attrKV(key, keyOrObj[key]);\n            }\n        }\n        this.markRedraw();\n        return this;\n    };\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n        this._innerSaveToNormal(toState);\n        var normalState = this._normalState;\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            var fromStateTransition = animator.__fromStateTransition;\n            if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n                continue;\n            }\n            var targetName = animator.targetName;\n            var target = targetName\n                ? normalState[targetName] : normalState;\n            animator.saveTo(target);\n        }\n    };\n    Element.prototype._innerSaveToNormal = function (toState) {\n        var normalState = this._normalState;\n        if (!normalState) {\n            normalState = this._normalState = {};\n        }\n        if (toState.textConfig && !normalState.textConfig) {\n            normalState.textConfig = this.textConfig;\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n        for (var i = 0; i < primaryKeys.length; i++) {\n            var key = primaryKeys[i];\n            if (toState[key] != null && !(key in normalState)) {\n                normalState[key] = this[key];\n            }\n        }\n    };\n    Element.prototype.hasState = function () {\n        return this.currentStates.length > 0;\n    };\n    Element.prototype.getState = function (name) {\n        return this.states[name];\n    };\n    Element.prototype.ensureState = function (name) {\n        var states = this.states;\n        if (!states[name]) {\n            states[name] = {};\n        }\n        return states[name];\n    };\n    Element.prototype.clearStates = function (noAnimation) {\n        this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {\n        var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n        var hasStates = this.hasState();\n        if (!hasStates && toNormalState) {\n            return;\n        }\n        var currentStates = this.currentStates;\n        var animationCfg = this.stateTransition;\n        if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n            return;\n        }\n        var state;\n        if (this.stateProxy && !toNormalState) {\n            state = this.stateProxy(stateName);\n        }\n        if (!state) {\n            state = (this.states && this.states[stateName]);\n        }\n        if (!state && !toNormalState) {\n            logError(\"State \" + stateName + \" not exists.\");\n            return;\n        }\n        if (!toNormalState) {\n            this.saveCurrentToNormalState(state);\n        }\n        var useHoverLayer = !!((state && state.hoverLayer) || forceUseHoverLayer);\n        if (useHoverLayer) {\n            this._toggleHoverLayerFlag(true);\n        }\n        this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (textGuide) {\n            textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (toNormalState) {\n            this.currentStates = [];\n            this._normalState = {};\n        }\n        else {\n            if (!keepCurrentStates) {\n                this.currentStates = [stateName];\n            }\n            else {\n                this.currentStates.push(stateName);\n            }\n        }\n        this._updateAnimationTargets();\n        this.markRedraw();\n        if (!useHoverLayer && this.__inHover) {\n            this._toggleHoverLayerFlag(false);\n            this.__dirty &= ~REDRAW_BIT;\n        }\n        return state;\n    };\n    Element.prototype.useStates = function (states, noAnimation, forceUseHoverLayer) {\n        if (!states.length) {\n            this.clearStates();\n        }\n        else {\n            var stateObjects = [];\n            var currentStates = this.currentStates;\n            var len = states.length;\n            var notChange = len === currentStates.length;\n            if (notChange) {\n                for (var i = 0; i < len; i++) {\n                    if (states[i] !== currentStates[i]) {\n                        notChange = false;\n                        break;\n                    }\n                }\n            }\n            if (notChange) {\n                return;\n            }\n            for (var i = 0; i < len; i++) {\n                var stateName = states[i];\n                var stateObj = void 0;\n                if (this.stateProxy) {\n                    stateObj = this.stateProxy(stateName, states);\n                }\n                if (!stateObj) {\n                    stateObj = this.states[stateName];\n                }\n                if (stateObj) {\n                    stateObjects.push(stateObj);\n                }\n            }\n            var lastStateObj = stateObjects[len - 1];\n            var useHoverLayer = !!((lastStateObj && lastStateObj.hoverLayer) || forceUseHoverLayer);\n            if (useHoverLayer) {\n                this._toggleHoverLayerFlag(true);\n            }\n            var mergedState = this._mergeStates(stateObjects);\n            var animationCfg = this.stateTransition;\n            this.saveCurrentToNormalState(mergedState);\n            this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n            var textContent = this._textContent;\n            var textGuide = this._textGuide;\n            if (textContent) {\n                textContent.useStates(states, noAnimation, useHoverLayer);\n            }\n            if (textGuide) {\n                textGuide.useStates(states, noAnimation, useHoverLayer);\n            }\n            this._updateAnimationTargets();\n            this.currentStates = states.slice();\n            this.markRedraw();\n            if (!useHoverLayer && this.__inHover) {\n                this._toggleHoverLayerFlag(false);\n                this.__dirty &= ~REDRAW_BIT;\n            }\n        }\n    };\n    Element.prototype._updateAnimationTargets = function () {\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            if (animator.targetName) {\n                animator.changeTarget(this[animator.targetName]);\n            }\n        }\n    };\n    Element.prototype.removeState = function (state) {\n        var idx = indexOf(this.currentStates, state);\n        if (idx >= 0) {\n            var currentStates = this.currentStates.slice();\n            currentStates.splice(idx, 1);\n            this.useStates(currentStates);\n        }\n    };\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n        var currentStates = this.currentStates.slice();\n        var idx = indexOf(currentStates, oldState);\n        var newStateExists = indexOf(currentStates, newState) >= 0;\n        if (idx >= 0) {\n            if (!newStateExists) {\n                currentStates[idx] = newState;\n            }\n            else {\n                currentStates.splice(idx, 1);\n            }\n        }\n        else if (forceAdd && !newStateExists) {\n            currentStates.push(newState);\n        }\n        this.useStates(currentStates);\n    };\n    Element.prototype.toggleState = function (state, enable) {\n        if (enable) {\n            this.useState(state, true);\n        }\n        else {\n            this.removeState(state);\n        }\n    };\n    Element.prototype._mergeStates = function (states) {\n        var mergedState = {};\n        var mergedTextConfig;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            extend(mergedState, state);\n            if (state.textConfig) {\n                mergedTextConfig = mergedTextConfig || {};\n                extend(mergedTextConfig, state.textConfig);\n            }\n        }\n        if (mergedTextConfig) {\n            mergedState.textConfig = mergedTextConfig;\n        }\n        return mergedState;\n    };\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        if (state && state.textConfig) {\n            this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n            extend(this.textConfig, state.textConfig);\n        }\n        else if (needsRestoreToNormal) {\n            if (normalState.textConfig) {\n                this.textConfig = normalState.textConfig;\n            }\n        }\n        var transitionTarget = {};\n        var hasTransition = false;\n        for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            var key = PRIMARY_STATES_KEYS[i];\n            var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n            if (state && state[key] != null) {\n                if (propNeedsTransition) {\n                    hasTransition = true;\n                    transitionTarget[key] = state[key];\n                }\n                else {\n                    this[key] = state[key];\n                }\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    if (propNeedsTransition) {\n                        hasTransition = true;\n                        transitionTarget[key] = normalState[key];\n                    }\n                    else {\n                        this[key] = normalState[key];\n                    }\n                }\n            }\n        }\n        if (!transition) {\n            for (var i = 0; i < this.animators.length; i++) {\n                var animator = this.animators[i];\n                var targetName = animator.targetName;\n                if (!animator.getLoop()) {\n                    animator.__changeFinalValue(targetName\n                        ? (state || normalState)[targetName]\n                        : (state || normalState));\n                }\n            }\n        }\n        if (hasTransition) {\n            this._transitionState(stateName, transitionTarget, animationCfg);\n        }\n    };\n    Element.prototype._attachComponent = function (componentEl) {\n        if (componentEl.__zr && !componentEl.__hostTarget) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Text element has been added to zrender.');\n            }\n            return;\n        }\n        if (componentEl === this) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Recursive component attachment.');\n            }\n            return;\n        }\n        var zr = this.__zr;\n        if (zr) {\n            componentEl.addSelfToZr(zr);\n        }\n        componentEl.__zr = zr;\n        componentEl.__hostTarget = this;\n    };\n    Element.prototype._detachComponent = function (componentEl) {\n        if (componentEl.__zr) {\n            componentEl.removeSelfFromZr(componentEl.__zr);\n        }\n        componentEl.__zr = null;\n        componentEl.__hostTarget = null;\n    };\n    Element.prototype.getClipPath = function () {\n        return this._clipPath;\n    };\n    Element.prototype.setClipPath = function (clipPath) {\n        if (this._clipPath && this._clipPath !== clipPath) {\n            this.removeClipPath();\n        }\n        this._attachComponent(clipPath);\n        this._clipPath = clipPath;\n        this.markRedraw();\n    };\n    Element.prototype.removeClipPath = function () {\n        var clipPath = this._clipPath;\n        if (clipPath) {\n            this._detachComponent(clipPath);\n            this._clipPath = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextContent = function () {\n        return this._textContent;\n    };\n    Element.prototype.setTextContent = function (textEl) {\n        var previousTextContent = this._textContent;\n        if (previousTextContent === textEl) {\n            return;\n        }\n        if (previousTextContent && previousTextContent !== textEl) {\n            this.removeTextContent();\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (textEl.__zr && !textEl.__hostTarget) {\n                throw new Error('Text element has been added to zrender.');\n            }\n        }\n        textEl.innerTransformable = new Transformable();\n        this._attachComponent(textEl);\n        this._textContent = textEl;\n        this.markRedraw();\n    };\n    Element.prototype.setTextConfig = function (cfg) {\n        if (!this.textConfig) {\n            this.textConfig = {};\n        }\n        extend(this.textConfig, cfg);\n        this.markRedraw();\n    };\n    Element.prototype.removeTextConfig = function () {\n        this.textConfig = null;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextContent = function () {\n        var textEl = this._textContent;\n        if (textEl) {\n            textEl.innerTransformable = null;\n            this._detachComponent(textEl);\n            this._textContent = null;\n            this._innerTextDefaultStyle = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextGuideLine = function () {\n        return this._textGuide;\n    };\n    Element.prototype.setTextGuideLine = function (guideLine) {\n        if (this._textGuide && this._textGuide !== guideLine) {\n            this.removeTextGuideLine();\n        }\n        this._attachComponent(guideLine);\n        this._textGuide = guideLine;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextGuideLine = function () {\n        var textGuide = this._textGuide;\n        if (textGuide) {\n            this._detachComponent(textGuide);\n            this._textGuide = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.markRedraw = function () {\n        this.__dirty |= REDRAW_BIT;\n        var zr = this.__zr;\n        if (zr) {\n            if (this.__inHover) {\n                zr.refreshHover();\n            }\n            else {\n                zr.refresh();\n            }\n        }\n        if (this.__hostTarget) {\n            this.__hostTarget.markRedraw();\n        }\n    };\n    Element.prototype.dirty = function () {\n        this.markRedraw();\n    };\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n        this.__inHover = inHover;\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.__inHover = inHover;\n        }\n        if (textGuide) {\n            textGuide.__inHover = inHover;\n        }\n    };\n    Element.prototype.addSelfToZr = function (zr) {\n        if (this.__zr === zr) {\n            return;\n        }\n        this.__zr = zr;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.addAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.addSelfToZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.addSelfToZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.addSelfToZr(zr);\n        }\n    };\n    Element.prototype.removeSelfFromZr = function (zr) {\n        if (!this.__zr) {\n            return;\n        }\n        this.__zr = null;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.removeAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.removeSelfFromZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.removeSelfFromZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.removeSelfFromZr(zr);\n        }\n    };\n    Element.prototype.animate = function (key, loop, allowDiscreteAnimation) {\n        var target = key ? this[key] : this;\n        if (process.env.NODE_ENV !== 'production') {\n            if (!target) {\n                logError('Property \"'\n                    + key\n                    + '\" is not existed in element '\n                    + this.id);\n                return;\n            }\n        }\n        var animator = new Animator(target, loop, allowDiscreteAnimation);\n        key && (animator.targetName = key);\n        this.addAnimator(animator, key);\n        return animator;\n    };\n    Element.prototype.addAnimator = function (animator, key) {\n        var zr = this.__zr;\n        var el = this;\n        animator.during(function () {\n            el.updateDuringAnimation(key);\n        }).done(function () {\n            var animators = el.animators;\n            var idx = indexOf(animators, animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        this.animators.push(animator);\n        if (zr) {\n            zr.animation.addAnimator(animator);\n        }\n        zr && zr.wakeUp();\n    };\n    Element.prototype.updateDuringAnimation = function (key) {\n        this.markRedraw();\n    };\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n        var animators = this.animators;\n        var len = animators.length;\n        var leftAnimators = [];\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            if (!scope || scope === animator.scope) {\n                animator.stop(forwardToLast);\n            }\n            else {\n                leftAnimators.push(animator);\n            }\n        }\n        this.animators = leftAnimators;\n        return this;\n    };\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps);\n    };\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps, true);\n    };\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n        var animators = animateTo(this, target, cfg, animationProps);\n        for (var i = 0; i < animators.length; i++) {\n            animators[i].__fromStateTransition = stateName;\n        }\n    };\n    Element.prototype.getBoundingRect = function () {\n        return null;\n    };\n    Element.prototype.getPaintRect = function () {\n        return null;\n    };\n    Element.initDefaultProps = (function () {\n        var elProto = Element.prototype;\n        elProto.type = 'element';\n        elProto.name = '';\n        elProto.ignore =\n            elProto.silent =\n                elProto.isGroup =\n                    elProto.draggable =\n                        elProto.dragging =\n                            elProto.ignoreClip =\n                                elProto.__inHover = false;\n        elProto.__dirty = REDRAW_BIT;\n        var logs = {};\n        function logDeprecatedError(key, xKey, yKey) {\n            if (!logs[key + xKey + yKey]) {\n                console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n                logs[key + xKey + yKey] = true;\n            }\n        }\n        function createLegacyProperty(key, privateKey, xKey, yKey) {\n            Object.defineProperty(elProto, key, {\n                get: function () {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    if (!this[privateKey]) {\n                        var pos = this[privateKey] = [];\n                        enhanceArray(this, pos);\n                    }\n                    return this[privateKey];\n                },\n                set: function (pos) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    this[xKey] = pos[0];\n                    this[yKey] = pos[1];\n                    this[privateKey] = pos;\n                    enhanceArray(this, pos);\n                }\n            });\n            function enhanceArray(self, pos) {\n                Object.defineProperty(pos, 0, {\n                    get: function () {\n                        return self[xKey];\n                    },\n                    set: function (val) {\n                        self[xKey] = val;\n                    }\n                });\n                Object.defineProperty(pos, 1, {\n                    get: function () {\n                        return self[yKey];\n                    },\n                    set: function (val) {\n                        self[yKey] = val;\n                    }\n                });\n            }\n        }\n        if (Object.defineProperty) {\n            createLegacyProperty('position', '_legacyPos', 'x', 'y');\n            createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n            createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n        }\n    })();\n    return Element;\n}());\nmixin(Element, Eventful);\nmixin(Element, Transformable);\nfunction animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n    var doneCb = function () {\n        doneHappened = true;\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    var abortedCb = function () {\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    if (!finishCount) {\n        cfgDone && cfgDone();\n    }\n    if (animators.length > 0 && cfg.during) {\n        animators[0].during(function (target, percent) {\n            cfg.during(percent);\n        });\n    }\n    for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        if (doneCb) {\n            animator.done(doneCb);\n        }\n        if (abortedCb) {\n            animator.aborted(abortedCb);\n        }\n        if (cfg.force) {\n            animator.duration(cfg.duration);\n        }\n        animator.start(cfg.easing);\n    }\n    return animators;\n}\nfunction copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n        source[i] = target[i];\n    }\n}\nfunction is2DArray(value) {\n    return isArrayLike(value[0]);\n}\nfunction copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n        if (!isArrayLike(target[key])) {\n            target[key] = [];\n        }\n        if (isTypedArray(source[key])) {\n            var len = source[key].length;\n            if (target[key].length !== len) {\n                target[key] = new (source[key].constructor)(len);\n                copyArrShallow(target[key], source[key], len);\n            }\n        }\n        else {\n            var sourceArr = source[key];\n            var targetArr = target[key];\n            var len0 = sourceArr.length;\n            if (is2DArray(sourceArr)) {\n                var len1 = sourceArr[0].length;\n                for (var i = 0; i < len0; i++) {\n                    if (!targetArr[i]) {\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n                    }\n                    else {\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\n                    }\n                }\n            }\n            else {\n                copyArrShallow(targetArr, sourceArr, len0);\n            }\n            targetArr.length = sourceArr.length;\n        }\n    }\n    else {\n        target[key] = source[key];\n    }\n}\nfunction isValueSame(val1, val2) {\n    return val1 === val2\n        || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);\n}\nfunction is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (arr0[i] !== arr1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    var existsAnimators = animatable.animators;\n    var animationKeys = [];\n    for (var k = 0; k < targetKeys.length; k++) {\n        var innerKey = targetKeys[k];\n        var targetVal = target[innerKey];\n        if (targetVal != null && animateObj[innerKey] != null\n            && (animateAll || animationProps[innerKey])) {\n            if (isObject(targetVal)\n                && !isArrayLike(targetVal)\n                && !isGradientObject(targetVal)) {\n                if (topKey) {\n                    if (!reverse) {\n                        animateObj[innerKey] = targetVal;\n                        animatable.updateDuringAnimation(topKey);\n                    }\n                    continue;\n                }\n                animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);\n            }\n            else {\n                animationKeys.push(innerKey);\n            }\n        }\n        else if (!reverse) {\n            animateObj[innerKey] = targetVal;\n            animatable.updateDuringAnimation(topKey);\n            animationKeys.push(innerKey);\n        }\n    }\n    var keyLen = animationKeys.length;\n    if (!additive && keyLen) {\n        for (var i = 0; i < existsAnimators.length; i++) {\n            var animator = existsAnimators[i];\n            if (animator.targetName === topKey) {\n                var allAborted = animator.stopTracks(animationKeys);\n                if (allAborted) {\n                    var idx = indexOf(existsAnimators, animator);\n                    existsAnimators.splice(idx, 1);\n                }\n            }\n        }\n    }\n    if (!cfg.force) {\n        animationKeys = filter(animationKeys, function (key) { return !isValueSame(target[key], animateObj[key]); });\n        keyLen = animationKeys.length;\n    }\n    if (keyLen > 0\n        || (cfg.force && !animators.length)) {\n        var revertedSource = void 0;\n        var reversedTarget = void 0;\n        var sourceClone = void 0;\n        if (reverse) {\n            reversedTarget = {};\n            if (setToFinal) {\n                revertedSource = {};\n            }\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                reversedTarget[innerKey] = animateObj[innerKey];\n                if (setToFinal) {\n                    revertedSource[innerKey] = target[innerKey];\n                }\n                else {\n                    animateObj[innerKey] = target[innerKey];\n                }\n            }\n        }\n        else if (setToFinal) {\n            sourceClone = {};\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                sourceClone[innerKey] = cloneValue(animateObj[innerKey]);\n                copyValue(animateObj, target, innerKey);\n            }\n        }\n        var animator = new Animator(animateObj, false, false, additive ? filter(existsAnimators, function (animator) { return animator.targetName === topKey; }) : null);\n        animator.targetName = topKey;\n        if (cfg.scope) {\n            animator.scope = cfg.scope;\n        }\n        if (setToFinal && revertedSource) {\n            animator.whenWithKeys(0, revertedSource, animationKeys);\n        }\n        if (sourceClone) {\n            animator.whenWithKeys(0, sourceClone, animationKeys);\n        }\n        animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);\n        animatable.addAnimator(animator, topKey);\n        animators.push(animator);\n    }\n}\nexport default Element;\n","var easingFuncs = {\n    linear: function (k) {\n        return k;\n    },\n    quadraticIn: function (k) {\n        return k * k;\n    },\n    quadraticOut: function (k) {\n        return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n        return k * k * k;\n    },\n    cubicOut: function (k) {\n        return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n        return k * k * k * k;\n    },\n    quarticOut: function (k) {\n        return 1 - (--k * k * k * k);\n    },\n    quarticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n        return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n        return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    circularInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return -(a * Math.pow(2, 10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, -10 * k)\n            * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    elasticInOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n        return 1 - easingFuncs.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        }\n        else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    bounceInOut: function (k) {\n        if (k < 0.5) {\n            return easingFuncs.bounceIn(k * 2) * 0.5;\n        }\n        return easingFuncs.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\nexport default easingFuncs;\n","import easingFuncs from './easing.js';\nimport { isFunction, noop } from '../core/util.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nvar Clip = (function () {\n    function Clip(opts) {\n        this._inited = false;\n        this._startTime = 0;\n        this._pausedTime = 0;\n        this._paused = false;\n        this._life = opts.life || 1000;\n        this._delay = opts.delay || 0;\n        this.loop = opts.loop || false;\n        this.onframe = opts.onframe || noop;\n        this.ondestroy = opts.ondestroy || noop;\n        this.onrestart = opts.onrestart || noop;\n        opts.easing && this.setEasing(opts.easing);\n    }\n    Clip.prototype.step = function (globalTime, deltaTime) {\n        if (!this._inited) {\n            this._startTime = globalTime + this._delay;\n            this._inited = true;\n        }\n        if (this._paused) {\n            this._pausedTime += deltaTime;\n            return;\n        }\n        var life = this._life;\n        var elapsedTime = globalTime - this._startTime - this._pausedTime;\n        var percent = elapsedTime / life;\n        if (percent < 0) {\n            percent = 0;\n        }\n        percent = Math.min(percent, 1);\n        var easingFunc = this.easingFunc;\n        var schedule = easingFunc ? easingFunc(percent) : percent;\n        this.onframe(schedule);\n        if (percent === 1) {\n            if (this.loop) {\n                var remainder = elapsedTime % life;\n                this._startTime = globalTime - remainder;\n                this._pausedTime = 0;\n                this.onrestart();\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Clip.prototype.pause = function () {\n        this._paused = true;\n    };\n    Clip.prototype.resume = function () {\n        this._paused = false;\n    };\n    Clip.prototype.setEasing = function (easing) {\n        this.easing = easing;\n        this.easingFunc = isFunction(easing)\n            ? easing\n            : easingFuncs[easing] || createCubicEasingFunc(easing);\n    };\n    return Clip;\n}());\nexport default Clip;\n","import Clip from './Clip.js';\nimport * as color from '../tool/color.js';\nimport { eqNaN, extend, isArrayLike, isFunction, isGradientObject, isNumber, isString, keys, logError, map } from '../core/util.js';\nimport easingFuncs from './easing.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nimport { isLinearGradient, isRadialGradient } from '../svg/helper.js';\n;\nvar arraySlice = Array.prototype.slice;\nfunction interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\nfunction interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n    return out;\n}\nfunction interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n        }\n    }\n    return out;\n}\nfunction add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = p0[i] + p1[i] * sign;\n    }\n    return out;\n}\nfunction add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = p0[i][j] + p1[i][j] * sign;\n        }\n    }\n    return out;\n}\nfunction fillColorStops(val0, val1) {\n    var len0 = val0.length;\n    var len1 = val1.length;\n    var shorterArr = len0 > len1 ? val1 : val0;\n    var shorterLen = Math.min(len0, len1);\n    var last = shorterArr[shorterLen - 1] || { color: [0, 0, 0, 0], offset: 0 };\n    for (var i = shorterLen; i < Math.max(len0, len1); i++) {\n        shorterArr.push({\n            offset: last.offset,\n            color: last.color.slice()\n        });\n    }\n}\nfunction fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n    if (!arr0.push || !arr1.push) {\n        return;\n    }\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            arr0.length = arr1Len;\n        }\n        else {\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n            }\n        }\n    }\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\nexport function cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        }\n        return arraySlice.call(value);\n    }\n    return value;\n}\nfunction rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]) || 0;\n    rgba[1] = Math.floor(rgba[1]) || 0;\n    rgba[2] = Math.floor(rgba[2]) || 0;\n    rgba[3] = rgba[3] == null ? 1 : rgba[3];\n    return 'rgba(' + rgba.join(',') + ')';\n}\nfunction guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n}\nvar VALUE_TYPE_NUMBER = 0;\nvar VALUE_TYPE_1D_ARRAY = 1;\nvar VALUE_TYPE_2D_ARRAY = 2;\nvar VALUE_TYPE_COLOR = 3;\nvar VALUE_TYPE_LINEAR_GRADIENT = 4;\nvar VALUE_TYPE_RADIAL_GRADIENT = 5;\nvar VALUE_TYPE_UNKOWN = 6;\nfunction isGradientValueType(valType) {\n    return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;\n}\nfunction isArrayValueType(valType) {\n    return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;\n}\nvar tmpRgba = [0, 0, 0, 0];\nvar Track = (function () {\n    function Track(propName) {\n        this.keyframes = [];\n        this.discrete = false;\n        this._invalid = false;\n        this._needsSort = false;\n        this._lastFr = 0;\n        this._lastFrP = 0;\n        this.propName = propName;\n    }\n    Track.prototype.isFinished = function () {\n        return this._finished;\n    };\n    Track.prototype.setFinished = function () {\n        this._finished = true;\n        if (this._additiveTrack) {\n            this._additiveTrack.setFinished();\n        }\n    };\n    Track.prototype.needsAnimate = function () {\n        return this.keyframes.length >= 1;\n    };\n    Track.prototype.getAdditiveTrack = function () {\n        return this._additiveTrack;\n    };\n    Track.prototype.addKeyframe = function (time, rawValue, easing) {\n        this._needsSort = true;\n        var keyframes = this.keyframes;\n        var len = keyframes.length;\n        var discrete = false;\n        var valType = VALUE_TYPE_UNKOWN;\n        var value = rawValue;\n        if (isArrayLike(rawValue)) {\n            var arrayDim = guessArrayDim(rawValue);\n            valType = arrayDim;\n            if (arrayDim === 1 && !isNumber(rawValue[0])\n                || arrayDim === 2 && !isNumber(rawValue[0][0])) {\n                discrete = true;\n            }\n        }\n        else {\n            if (isNumber(rawValue) && !eqNaN(rawValue)) {\n                valType = VALUE_TYPE_NUMBER;\n            }\n            else if (isString(rawValue)) {\n                if (!isNaN(+rawValue)) {\n                    valType = VALUE_TYPE_NUMBER;\n                }\n                else {\n                    var colorArray = color.parse(rawValue);\n                    if (colorArray) {\n                        value = colorArray;\n                        valType = VALUE_TYPE_COLOR;\n                    }\n                }\n            }\n            else if (isGradientObject(rawValue)) {\n                var parsedGradient = extend({}, value);\n                parsedGradient.colorStops = map(rawValue.colorStops, function (colorStop) { return ({\n                    offset: colorStop.offset,\n                    color: color.parse(colorStop.color)\n                }); });\n                if (isLinearGradient(rawValue)) {\n                    valType = VALUE_TYPE_LINEAR_GRADIENT;\n                }\n                else if (isRadialGradient(rawValue)) {\n                    valType = VALUE_TYPE_RADIAL_GRADIENT;\n                }\n                value = parsedGradient;\n            }\n        }\n        if (len === 0) {\n            this.valType = valType;\n        }\n        else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {\n            discrete = true;\n        }\n        this.discrete = this.discrete || discrete;\n        var kf = {\n            time: time,\n            value: value,\n            rawValue: rawValue,\n            percent: 0\n        };\n        if (easing) {\n            kf.easing = easing;\n            kf.easingFunc = isFunction(easing)\n                ? easing\n                : easingFuncs[easing] || createCubicEasingFunc(easing);\n        }\n        keyframes.push(kf);\n        return kf;\n    };\n    Track.prototype.prepare = function (maxTime, additiveTrack) {\n        var kfs = this.keyframes;\n        if (this._needsSort) {\n            kfs.sort(function (a, b) {\n                return a.time - b.time;\n            });\n        }\n        var valType = this.valType;\n        var kfsLen = kfs.length;\n        var lastKf = kfs[kfsLen - 1];\n        var isDiscrete = this.discrete;\n        var isArr = isArrayValueType(valType);\n        var isGradient = isGradientValueType(valType);\n        for (var i = 0; i < kfsLen; i++) {\n            var kf = kfs[i];\n            var value = kf.value;\n            var lastValue = lastKf.value;\n            kf.percent = kf.time / maxTime;\n            if (!isDiscrete) {\n                if (isArr && i !== kfsLen - 1) {\n                    fillArray(value, lastValue, valType);\n                }\n                else if (isGradient) {\n                    fillColorStops(value.colorStops, lastValue.colorStops);\n                }\n            }\n        }\n        if (!isDiscrete\n            && valType !== VALUE_TYPE_RADIAL_GRADIENT\n            && additiveTrack\n            && this.needsAnimate()\n            && additiveTrack.needsAnimate()\n            && valType === additiveTrack.valType\n            && !additiveTrack._finished) {\n            this._additiveTrack = additiveTrack;\n            var startValue = kfs[0].value;\n            for (var i = 0; i < kfsLen; i++) {\n                if (valType === VALUE_TYPE_NUMBER) {\n                    kfs[i].additiveValue = kfs[i].value - startValue;\n                }\n                else if (valType === VALUE_TYPE_COLOR) {\n                    kfs[i].additiveValue =\n                        add1DArray([], kfs[i].value, startValue, -1);\n                }\n                else if (isArrayValueType(valType)) {\n                    kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY\n                        ? add1DArray([], kfs[i].value, startValue, -1)\n                        : add2DArray([], kfs[i].value, startValue, -1);\n                }\n            }\n        }\n    };\n    Track.prototype.step = function (target, percent) {\n        if (this._finished) {\n            return;\n        }\n        if (this._additiveTrack && this._additiveTrack._finished) {\n            this._additiveTrack = null;\n        }\n        var isAdditive = this._additiveTrack != null;\n        var valueKey = isAdditive ? 'additiveValue' : 'value';\n        var valType = this.valType;\n        var keyframes = this.keyframes;\n        var kfsNum = keyframes.length;\n        var propName = this.propName;\n        var isValueColor = valType === VALUE_TYPE_COLOR;\n        var frameIdx;\n        var lastFrame = this._lastFr;\n        var mathMin = Math.min;\n        var frame;\n        var nextFrame;\n        if (kfsNum === 1) {\n            frame = nextFrame = keyframes[0];\n        }\n        else {\n            if (percent < 0) {\n                frameIdx = 0;\n            }\n            else if (percent < this._lastFrP) {\n                var start = mathMin(lastFrame + 1, kfsNum - 1);\n                for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n                    if (keyframes[frameIdx].percent <= percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx, kfsNum - 2);\n            }\n            else {\n                for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {\n                    if (keyframes[frameIdx].percent > percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx - 1, kfsNum - 2);\n            }\n            nextFrame = keyframes[frameIdx + 1];\n            frame = keyframes[frameIdx];\n        }\n        if (!(frame && nextFrame)) {\n            return;\n        }\n        this._lastFr = frameIdx;\n        this._lastFrP = percent;\n        var interval = (nextFrame.percent - frame.percent);\n        var w = interval === 0 ? 1 : mathMin((percent - frame.percent) / interval, 1);\n        if (nextFrame.easingFunc) {\n            w = nextFrame.easingFunc(w);\n        }\n        var targetArr = isAdditive ? this._additiveValue\n            : (isValueColor ? tmpRgba : target[propName]);\n        if ((isArrayValueType(valType) || isValueColor) && !targetArr) {\n            targetArr = this._additiveValue = [];\n        }\n        if (this.discrete) {\n            target[propName] = w < 1 ? frame.rawValue : nextFrame.rawValue;\n        }\n        else if (isArrayValueType(valType)) {\n            valType === VALUE_TYPE_1D_ARRAY\n                ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\n                : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n        }\n        else if (isGradientValueType(valType)) {\n            var val = frame[valueKey];\n            var nextVal_1 = nextFrame[valueKey];\n            var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;\n            target[propName] = {\n                type: isLinearGradient_1 ? 'linear' : 'radial',\n                x: interpolateNumber(val.x, nextVal_1.x, w),\n                y: interpolateNumber(val.y, nextVal_1.y, w),\n                colorStops: map(val.colorStops, function (colorStop, idx) {\n                    var nextColorStop = nextVal_1.colorStops[idx];\n                    return {\n                        offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w),\n                        color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w))\n                    };\n                }),\n                global: nextVal_1.global\n            };\n            if (isLinearGradient_1) {\n                target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w);\n                target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w);\n            }\n            else {\n                target[propName].r = interpolateNumber(val.r, nextVal_1.r, w);\n            }\n        }\n        else if (isValueColor) {\n            interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n            if (!isAdditive) {\n                target[propName] = rgba2String(targetArr);\n            }\n        }\n        else {\n            var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n            if (isAdditive) {\n                this._additiveValue = value;\n            }\n            else {\n                target[propName] = value;\n            }\n        }\n        if (isAdditive) {\n            this._addToTarget(target);\n        }\n    };\n    Track.prototype._addToTarget = function (target) {\n        var valType = this.valType;\n        var propName = this.propName;\n        var additiveValue = this._additiveValue;\n        if (valType === VALUE_TYPE_NUMBER) {\n            target[propName] = target[propName] + additiveValue;\n        }\n        else if (valType === VALUE_TYPE_COLOR) {\n            color.parse(target[propName], tmpRgba);\n            add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n            target[propName] = rgba2String(tmpRgba);\n        }\n        else if (valType === VALUE_TYPE_1D_ARRAY) {\n            add1DArray(target[propName], target[propName], additiveValue, 1);\n        }\n        else if (valType === VALUE_TYPE_2D_ARRAY) {\n            add2DArray(target[propName], target[propName], additiveValue, 1);\n        }\n    };\n    return Track;\n}());\nvar Animator = (function () {\n    function Animator(target, loop, allowDiscreteAnimation, additiveTo) {\n        this._tracks = {};\n        this._trackKeys = [];\n        this._maxTime = 0;\n        this._started = 0;\n        this._clip = null;\n        this._target = target;\n        this._loop = loop;\n        if (loop && additiveTo) {\n            logError('Can\\' use additive animation on looped animation.');\n            return;\n        }\n        this._additiveAnimators = additiveTo;\n        this._allowDiscrete = allowDiscreteAnimation;\n    }\n    Animator.prototype.getMaxTime = function () {\n        return this._maxTime;\n    };\n    Animator.prototype.getDelay = function () {\n        return this._delay;\n    };\n    Animator.prototype.getLoop = function () {\n        return this._loop;\n    };\n    Animator.prototype.getTarget = function () {\n        return this._target;\n    };\n    Animator.prototype.changeTarget = function (target) {\n        this._target = target;\n    };\n    Animator.prototype.when = function (time, props, easing) {\n        return this.whenWithKeys(time, props, keys(props), easing);\n    };\n    Animator.prototype.whenWithKeys = function (time, props, propNames, easing) {\n        var tracks = this._tracks;\n        for (var i = 0; i < propNames.length; i++) {\n            var propName = propNames[i];\n            var track = tracks[propName];\n            if (!track) {\n                track = tracks[propName] = new Track(propName);\n                var initialValue = void 0;\n                var additiveTrack = this._getAdditiveTrack(propName);\n                if (additiveTrack) {\n                    var addtiveTrackKfs = additiveTrack.keyframes;\n                    var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];\n                    initialValue = lastFinalKf && lastFinalKf.value;\n                    if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {\n                        initialValue = rgba2String(initialValue);\n                    }\n                }\n                else {\n                    initialValue = this._target[propName];\n                }\n                if (initialValue == null) {\n                    continue;\n                }\n                if (time > 0) {\n                    track.addKeyframe(0, cloneValue(initialValue), easing);\n                }\n                this._trackKeys.push(propName);\n            }\n            track.addKeyframe(time, cloneValue(props[propName]), easing);\n        }\n        this._maxTime = Math.max(this._maxTime, time);\n        return this;\n    };\n    Animator.prototype.pause = function () {\n        this._clip.pause();\n        this._paused = true;\n    };\n    Animator.prototype.resume = function () {\n        this._clip.resume();\n        this._paused = false;\n    };\n    Animator.prototype.isPaused = function () {\n        return !!this._paused;\n    };\n    Animator.prototype.duration = function (duration) {\n        this._maxTime = duration;\n        this._force = true;\n        return this;\n    };\n    Animator.prototype._doneCallback = function () {\n        this._setTracksFinished();\n        this._clip = null;\n        var doneList = this._doneCbs;\n        if (doneList) {\n            var len = doneList.length;\n            for (var i = 0; i < len; i++) {\n                doneList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._abortedCallback = function () {\n        this._setTracksFinished();\n        var animation = this.animation;\n        var abortedList = this._abortedCbs;\n        if (animation) {\n            animation.removeClip(this._clip);\n        }\n        this._clip = null;\n        if (abortedList) {\n            for (var i = 0; i < abortedList.length; i++) {\n                abortedList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._setTracksFinished = function () {\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            tracks[tracksKeys[i]].setFinished();\n        }\n    };\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n        var additiveTrack;\n        var additiveAnimators = this._additiveAnimators;\n        if (additiveAnimators) {\n            for (var i = 0; i < additiveAnimators.length; i++) {\n                var track = additiveAnimators[i].getTrack(trackName);\n                if (track) {\n                    additiveTrack = track;\n                }\n            }\n        }\n        return additiveTrack;\n    };\n    Animator.prototype.start = function (easing) {\n        if (this._started > 0) {\n            return;\n        }\n        this._started = 1;\n        var self = this;\n        var tracks = [];\n        var maxTime = this._maxTime || 0;\n        for (var i = 0; i < this._trackKeys.length; i++) {\n            var propName = this._trackKeys[i];\n            var track = this._tracks[propName];\n            var additiveTrack = this._getAdditiveTrack(propName);\n            var kfs = track.keyframes;\n            var kfsNum = kfs.length;\n            track.prepare(maxTime, additiveTrack);\n            if (track.needsAnimate()) {\n                if (!this._allowDiscrete && track.discrete) {\n                    var lastKf = kfs[kfsNum - 1];\n                    if (lastKf) {\n                        self._target[track.propName] = lastKf.rawValue;\n                    }\n                    track.setFinished();\n                }\n                else {\n                    tracks.push(track);\n                }\n            }\n        }\n        if (tracks.length || this._force) {\n            var clip = new Clip({\n                life: maxTime,\n                loop: this._loop,\n                delay: this._delay || 0,\n                onframe: function (percent) {\n                    self._started = 2;\n                    var additiveAnimators = self._additiveAnimators;\n                    if (additiveAnimators) {\n                        var stillHasAdditiveAnimator = false;\n                        for (var i = 0; i < additiveAnimators.length; i++) {\n                            if (additiveAnimators[i]._clip) {\n                                stillHasAdditiveAnimator = true;\n                                break;\n                            }\n                        }\n                        if (!stillHasAdditiveAnimator) {\n                            self._additiveAnimators = null;\n                        }\n                    }\n                    for (var i = 0; i < tracks.length; i++) {\n                        tracks[i].step(self._target, percent);\n                    }\n                    var onframeList = self._onframeCbs;\n                    if (onframeList) {\n                        for (var i = 0; i < onframeList.length; i++) {\n                            onframeList[i](self._target, percent);\n                        }\n                    }\n                },\n                ondestroy: function () {\n                    self._doneCallback();\n                }\n            });\n            this._clip = clip;\n            if (this.animation) {\n                this.animation.addClip(clip);\n            }\n            if (easing) {\n                clip.setEasing(easing);\n            }\n        }\n        else {\n            this._doneCallback();\n        }\n        return this;\n    };\n    Animator.prototype.stop = function (forwardToLast) {\n        if (!this._clip) {\n            return;\n        }\n        var clip = this._clip;\n        if (forwardToLast) {\n            clip.onframe(1);\n        }\n        this._abortedCallback();\n    };\n    Animator.prototype.delay = function (time) {\n        this._delay = time;\n        return this;\n    };\n    Animator.prototype.during = function (cb) {\n        if (cb) {\n            if (!this._onframeCbs) {\n                this._onframeCbs = [];\n            }\n            this._onframeCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.done = function (cb) {\n        if (cb) {\n            if (!this._doneCbs) {\n                this._doneCbs = [];\n            }\n            this._doneCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.aborted = function (cb) {\n        if (cb) {\n            if (!this._abortedCbs) {\n                this._abortedCbs = [];\n            }\n            this._abortedCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.getClip = function () {\n        return this._clip;\n    };\n    Animator.prototype.getTrack = function (propName) {\n        return this._tracks[propName];\n    };\n    Animator.prototype.getTracks = function () {\n        var _this = this;\n        return map(this._trackKeys, function (key) { return _this._tracks[key]; });\n    };\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n        if (!propNames.length || !this._clip) {\n            return true;\n        }\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < propNames.length; i++) {\n            var track = tracks[propNames[i]];\n            if (track && !track.isFinished()) {\n                if (forwardToLast) {\n                    track.step(this._target, 1);\n                }\n                else if (this._started === 1) {\n                    track.step(this._target, 0);\n                }\n                track.setFinished();\n            }\n        }\n        var allAborted = true;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            if (!tracks[tracksKeys[i]].isFinished()) {\n                allAborted = false;\n                break;\n            }\n        }\n        if (allAborted) {\n            this._abortedCallback();\n        }\n        return allAborted;\n    };\n    Animator.prototype.saveTo = function (target, trackKeys, firstOrLast) {\n        if (!target) {\n            return;\n        }\n        trackKeys = trackKeys || this._trackKeys;\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track || track.isFinished()) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            var kf = kfs[firstOrLast ? 0 : kfs.length - 1];\n            if (kf) {\n                target[propName] = cloneValue(kf.rawValue);\n            }\n        }\n    };\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n        trackKeys = trackKeys || keys(finalProps);\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            if (kfs.length > 1) {\n                var lastKf = kfs.pop();\n                track.addKeyframe(lastKf.time, finalProps[propName]);\n                track.prepare(this._maxTime, track.getAdditiveTrack());\n            }\n        }\n    };\n    return Animator;\n}());\nexport default Animator;\n","import { cubicAt, cubicRootAt } from '../core/curve.js';\nimport { trim } from '../core/util.js';\nvar regexp = /cubic-bezier\\(([0-9,\\.e ]+)\\)/;\nexport function createCubicEasingFunc(cubicEasingStr) {\n    var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);\n    if (cubic) {\n        var points = cubic[1].split(',');\n        var a_1 = +trim(points[0]);\n        var b_1 = +trim(points[1]);\n        var c_1 = +trim(points[2]);\n        var d_1 = +trim(points[3]);\n        if (isNaN(a_1 + b_1 + c_1 + d_1)) {\n            return;\n        }\n        var roots_1 = [];\n        return function (p) {\n            return p <= 0\n                ? 0 : p >= 1\n                ? 1\n                : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);\n        };\n    }\n}\n","import env from '../core/env.js';\nvar requestAnimationFrame;\nrequestAnimationFrame = (env.hasGlobalWindow\n    && ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame)) || function (func) {\n    return setTimeout(func, 16);\n};\nexport default requestAnimationFrame;\n","import { __extends } from \"tslib\";\nimport * as util from '../core/util.js';\nimport { devicePixelRatio } from '../config.js';\nimport Eventful from '../core/Eventful.js';\nimport { getCanvasGradient } from './helper.js';\nimport { createCanvasPattern } from './graphic.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { platformApi } from '../core/platform.js';\nfunction createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            util.disableUserSelect(dom);\n            dom.onselectstart = function () { return false; };\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.painter = painter;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDRAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDRAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    var shouldCache = clearColor.global || (clearColor.__width === width\n                        && clearColor.__height === height);\n                    clearColorGradientOrPattern = shouldCache\n                        && clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                    clearColor.__width = width;\n                    clearColor.__height = height;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColor.scaleX = clearColor.scaleX || dpr;\n                    clearColor.scaleY = clearColor.scaleY || dpr;\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.__painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config.js';\nimport * as util from '../core/util.js';\nimport Layer from './Layer.js';\nimport requestAnimationFrame from '../animation/requestAnimationFrame.js';\nimport env from '../core/env.js';\nimport { brush, brushSingle } from './graphic.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { getSize } from './helper.js';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            util.disableUserSelect(root);\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = getSize(root, 0, opts);\n            this._height = getSize(root, 1, opts);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('ZLevel ' + zlevel + ' has been used already');\n            }\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            }\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.__painter = this;\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDRAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            var root = this.root;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","import { isArray, isNumber, map } from '../core/util.js';\nexport function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n        return null;\n    }\n    return lineType === 'dashed'\n        ? [4 * lineWidth, 2 * lineWidth]\n        : lineType === 'dotted'\n            ? [lineWidth]\n            : isNumber(lineType)\n                ? [lineType] : isArray(lineType) ? lineType : null;\n}\nexport function getLineDash(el) {\n    var style = el.style;\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n    if (lineDash) {\n        var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\n        if (lineScale_1 && lineScale_1 !== 1) {\n            lineDash = map(lineDash, function (rawVal) {\n                return rawVal / lineScale_1;\n            });\n            lineDashOffset /= lineScale_1;\n        }\n    }\n    return [lineDash, lineDashOffset];\n}\n","import { DEFAULT_COMMON_STYLE } from '../graphic/Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { createOrUpdateImage, isImageReady } from '../graphic/helper/image.js';\nimport { getCanvasGradient, isClipPathChanged } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { RADIAN_TO_DEGREE } from '../core/util.js';\nimport { getLineDash } from './dashStyle.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT } from '../graphic/constants.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nvar pathProxyForDraw = new PathProxy(true);\nfunction styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n}\nfunction isValidStrokeFillStyle(strokeOrFill) {\n    return typeof strokeOrFill === 'string' && strokeOrFill !== 'none';\n}\nfunction styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n}\nfunction doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        ctx.fill();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.fill();\n    }\n}\nfunction doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        ctx.stroke();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.stroke();\n    }\n}\nexport function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n    if (isImageReady(image)) {\n        var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n        if (typeof DOMMatrix === 'function'\n            && canvasPattern\n            && canvasPattern.setTransform) {\n            var matrix = new DOMMatrix();\n            matrix.translateSelf((pattern.x || 0), (pattern.y || 0));\n            matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);\n            matrix.scaleSelf((pattern.scaleX || 1), (pattern.scaleY || 1));\n            canvasPattern.setTransform(matrix);\n        }\n        return canvasPattern;\n    }\n}\nfunction brushPath(ctx, el, style, inBatch) {\n    var _a;\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n    if ((!el.silent || strokePart) && firstDraw) {\n        el.createPathProxy();\n    }\n    var path = el.path || pathProxyForDraw;\n    var dirtyFlag = el.__dirty;\n    if (!inBatch) {\n        var fill = style.fill;\n        var stroke = style.stroke;\n        var hasFillGradient = hasFill && !!fill.colorStops;\n        var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n        var hasFillPattern = hasFill && !!fill.image;\n        var hasStrokePattern = hasStroke && !!stroke.image;\n        var fillGradient = void 0;\n        var strokeGradient = void 0;\n        var fillPattern = void 0;\n        var strokePattern = void 0;\n        var rect = void 0;\n        if (hasFillGradient || hasStrokeGradient) {\n            rect = el.getBoundingRect();\n        }\n        if (hasFillGradient) {\n            fillGradient = dirtyFlag\n                ? getCanvasGradient(ctx, fill, rect)\n                : el.__canvasFillGradient;\n            el.__canvasFillGradient = fillGradient;\n        }\n        if (hasStrokeGradient) {\n            strokeGradient = dirtyFlag\n                ? getCanvasGradient(ctx, stroke, rect)\n                : el.__canvasStrokeGradient;\n            el.__canvasStrokeGradient = strokeGradient;\n        }\n        if (hasFillPattern) {\n            fillPattern = (dirtyFlag || !el.__canvasFillPattern)\n                ? createCanvasPattern(ctx, fill, el)\n                : el.__canvasFillPattern;\n            el.__canvasFillPattern = fillPattern;\n        }\n        if (hasStrokePattern) {\n            strokePattern = (dirtyFlag || !el.__canvasStrokePattern)\n                ? createCanvasPattern(ctx, stroke, el)\n                : el.__canvasStrokePattern;\n            el.__canvasStrokePattern = fillPattern;\n        }\n        if (hasFillGradient) {\n            ctx.fillStyle = fillGradient;\n        }\n        else if (hasFillPattern) {\n            if (fillPattern) {\n                ctx.fillStyle = fillPattern;\n            }\n            else {\n                hasFill = false;\n            }\n        }\n        if (hasStrokeGradient) {\n            ctx.strokeStyle = strokeGradient;\n        }\n        else if (hasStrokePattern) {\n            if (strokePattern) {\n                ctx.strokeStyle = strokePattern;\n            }\n            else {\n                hasStroke = false;\n            }\n        }\n    }\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    var lineDash;\n    var lineDashOffset;\n    if (ctx.setLineDash && style.lineDash) {\n        _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n    }\n    var needsRebuild = true;\n    if (firstDraw || (dirtyFlag & SHAPE_CHANGED_BIT)) {\n        path.setDPR(ctx.dpr);\n        if (strokePart) {\n            path.setContext(null);\n        }\n        else {\n            path.setContext(ctx);\n            needsRebuild = false;\n        }\n        path.reset();\n        el.buildPath(path, el.shape, inBatch);\n        path.toStatic();\n        el.pathUpdated();\n    }\n    if (needsRebuild) {\n        path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n    if (lineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n    }\n    if (!inBatch) {\n        if (style.strokeFirst) {\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n        }\n        else {\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n        }\n    }\n    if (lineDash) {\n        ctx.setLineDash([]);\n    }\n}\nfunction brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n    if (!image || !isImageReady(image)) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n    if (width == null && height != null) {\n        width = height * aspect;\n    }\n    else if (height == null && width != null) {\n        height = width / aspect;\n    }\n    else if (width == null && height == null) {\n        width = image.width;\n        height = image.height;\n    }\n    if (style.sWidth && style.sHeight) {\n        var sx = style.sx || 0;\n        var sy = style.sy || 0;\n        ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    }\n    else if (style.sx && style.sy) {\n        var sx = style.sx;\n        var sy = style.sy;\n        var sWidth = width - sx;\n        var sHeight = height - sy;\n        ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    }\n    else {\n        ctx.drawImage(image, x, y, width, height);\n    }\n}\nfunction brushText(ctx, el, style) {\n    var _a;\n    var text = style.text;\n    text != null && (text += '');\n    if (text) {\n        ctx.font = style.font || DEFAULT_FONT;\n        ctx.textAlign = style.textAlign;\n        ctx.textBaseline = style.textBaseline;\n        var lineDash = void 0;\n        var lineDashOffset = void 0;\n        if (ctx.setLineDash && style.lineDash) {\n            _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n        }\n        if (lineDash) {\n            ctx.setLineDash(lineDash);\n            ctx.lineDashOffset = lineDashOffset;\n        }\n        if (style.strokeFirst) {\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n        }\n        else {\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n        }\n        if (lineDash) {\n            ctx.setLineDash([]);\n        }\n    }\n}\nvar SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_PROPS = [\n    ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\n];\nfunction bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n    if (!forceSetAll) {\n        prevStyle = prevStyle || {};\n        if (style === prevStyle) {\n            return false;\n        }\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n        var opacity = Math.max(Math.min(style.opacity, 1), 0);\n        ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;\n    }\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n        var propName = SHADOW_NUMBER_PROPS[i];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = ctx.dpr * (style[propName] || 0);\n        }\n    }\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n    return styleChanged;\n}\nfunction bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll\n        ? null\n        : (prevEl && getStyle(prevEl, scope.inHover) || {});\n    if (style === prevStyle) {\n        return false;\n    }\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.fill) && (ctx.fillStyle = style.fill);\n    }\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.stroke) && (ctx.strokeStyle = style.stroke);\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n    if (el.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var newLineWidth = lineWidth / ((style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1);\n        if (ctx.lineWidth !== newLineWidth) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx.lineWidth = newLineWidth;\n        }\n    }\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n        var prop = STROKE_PROPS[i];\n        var propName = prop[0];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = style[propName] || prop[1];\n        }\n    }\n    return styleChanged;\n}\nfunction bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n}\nfunction setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n    if (m) {\n        ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    }\n    else {\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n}\nfunction updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n    for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        allClipped = allClipped || clipPath.isZeroArea();\n        setContextTransform(ctx, clipPath);\n        ctx.beginPath();\n        clipPath.buildPath(ctx, clipPath.shape);\n        ctx.clip();\n    }\n    scope.allClipped = allClipped;\n}\nfunction isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n        return m0[0] !== m1[0]\n            || m0[1] !== m1[1]\n            || m0[2] !== m1[2]\n            || m0[3] !== m1[3]\n            || m0[4] !== m1[4]\n            || m0[5] !== m1[5];\n    }\n    else if (!m0 && !m1) {\n        return false;\n    }\n    return true;\n}\nvar DRAW_TYPE_PATH = 1;\nvar DRAW_TYPE_IMAGE = 2;\nvar DRAW_TYPE_TEXT = 3;\nvar DRAW_TYPE_INCREMENTAL = 4;\nfunction canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash\n        || !(+hasFill ^ +hasStroke)\n        || (hasFill && typeof style.fill !== 'string')\n        || (hasStroke && typeof style.stroke !== 'string')\n        || style.strokePercent < 1\n        || style.strokeOpacity < 1\n        || style.fillOpacity < 1);\n}\nfunction flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n}\nfunction getStyle(el, inHover) {\n    return inHover ? (el.__hoverStyle || el.style) : el.style;\n}\nexport function brushSingle(ctx, el) {\n    brush(ctx, el, { inHover: false, viewWidth: 0, viewHeight: 0 }, true);\n}\nexport function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n        el.__dirty &= ~REDRAW_BIT;\n        el.__isRendered = false;\n        return;\n    }\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        if (prevElClipPaths && prevElClipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.restore();\n            forceSetStyle = forceSetTransform = true;\n            scope.prevElClipPaths = null;\n            scope.allClipped = false;\n            scope.prevEl = null;\n        }\n        if (clipPaths && clipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.save();\n            updateClipStatus(clipPaths, ctx, scope);\n            forceSetTransform = true;\n        }\n        scope.prevElClipPaths = clipPaths;\n    }\n    if (scope.allClipped) {\n        el.__isRendered = false;\n        return;\n    }\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n    if (!prevEl) {\n        forceSetStyle = forceSetTransform = true;\n    }\n    var canBatchPath = el instanceof Path\n        && el.autoBatch\n        && canPathBatch(el.style);\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n        flushPathDrawn(ctx, scope);\n        setContextTransform(ctx, el);\n    }\n    else if (!canBatchPath) {\n        flushPathDrawn(ctx, scope);\n    }\n    var style = getStyle(el, scope.inHover);\n    if (el instanceof Path) {\n        if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n            forceSetStyle = true;\n            scope.lastDrawType = DRAW_TYPE_PATH;\n        }\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\n            ctx.beginPath();\n        }\n        brushPath(ctx, el, style, canBatchPath);\n        if (canBatchPath) {\n            scope.batchFill = style.fill || '';\n            scope.batchStroke = style.stroke || '';\n        }\n    }\n    else {\n        if (el instanceof TSpan) {\n            if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_TEXT;\n            }\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushText(ctx, el, style);\n        }\n        else if (el instanceof ZRImage) {\n            if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_IMAGE;\n            }\n            bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushImage(ctx, el, style);\n        }\n        else if (el.getTemporalDisplayables) {\n            if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n            }\n            brushIncremental(ctx, el, scope);\n        }\n    }\n    if (canBatchPath && isLast) {\n        flushPathDrawn(ctx, scope);\n    }\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n}\nfunction brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n        prevElClipPaths: null,\n        prevEl: null,\n        allClipped: false,\n        viewWidth: scope.viewWidth,\n        viewHeight: scope.viewHeight,\n        inHover: scope.inHover\n    };\n    var i;\n    var len;\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n        var displayable = displayables[i];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i === len - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n        var displayable = temporalDisplayables[i_1];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n}\n","function isSafeNum(num) {\n    return isFinite(num);\n}\nexport function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n    if (!obj.global) {\n        x = x * rect.width + rect.x;\n        x2 = x2 * rect.width + rect.x;\n        y = y * rect.height + rect.y;\n        y2 = y2 * rect.height + rect.y;\n    }\n    x = isSafeNum(x) ? x : 0;\n    x2 = isSafeNum(x2) ? x2 : 1;\n    y = isSafeNum(y) ? y : 0;\n    y2 = isSafeNum(y2) ? y2 : 0;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n}\nexport function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n    if (!obj.global) {\n        x = x * width + rect.x;\n        y = y * height + rect.y;\n        r = r * min;\n    }\n    x = isSafeNum(x) ? x : 0.5;\n    y = isSafeNum(y) ? y : 0.5;\n    r = r >= 0 && isSafeNum(r) ? r : 0.5;\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n}\nexport function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial'\n        ? createRadialGradient(ctx, obj, rect)\n        : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n    for (var i = 0; i < colorStops.length; i++) {\n        canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n    return canvasGradient;\n}\nexport function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\n        return false;\n    }\n    if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\n        return true;\n    }\n    for (var i = 0; i < clipPaths.length; i++) {\n        if (clipPaths[i] !== prevClipPaths[i]) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nexport function getSize(root, whIdx, opts) {\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n        return parseFloat(opts[wh]);\n    }\n    var stl = document.defaultView.getComputedStyle(root);\n    return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n        - (parseInt10(stl[plt]) || 0)\n        - (parseInt10(stl[prb]) || 0)) | 0;\n}\n","import env from './core/env.js';\nvar dpr = 1;\nif (env.hasGlobalWindow) {\n    dpr = Math.max(window.devicePixelRatio\n        || (window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI)\n        || 1, 1);\n}\nexport var debugMode = 0;\nexport var devicePixelRatio = dpr;\nexport var DARK_MODE_THRESHOLD = 0.4;\nexport var DARK_LABEL_COLOR = '#333';\nexport var LIGHT_LABEL_COLOR = '#ccc';\nexport var LIGHTER_LABEL_COLOR = '#eee';\n","export function containStroke(x0, y0, x1, y1, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    var _a = 0;\n    var _b = x0;\n    if ((y > y0 + _l && y > y1 + _l)\n        || (y < y0 - _l && y < y1 - _l)\n        || (x > x0 + _l && x > x1 + _l)\n        || (x < x0 - _l && x < x1 - _l)) {\n        return false;\n    }\n    if (x0 !== x1) {\n        _a = (y0 - y1) / (x0 - x1);\n        _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n    }\n    else {\n        return Math.abs(x - x0) <= _l / 2;\n    }\n    var tmp = _a * x - y + _b;\n    var _s = tmp * tmp / (_a * _a + 1);\n    return _s <= _l / 2 * _l / 2;\n}\n","import windingLine from './windingLine.js';\nvar EPSILON = 1e-8;\nfunction isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\nexport function contain(points, x, y) {\n    var w = 0;\n    var p = points[0];\n    if (!p) {\n        return false;\n    }\n    for (var i = 1; i < points.length; i++) {\n        var p2 = points[i];\n        w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\n        p = p2;\n    }\n    var p0 = points[0];\n    if (!isAroundEqual(p[0], p0[0]) || !isAroundEqual(p[1], p0[1])) {\n        w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\n    }\n    return w !== 0;\n}\n","import { quadraticProjectPoint } from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l)) {\n        return false;\n    }\n    var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n    return d <= _l / 2;\n}\n","import BoundingRect from '../core/BoundingRect.js';\nimport LRU from '../core/LRU.js';\nimport { DEFAULT_FONT, platformApi } from '../core/platform.js';\nvar textWidthCache = {};\nexport function getWidth(text, font) {\n    font = font || DEFAULT_FONT;\n    var cacheOfFont = textWidthCache[font];\n    if (!cacheOfFont) {\n        cacheOfFont = textWidthCache[font] = new LRU(500);\n    }\n    var width = cacheOfFont.get(text);\n    if (width == null) {\n        width = platformApi.measureText(text, font).width;\n        cacheOfFont.put(text, width);\n    }\n    return width;\n}\nexport function innerGetBoundingRect(text, font, textAlign, textBaseline) {\n    var width = getWidth(text, font);\n    var height = getLineHeight(font);\n    var x = adjustTextX(0, width, textAlign);\n    var y = adjustTextY(0, height, textBaseline);\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n}\nexport function getBoundingRect(text, font, textAlign, textBaseline) {\n    var textLines = ((text || '') + '').split('\\n');\n    var len = textLines.length;\n    if (len === 1) {\n        return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    }\n    else {\n        var uniondRect = new BoundingRect(0, 0, 0, 0);\n        for (var i = 0; i < textLines.length; i++) {\n            var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n            i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n        }\n        return uniondRect;\n    }\n}\nexport function adjustTextX(x, width, textAlign) {\n    if (textAlign === 'right') {\n        x -= width;\n    }\n    else if (textAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\nexport function adjustTextY(y, height, verticalAlign) {\n    if (verticalAlign === 'middle') {\n        y -= height / 2;\n    }\n    else if (verticalAlign === 'bottom') {\n        y -= height;\n    }\n    return y;\n}\nexport function getLineHeight(font) {\n    return getWidth('', font);\n}\nexport function measureText(text, font) {\n    return platformApi.measureText(text, font);\n}\nexport function parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n        if (value.lastIndexOf('%') >= 0) {\n            return parseFloat(value) / 100 * maxValue;\n        }\n        return parseFloat(value);\n    }\n    return value;\n}\nexport function calculateTextPosition(out, opts, rect) {\n    var textPosition = opts.position || 'inside';\n    var distance = opts.distance != null ? opts.distance : 5;\n    var height = rect.height;\n    var width = rect.width;\n    var halfHeight = height / 2;\n    var x = rect.x;\n    var y = rect.y;\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    if (textPosition instanceof Array) {\n        x += parsePercent(textPosition[0], rect.width);\n        y += parsePercent(textPosition[1], rect.height);\n        textAlign = null;\n        textVerticalAlign = null;\n    }\n    else {\n        switch (textPosition) {\n            case 'left':\n                x -= distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'right':\n                x += distance + width;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'top':\n                x += width / 2;\n                y -= distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'bottom':\n                x += width / 2;\n                y += height + distance;\n                textAlign = 'center';\n                break;\n            case 'inside':\n                x += width / 2;\n                y += halfHeight;\n                textAlign = 'center';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideLeft':\n                x += distance;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideRight':\n                x += width - distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideTop':\n                x += width / 2;\n                y += distance;\n                textAlign = 'center';\n                break;\n            case 'insideBottom':\n                x += width / 2;\n                y += height - distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideTopLeft':\n                x += distance;\n                y += distance;\n                break;\n            case 'insideTopRight':\n                x += width - distance;\n                y += distance;\n                textAlign = 'right';\n                break;\n            case 'insideBottomLeft':\n                x += distance;\n                y += height - distance;\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideBottomRight':\n                x += width - distance;\n                y += height - distance;\n                textAlign = 'right';\n                textVerticalAlign = 'bottom';\n                break;\n        }\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n}\n","var PI2 = Math.PI * 2;\nexport function normalizeRadian(angle) {\n    angle %= PI2;\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return angle;\n}\n","export default function windingLine(x0, y0, x1, y1, x, y) {\n    if ((y > y0 && y > y1) || (y < y0 && y < y1)) {\n        return 0;\n    }\n    if (y1 === y0) {\n        return 0;\n    }\n    var t = (y - y0) / (y1 - y0);\n    var dir = y1 < y0 ? 1 : -1;\n    if (t === 1 || t === 0) {\n        dir = y1 < y0 ? 0.5 : -0.5;\n    }\n    var x_ = t * (x1 - x0) + x0;\n    return x_ === x ? Infinity : x_ > x ? dir : 0;\n}\n","import * as matrix from './matrix.js';\nimport Point from './Point.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar lt = new Point();\nvar rb = new Point();\nvar lb = new Point();\nvar rt = new Point();\nvar minTv = new Point();\nvar maxTv = new Point();\nvar BoundingRect = (function () {\n    function BoundingRect(x, y, width, height) {\n        if (width < 0) {\n            x = x + width;\n            width = -width;\n        }\n        if (height < 0) {\n            y = y + height;\n            height = -height;\n        }\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    BoundingRect.prototype.union = function (other) {\n        var x = mathMin(other.x, this.x);\n        var y = mathMin(other.y, this.y);\n        if (isFinite(this.x) && isFinite(this.width)) {\n            this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n        }\n        else {\n            this.width = other.width;\n        }\n        if (isFinite(this.y) && isFinite(this.height)) {\n            this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n        }\n        else {\n            this.height = other.height;\n        }\n        this.x = x;\n        this.y = y;\n    };\n    BoundingRect.prototype.applyTransform = function (m) {\n        BoundingRect.applyTransform(this, this, m);\n    };\n    BoundingRect.prototype.calculateTransform = function (b) {\n        var a = this;\n        var sx = b.width / a.width;\n        var sy = b.height / a.height;\n        var m = matrix.create();\n        matrix.translate(m, m, [-a.x, -a.y]);\n        matrix.scale(m, m, [sx, sy]);\n        matrix.translate(m, m, [b.x, b.y]);\n        return m;\n    };\n    BoundingRect.prototype.intersect = function (b, mtv) {\n        if (!b) {\n            return false;\n        }\n        if (!(b instanceof BoundingRect)) {\n            b = BoundingRect.create(b);\n        }\n        var a = this;\n        var ax0 = a.x;\n        var ax1 = a.x + a.width;\n        var ay0 = a.y;\n        var ay1 = a.y + a.height;\n        var bx0 = b.x;\n        var bx1 = b.x + b.width;\n        var by0 = b.y;\n        var by1 = b.y + b.height;\n        var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n        if (mtv) {\n            var dMin = Infinity;\n            var dMax = 0;\n            var d0 = Math.abs(ax1 - bx0);\n            var d1 = Math.abs(bx1 - ax0);\n            var d2 = Math.abs(ay1 - by0);\n            var d3 = Math.abs(by1 - ay0);\n            var dx = Math.min(d0, d1);\n            var dy = Math.min(d2, d3);\n            if (ax1 < bx0 || bx1 < ax0) {\n                if (dx > dMax) {\n                    dMax = dx;\n                    if (d0 < d1) {\n                        Point.set(maxTv, -d0, 0);\n                    }\n                    else {\n                        Point.set(maxTv, d1, 0);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d0 < d1) {\n                        Point.set(minTv, d0, 0);\n                    }\n                    else {\n                        Point.set(minTv, -d1, 0);\n                    }\n                }\n            }\n            if (ay1 < by0 || by1 < ay0) {\n                if (dy > dMax) {\n                    dMax = dy;\n                    if (d2 < d3) {\n                        Point.set(maxTv, 0, -d2);\n                    }\n                    else {\n                        Point.set(maxTv, 0, d3);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d2 < d3) {\n                        Point.set(minTv, 0, d2);\n                    }\n                    else {\n                        Point.set(minTv, 0, -d3);\n                    }\n                }\n            }\n        }\n        if (mtv) {\n            Point.copy(mtv, overlap ? minTv : maxTv);\n        }\n        return overlap;\n    };\n    BoundingRect.prototype.contain = function (x, y) {\n        var rect = this;\n        return x >= rect.x\n            && x <= (rect.x + rect.width)\n            && y >= rect.y\n            && y <= (rect.y + rect.height);\n    };\n    BoundingRect.prototype.clone = function () {\n        return new BoundingRect(this.x, this.y, this.width, this.height);\n    };\n    BoundingRect.prototype.copy = function (other) {\n        BoundingRect.copy(this, other);\n    };\n    BoundingRect.prototype.plain = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height\n        };\n    };\n    BoundingRect.prototype.isFinite = function () {\n        return isFinite(this.x)\n            && isFinite(this.y)\n            && isFinite(this.width)\n            && isFinite(this.height);\n    };\n    BoundingRect.prototype.isZero = function () {\n        return this.width === 0 || this.height === 0;\n    };\n    BoundingRect.create = function (rect) {\n        return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n    };\n    BoundingRect.copy = function (target, source) {\n        target.x = source.x;\n        target.y = source.y;\n        target.width = source.width;\n        target.height = source.height;\n    };\n    BoundingRect.applyTransform = function (target, source, m) {\n        if (!m) {\n            if (target !== source) {\n                BoundingRect.copy(target, source);\n            }\n            return;\n        }\n        if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\n            var sx = m[0];\n            var sy = m[3];\n            var tx = m[4];\n            var ty = m[5];\n            target.x = source.x * sx + tx;\n            target.y = source.y * sy + ty;\n            target.width = source.width * sx;\n            target.height = source.height * sy;\n            if (target.width < 0) {\n                target.x += target.width;\n                target.width = -target.width;\n            }\n            if (target.height < 0) {\n                target.y += target.height;\n                target.height = -target.height;\n            }\n            return;\n        }\n        lt.x = lb.x = source.x;\n        lt.y = rt.y = source.y;\n        rb.x = rt.x = source.x + source.width;\n        rb.y = lb.y = source.y + source.height;\n        lt.transform(m);\n        rt.transform(m);\n        rb.transform(m);\n        lb.transform(m);\n        target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\n        target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\n        var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\n        var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\n        target.width = maxX - target.x;\n        target.height = maxY - target.y;\n    };\n    return BoundingRect;\n}());\nexport default BoundingRect;\n","var Eventful = (function () {\n    function Eventful(eventProcessors) {\n        if (eventProcessors) {\n            this._$eventProcessor = eventProcessors;\n        }\n    }\n    Eventful.prototype.on = function (event, query, handler, context) {\n        if (!this._$handlers) {\n            this._$handlers = {};\n        }\n        var _h = this._$handlers;\n        if (typeof query === 'function') {\n            context = handler;\n            handler = query;\n            query = null;\n        }\n        if (!handler || !event) {\n            return this;\n        }\n        var eventProcessor = this._$eventProcessor;\n        if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n            query = eventProcessor.normalizeQuery(query);\n        }\n        if (!_h[event]) {\n            _h[event] = [];\n        }\n        for (var i = 0; i < _h[event].length; i++) {\n            if (_h[event][i].h === handler) {\n                return this;\n            }\n        }\n        var wrap = {\n            h: handler,\n            query: query,\n            ctx: (context || this),\n            callAtLast: handler.zrEventfulCallAtLast\n        };\n        var lastIndex = _h[event].length - 1;\n        var lastWrap = _h[event][lastIndex];\n        (lastWrap && lastWrap.callAtLast)\n            ? _h[event].splice(lastIndex, 0, wrap)\n            : _h[event].push(wrap);\n        return this;\n    };\n    Eventful.prototype.isSilent = function (eventName) {\n        var _h = this._$handlers;\n        return !_h || !_h[eventName] || !_h[eventName].length;\n    };\n    Eventful.prototype.off = function (eventType, handler) {\n        var _h = this._$handlers;\n        if (!_h) {\n            return this;\n        }\n        if (!eventType) {\n            this._$handlers = {};\n            return this;\n        }\n        if (handler) {\n            if (_h[eventType]) {\n                var newList = [];\n                for (var i = 0, l = _h[eventType].length; i < l; i++) {\n                    if (_h[eventType][i].h !== handler) {\n                        newList.push(_h[eventType][i]);\n                    }\n                }\n                _h[eventType] = newList;\n            }\n            if (_h[eventType] && _h[eventType].length === 0) {\n                delete _h[eventType];\n            }\n        }\n        else {\n            delete _h[eventType];\n        }\n        return this;\n    };\n    Eventful.prototype.trigger = function (eventType) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[eventType];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(eventType, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(hItem.ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(hItem.ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(hItem.ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(hItem.ctx, args);\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(eventType);\n        return this;\n    };\n    Eventful.prototype.triggerWithContext = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[type];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var ctx = args[argLen - 1];\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(type, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(ctx, args.slice(1, argLen - 1));\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(type);\n        return this;\n    };\n    return Eventful;\n}());\nexport default Eventful;\n","var Entry = (function () {\n    function Entry(val) {\n        this.value = val;\n    }\n    return Entry;\n}());\nexport { Entry };\nvar LinkedList = (function () {\n    function LinkedList() {\n        this._len = 0;\n    }\n    LinkedList.prototype.insert = function (val) {\n        var entry = new Entry(val);\n        this.insertEntry(entry);\n        return entry;\n    };\n    LinkedList.prototype.insertEntry = function (entry) {\n        if (!this.head) {\n            this.head = this.tail = entry;\n        }\n        else {\n            this.tail.next = entry;\n            entry.prev = this.tail;\n            entry.next = null;\n            this.tail = entry;\n        }\n        this._len++;\n    };\n    LinkedList.prototype.remove = function (entry) {\n        var prev = entry.prev;\n        var next = entry.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this.head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this.tail = prev;\n        }\n        entry.next = entry.prev = null;\n        this._len--;\n    };\n    LinkedList.prototype.len = function () {\n        return this._len;\n    };\n    LinkedList.prototype.clear = function () {\n        this.head = this.tail = null;\n        this._len = 0;\n    };\n    return LinkedList;\n}());\nexport { LinkedList };\nvar LRU = (function () {\n    function LRU(maxSize) {\n        this._list = new LinkedList();\n        this._maxSize = 10;\n        this._map = {};\n        this._maxSize = maxSize;\n    }\n    LRU.prototype.put = function (key, value) {\n        var list = this._list;\n        var map = this._map;\n        var removed = null;\n        if (map[key] == null) {\n            var len = list.len();\n            var entry = this._lastRemovedEntry;\n            if (len >= this._maxSize && len > 0) {\n                var leastUsedEntry = list.head;\n                list.remove(leastUsedEntry);\n                delete map[leastUsedEntry.key];\n                removed = leastUsedEntry.value;\n                this._lastRemovedEntry = leastUsedEntry;\n            }\n            if (entry) {\n                entry.value = value;\n            }\n            else {\n                entry = new Entry(value);\n            }\n            entry.key = key;\n            list.insertEntry(entry);\n            map[key] = entry;\n        }\n        return removed;\n    };\n    LRU.prototype.get = function (key) {\n        var entry = this._map[key];\n        var list = this._list;\n        if (entry != null) {\n            if (entry !== list.tail) {\n                list.remove(entry);\n                list.insertEntry(entry);\n            }\n            return entry.value;\n        }\n    };\n    LRU.prototype.clear = function () {\n        this._list.clear();\n        this._map = {};\n    };\n    LRU.prototype.len = function () {\n        return this._list.len();\n    };\n    return LRU;\n}());\nexport default LRU;\n","import Point from './Point.js';\nvar extent = [0, 0];\nvar extent2 = [0, 0];\nvar minTv = new Point();\nvar maxTv = new Point();\nvar OrientedBoundingRect = (function () {\n    function OrientedBoundingRect(rect, transform) {\n        this._corners = [];\n        this._axes = [];\n        this._origin = [0, 0];\n        for (var i = 0; i < 4; i++) {\n            this._corners[i] = new Point();\n        }\n        for (var i = 0; i < 2; i++) {\n            this._axes[i] = new Point();\n        }\n        if (rect) {\n            this.fromBoundingRect(rect, transform);\n        }\n    }\n    OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\n        var corners = this._corners;\n        var axes = this._axes;\n        var x = rect.x;\n        var y = rect.y;\n        var x2 = x + rect.width;\n        var y2 = y + rect.height;\n        corners[0].set(x, y);\n        corners[1].set(x2, y);\n        corners[2].set(x2, y2);\n        corners[3].set(x, y2);\n        if (transform) {\n            for (var i = 0; i < 4; i++) {\n                corners[i].transform(transform);\n            }\n        }\n        Point.sub(axes[0], corners[1], corners[0]);\n        Point.sub(axes[1], corners[3], corners[0]);\n        axes[0].normalize();\n        axes[1].normalize();\n        for (var i = 0; i < 2; i++) {\n            this._origin[i] = axes[i].dot(corners[0]);\n        }\n    };\n    OrientedBoundingRect.prototype.intersect = function (other, mtv) {\n        var overlapped = true;\n        var noMtv = !mtv;\n        minTv.set(Infinity, Infinity);\n        maxTv.set(0, 0);\n        if (!this._intersectCheckOneSide(this, other, minTv, maxTv, noMtv, 1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!this._intersectCheckOneSide(other, this, minTv, maxTv, noMtv, -1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!noMtv) {\n            Point.copy(mtv, overlapped ? minTv : maxTv);\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\n        var overlapped = true;\n        for (var i = 0; i < 2; i++) {\n            var axis = this._axes[i];\n            this._getProjMinMaxOnAxis(i, self._corners, extent);\n            this._getProjMinMaxOnAxis(i, other._corners, extent2);\n            if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\n                overlapped = false;\n                if (noMtv) {\n                    return overlapped;\n                }\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) > maxTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(maxTv, axis, -dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(maxTv, axis, dist1 * inverse);\n                    }\n                }\n            }\n            else if (minTv) {\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) < minTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(minTv, axis, dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(minTv, axis, -dist1 * inverse);\n                    }\n                }\n            }\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\n        var axis = this._axes[dim];\n        var origin = this._origin;\n        var proj = corners[0].dot(axis) + origin[dim];\n        var min = proj;\n        var max = proj;\n        for (var i = 1; i < corners.length; i++) {\n            var proj_1 = corners[i].dot(axis) + origin[dim];\n            min = Math.min(proj_1, min);\n            max = Math.max(proj_1, max);\n        }\n        out[0] = min;\n        out[1] = max;\n    };\n    return OrientedBoundingRect;\n}());\nexport default OrientedBoundingRect;\n","import * as vec2 from './vector.js';\nimport BoundingRect from './BoundingRect.js';\nimport { devicePixelRatio as dpr } from '../config.js';\nimport { fromLine, fromCubic, fromQuadratic, fromArc } from './bbox.js';\nimport { cubicLength, cubicSubdivide, quadraticLength, quadraticSubdivide } from './curve.js';\nvar CMD = {\n    M: 1,\n    L: 2,\n    C: 3,\n    Q: 4,\n    A: 5,\n    Z: 6,\n    R: 7\n};\nvar tmpOutX = [];\nvar tmpOutY = [];\nvar min = [];\nvar max = [];\nvar min2 = [];\nvar max2 = [];\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathCos = Math.cos;\nvar mathSin = Math.sin;\nvar mathAbs = Math.abs;\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar hasTypedArray = typeof Float32Array !== 'undefined';\nvar tmpAngles = [];\nfunction modPI2(radian) {\n    var n = Math.round(radian / PI * 1e8) / 1e8;\n    return (n % 2) * PI;\n}\nexport function normalizeArcAngles(angles, anticlockwise) {\n    var newStartAngle = modPI2(angles[0]);\n    if (newStartAngle < 0) {\n        newStartAngle += PI2;\n    }\n    var delta = newStartAngle - angles[0];\n    var newEndAngle = angles[1];\n    newEndAngle += delta;\n    if (!anticlockwise && newEndAngle - newStartAngle >= PI2) {\n        newEndAngle = newStartAngle + PI2;\n    }\n    else if (anticlockwise && newStartAngle - newEndAngle >= PI2) {\n        newEndAngle = newStartAngle - PI2;\n    }\n    else if (!anticlockwise && newStartAngle > newEndAngle) {\n        newEndAngle = newStartAngle + (PI2 - modPI2(newStartAngle - newEndAngle));\n    }\n    else if (anticlockwise && newStartAngle < newEndAngle) {\n        newEndAngle = newStartAngle - (PI2 - modPI2(newEndAngle - newStartAngle));\n    }\n    angles[0] = newStartAngle;\n    angles[1] = newEndAngle;\n}\nvar PathProxy = (function () {\n    function PathProxy(notSaveData) {\n        this.dpr = 1;\n        this._xi = 0;\n        this._yi = 0;\n        this._x0 = 0;\n        this._y0 = 0;\n        this._len = 0;\n        if (notSaveData) {\n            this._saveData = false;\n        }\n        if (this._saveData) {\n            this.data = [];\n        }\n    }\n    PathProxy.prototype.increaseVersion = function () {\n        this._version++;\n    };\n    PathProxy.prototype.getVersion = function () {\n        return this._version;\n    };\n    PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\n        segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n        if (segmentIgnoreThreshold > 0) {\n            this._ux = mathAbs(segmentIgnoreThreshold / dpr / sx) || 0;\n            this._uy = mathAbs(segmentIgnoreThreshold / dpr / sy) || 0;\n        }\n    };\n    PathProxy.prototype.setDPR = function (dpr) {\n        this.dpr = dpr;\n    };\n    PathProxy.prototype.setContext = function (ctx) {\n        this._ctx = ctx;\n    };\n    PathProxy.prototype.getContext = function () {\n        return this._ctx;\n    };\n    PathProxy.prototype.beginPath = function () {\n        this._ctx && this._ctx.beginPath();\n        this.reset();\n        return this;\n    };\n    PathProxy.prototype.reset = function () {\n        if (this._saveData) {\n            this._len = 0;\n        }\n        if (this._pathSegLen) {\n            this._pathSegLen = null;\n            this._pathLen = 0;\n        }\n        this._version++;\n    };\n    PathProxy.prototype.moveTo = function (x, y) {\n        this._drawPendingPt();\n        this.addData(CMD.M, x, y);\n        this._ctx && this._ctx.moveTo(x, y);\n        this._x0 = x;\n        this._y0 = y;\n        this._xi = x;\n        this._yi = y;\n        return this;\n    };\n    PathProxy.prototype.lineTo = function (x, y) {\n        var dx = mathAbs(x - this._xi);\n        var dy = mathAbs(y - this._yi);\n        var exceedUnit = dx > this._ux || dy > this._uy;\n        this.addData(CMD.L, x, y);\n        if (this._ctx && exceedUnit) {\n            this._ctx.lineTo(x, y);\n        }\n        if (exceedUnit) {\n            this._xi = x;\n            this._yi = y;\n            this._pendingPtDist = 0;\n        }\n        else {\n            var d2 = dx * dx + dy * dy;\n            if (d2 > this._pendingPtDist) {\n                this._pendingPtX = x;\n                this._pendingPtY = y;\n                this._pendingPtDist = d2;\n            }\n        }\n        return this;\n    };\n    PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\n        this._drawPendingPt();\n        this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n        if (this._ctx) {\n            this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n        }\n        this._xi = x3;\n        this._yi = y3;\n        return this;\n    };\n    PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\n        this._drawPendingPt();\n        this.addData(CMD.Q, x1, y1, x2, y2);\n        if (this._ctx) {\n            this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n        }\n        this._xi = x2;\n        this._yi = y2;\n        return this;\n    };\n    PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this._drawPendingPt();\n        tmpAngles[0] = startAngle;\n        tmpAngles[1] = endAngle;\n        normalizeArcAngles(tmpAngles, anticlockwise);\n        startAngle = tmpAngles[0];\n        endAngle = tmpAngles[1];\n        var delta = endAngle - startAngle;\n        this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\n        this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n        this._xi = mathCos(endAngle) * r + cx;\n        this._yi = mathSin(endAngle) * r + cy;\n        return this;\n    };\n    PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n        this._drawPendingPt();\n        if (this._ctx) {\n            this._ctx.arcTo(x1, y1, x2, y2, radius);\n        }\n        return this;\n    };\n    PathProxy.prototype.rect = function (x, y, w, h) {\n        this._drawPendingPt();\n        this._ctx && this._ctx.rect(x, y, w, h);\n        this.addData(CMD.R, x, y, w, h);\n        return this;\n    };\n    PathProxy.prototype.closePath = function () {\n        this._drawPendingPt();\n        this.addData(CMD.Z);\n        var ctx = this._ctx;\n        var x0 = this._x0;\n        var y0 = this._y0;\n        if (ctx) {\n            ctx.closePath();\n        }\n        this._xi = x0;\n        this._yi = y0;\n        return this;\n    };\n    PathProxy.prototype.fill = function (ctx) {\n        ctx && ctx.fill();\n        this.toStatic();\n    };\n    PathProxy.prototype.stroke = function (ctx) {\n        ctx && ctx.stroke();\n        this.toStatic();\n    };\n    PathProxy.prototype.len = function () {\n        return this._len;\n    };\n    PathProxy.prototype.setData = function (data) {\n        var len = data.length;\n        if (!(this.data && this.data.length === len) && hasTypedArray) {\n            this.data = new Float32Array(len);\n        }\n        for (var i = 0; i < len; i++) {\n            this.data[i] = data[i];\n        }\n        this._len = len;\n    };\n    PathProxy.prototype.appendPath = function (path) {\n        if (!(path instanceof Array)) {\n            path = [path];\n        }\n        var len = path.length;\n        var appendSize = 0;\n        var offset = this._len;\n        for (var i = 0; i < len; i++) {\n            appendSize += path[i].len();\n        }\n        if (hasTypedArray && (this.data instanceof Float32Array)) {\n            this.data = new Float32Array(offset + appendSize);\n        }\n        for (var i = 0; i < len; i++) {\n            var appendPathData = path[i].data;\n            for (var k = 0; k < appendPathData.length; k++) {\n                this.data[offset++] = appendPathData[k];\n            }\n        }\n        this._len = offset;\n    };\n    PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\n        if (!this._saveData) {\n            return;\n        }\n        var data = this.data;\n        if (this._len + arguments.length > data.length) {\n            this._expandData();\n            data = this.data;\n        }\n        for (var i = 0; i < arguments.length; i++) {\n            data[this._len++] = arguments[i];\n        }\n    };\n    PathProxy.prototype._drawPendingPt = function () {\n        if (this._pendingPtDist > 0) {\n            this._ctx && this._ctx.lineTo(this._pendingPtX, this._pendingPtY);\n            this._pendingPtDist = 0;\n        }\n    };\n    PathProxy.prototype._expandData = function () {\n        if (!(this.data instanceof Array)) {\n            var newData = [];\n            for (var i = 0; i < this._len; i++) {\n                newData[i] = this.data[i];\n            }\n            this.data = newData;\n        }\n    };\n    PathProxy.prototype.toStatic = function () {\n        if (!this._saveData) {\n            return;\n        }\n        this._drawPendingPt();\n        var data = this.data;\n        if (data instanceof Array) {\n            data.length = this._len;\n            if (hasTypedArray && this._len > 11) {\n                this.data = new Float32Array(data);\n            }\n        }\n    };\n    PathProxy.prototype.getBoundingRect = function () {\n        min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n        max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n        var data = this.data;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        var i;\n        for (i = 0; i < this._len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    min2[0] = x0;\n                    min2[1] = y0;\n                    max2[0] = x0;\n                    max2[1] = y0;\n                    break;\n                case CMD.L:\n                    fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.C:\n                    fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.Q:\n                    fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var endAngle = data[i++] + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n                    break;\n                case CMD.Z:\n                    xi = x0;\n                    yi = y0;\n                    break;\n            }\n            vec2.min(min, min, min2);\n            vec2.max(max, max, max2);\n        }\n        if (i === 0) {\n            min[0] = min[1] = max[0] = max[1] = 0;\n        }\n        return new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    };\n    PathProxy.prototype._calculateLength = function () {\n        var data = this.data;\n        var len = this._len;\n        var ux = this._ux;\n        var uy = this._uy;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        if (!this._pathSegLen) {\n            this._pathSegLen = [];\n        }\n        var pathSegLen = this._pathSegLen;\n        var pathTotalLen = 0;\n        var segCount = 0;\n        for (var i = 0; i < len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            var l = -1;\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    break;\n                case CMD.L: {\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var dx = x2 - xi;\n                    var dy = y2 - yi;\n                    if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len - 1) {\n                        l = Math.sqrt(dx * dx + dy * dy);\n                        xi = x2;\n                        yi = y2;\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var x3 = data[i++];\n                    var y3 = data[i++];\n                    l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var delta = data[i++];\n                    var endAngle = delta + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    l = mathMax(rx, ry) * mathMin(PI2, Math.abs(delta));\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R: {\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    l = width * 2 + height * 2;\n                    break;\n                }\n                case CMD.Z: {\n                    var dx = x0 - xi;\n                    var dy = y0 - yi;\n                    l = Math.sqrt(dx * dx + dy * dy);\n                    xi = x0;\n                    yi = y0;\n                    break;\n                }\n            }\n            if (l >= 0) {\n                pathSegLen[segCount++] = l;\n                pathTotalLen += l;\n            }\n        }\n        this._pathLen = pathTotalLen;\n        return pathTotalLen;\n    };\n    PathProxy.prototype.rebuildPath = function (ctx, percent) {\n        var d = this.data;\n        var ux = this._ux;\n        var uy = this._uy;\n        var len = this._len;\n        var x0;\n        var y0;\n        var xi;\n        var yi;\n        var x;\n        var y;\n        var drawPart = percent < 1;\n        var pathSegLen;\n        var pathTotalLen;\n        var accumLength = 0;\n        var segCount = 0;\n        var displayedLength;\n        var pendingPtDist = 0;\n        var pendingPtX;\n        var pendingPtY;\n        if (drawPart) {\n            if (!this._pathSegLen) {\n                this._calculateLength();\n            }\n            pathSegLen = this._pathSegLen;\n            pathTotalLen = this._pathLen;\n            displayedLength = percent * pathTotalLen;\n            if (!displayedLength) {\n                return;\n            }\n        }\n        lo: for (var i = 0; i < len;) {\n            var cmd = d[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = d[i];\n                yi = d[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            if (cmd !== CMD.L && pendingPtDist > 0) {\n                ctx.lineTo(pendingPtX, pendingPtY);\n                pendingPtDist = 0;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    x0 = xi = d[i++];\n                    y0 = yi = d[i++];\n                    ctx.moveTo(xi, yi);\n                    break;\n                case CMD.L: {\n                    x = d[i++];\n                    y = d[i++];\n                    var dx = mathAbs(x - xi);\n                    var dy = mathAbs(y - yi);\n                    if (dx > ux || dy > uy) {\n                        if (drawPart) {\n                            var l = pathSegLen[segCount++];\n                            if (accumLength + l > displayedLength) {\n                                var t = (displayedLength - accumLength) / l;\n                                ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\n                                break lo;\n                            }\n                            accumLength += l;\n                        }\n                        ctx.lineTo(x, y);\n                        xi = x;\n                        yi = y;\n                        pendingPtDist = 0;\n                    }\n                    else {\n                        var d2 = dx * dx + dy * dy;\n                        if (d2 > pendingPtDist) {\n                            pendingPtX = x;\n                            pendingPtY = y;\n                            pendingPtDist = d2;\n                        }\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    var x3 = d[i++];\n                    var y3 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\n                            cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\n                            ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            quadraticSubdivide(xi, x1, x2, t, tmpOutX);\n                            quadraticSubdivide(yi, y1, y2, t, tmpOutY);\n                            ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.quadraticCurveTo(x1, y1, x2, y2);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = d[i++];\n                    var cy = d[i++];\n                    var rx = d[i++];\n                    var ry = d[i++];\n                    var startAngle = d[i++];\n                    var delta = d[i++];\n                    var psi = d[i++];\n                    var anticlockwise = !d[i++];\n                    var r = (rx > ry) ? rx : ry;\n                    var isEllipse = mathAbs(rx - ry) > 1e-3;\n                    var endAngle = startAngle + delta;\n                    var breakBuild = false;\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            endAngle = startAngle + delta * (displayedLength - accumLength) / l;\n                            breakBuild = true;\n                        }\n                        accumLength += l;\n                    }\n                    if (isEllipse && ctx.ellipse) {\n                        ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);\n                    }\n                    else {\n                        ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n                    }\n                    if (breakBuild) {\n                        break lo;\n                    }\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = d[i];\n                    y0 = yi = d[i + 1];\n                    x = d[i++];\n                    y = d[i++];\n                    var width = d[i++];\n                    var height = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var d_1 = displayedLength - accumLength;\n                            ctx.moveTo(x, y);\n                            ctx.lineTo(x + mathMin(d_1, width), y);\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + width, y + mathMin(d_1, height));\n                            }\n                            d_1 -= height;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + mathMax(width - d_1, 0), y + height);\n                            }\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x, y + mathMax(height - d_1, 0));\n                            }\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.rect(x, y, width, height);\n                    break;\n                case CMD.Z:\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.closePath();\n                    xi = x0;\n                    yi = y0;\n            }\n        }\n    };\n    PathProxy.prototype.clone = function () {\n        var newProxy = new PathProxy();\n        var data = this.data;\n        newProxy.data = data.slice ? data.slice()\n            : Array.prototype.slice.call(data);\n        newProxy._len = this._len;\n        return newProxy;\n    };\n    PathProxy.CMD = CMD;\n    PathProxy.initDefaultProps = (function () {\n        var proto = PathProxy.prototype;\n        proto._saveData = true;\n        proto._ux = 0;\n        proto._uy = 0;\n        proto._pendingPtDist = 0;\n        proto._version = 0;\n    })();\n    return PathProxy;\n}());\nexport default PathProxy;\n","var Point = (function () {\n    function Point(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    Point.prototype.copy = function (other) {\n        this.x = other.x;\n        this.y = other.y;\n        return this;\n    };\n    Point.prototype.clone = function () {\n        return new Point(this.x, this.y);\n    };\n    Point.prototype.set = function (x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    };\n    Point.prototype.equal = function (other) {\n        return other.x === this.x && other.y === this.y;\n    };\n    Point.prototype.add = function (other) {\n        this.x += other.x;\n        this.y += other.y;\n        return this;\n    };\n    Point.prototype.scale = function (scalar) {\n        this.x *= scalar;\n        this.y *= scalar;\n    };\n    Point.prototype.scaleAndAdd = function (other, scalar) {\n        this.x += other.x * scalar;\n        this.y += other.y * scalar;\n    };\n    Point.prototype.sub = function (other) {\n        this.x -= other.x;\n        this.y -= other.y;\n        return this;\n    };\n    Point.prototype.dot = function (other) {\n        return this.x * other.x + this.y * other.y;\n    };\n    Point.prototype.len = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    };\n    Point.prototype.lenSquare = function () {\n        return this.x * this.x + this.y * this.y;\n    };\n    Point.prototype.normalize = function () {\n        var len = this.len();\n        this.x /= len;\n        this.y /= len;\n        return this;\n    };\n    Point.prototype.distance = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n    Point.prototype.distanceSquare = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return dx * dx + dy * dy;\n    };\n    Point.prototype.negate = function () {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    };\n    Point.prototype.transform = function (m) {\n        if (!m) {\n            return;\n        }\n        var x = this.x;\n        var y = this.y;\n        this.x = m[0] * x + m[2] * y + m[4];\n        this.y = m[1] * x + m[3] * y + m[5];\n        return this;\n    };\n    Point.prototype.toArray = function (out) {\n        out[0] = this.x;\n        out[1] = this.y;\n        return out;\n    };\n    Point.prototype.fromArray = function (input) {\n        this.x = input[0];\n        this.y = input[1];\n    };\n    Point.set = function (p, x, y) {\n        p.x = x;\n        p.y = y;\n    };\n    Point.copy = function (p, p2) {\n        p.x = p2.x;\n        p.y = p2.y;\n    };\n    Point.len = function (p) {\n        return Math.sqrt(p.x * p.x + p.y * p.y);\n    };\n    Point.lenSquare = function (p) {\n        return p.x * p.x + p.y * p.y;\n    };\n    Point.dot = function (p0, p1) {\n        return p0.x * p1.x + p0.y * p1.y;\n    };\n    Point.add = function (out, p0, p1) {\n        out.x = p0.x + p1.x;\n        out.y = p0.y + p1.y;\n    };\n    Point.sub = function (out, p0, p1) {\n        out.x = p0.x - p1.x;\n        out.y = p0.y - p1.y;\n    };\n    Point.scale = function (out, p0, scalar) {\n        out.x = p0.x * scalar;\n        out.y = p0.y * scalar;\n    };\n    Point.scaleAndAdd = function (out, p0, p1, scalar) {\n        out.x = p0.x + p1.x * scalar;\n        out.y = p0.y + p1.y * scalar;\n    };\n    Point.lerp = function (out, p0, p1, t) {\n        var onet = 1 - t;\n        out.x = onet * p0.x + t * p1.x;\n        out.y = onet * p0.y + t * p1.y;\n    };\n    return Point;\n}());\nexport default Point;\n","import * as matrix from './matrix.js';\nimport * as vector from './vector.js';\nvar mIdentity = matrix.identity;\nvar EPSILON = 5e-5;\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nvar scaleTmp = [];\nvar tmpTransform = [];\nvar originTransform = matrix.create();\nvar abs = Math.abs;\nvar Transformable = (function () {\n    function Transformable() {\n    }\n    Transformable.prototype.getLocalTransform = function (m) {\n        return Transformable.getLocalTransform(this, m);\n    };\n    Transformable.prototype.setPosition = function (arr) {\n        this.x = arr[0];\n        this.y = arr[1];\n    };\n    Transformable.prototype.setScale = function (arr) {\n        this.scaleX = arr[0];\n        this.scaleY = arr[1];\n    };\n    Transformable.prototype.setSkew = function (arr) {\n        this.skewX = arr[0];\n        this.skewY = arr[1];\n    };\n    Transformable.prototype.setOrigin = function (arr) {\n        this.originX = arr[0];\n        this.originY = arr[1];\n    };\n    Transformable.prototype.needLocalTransform = function () {\n        return isNotAroundZero(this.rotation)\n            || isNotAroundZero(this.x)\n            || isNotAroundZero(this.y)\n            || isNotAroundZero(this.scaleX - 1)\n            || isNotAroundZero(this.scaleY - 1)\n            || isNotAroundZero(this.skewX)\n            || isNotAroundZero(this.skewY);\n    };\n    Transformable.prototype.updateTransform = function () {\n        var parentTransform = this.parent && this.parent.transform;\n        var needLocalTransform = this.needLocalTransform();\n        var m = this.transform;\n        if (!(needLocalTransform || parentTransform)) {\n            if (m) {\n                mIdentity(m);\n                this.invTransform = null;\n            }\n            return;\n        }\n        m = m || matrix.create();\n        if (needLocalTransform) {\n            this.getLocalTransform(m);\n        }\n        else {\n            mIdentity(m);\n        }\n        if (parentTransform) {\n            if (needLocalTransform) {\n                matrix.mul(m, parentTransform, m);\n            }\n            else {\n                matrix.copy(m, parentTransform);\n            }\n        }\n        this.transform = m;\n        this._resolveGlobalScaleRatio(m);\n    };\n    Transformable.prototype._resolveGlobalScaleRatio = function (m) {\n        var globalScaleRatio = this.globalScaleRatio;\n        if (globalScaleRatio != null && globalScaleRatio !== 1) {\n            this.getGlobalScale(scaleTmp);\n            var relX = scaleTmp[0] < 0 ? -1 : 1;\n            var relY = scaleTmp[1] < 0 ? -1 : 1;\n            var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n            var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n            m[0] *= sx;\n            m[1] *= sx;\n            m[2] *= sy;\n            m[3] *= sy;\n        }\n        this.invTransform = this.invTransform || matrix.create();\n        matrix.invert(this.invTransform, m);\n    };\n    Transformable.prototype.getComputedTransform = function () {\n        var transformNode = this;\n        var ancestors = [];\n        while (transformNode) {\n            ancestors.push(transformNode);\n            transformNode = transformNode.parent;\n        }\n        while (transformNode = ancestors.pop()) {\n            transformNode.updateTransform();\n        }\n        return this.transform;\n    };\n    Transformable.prototype.setLocalTransform = function (m) {\n        if (!m) {\n            return;\n        }\n        var sx = m[0] * m[0] + m[1] * m[1];\n        var sy = m[2] * m[2] + m[3] * m[3];\n        var rotation = Math.atan2(m[1], m[0]);\n        var shearX = Math.PI / 2 + rotation - Math.atan2(m[3], m[2]);\n        sy = Math.sqrt(sy) * Math.cos(shearX);\n        sx = Math.sqrt(sx);\n        this.skewX = shearX;\n        this.skewY = 0;\n        this.rotation = -rotation;\n        this.x = +m[4];\n        this.y = +m[5];\n        this.scaleX = sx;\n        this.scaleY = sy;\n        this.originX = 0;\n        this.originY = 0;\n    };\n    Transformable.prototype.decomposeTransform = function () {\n        if (!this.transform) {\n            return;\n        }\n        var parent = this.parent;\n        var m = this.transform;\n        if (parent && parent.transform) {\n            matrix.mul(tmpTransform, parent.invTransform, m);\n            m = tmpTransform;\n        }\n        var ox = this.originX;\n        var oy = this.originY;\n        if (ox || oy) {\n            originTransform[4] = ox;\n            originTransform[5] = oy;\n            matrix.mul(tmpTransform, m, originTransform);\n            tmpTransform[4] -= ox;\n            tmpTransform[5] -= oy;\n            m = tmpTransform;\n        }\n        this.setLocalTransform(m);\n    };\n    Transformable.prototype.getGlobalScale = function (out) {\n        var m = this.transform;\n        out = out || [];\n        if (!m) {\n            out[0] = 1;\n            out[1] = 1;\n            return out;\n        }\n        out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n        out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n        if (m[0] < 0) {\n            out[0] = -out[0];\n        }\n        if (m[3] < 0) {\n            out[1] = -out[1];\n        }\n        return out;\n    };\n    Transformable.prototype.transformCoordToLocal = function (x, y) {\n        var v2 = [x, y];\n        var invTransform = this.invTransform;\n        if (invTransform) {\n            vector.applyTransform(v2, v2, invTransform);\n        }\n        return v2;\n    };\n    Transformable.prototype.transformCoordToGlobal = function (x, y) {\n        var v2 = [x, y];\n        var transform = this.transform;\n        if (transform) {\n            vector.applyTransform(v2, v2, transform);\n        }\n        return v2;\n    };\n    Transformable.prototype.getLineScale = function () {\n        var m = this.transform;\n        return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10\n            ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1]))\n            : 1;\n    };\n    Transformable.prototype.copyTransform = function (source) {\n        copyTransform(this, source);\n    };\n    Transformable.getLocalTransform = function (target, m) {\n        m = m || [];\n        var ox = target.originX || 0;\n        var oy = target.originY || 0;\n        var sx = target.scaleX;\n        var sy = target.scaleY;\n        var ax = target.anchorX;\n        var ay = target.anchorY;\n        var rotation = target.rotation || 0;\n        var x = target.x;\n        var y = target.y;\n        var skewX = target.skewX ? Math.tan(target.skewX) : 0;\n        var skewY = target.skewY ? Math.tan(-target.skewY) : 0;\n        if (ox || oy || ax || ay) {\n            var dx = ox + ax;\n            var dy = oy + ay;\n            m[4] = -dx * sx - skewX * dy * sy;\n            m[5] = -dy * sy - skewY * dx * sx;\n        }\n        else {\n            m[4] = m[5] = 0;\n        }\n        m[0] = sx;\n        m[3] = sy;\n        m[1] = skewY * sx;\n        m[2] = skewX * sy;\n        rotation && matrix.rotate(m, m, rotation);\n        m[4] += ox + x;\n        m[5] += oy + y;\n        return m;\n    };\n    Transformable.initDefaultProps = (function () {\n        var proto = Transformable.prototype;\n        proto.scaleX =\n            proto.scaleY =\n                proto.globalScaleRatio = 1;\n        proto.x =\n            proto.y =\n                proto.originX =\n                    proto.originY =\n                        proto.skewX =\n                            proto.skewY =\n                                proto.rotation =\n                                    proto.anchorX =\n                                        proto.anchorY = 0;\n    })();\n    return Transformable;\n}());\n;\nexport var TRANSFORMABLE_PROPS = [\n    'x', 'y', 'originX', 'originY', 'anchorX', 'anchorY', 'rotation', 'scaleX', 'scaleY', 'skewX', 'skewY'\n];\nexport function copyTransform(target, source) {\n    for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n        var propName = TRANSFORMABLE_PROPS[i];\n        target[propName] = source[propName];\n    }\n}\nexport default Transformable;\n","var wmUniqueIndex = Math.round(Math.random() * 9);\nvar supportDefineProperty = typeof Object.defineProperty === 'function';\nvar WeakMap = (function () {\n    function WeakMap() {\n        this._id = '__ec_inner_' + wmUniqueIndex++;\n    }\n    WeakMap.prototype.get = function (key) {\n        return this._guard(key)[this._id];\n    };\n    WeakMap.prototype.set = function (key, value) {\n        var target = this._guard(key);\n        if (supportDefineProperty) {\n            Object.defineProperty(target, this._id, {\n                value: value,\n                enumerable: false,\n                configurable: true\n            });\n        }\n        else {\n            target[this._id] = value;\n        }\n        return this;\n    };\n    WeakMap.prototype[\"delete\"] = function (key) {\n        if (this.has(key)) {\n            delete this._guard(key)[this._id];\n            return true;\n        }\n        return false;\n    };\n    WeakMap.prototype.has = function (key) {\n        return !!this._guard(key)[this._id];\n    };\n    WeakMap.prototype._guard = function (key) {\n        if (key !== Object(key)) {\n            throw TypeError('Value of WeakMap is not a non-null object.');\n        }\n        return key;\n    };\n    return WeakMap;\n}());\nexport default WeakMap;\n","import * as vec2 from './vector.js';\nimport * as curve from './curve.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI2 = Math.PI * 2;\nvar start = vec2.create();\nvar end = vec2.create();\nvar extremity = vec2.create();\nexport function fromPoints(points, min, max) {\n    if (points.length === 0) {\n        return;\n    }\n    var p = points[0];\n    var left = p[0];\n    var right = p[0];\n    var top = p[1];\n    var bottom = p[1];\n    for (var i = 1; i < points.length; i++) {\n        p = points[i];\n        left = mathMin(left, p[0]);\n        right = mathMax(right, p[0]);\n        top = mathMin(top, p[1]);\n        bottom = mathMax(bottom, p[1]);\n    }\n    min[0] = left;\n    min[1] = top;\n    max[0] = right;\n    max[1] = bottom;\n}\nexport function fromLine(x0, y0, x1, y1, min, max) {\n    min[0] = mathMin(x0, x1);\n    min[1] = mathMin(y0, y1);\n    max[0] = mathMax(x0, x1);\n    max[1] = mathMax(y0, y1);\n}\nvar xDim = [];\nvar yDim = [];\nexport function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\n    var cubicExtrema = curve.cubicExtrema;\n    var cubicAt = curve.cubicAt;\n    var n = cubicExtrema(x0, x1, x2, x3, xDim);\n    min[0] = Infinity;\n    min[1] = Infinity;\n    max[0] = -Infinity;\n    max[1] = -Infinity;\n    for (var i = 0; i < n; i++) {\n        var x = cubicAt(x0, x1, x2, x3, xDim[i]);\n        min[0] = mathMin(x, min[0]);\n        max[0] = mathMax(x, max[0]);\n    }\n    n = cubicExtrema(y0, y1, y2, y3, yDim);\n    for (var i = 0; i < n; i++) {\n        var y = cubicAt(y0, y1, y2, y3, yDim[i]);\n        min[1] = mathMin(y, min[1]);\n        max[1] = mathMax(y, max[1]);\n    }\n    min[0] = mathMin(x0, min[0]);\n    max[0] = mathMax(x0, max[0]);\n    min[0] = mathMin(x3, min[0]);\n    max[0] = mathMax(x3, max[0]);\n    min[1] = mathMin(y0, min[1]);\n    max[1] = mathMax(y0, max[1]);\n    min[1] = mathMin(y3, min[1]);\n    max[1] = mathMax(y3, max[1]);\n}\nexport function fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\n    var quadraticExtremum = curve.quadraticExtremum;\n    var quadraticAt = curve.quadraticAt;\n    var tx = mathMax(mathMin(quadraticExtremum(x0, x1, x2), 1), 0);\n    var ty = mathMax(mathMin(quadraticExtremum(y0, y1, y2), 1), 0);\n    var x = quadraticAt(x0, x1, x2, tx);\n    var y = quadraticAt(y0, y1, y2, ty);\n    min[0] = mathMin(x0, x2, x);\n    min[1] = mathMin(y0, y2, y);\n    max[0] = mathMax(x0, x2, x);\n    max[1] = mathMax(y0, y2, y);\n}\nexport function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min, max) {\n    var vec2Min = vec2.min;\n    var vec2Max = vec2.max;\n    var diff = Math.abs(startAngle - endAngle);\n    if (diff % PI2 < 1e-4 && diff > 1e-4) {\n        min[0] = x - rx;\n        min[1] = y - ry;\n        max[0] = x + rx;\n        max[1] = y + ry;\n        return;\n    }\n    start[0] = mathCos(startAngle) * rx + x;\n    start[1] = mathSin(startAngle) * ry + y;\n    end[0] = mathCos(endAngle) * rx + x;\n    end[1] = mathSin(endAngle) * ry + y;\n    vec2Min(min, start, end);\n    vec2Max(max, start, end);\n    startAngle = startAngle % (PI2);\n    if (startAngle < 0) {\n        startAngle = startAngle + PI2;\n    }\n    endAngle = endAngle % (PI2);\n    if (endAngle < 0) {\n        endAngle = endAngle + PI2;\n    }\n    if (startAngle > endAngle && !anticlockwise) {\n        endAngle += PI2;\n    }\n    else if (startAngle < endAngle && anticlockwise) {\n        startAngle += PI2;\n    }\n    if (anticlockwise) {\n        var tmp = endAngle;\n        endAngle = startAngle;\n        startAngle = tmp;\n    }\n    for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n        if (angle > startAngle) {\n            extremity[0] = mathCos(angle) * rx + x;\n            extremity[1] = mathSin(angle) * ry + y;\n            vec2Min(min, extremity, min);\n            vec2Max(max, extremity, max);\n        }\n    }\n}\n","import { create as v2Create, distSquare as v2DistSquare } from './vector.js';\nvar mathPow = Math.pow;\nvar mathSqrt = Math.sqrt;\nvar EPSILON = 1e-8;\nvar EPSILON_NUMERIC = 1e-4;\nvar THREE_SQRT = mathSqrt(3);\nvar ONE_THIRD = 1 / 3;\nvar _v0 = v2Create();\nvar _v1 = v2Create();\nvar _v2 = v2Create();\nfunction isAroundZero(val) {\n    return val > -EPSILON && val < EPSILON;\n}\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nexport function cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return onet * onet * (onet * p0 + 3 * t * p1)\n        + t * t * (t * p3 + 3 * onet * p2);\n}\nexport function cubicDerivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet\n        + (p3 - p2) * t * t);\n}\nexport function cubicRootAt(p0, p1, p2, p3, val, roots) {\n    var a = p3 + 3 * (p1 - p2) - p0;\n    var b = 3 * (p2 - p1 * 2 + p0);\n    var c = 3 * (p1 - p0);\n    var d = p0 - val;\n    var A = b * b - 3 * a * c;\n    var B = b * c - 9 * a * d;\n    var C = c * c - 3 * b * d;\n    var n = 0;\n    if (isAroundZero(A) && isAroundZero(B)) {\n        if (isAroundZero(b)) {\n            roots[0] = 0;\n        }\n        else {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = B * B - 4 * A * C;\n        if (isAroundZero(disc)) {\n            var K = B / A;\n            var t1 = -b / a + K;\n            var t2 = -K / 2;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n            var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n            if (Y1 < 0) {\n                Y1 = -mathPow(-Y1, ONE_THIRD);\n            }\n            else {\n                Y1 = mathPow(Y1, ONE_THIRD);\n            }\n            if (Y2 < 0) {\n                Y2 = -mathPow(-Y2, ONE_THIRD);\n            }\n            else {\n                Y2 = mathPow(Y2, ONE_THIRD);\n            }\n            var t1 = (-b - (Y1 + Y2)) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else {\n            var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n            var theta = Math.acos(T) / 3;\n            var ASqrt = mathSqrt(A);\n            var tmp = Math.cos(theta);\n            var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n            var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n            var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n            if (t3 >= 0 && t3 <= 1) {\n                roots[n++] = t3;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicExtrema(p0, p1, p2, p3, extrema) {\n    var b = 6 * p2 - 12 * p1 + 6 * p0;\n    var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            extrema[0] = -b / (2 * a);\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                extrema[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicSubdivide(p0, p1, p2, p3, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p23 = (p3 - p2) * t + p2;\n    var p012 = (p12 - p01) * t + p01;\n    var p123 = (p23 - p12) * t + p12;\n    var p0123 = (p123 - p012) * t + p012;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p0123;\n    out[4] = p0123;\n    out[5] = p123;\n    out[6] = p23;\n    out[7] = p3;\n}\nexport function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    var prev;\n    var next;\n    var d1;\n    var d2;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n        _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n        d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        prev = t - interval;\n        next = t + interval;\n        _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n        _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n        d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = cubicAt(x0, x1, x2, x3, next);\n            _v2[1] = cubicAt(y0, y1, y2, y3, next);\n            d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = cubicAt(x0, x1, x2, x3, t);\n        out[1] = cubicAt(y0, y1, y2, y3, t);\n    }\n    return mathSqrt(d);\n}\nexport function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = cubicAt(x0, x1, x2, x3, t);\n        var y = cubicAt(y0, y1, y2, y3, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\nexport function quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n}\nexport function quadraticDerivativeAt(p0, p1, p2, t) {\n    return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n}\nexport function quadraticRootAt(p0, p1, p2, val, roots) {\n    var a = p0 - 2 * p1 + p2;\n    var b = 2 * (p1 - p0);\n    var c = p0 - val;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            var t1 = -b / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function quadraticExtremum(p0, p1, p2) {\n    var divider = p0 + p2 - 2 * p1;\n    if (divider === 0) {\n        return 0.5;\n    }\n    else {\n        return (p0 - p1) / divider;\n    }\n}\nexport function quadraticSubdivide(p0, p1, p2, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p012 = (p12 - p01) * t + p01;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p012;\n    out[4] = p12;\n    out[5] = p2;\n}\nexport function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = quadraticAt(x0, x1, x2, _t);\n        _v1[1] = quadraticAt(y0, y1, y2, _t);\n        var d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        var prev = t - interval;\n        var next = t + interval;\n        _v1[0] = quadraticAt(x0, x1, x2, prev);\n        _v1[1] = quadraticAt(y0, y1, y2, prev);\n        var d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = quadraticAt(x0, x1, x2, next);\n            _v2[1] = quadraticAt(y0, y1, y2, next);\n            var d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = quadraticAt(x0, x1, x2, t);\n        out[1] = quadraticAt(y0, y1, y2, t);\n    }\n    return mathSqrt(d);\n}\nexport function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = quadraticAt(x0, x1, x2, t);\n        var y = quadraticAt(y0, y1, y2, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\n","var LN2 = Math.log(2);\nfunction determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n    var cacheKey = rowMask + '-' + colMask;\n    var fullRank = rows.length;\n    if (detCache.hasOwnProperty(cacheKey)) {\n        return detCache[cacheKey];\n    }\n    if (rank === 1) {\n        var colStart = Math.round(Math.log(((1 << fullRank) - 1) & ~colMask) / LN2);\n        return rows[rowStart][colStart];\n    }\n    var subRowMask = rowMask | (1 << rowStart);\n    var subRowStart = rowStart + 1;\n    while (rowMask & (1 << subRowStart)) {\n        subRowStart++;\n    }\n    var sum = 0;\n    for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n        var colTag = 1 << j;\n        if (!(colTag & colMask)) {\n            sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j]\n                * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n            colLocalIdx++;\n        }\n    }\n    detCache[cacheKey] = sum;\n    return sum;\n}\nexport function buildTransformer(src, dest) {\n    var mA = [\n        [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],\n        [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],\n        [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],\n        [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],\n        [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],\n        [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],\n        [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],\n        [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]\n    ];\n    var detCache = {};\n    var det = determinant(mA, 8, 0, 0, 0, detCache);\n    if (det === 0) {\n        return;\n    }\n    var vh = [];\n    for (var i = 0; i < 8; i++) {\n        for (var j = 0; j < 8; j++) {\n            vh[j] == null && (vh[j] = 0);\n            vh[j] += ((i + j) % 2 ? -1 : 1)\n                * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache)\n                / det * dest[i];\n        }\n    }\n    return function (out, srcPointX, srcPointY) {\n        var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n        out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n        out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n    };\n}\n","import env from './env.js';\nimport { buildTransformer } from './fourPointsTransform.js';\nvar EVENT_SAVED_PROP = '___zrEVENTSAVED';\nvar _calcOut = [];\nexport function transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n    return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true)\n        && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\n}\nexport function transformCoordWithViewport(out, el, inX, inY, inverse) {\n    if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n        var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n        var markers = prepareCoordMarkers(el, saved);\n        var transformer = preparePointerTransformer(markers, saved, inverse);\n        if (transformer) {\n            transformer(out, inX, inY);\n            return true;\n        }\n    }\n    return false;\n}\nfunction prepareCoordMarkers(el, saved) {\n    var markers = saved.markers;\n    if (markers) {\n        return markers;\n    }\n    markers = saved.markers = [];\n    var propLR = ['left', 'right'];\n    var propTB = ['top', 'bottom'];\n    for (var i = 0; i < 4; i++) {\n        var marker = document.createElement('div');\n        var stl = marker.style;\n        var idxLR = i % 2;\n        var idxTB = (i >> 1) % 2;\n        stl.cssText = [\n            'position: absolute',\n            'visibility: hidden',\n            'padding: 0',\n            'margin: 0',\n            'border-width: 0',\n            'user-select: none',\n            'width:0',\n            'height:0',\n            propLR[idxLR] + ':0',\n            propTB[idxTB] + ':0',\n            propLR[1 - idxLR] + ':auto',\n            propTB[1 - idxTB] + ':auto',\n            ''\n        ].join('!important;');\n        el.appendChild(marker);\n        markers.push(marker);\n    }\n    return markers;\n}\nfunction preparePointerTransformer(markers, saved, inverse) {\n    var transformerName = inverse ? 'invTrans' : 'trans';\n    var transformer = saved[transformerName];\n    var oldSrcCoords = saved.srcCoords;\n    var srcCoords = [];\n    var destCoords = [];\n    var oldCoordTheSame = true;\n    for (var i = 0; i < 4; i++) {\n        var rect = markers[i].getBoundingClientRect();\n        var ii = 2 * i;\n        var x = rect.left;\n        var y = rect.top;\n        srcCoords.push(x, y);\n        oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n        destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n    }\n    return (oldCoordTheSame && transformer)\n        ? transformer\n        : (saved.srcCoords = srcCoords,\n            saved[transformerName] = inverse\n                ? buildTransformer(destCoords, srcCoords)\n                : buildTransformer(srcCoords, destCoords));\n}\nexport function isCanvasEl(el) {\n    return el.nodeName.toUpperCase() === 'CANVAS';\n}\nvar replaceReg = /([&<>\"'])/g;\nvar replaceMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&#39;'\n};\nexport function encodeHTML(source) {\n    return source == null\n        ? ''\n        : (source + '').replace(replaceReg, function (str, c) {\n            return replaceMap[c];\n        });\n}\n","var Browser = (function () {\n    function Browser() {\n        this.firefox = false;\n        this.ie = false;\n        this.edge = false;\n        this.newEdge = false;\n        this.weChat = false;\n    }\n    return Browser;\n}());\nvar Env = (function () {\n    function Env() {\n        this.browser = new Browser();\n        this.node = false;\n        this.wxa = false;\n        this.worker = false;\n        this.svgSupported = false;\n        this.touchEventsSupported = false;\n        this.pointerEventsSupported = false;\n        this.domSupported = false;\n        this.transformSupported = false;\n        this.transform3dSupported = false;\n        this.hasGlobalWindow = typeof window !== 'undefined';\n    }\n    return Env;\n}());\nvar env = new Env();\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n    env.wxa = true;\n    env.touchEventsSupported = true;\n}\nelse if (typeof document === 'undefined' && typeof self !== 'undefined') {\n    env.worker = true;\n}\nelse if (typeof navigator === 'undefined') {\n    env.node = true;\n    env.svgSupported = true;\n}\nelse {\n    detect(navigator.userAgent, env);\n}\nfunction detect(ua, env) {\n    var browser = env.browser;\n    var firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    var ie = ua.match(/MSIE\\s([\\d.]+)/)\n        || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n    var edge = ua.match(/Edge?\\/([\\d.]+)/);\n    var weChat = (/micromessenger/i).test(ua);\n    if (firefox) {\n        browser.firefox = true;\n        browser.version = firefox[1];\n    }\n    if (ie) {\n        browser.ie = true;\n        browser.version = ie[1];\n    }\n    if (edge) {\n        browser.edge = true;\n        browser.version = edge[1];\n        browser.newEdge = +edge[1].split('.')[0] > 18;\n    }\n    if (weChat) {\n        browser.weChat = true;\n    }\n    env.svgSupported = typeof SVGRect !== 'undefined';\n    env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\n    env.pointerEventsSupported = 'onpointerdown' in window\n        && (browser.edge || (browser.ie && +browser.version >= 11));\n    env.domSupported = typeof document !== 'undefined';\n    var style = document.documentElement.style;\n    env.transform3dSupported = ((browser.ie && 'transition' in style)\n        || browser.edge\n        || (('WebKitCSSMatrix' in window) && ('m11' in new WebKitCSSMatrix()))\n        || 'MozPerspective' in style)\n        && !('OTransition' in style);\n    env.transformSupported = env.transform3dSupported\n        || (browser.ie && +browser.version >= 9);\n}\nexport default env;\n","import Eventful from './Eventful.js';\nimport env from './env.js';\nimport { isCanvasEl, transformCoordWithViewport } from './dom.js';\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\nvar _calcOut = [];\nvar firefoxNotSupportOffsetXY = env.browser.firefox\n    && +env.browser.version.split('.')[0] < 39;\nexport function clientToLocal(el, e, out, calculate) {\n    out = out || {};\n    if (calculate) {\n        calculateZrXY(el, e, out);\n    }\n    else if (firefoxNotSupportOffsetXY\n        && e.layerX != null\n        && e.layerX !== e.offsetX) {\n        out.zrX = e.layerX;\n        out.zrY = e.layerY;\n    }\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n    }\n    else {\n        calculateZrXY(el, e, out);\n    }\n    return out;\n}\nfunction calculateZrXY(el, e, out) {\n    if (env.domSupported && el.getBoundingClientRect) {\n        var ex = e.clientX;\n        var ey = e.clientY;\n        if (isCanvasEl(el)) {\n            var box = el.getBoundingClientRect();\n            out.zrX = ex - box.left;\n            out.zrY = ey - box.top;\n            return;\n        }\n        else {\n            if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n                out.zrX = _calcOut[0];\n                out.zrY = _calcOut[1];\n                return;\n            }\n        }\n    }\n    out.zrX = out.zrY = 0;\n}\nexport function getNativeEvent(e) {\n    return e\n        || window.event;\n}\nexport function normalizeEvent(el, e, calculate) {\n    e = getNativeEvent(e);\n    if (e.zrX != null) {\n        return e;\n    }\n    var eventType = e.type;\n    var isTouch = eventType && eventType.indexOf('touch') >= 0;\n    if (!isTouch) {\n        clientToLocal(el, e, e, calculate);\n        var wheelDelta = getWheelDeltaMayPolyfill(e);\n        e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\n    }\n    else {\n        var touch = eventType !== 'touchend'\n            ? e.targetTouches[0]\n            : e.changedTouches[0];\n        touch && clientToLocal(el, touch, e, calculate);\n    }\n    var button = e.button;\n    if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n        e.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));\n    }\n    return e;\n}\nfunction getWheelDeltaMayPolyfill(e) {\n    var rawWheelDelta = e.wheelDelta;\n    if (rawWheelDelta) {\n        return rawWheelDelta;\n    }\n    var deltaX = e.deltaX;\n    var deltaY = e.deltaY;\n    if (deltaX == null || deltaY == null) {\n        return rawWheelDelta;\n    }\n    var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\n    var sign = deltaY > 0 ? -1\n        : deltaY < 0 ? 1\n            : deltaX > 0 ? -1\n                : 1;\n    return 3 * delta * sign;\n}\nexport function addEventListener(el, name, handler, opt) {\n    el.addEventListener(name, handler, opt);\n}\nexport function removeEventListener(el, name, handler, opt) {\n    el.removeEventListener(name, handler, opt);\n}\nexport var stop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.cancelBubble = true;\n};\nexport function isMiddleOrRightButtonOnMouseUpDown(e) {\n    return e.which === 2 || e.which === 3;\n}\nexport { Eventful as Dispatcher };\n","export function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n}\nexport function copy(out, m) {\n    out[0] = m[0];\n    out[1] = m[1];\n    out[2] = m[2];\n    out[3] = m[3];\n    out[4] = m[4];\n    out[5] = m[5];\n    return out;\n}\nexport function mul(out, m1, m2) {\n    var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n    var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n    var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n    var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n    var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n    var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = out3;\n    out[4] = out4;\n    out[5] = out5;\n    return out;\n}\nexport function translate(out, a, v) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4] + v[0];\n    out[5] = a[5] + v[1];\n    return out;\n}\nexport function rotate(out, a, rad) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var st = Math.sin(rad);\n    var ct = Math.cos(rad);\n    out[0] = aa * ct + ab * st;\n    out[1] = -aa * st + ab * ct;\n    out[2] = ac * ct + ad * st;\n    out[3] = -ac * st + ct * ad;\n    out[4] = ct * atx + st * aty;\n    out[5] = ct * aty - st * atx;\n    return out;\n}\nexport function scale(out, a, v) {\n    var vx = v[0];\n    var vy = v[1];\n    out[0] = a[0] * vx;\n    out[1] = a[1] * vy;\n    out[2] = a[2] * vx;\n    out[3] = a[3] * vy;\n    out[4] = a[4] * vx;\n    out[5] = a[5] * vy;\n    return out;\n}\nexport function invert(out, a) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var det = aa * ad - ab * ac;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n}\nexport function clone(a) {\n    var b = create();\n    copy(b, a);\n    return b;\n}\n","export var DEFAULT_FONT_SIZE = 12;\nexport var DEFAULT_FONT_FAMILY = 'sans-serif';\nexport var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\nvar OFFSET = 20;\nvar SCALE = 100;\nvar defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\nfunction getTextWidthMap(mapStr) {\n    var map = {};\n    if (typeof JSON === 'undefined') {\n        return map;\n    }\n    for (var i = 0; i < mapStr.length; i++) {\n        var char = String.fromCharCode(i + 32);\n        var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n        map[char] = size;\n    }\n    return map;\n}\nexport var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\nexport var platformApi = {\n    createCanvas: function () {\n        return typeof document !== 'undefined'\n            && document.createElement('canvas');\n    },\n    measureText: (function () {\n        var _ctx;\n        var _cachedFont;\n        return function (text, font) {\n            if (!_ctx) {\n                var canvas = platformApi.createCanvas();\n                _ctx = canvas && canvas.getContext('2d');\n            }\n            if (_ctx) {\n                if (_cachedFont !== font) {\n                    _cachedFont = _ctx.font = font || DEFAULT_FONT;\n                }\n                return _ctx.measureText(text);\n            }\n            else {\n                text = text || '';\n                font = font || DEFAULT_FONT;\n                var res = /(\\d+)px/.exec(font);\n                var fontSize = res && +res[1] || DEFAULT_FONT_SIZE;\n                var width = 0;\n                if (font.indexOf('mono') >= 0) {\n                    width = fontSize * text.length;\n                }\n                else {\n                    for (var i = 0; i < text.length; i++) {\n                        var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n                        width += preCalcWidth == null ? fontSize : (preCalcWidth * fontSize);\n                    }\n                }\n                return { width: width };\n            }\n        };\n    })(),\n    loadImage: function (src, onload, onerror) {\n        var image = new Image();\n        image.onload = onload;\n        image.onerror = onerror;\n        image.src = src;\n        return image;\n    }\n};\nexport function setPlatformAPI(newPlatformApis) {\n    for (var key in platformApi) {\n        if (newPlatformApis[key]) {\n            platformApi[key] = newPlatformApis[key];\n        }\n    }\n}\n","var DEFAULT_MIN_MERGE = 32;\nvar DEFAULT_MIN_GALLOPING = 7;\nvar DEFAULT_TMP_STORAGE_LENGTH = 256;\nfunction minRunLength(n) {\n    var r = 0;\n    while (n >= DEFAULT_MIN_MERGE) {\n        r |= n & 1;\n        n >>= 1;\n    }\n    return n + r;\n}\nfunction makeAscendingRun(array, lo, hi, compare) {\n    var runHi = lo + 1;\n    if (runHi === hi) {\n        return 1;\n    }\n    if (compare(array[runHi++], array[lo]) < 0) {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n            runHi++;\n        }\n        reverseRun(array, lo, runHi);\n    }\n    else {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n            runHi++;\n        }\n    }\n    return runHi - lo;\n}\nfunction reverseRun(array, lo, hi) {\n    hi--;\n    while (lo < hi) {\n        var t = array[lo];\n        array[lo++] = array[hi];\n        array[hi--] = t;\n    }\n}\nfunction binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n        start++;\n    }\n    for (; start < hi; start++) {\n        var pivot = array[start];\n        var left = lo;\n        var right = start;\n        var mid;\n        while (left < right) {\n            mid = left + right >>> 1;\n            if (compare(pivot, array[mid]) < 0) {\n                right = mid;\n            }\n            else {\n                left = mid + 1;\n            }\n        }\n        var n = start - left;\n        switch (n) {\n            case 3:\n                array[left + 3] = array[left + 2];\n            case 2:\n                array[left + 2] = array[left + 1];\n            case 1:\n                array[left + 1] = array[left];\n                break;\n            default:\n                while (n > 0) {\n                    array[left + n] = array[left + n - 1];\n                    n--;\n                }\n        }\n        array[left] = pivot;\n    }\n}\nfunction gallopLeft(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) > 0) {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    else {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) > 0) {\n            lastOffset = m + 1;\n        }\n        else {\n            offset = m;\n        }\n    }\n    return offset;\n}\nfunction gallopRight(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) < 0) {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    else {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) < 0) {\n            offset = m;\n        }\n        else {\n            lastOffset = m + 1;\n        }\n    }\n    return offset;\n}\nfunction TimSort(array, compare) {\n    var minGallop = DEFAULT_MIN_GALLOPING;\n    var length = 0;\n    var tmpStorageLength = DEFAULT_TMP_STORAGE_LENGTH;\n    var stackLength = 0;\n    var runStart;\n    var runLength;\n    var stackSize = 0;\n    length = array.length;\n    if (length < 2 * DEFAULT_TMP_STORAGE_LENGTH) {\n        tmpStorageLength = length >>> 1;\n    }\n    var tmp = [];\n    stackLength = length < 120 ? 5 : length < 1542 ? 10 : length < 119151 ? 19 : 40;\n    runStart = [];\n    runLength = [];\n    function pushRun(_runStart, _runLength) {\n        runStart[stackSize] = _runStart;\n        runLength[stackSize] = _runLength;\n        stackSize += 1;\n    }\n    function mergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if ((n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1])\n                || (n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1])) {\n                if (runLength[n - 1] < runLength[n + 1]) {\n                    n--;\n                }\n            }\n            else if (runLength[n] > runLength[n + 1]) {\n                break;\n            }\n            mergeAt(n);\n        }\n    }\n    function forceMergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n                n--;\n            }\n            mergeAt(n);\n        }\n    }\n    function mergeAt(i) {\n        var start1 = runStart[i];\n        var length1 = runLength[i];\n        var start2 = runStart[i + 1];\n        var length2 = runLength[i + 1];\n        runLength[i] = length1 + length2;\n        if (i === stackSize - 3) {\n            runStart[i + 1] = runStart[i + 2];\n            runLength[i + 1] = runLength[i + 2];\n        }\n        stackSize--;\n        var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n        start1 += k;\n        length1 -= k;\n        if (length1 === 0) {\n            return;\n        }\n        length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n        if (length2 === 0) {\n            return;\n        }\n        if (length1 <= length2) {\n            mergeLow(start1, length1, start2, length2);\n        }\n        else {\n            mergeHigh(start1, length1, start2, length2);\n        }\n    }\n    function mergeLow(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length1; i++) {\n            tmp[i] = array[start1 + i];\n        }\n        var cursor1 = 0;\n        var cursor2 = start2;\n        var dest = start1;\n        array[dest++] = array[cursor2++];\n        if (--length2 === 0) {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n            return;\n        }\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n            return;\n        }\n        var _minGallop = minGallop;\n        var count1;\n        var count2;\n        var exit;\n        while (1) {\n            count1 = 0;\n            count2 = 0;\n            exit = false;\n            do {\n                if (compare(array[cursor2], tmp[cursor1]) < 0) {\n                    array[dest++] = array[cursor2++];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest++] = tmp[cursor1++];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n                if (count1 !== 0) {\n                    for (i = 0; i < count1; i++) {\n                        array[dest + i] = tmp[cursor1 + i];\n                    }\n                    dest += count1;\n                    cursor1 += count1;\n                    length1 -= count1;\n                    if (length1 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = array[cursor2++];\n                if (--length2 === 0) {\n                    exit = true;\n                    break;\n                }\n                count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n                if (count2 !== 0) {\n                    for (i = 0; i < count2; i++) {\n                        array[dest + i] = array[cursor2 + i];\n                    }\n                    dest += count2;\n                    cursor2 += count2;\n                    length2 -= count2;\n                    if (length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = tmp[cursor1++];\n                if (--length1 === 1) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        minGallop < 1 && (minGallop = 1);\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n        }\n        else if (length1 === 0) {\n            throw new Error();\n        }\n        else {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n        }\n    }\n    function mergeHigh(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length2; i++) {\n            tmp[i] = array[start2 + i];\n        }\n        var cursor1 = start1 + length1 - 1;\n        var cursor2 = length2 - 1;\n        var dest = start2 + length2 - 1;\n        var customCursor = 0;\n        var customDest = 0;\n        array[dest--] = array[cursor1--];\n        if (--length1 === 0) {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n            return;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n            return;\n        }\n        var _minGallop = minGallop;\n        while (true) {\n            var count1 = 0;\n            var count2 = 0;\n            var exit = false;\n            do {\n                if (compare(tmp[cursor2], array[cursor1]) < 0) {\n                    array[dest--] = array[cursor1--];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest--] = tmp[cursor2--];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n                if (count1 !== 0) {\n                    dest -= count1;\n                    cursor1 -= count1;\n                    length1 -= count1;\n                    customDest = dest + 1;\n                    customCursor = cursor1 + 1;\n                    for (i = count1 - 1; i >= 0; i--) {\n                        array[customDest + i] = array[customCursor + i];\n                    }\n                    if (length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = tmp[cursor2--];\n                if (--length2 === 1) {\n                    exit = true;\n                    break;\n                }\n                count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n                if (count2 !== 0) {\n                    dest -= count2;\n                    cursor2 -= count2;\n                    length2 -= count2;\n                    customDest = dest + 1;\n                    customCursor = cursor2 + 1;\n                    for (i = 0; i < count2; i++) {\n                        array[customDest + i] = tmp[customCursor + i];\n                    }\n                    if (length2 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = array[cursor1--];\n                if (--length1 === 0) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        if (minGallop < 1) {\n            minGallop = 1;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n        }\n        else if (length2 === 0) {\n            throw new Error();\n        }\n        else {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n        }\n    }\n    return {\n        mergeRuns: mergeRuns,\n        forceMergeRuns: forceMergeRuns,\n        pushRun: pushRun\n    };\n}\nexport default function sort(array, compare, lo, hi) {\n    if (!lo) {\n        lo = 0;\n    }\n    if (!hi) {\n        hi = array.length;\n    }\n    var remaining = hi - lo;\n    if (remaining < 2) {\n        return;\n    }\n    var runLength = 0;\n    if (remaining < DEFAULT_MIN_MERGE) {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n        return;\n    }\n    var ts = TimSort(array, compare);\n    var minRun = minRunLength(remaining);\n    do {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        if (runLength < minRun) {\n            var force = remaining;\n            if (force > minRun) {\n                force = minRun;\n            }\n            binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n            runLength = force;\n        }\n        ts.pushRun(lo, runLength);\n        ts.mergeRuns();\n        remaining -= runLength;\n        lo += runLength;\n    } while (remaining !== 0);\n    ts.forceMergeRuns();\n}\n","import { platformApi } from './platform.js';\nvar BUILTIN_OBJECT = reduce([\n    'Function',\n    'RegExp',\n    'Date',\n    'Error',\n    'CanvasGradient',\n    'CanvasPattern',\n    'Image',\n    'Canvas'\n], function (obj, val) {\n    obj['[object ' + val + ']'] = true;\n    return obj;\n}, {});\nvar TYPED_ARRAY = reduce([\n    'Int8',\n    'Uint8',\n    'Uint8Clamped',\n    'Int16',\n    'Uint16',\n    'Int32',\n    'Uint32',\n    'Float32',\n    'Float64'\n], function (obj, val) {\n    obj['[object ' + val + 'Array]'] = true;\n    return obj;\n}, {});\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar ctorFunction = function () { }.constructor;\nvar protoFunction = ctorFunction ? ctorFunction.prototype : null;\nvar protoKey = '__proto__';\nvar idStart = 0x0907;\nexport function guid() {\n    return idStart++;\n}\nexport function logError() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (typeof console !== 'undefined') {\n        console.error.apply(console, args);\n    }\n}\nexport function clone(source) {\n    if (source == null || typeof source !== 'object') {\n        return source;\n    }\n    var result = source;\n    var typeStr = objToString.call(source);\n    if (typeStr === '[object Array]') {\n        if (!isPrimitive(source)) {\n            result = [];\n            for (var i = 0, len = source.length; i < len; i++) {\n                result[i] = clone(source[i]);\n            }\n        }\n    }\n    else if (TYPED_ARRAY[typeStr]) {\n        if (!isPrimitive(source)) {\n            var Ctor = source.constructor;\n            if (Ctor.from) {\n                result = Ctor.from(source);\n            }\n            else {\n                result = new Ctor(source.length);\n                for (var i = 0, len = source.length; i < len; i++) {\n                    result[i] = source[i];\n                }\n            }\n        }\n    }\n    else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n        result = {};\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                result[key] = clone(source[key]);\n            }\n        }\n    }\n    return result;\n}\nexport function merge(target, source, overwrite) {\n    if (!isObject(source) || !isObject(target)) {\n        return overwrite ? clone(source) : target;\n    }\n    for (var key in source) {\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n            var targetProp = target[key];\n            var sourceProp = source[key];\n            if (isObject(sourceProp)\n                && isObject(targetProp)\n                && !isArray(sourceProp)\n                && !isArray(targetProp)\n                && !isDom(sourceProp)\n                && !isDom(targetProp)\n                && !isBuiltInObject(sourceProp)\n                && !isBuiltInObject(targetProp)\n                && !isPrimitive(sourceProp)\n                && !isPrimitive(targetProp)) {\n                merge(targetProp, sourceProp, overwrite);\n            }\n            else if (overwrite || !(key in target)) {\n                target[key] = clone(source[key]);\n            }\n        }\n    }\n    return target;\n}\nexport function mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n        result = merge(result, targetAndSources[i], overwrite);\n    }\n    return result;\n}\nexport function extend(target, source) {\n    if (Object.assign) {\n        Object.assign(target, source);\n    }\n    else {\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\nexport function defaults(target, source, overlay) {\n    var keysArr = keys(source);\n    for (var i = 0; i < keysArr.length; i++) {\n        var key = keysArr[i];\n        if ((overlay ? source[key] != null : target[key] == null)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nexport var createCanvas = platformApi.createCanvas;\nexport function indexOf(array, value) {\n    if (array) {\n        if (array.indexOf) {\n            return array.indexOf(value);\n        }\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\nexport function inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n    function F() { }\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n    for (var prop in clazzPrototype) {\n        if (clazzPrototype.hasOwnProperty(prop)) {\n            clazz.prototype[prop] = clazzPrototype[prop];\n        }\n    }\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n}\nexport function mixin(target, source, override) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n    if (Object.getOwnPropertyNames) {\n        var keyList = Object.getOwnPropertyNames(source);\n        for (var i = 0; i < keyList.length; i++) {\n            var key = keyList[i];\n            if (key !== 'constructor') {\n                if ((override ? source[key] != null : target[key] == null)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n    }\n    else {\n        defaults(target, source, override);\n    }\n}\nexport function isArrayLike(data) {\n    if (!data) {\n        return false;\n    }\n    if (typeof data === 'string') {\n        return false;\n    }\n    return typeof data.length === 'number';\n}\nexport function each(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    if (arr.forEach && arr.forEach === nativeForEach) {\n        arr.forEach(cb, context);\n    }\n    else if (arr.length === +arr.length) {\n        for (var i = 0, len = arr.length; i < len; i++) {\n            cb.call(context, arr[i], i, arr);\n        }\n    }\n    else {\n        for (var key in arr) {\n            if (arr.hasOwnProperty(key)) {\n                cb.call(context, arr[key], key, arr);\n            }\n        }\n    }\n}\nexport function map(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.map && arr.map === nativeMap) {\n        return arr.map(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            result.push(cb.call(context, arr[i], i, arr));\n        }\n        return result;\n    }\n}\nexport function reduce(arr, cb, memo, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        memo = cb.call(context, memo, arr[i], i, arr);\n    }\n    return memo;\n}\nexport function filter(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.filter && arr.filter === nativeFilter) {\n        return arr.filter(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            if (cb.call(context, arr[i], i, arr)) {\n                result.push(arr[i]);\n            }\n        }\n        return result;\n    }\n}\nexport function find(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        if (cb.call(context, arr[i], i, arr)) {\n            return arr[i];\n        }\n    }\n}\nexport function keys(obj) {\n    if (!obj) {\n        return [];\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    var keyList = [];\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            keyList.push(key);\n        }\n    }\n    return keyList;\n}\nfunction bindPolyfill(func, context) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    return function () {\n        return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport var bind = (protoFunction && isFunction(protoFunction.bind))\n    ? protoFunction.call.bind(protoFunction.bind)\n    : bindPolyfill;\nfunction curry(func) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return function () {\n        return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport { curry };\nexport function isArray(value) {\n    if (Array.isArray) {\n        return Array.isArray(value);\n    }\n    return objToString.call(value) === '[object Array]';\n}\nexport function isFunction(value) {\n    return typeof value === 'function';\n}\nexport function isString(value) {\n    return typeof value === 'string';\n}\nexport function isStringSafe(value) {\n    return objToString.call(value) === '[object String]';\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\nexport function isObject(value) {\n    var type = typeof value;\n    return type === 'function' || (!!value && type === 'object');\n}\nexport function isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n}\nexport function isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n}\nexport function isDom(value) {\n    return typeof value === 'object'\n        && typeof value.nodeType === 'number'\n        && typeof value.ownerDocument === 'object';\n}\nexport function isGradientObject(value) {\n    return value.colorStops != null;\n}\nexport function isImagePatternObject(value) {\n    return value.image != null;\n}\nexport function isRegExp(value) {\n    return objToString.call(value) === '[object RegExp]';\n}\nexport function eqNaN(value) {\n    return value !== value;\n}\nexport function retrieve() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0, len = args.length; i < len; i++) {\n        if (args[i] != null) {\n            return args[i];\n        }\n    }\n}\nexport function retrieve2(value0, value1) {\n    return value0 != null\n        ? value0\n        : value1;\n}\nexport function retrieve3(value0, value1, value2) {\n    return value0 != null\n        ? value0\n        : value1 != null\n            ? value1\n            : value2;\n}\nexport function slice(arr) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return nativeSlice.apply(arr, args);\n}\nexport function normalizeCssArray(val) {\n    if (typeof (val) === 'number') {\n        return [val, val, val, val];\n    }\n    var len = val.length;\n    if (len === 2) {\n        return [val[0], val[1], val[0], val[1]];\n    }\n    else if (len === 3) {\n        return [val[0], val[1], val[2], val[1]];\n    }\n    return val;\n}\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\nexport function trim(str) {\n    if (str == null) {\n        return null;\n    }\n    else if (typeof str.trim === 'function') {\n        return str.trim();\n    }\n    else {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n}\nvar primitiveKey = '__ec_primitive__';\nexport function setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n}\nexport function isPrimitive(obj) {\n    return obj[primitiveKey];\n}\nvar MapPolyfill = (function () {\n    function MapPolyfill() {\n        this.data = {};\n    }\n    MapPolyfill.prototype[\"delete\"] = function (key) {\n        var existed = this.has(key);\n        if (existed) {\n            delete this.data[key];\n        }\n        return existed;\n    };\n    MapPolyfill.prototype.has = function (key) {\n        return this.data.hasOwnProperty(key);\n    };\n    MapPolyfill.prototype.get = function (key) {\n        return this.data[key];\n    };\n    MapPolyfill.prototype.set = function (key, value) {\n        this.data[key] = value;\n        return this;\n    };\n    MapPolyfill.prototype.keys = function () {\n        return keys(this.data);\n    };\n    MapPolyfill.prototype.forEach = function (callback) {\n        var data = this.data;\n        for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n                callback(data[key], key);\n            }\n        }\n    };\n    return MapPolyfill;\n}());\nvar isNativeMapSupported = typeof Map === 'function';\nfunction maybeNativeMap() {\n    return (isNativeMapSupported ? new Map() : new MapPolyfill());\n}\nvar HashMap = (function () {\n    function HashMap(obj) {\n        var isArr = isArray(obj);\n        this.data = maybeNativeMap();\n        var thisMap = this;\n        (obj instanceof HashMap)\n            ? obj.each(visit)\n            : (obj && each(obj, visit));\n        function visit(value, key) {\n            isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n        }\n    }\n    HashMap.prototype.hasKey = function (key) {\n        return this.data.has(key);\n    };\n    HashMap.prototype.get = function (key) {\n        return this.data.get(key);\n    };\n    HashMap.prototype.set = function (key, value) {\n        this.data.set(key, value);\n        return value;\n    };\n    HashMap.prototype.each = function (cb, context) {\n        this.data.forEach(function (value, key) {\n            cb.call(context, value, key);\n        });\n    };\n    HashMap.prototype.keys = function () {\n        var keys = this.data.keys();\n        return isNativeMapSupported\n            ? Array.from(keys)\n            : keys;\n    };\n    HashMap.prototype.removeKey = function (key) {\n        this.data[\"delete\"](key);\n    };\n    return HashMap;\n}());\nexport { HashMap };\nexport function createHashMap(obj) {\n    return new HashMap(obj);\n}\nexport function concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n    for (var i = 0; i < a.length; i++) {\n        newArray[i] = a[i];\n    }\n    var offset = a.length;\n    for (var i = 0; i < b.length; i++) {\n        newArray[i + offset] = b[i];\n    }\n    return newArray;\n}\nexport function createObject(proto, properties) {\n    var obj;\n    if (Object.create) {\n        obj = Object.create(proto);\n    }\n    else {\n        var StyleCtor = function () { };\n        StyleCtor.prototype = proto;\n        obj = new StyleCtor();\n    }\n    if (properties) {\n        extend(obj, properties);\n    }\n    return obj;\n}\nexport function disableUserSelect(dom) {\n    var domStyle = dom.style;\n    domStyle.webkitUserSelect = 'none';\n    domStyle.userSelect = 'none';\n    domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n    domStyle['-webkit-touch-callout'] = 'none';\n}\nexport function hasOwn(own, prop) {\n    return own.hasOwnProperty(prop);\n}\nexport function noop() { }\nexport var RADIAN_TO_DEGREE = 180 / Math.PI;\n","export function create(x, y) {\n    if (x == null) {\n        x = 0;\n    }\n    if (y == null) {\n        y = 0;\n    }\n    return [x, y];\n}\nexport function copy(out, v) {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n}\nexport function clone(v) {\n    return [v[0], v[1]];\n}\nexport function set(out, a, b) {\n    out[0] = a;\n    out[1] = b;\n    return out;\n}\nexport function add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\nexport function scaleAndAdd(out, v1, v2, a) {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n}\nexport function sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\nexport function len(v) {\n    return Math.sqrt(lenSquare(v));\n}\nexport var length = len;\nexport function lenSquare(v) {\n    return v[0] * v[0] + v[1] * v[1];\n}\nexport var lengthSquare = lenSquare;\nexport function mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n}\nexport function div(out, v1, v2) {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n}\nexport function dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\nexport function scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n}\nexport function normalize(out, v) {\n    var d = len(v);\n    if (d === 0) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    else {\n        out[0] = v[0] / d;\n        out[1] = v[1] / d;\n    }\n    return out;\n}\nexport function distance(v1, v2) {\n    return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\nexport var dist = distance;\nexport function distanceSquare(v1, v2) {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\nexport var distSquare = distanceSquare;\nexport function negate(out, v) {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n}\nexport function lerp(out, v1, v2, t) {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n}\nexport function applyTransform(out, v, m) {\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\nexport function min(out, v1, v2) {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n}\nexport function max(out, v1, v2) {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n}\n","import { __extends } from \"tslib\";\nimport Path from './Path.js';\nvar CompoundPath = (function (_super) {\n    __extends(CompoundPath, _super);\n    function CompoundPath() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'compound';\n        return _this;\n    }\n    CompoundPath.prototype._updatePathDirty = function () {\n        var paths = this.shape.paths;\n        var dirtyPath = this.shapeChanged();\n        for (var i = 0; i < paths.length; i++) {\n            dirtyPath = dirtyPath || paths[i].shapeChanged();\n        }\n        if (dirtyPath) {\n            this.dirtyShape();\n        }\n    };\n    CompoundPath.prototype.beforeBrush = function () {\n        this._updatePathDirty();\n        var paths = this.shape.paths || [];\n        var scale = this.getGlobalScale();\n        for (var i = 0; i < paths.length; i++) {\n            if (!paths[i].path) {\n                paths[i].createPathProxy();\n            }\n            paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n        }\n    };\n    CompoundPath.prototype.buildPath = function (ctx, shape) {\n        var paths = shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].buildPath(ctx, paths[i].shape, true);\n        }\n    };\n    CompoundPath.prototype.afterBrush = function () {\n        var paths = this.shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].pathUpdated();\n        }\n    };\n    CompoundPath.prototype.getBoundingRect = function () {\n        this._updatePathDirty.call(this);\n        return Path.prototype.getBoundingRect.call(this);\n    };\n    return CompoundPath;\n}(Path));\nexport default CompoundPath;\n","import { __extends } from \"tslib\";\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { keys, extend, createObject } from '../core/util.js';\nimport { REDRAW_BIT, STYLE_CHANGED_BIT } from './constants.js';\nvar STYLE_MAGIC_KEY = '__zr_style_' + Math.round((Math.random() * 10));\nexport var DEFAULT_COMMON_STYLE = {\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    shadowColor: '#000',\n    opacity: 1,\n    blend: 'source-over'\n};\nexport var DEFAULT_COMMON_ANIMATION_PROPS = {\n    style: {\n        shadowBlur: true,\n        shadowOffsetX: true,\n        shadowOffsetY: true,\n        shadowColor: true,\n        opacity: true\n    }\n};\nDEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\nvar PRIMARY_STATES_KEYS = ['z', 'z2', 'invisible'];\nvar PRIMARY_STATES_KEYS_IN_HOVER_LAYER = ['invisible'];\nvar Displayable = (function (_super) {\n    __extends(Displayable, _super);\n    function Displayable(props) {\n        return _super.call(this, props) || this;\n    }\n    Displayable.prototype._init = function (props) {\n        var keysArr = keys(props);\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            if (key === 'style') {\n                this.useStyle(props[key]);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, props[key]);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Displayable.prototype.beforeBrush = function () { };\n    Displayable.prototype.afterBrush = function () { };\n    Displayable.prototype.innerBeforeBrush = function () { };\n    Displayable.prototype.innerAfterBrush = function () { };\n    Displayable.prototype.shouldBePainted = function (viewWidth, viewHeight, considerClipPath, considerAncestors) {\n        var m = this.transform;\n        if (this.ignore\n            || this.invisible\n            || this.style.opacity === 0\n            || (this.culling\n                && isDisplayableCulled(this, viewWidth, viewHeight))\n            || (m && !m[0] && !m[3])) {\n            return false;\n        }\n        if (considerClipPath && this.__clipPaths) {\n            for (var i = 0; i < this.__clipPaths.length; ++i) {\n                if (this.__clipPaths[i].isZeroArea()) {\n                    return false;\n                }\n            }\n        }\n        if (considerAncestors && this.parent) {\n            var parent_1 = this.parent;\n            while (parent_1) {\n                if (parent_1.ignore) {\n                    return false;\n                }\n                parent_1 = parent_1.parent;\n            }\n        }\n        return true;\n    };\n    Displayable.prototype.contain = function (x, y) {\n        return this.rectContain(x, y);\n    };\n    Displayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    Displayable.prototype.rectContain = function (x, y) {\n        var coord = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        return rect.contain(coord[0], coord[1]);\n    };\n    Displayable.prototype.getPaintRect = function () {\n        var rect = this._paintRect;\n        if (!this._paintRect || this.__dirty) {\n            var transform = this.transform;\n            var elRect = this.getBoundingRect();\n            var style = this.style;\n            var shadowSize = style.shadowBlur || 0;\n            var shadowOffsetX = style.shadowOffsetX || 0;\n            var shadowOffsetY = style.shadowOffsetY || 0;\n            rect = this._paintRect || (this._paintRect = new BoundingRect(0, 0, 0, 0));\n            if (transform) {\n                BoundingRect.applyTransform(rect, elRect, transform);\n            }\n            else {\n                rect.copy(elRect);\n            }\n            if (shadowSize || shadowOffsetX || shadowOffsetY) {\n                rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);\n                rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);\n                rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);\n                rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);\n            }\n            var tolerance = this.dirtyRectTolerance;\n            if (!rect.isZero()) {\n                rect.x = Math.floor(rect.x - tolerance);\n                rect.y = Math.floor(rect.y - tolerance);\n                rect.width = Math.ceil(rect.width + 1 + tolerance * 2);\n                rect.height = Math.ceil(rect.height + 1 + tolerance * 2);\n            }\n        }\n        return rect;\n    };\n    Displayable.prototype.setPrevPaintRect = function (paintRect) {\n        if (paintRect) {\n            this._prevPaintRect = this._prevPaintRect || new BoundingRect(0, 0, 0, 0);\n            this._prevPaintRect.copy(paintRect);\n        }\n        else {\n            this._prevPaintRect = null;\n        }\n    };\n    Displayable.prototype.getPrevPaintRect = function () {\n        return this._prevPaintRect;\n    };\n    Displayable.prototype.animateStyle = function (loop) {\n        return this.animate('style', loop);\n    };\n    Displayable.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Displayable.prototype.attrKV = function (key, value) {\n        if (key !== 'style') {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n        else {\n            if (!this.style) {\n                this.useStyle(value);\n            }\n            else {\n                this.setStyle(value);\n            }\n        }\n    };\n    Displayable.prototype.setStyle = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.style[keyOrObj] = value;\n        }\n        else {\n            extend(this.style, keyOrObj);\n        }\n        this.dirtyStyle();\n        return this;\n    };\n    Displayable.prototype.dirtyStyle = function (notRedraw) {\n        if (!notRedraw) {\n            this.markRedraw();\n        }\n        this.__dirty |= STYLE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n    };\n    Displayable.prototype.dirty = function () {\n        this.dirtyStyle();\n    };\n    Displayable.prototype.styleChanged = function () {\n        return !!(this.__dirty & STYLE_CHANGED_BIT);\n    };\n    Displayable.prototype.styleUpdated = function () {\n        this.__dirty &= ~STYLE_CHANGED_BIT;\n    };\n    Displayable.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_COMMON_STYLE, obj);\n    };\n    Displayable.prototype.useStyle = function (obj) {\n        if (!obj[STYLE_MAGIC_KEY]) {\n            obj = this.createStyle(obj);\n        }\n        if (this.__inHover) {\n            this.__hoverStyle = obj;\n        }\n        else {\n            this.style = obj;\n        }\n        this.dirtyStyle();\n    };\n    Displayable.prototype.isStyleObject = function (obj) {\n        return obj[STYLE_MAGIC_KEY];\n    };\n    Displayable.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.style && !normalState.style) {\n            normalState.style = this._mergeStyle(this.createStyle(), this.style);\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetStyle;\n        if (state && state.style) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetStyle = state.style;\n                }\n                else {\n                    targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\n                    this._mergeStyle(targetStyle, state.style);\n                }\n            }\n            else {\n                targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\n                this._mergeStyle(targetStyle, state.style);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetStyle = normalState.style;\n        }\n        if (targetStyle) {\n            if (transition) {\n                var sourceStyle = this.style;\n                this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\n                if (needsRestoreToNormal) {\n                    var changedKeys = keys(sourceStyle);\n                    for (var i = 0; i < changedKeys.length; i++) {\n                        var key = changedKeys[i];\n                        if (key in targetStyle) {\n                            targetStyle[key] = targetStyle[key];\n                            this.style[key] = sourceStyle[key];\n                        }\n                    }\n                }\n                var targetKeys = keys(targetStyle);\n                for (var i = 0; i < targetKeys.length; i++) {\n                    var key = targetKeys[i];\n                    this.style[key] = this.style[key];\n                }\n                this._transitionState(stateName, {\n                    style: targetStyle\n                }, animationCfg, this.getAnimationStyleProps());\n            }\n            else {\n                this.useStyle(targetStyle);\n            }\n        }\n        var statesKeys = this.__inHover ? PRIMARY_STATES_KEYS_IN_HOVER_LAYER : PRIMARY_STATES_KEYS;\n        for (var i = 0; i < statesKeys.length; i++) {\n            var key = statesKeys[i];\n            if (state && state[key] != null) {\n                this[key] = state[key];\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    this[key] = normalState[key];\n                }\n            }\n        }\n    };\n    Displayable.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedStyle;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.style) {\n                mergedStyle = mergedStyle || {};\n                this._mergeStyle(mergedStyle, state.style);\n            }\n        }\n        if (mergedStyle) {\n            mergedState.style = mergedStyle;\n        }\n        return mergedState;\n    };\n    Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        extend(targetStyle, sourceStyle);\n        return targetStyle;\n    };\n    Displayable.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_COMMON_ANIMATION_PROPS;\n    };\n    Displayable.initDefaultProps = (function () {\n        var dispProto = Displayable.prototype;\n        dispProto.type = 'displayable';\n        dispProto.invisible = false;\n        dispProto.z = 0;\n        dispProto.z2 = 0;\n        dispProto.zlevel = 0;\n        dispProto.culling = false;\n        dispProto.cursor = 'pointer';\n        dispProto.rectHover = false;\n        dispProto.incremental = false;\n        dispProto._rect = null;\n        dispProto.dirtyRectTolerance = 0;\n        dispProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT;\n    })();\n    return Displayable;\n}(Element));\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\nfunction isDisplayableCulled(el, width, height) {\n    tmpRect.copy(el.getBoundingRect());\n    if (el.transform) {\n        tmpRect.applyTransform(el.transform);\n    }\n    viewRect.width = width;\n    viewRect.height = height;\n    return !tmpRect.intersect(viewRect);\n}\nexport default Displayable;\n","var Gradient = (function () {\n    function Gradient(colorStops) {\n        this.colorStops = colorStops || [];\n    }\n    Gradient.prototype.addColorStop = function (offset, color) {\n        this.colorStops.push({\n            offset: offset,\n            color: color\n        });\n    };\n    return Gradient;\n}());\nexport default Gradient;\n","import { __extends } from \"tslib\";\nimport * as zrUtil from '../core/util.js';\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar Group = (function (_super) {\n    __extends(Group, _super);\n    function Group(opts) {\n        var _this = _super.call(this) || this;\n        _this.isGroup = true;\n        _this._children = [];\n        _this.attr(opts);\n        return _this;\n    }\n    Group.prototype.childrenRef = function () {\n        return this._children;\n    };\n    Group.prototype.children = function () {\n        return this._children.slice();\n    };\n    Group.prototype.childAt = function (idx) {\n        return this._children[idx];\n    };\n    Group.prototype.childOfName = function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    };\n    Group.prototype.childCount = function () {\n        return this._children.length;\n    };\n    Group.prototype.add = function (child) {\n        if (child) {\n            if (child !== this && child.parent !== this) {\n                this._children.push(child);\n                this._doAdd(child);\n            }\n            if (process.env.NODE_ENV !== 'production') {\n                if (child.__hostTarget) {\n                    throw 'This elemenet has been used as an attachment';\n                }\n            }\n        }\n        return this;\n    };\n    Group.prototype.addBefore = function (child, nextSibling) {\n        if (child && child !== this && child.parent !== this\n            && nextSibling && nextSibling.parent === this) {\n            var children = this._children;\n            var idx = children.indexOf(nextSibling);\n            if (idx >= 0) {\n                children.splice(idx, 0, child);\n                this._doAdd(child);\n            }\n        }\n        return this;\n    };\n    Group.prototype.replace = function (oldChild, newChild) {\n        var idx = zrUtil.indexOf(this._children, oldChild);\n        if (idx >= 0) {\n            this.replaceAt(newChild, idx);\n        }\n        return this;\n    };\n    Group.prototype.replaceAt = function (child, index) {\n        var children = this._children;\n        var old = children[index];\n        if (child && child !== this && child.parent !== this && child !== old) {\n            children[index] = child;\n            old.parent = null;\n            var zr = this.__zr;\n            if (zr) {\n                old.removeSelfFromZr(zr);\n            }\n            this._doAdd(child);\n        }\n        return this;\n    };\n    Group.prototype._doAdd = function (child) {\n        if (child.parent) {\n            child.parent.remove(child);\n        }\n        child.parent = this;\n        var zr = this.__zr;\n        if (zr && zr !== child.__zr) {\n            child.addSelfToZr(zr);\n        }\n        zr && zr.refresh();\n    };\n    Group.prototype.remove = function (child) {\n        var zr = this.__zr;\n        var children = this._children;\n        var idx = zrUtil.indexOf(children, child);\n        if (idx < 0) {\n            return this;\n        }\n        children.splice(idx, 1);\n        child.parent = null;\n        if (zr) {\n            child.removeSelfFromZr(zr);\n        }\n        zr && zr.refresh();\n        return this;\n    };\n    Group.prototype.removeAll = function () {\n        var children = this._children;\n        var zr = this.__zr;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (zr) {\n                child.removeSelfFromZr(zr);\n            }\n            child.parent = null;\n        }\n        children.length = 0;\n        return this;\n    };\n    Group.prototype.eachChild = function (cb, context) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            cb.call(context, child, i);\n        }\n        return this;\n    };\n    Group.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            var stopped = cb.call(context, child);\n            if (child.isGroup && !stopped) {\n                child.traverse(cb, context);\n            }\n        }\n        return this;\n    };\n    Group.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.addSelfToZr(zr);\n        }\n    };\n    Group.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.removeSelfFromZr(zr);\n        }\n    };\n    Group.prototype.getBoundingRect = function (includeChildren) {\n        var tmpRect = new BoundingRect(0, 0, 0, 0);\n        var children = includeChildren || this._children;\n        var tmpMat = [];\n        var rect = null;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (child.ignore || child.invisible) {\n                continue;\n            }\n            var childRect = child.getBoundingRect();\n            var transform = child.getLocalTransform(tmpMat);\n            if (transform) {\n                BoundingRect.applyTransform(tmpRect, childRect, transform);\n                rect = rect || tmpRect.clone();\n                rect.union(tmpRect);\n            }\n            else {\n                rect = rect || childRect.clone();\n                rect.union(childRect);\n            }\n        }\n        return rect || tmpRect;\n    };\n    return Group;\n}(Element));\nGroup.prototype.type = 'group';\nexport default Group;\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { defaults, createObject } from '../core/util.js';\nexport var DEFAULT_IMAGE_STYLE = defaults({\n    x: 0,\n    y: 0\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_IMAGE_ANIMATION_PROPS = {\n    style: defaults({\n        x: true,\n        y: true,\n        width: true,\n        height: true,\n        sx: true,\n        sy: true,\n        sWidth: true,\n        sHeight: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nfunction isImageLike(source) {\n    return !!(source\n        && typeof source !== 'string'\n        && source.width && source.height);\n}\nvar ZRImage = (function (_super) {\n    __extends(ZRImage, _super);\n    function ZRImage() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZRImage.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_IMAGE_STYLE, obj);\n    };\n    ZRImage.prototype._getSize = function (dim) {\n        var style = this.style;\n        var size = style[dim];\n        if (size != null) {\n            return size;\n        }\n        var imageSource = isImageLike(style.image)\n            ? style.image : this.__image;\n        if (!imageSource) {\n            return 0;\n        }\n        var otherDim = dim === 'width' ? 'height' : 'width';\n        var otherDimSize = style[otherDim];\n        if (otherDimSize == null) {\n            return imageSource[dim];\n        }\n        else {\n            return imageSource[dim] / imageSource[otherDim] * otherDimSize;\n        }\n    };\n    ZRImage.prototype.getWidth = function () {\n        return this._getSize('width');\n    };\n    ZRImage.prototype.getHeight = function () {\n        return this._getSize('height');\n    };\n    ZRImage.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_IMAGE_ANIMATION_PROPS;\n    };\n    ZRImage.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            this._rect = new BoundingRect(style.x || 0, style.y || 0, this.getWidth(), this.getHeight());\n        }\n        return this._rect;\n    };\n    return ZRImage;\n}(Displayable));\nZRImage.prototype.type = 'image';\nexport default ZRImage;\n","import { __extends } from \"tslib\";\nimport Displayble from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar m = [];\nvar IncrementalDisplayable = (function (_super) {\n    __extends(IncrementalDisplayable, _super);\n    function IncrementalDisplayable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.notClear = true;\n        _this.incremental = true;\n        _this._displayables = [];\n        _this._temporaryDisplayables = [];\n        _this._cursor = 0;\n        return _this;\n    }\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    IncrementalDisplayable.prototype.useStyle = function () {\n        this.style = {};\n    };\n    IncrementalDisplayable.prototype.getCursor = function () {\n        return this._cursor;\n    };\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\n        this._cursor = this._displayables.length;\n    };\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\n        this._displayables = [];\n        this._temporaryDisplayables = [];\n        this._cursor = 0;\n        this.markRedraw();\n        this.notClear = false;\n    };\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\n        this._temporaryDisplayables = [];\n    };\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\n        if (notPersistent) {\n            this._temporaryDisplayables.push(displayable);\n        }\n        else {\n            this._displayables.push(displayable);\n        }\n        this.markRedraw();\n    };\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\n        notPersistent = notPersistent || false;\n        for (var i = 0; i < displayables.length; i++) {\n            this.addDisplayable(displayables[i], notPersistent);\n        }\n    };\n    IncrementalDisplayable.prototype.getDisplayables = function () {\n        return this._displayables;\n    };\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\n        return this._temporaryDisplayables;\n    };\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            cb && cb(this._displayables[i]);\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            cb && cb(this._temporaryDisplayables[i]);\n        }\n    };\n    IncrementalDisplayable.prototype.update = function () {\n        this.updateTransform();\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            var displayable = this._displayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            var displayable = this._temporaryDisplayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n    };\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\n        if (!this._rect) {\n            var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                var childRect = displayable.getBoundingRect().clone();\n                if (displayable.needLocalTransform()) {\n                    childRect.applyTransform(displayable.getLocalTransform(m));\n                }\n                rect.union(childRect);\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    IncrementalDisplayable.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        if (rect.contain(localPos[0], localPos[1])) {\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                if (displayable.contain(x, y)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    return IncrementalDisplayable;\n}(Displayble));\nexport default IncrementalDisplayable;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar LinearGradient = (function (_super) {\n    __extends(LinearGradient, _super);\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        _this.x2 = x2 == null ? 1 : x2;\n        _this.y2 = y2 == null ? 0 : y2;\n        _this.type = 'linear';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return LinearGradient;\n}(Gradient));\nexport default LinearGradient;\n;\n","import * as curve from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l)) {\n        return false;\n    }\n    var d = curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n    return d <= _l / 2;\n}\n","import { normalizeRadian } from './util.js';\nvar PI2 = Math.PI * 2;\nexport function containStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n    if ((d - _l > r) || (d + _l < r)) {\n        return false;\n    }\n    if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n        return true;\n    }\n    if (anticlockwise) {\n        var tmp = startAngle;\n        startAngle = normalizeRadian(endAngle);\n        endAngle = normalizeRadian(tmp);\n    }\n    else {\n        startAngle = normalizeRadian(startAngle);\n        endAngle = normalizeRadian(endAngle);\n    }\n    if (startAngle > endAngle) {\n        endAngle += PI2;\n    }\n    var angle = Math.atan2(y, x);\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return (angle >= startAngle && angle <= endAngle)\n        || (angle + PI2 >= startAngle && angle + PI2 <= endAngle);\n}\n","import PathProxy from '../core/PathProxy.js';\nimport * as line from './line.js';\nimport * as cubic from './cubic.js';\nimport * as quadratic from './quadratic.js';\nimport * as arc from './arc.js';\nimport * as curve from '../core/curve.js';\nimport windingLine from './windingLine.js';\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar EPSILON = 1e-4;\nfunction isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\nvar roots = [-1, -1, -1];\nvar extrema = [-1, -1];\nfunction swapExtrema() {\n    var tmp = extrema[0];\n    extrema[0] = extrema[1];\n    extrema[1] = tmp;\n}\nfunction windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n    if ((y > y0 && y > y1 && y > y2 && y > y3)\n        || (y < y0 && y < y1 && y < y2 && y < y3)) {\n        return 0;\n    }\n    var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var w = 0;\n        var nExtrema = -1;\n        var y0_ = void 0;\n        var y1_ = void 0;\n        for (var i = 0; i < nRoots; i++) {\n            var t = roots[i];\n            var unit = (t === 0 || t === 1) ? 0.5 : 1;\n            var x_ = curve.cubicAt(x0, x1, x2, x3, t);\n            if (x_ < x) {\n                continue;\n            }\n            if (nExtrema < 0) {\n                nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);\n                if (extrema[1] < extrema[0] && nExtrema > 1) {\n                    swapExtrema();\n                }\n                y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);\n                if (nExtrema > 1) {\n                    y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);\n                }\n            }\n            if (nExtrema === 2) {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else if (t < extrema[1]) {\n                    w += y1_ < y0_ ? unit : -unit;\n                }\n                else {\n                    w += y3 < y1_ ? unit : -unit;\n                }\n            }\n            else {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y3 < y0_ ? unit : -unit;\n                }\n            }\n        }\n        return w;\n    }\n}\nfunction windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n    if ((y > y0 && y > y1 && y > y2)\n        || (y < y0 && y < y1 && y < y2)) {\n        return 0;\n    }\n    var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var t = curve.quadraticExtremum(y0, y1, y2);\n        if (t >= 0 && t <= 1) {\n            var w = 0;\n            var y_ = curve.quadraticAt(y0, y1, y2, t);\n            for (var i = 0; i < nRoots; i++) {\n                var unit = (roots[i] === 0 || roots[i] === 1) ? 0.5 : 1;\n                var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);\n                if (x_ < x) {\n                    continue;\n                }\n                if (roots[i] < t) {\n                    w += y_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y2 < y_ ? unit : -unit;\n                }\n            }\n            return w;\n        }\n        else {\n            var unit = (roots[0] === 0 || roots[0] === 1) ? 0.5 : 1;\n            var x_ = curve.quadraticAt(x0, x1, x2, roots[0]);\n            if (x_ < x) {\n                return 0;\n            }\n            return y2 < y0 ? unit : -unit;\n        }\n    }\n}\nfunction windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n    y -= cy;\n    if (y > r || y < -r) {\n        return 0;\n    }\n    var tmp = Math.sqrt(r * r - y * y);\n    roots[0] = -tmp;\n    roots[1] = tmp;\n    var dTheta = Math.abs(startAngle - endAngle);\n    if (dTheta < 1e-4) {\n        return 0;\n    }\n    if (dTheta >= PI2 - 1e-4) {\n        startAngle = 0;\n        endAngle = PI2;\n        var dir = anticlockwise ? 1 : -1;\n        if (x >= roots[0] + cx && x <= roots[1] + cx) {\n            return dir;\n        }\n        else {\n            return 0;\n        }\n    }\n    if (startAngle > endAngle) {\n        var tmp_1 = startAngle;\n        startAngle = endAngle;\n        endAngle = tmp_1;\n    }\n    if (startAngle < 0) {\n        startAngle += PI2;\n        endAngle += PI2;\n    }\n    var w = 0;\n    for (var i = 0; i < 2; i++) {\n        var x_ = roots[i];\n        if (x_ + cx > x) {\n            var angle = Math.atan2(y, x_);\n            var dir = anticlockwise ? 1 : -1;\n            if (angle < 0) {\n                angle = PI2 + angle;\n            }\n            if ((angle >= startAngle && angle <= endAngle)\n                || (angle + PI2 >= startAngle && angle + PI2 <= endAngle)) {\n                if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n                    dir = -dir;\n                }\n                w += dir;\n            }\n        }\n    }\n    return w;\n}\nfunction containPath(path, lineWidth, isStroke, x, y) {\n    var data = path.data;\n    var len = path.len();\n    var w = 0;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (cmd === CMD.M && i > 1) {\n            if (!isStroke) {\n                w += windingLine(xi, yi, x0, y0, x, y);\n            }\n        }\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n        }\n        switch (cmd) {\n            case CMD.M:\n                x0 = data[i++];\n                y0 = data[i++];\n                xi = x0;\n                yi = y0;\n                break;\n            case CMD.L:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.C:\n                if (isStroke) {\n                    if (cubic.containStroke(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.Q:\n                if (isStroke) {\n                    if (quadratic.containStroke(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var theta = data[i++];\n                var dTheta = data[i++];\n                i += 1;\n                var anticlockwise = !!(1 - data[i++]);\n                x1 = Math.cos(theta) * rx + cx;\n                y1 = Math.sin(theta) * ry + cy;\n                if (!isFirst) {\n                    w += windingLine(xi, yi, x1, y1, x, y);\n                }\n                else {\n                    x0 = x1;\n                    y0 = y1;\n                }\n                var _x = (x - cx) * ry / rx + cx;\n                if (isStroke) {\n                    if (arc.containStroke(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n                }\n                xi = Math.cos(theta + dTheta) * rx + cx;\n                yi = Math.sin(theta + dTheta) * ry + cy;\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                var width = data[i++];\n                var height = data[i++];\n                x1 = x0 + width;\n                y1 = y0 + height;\n                if (isStroke) {\n                    if (line.containStroke(x0, y0, x1, y0, lineWidth, x, y)\n                        || line.containStroke(x1, y0, x1, y1, lineWidth, x, y)\n                        || line.containStroke(x1, y1, x0, y1, lineWidth, x, y)\n                        || line.containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(x1, y0, x1, y1, x, y);\n                    w += windingLine(x0, y1, x0, y0, x, y);\n                }\n                break;\n            case CMD.Z:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, x0, y0, x, y);\n                }\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (!isStroke && !isAroundEqual(yi, y0)) {\n        w += windingLine(xi, yi, x0, y0, x, y) || 0;\n    }\n    return w !== 0;\n}\nexport function contain(pathProxy, x, y) {\n    return containPath(pathProxy, 0, false, x, y);\n}\nexport function containStroke(pathProxy, lineWidth, x, y) {\n    return containPath(pathProxy, lineWidth, true, x, y);\n}\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport * as pathContain from '../contain/path.js';\nimport { defaults, keys, extend, clone, isString, createObject } from '../core/util.js';\nimport { lum } from '../tool/color.js';\nimport { DARK_LABEL_COLOR, LIGHT_LABEL_COLOR, DARK_MODE_THRESHOLD, LIGHTER_LABEL_COLOR } from '../config.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT, STYLE_CHANGED_BIT } from './constants.js';\nimport { TRANSFORMABLE_PROPS } from '../core/Transformable.js';\nexport var DEFAULT_PATH_STYLE = defaults({\n    fill: '#000',\n    stroke: null,\n    strokePercent: 1,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    lineDashOffset: 0,\n    lineWidth: 1,\n    lineCap: 'butt',\n    miterLimit: 10,\n    strokeNoScale: false,\n    strokeFirst: false\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_PATH_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        strokePercent: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineDashOffset: true,\n        lineWidth: true,\n        miterLimit: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar pathCopyParams = TRANSFORMABLE_PROPS.concat(['invisible',\n    'culling', 'z', 'z2', 'zlevel', 'parent'\n]);\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Path.prototype.update = function () {\n        var _this = this;\n        _super.prototype.update.call(this);\n        var style = this.style;\n        if (style.decal) {\n            var decalEl = this._decalEl = this._decalEl || new Path();\n            if (decalEl.buildPath === Path.prototype.buildPath) {\n                decalEl.buildPath = function (ctx) {\n                    _this.buildPath(ctx, _this.shape);\n                };\n            }\n            decalEl.silent = true;\n            var decalElStyle = decalEl.style;\n            for (var key in style) {\n                if (decalElStyle[key] !== style[key]) {\n                    decalElStyle[key] = style[key];\n                }\n            }\n            decalElStyle.fill = style.fill ? style.decal : null;\n            decalElStyle.decal = null;\n            decalElStyle.shadowColor = null;\n            style.strokeFirst && (decalElStyle.stroke = null);\n            for (var i = 0; i < pathCopyParams.length; ++i) {\n                decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];\n            }\n            decalEl.__dirty |= REDRAW_BIT;\n        }\n        else if (this._decalEl) {\n            this._decalEl = null;\n        }\n    };\n    Path.prototype.getDecalElement = function () {\n        return this._decalEl;\n    };\n    Path.prototype._init = function (props) {\n        var keysArr = keys(props);\n        this.shape = this.getDefaultShape();\n        var defaultStyle = this.getDefaultStyle();\n        if (defaultStyle) {\n            this.useStyle(defaultStyle);\n        }\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            var value = props[key];\n            if (key === 'style') {\n                if (!this.style) {\n                    this.useStyle(value);\n                }\n                else {\n                    extend(this.style, value);\n                }\n            }\n            else if (key === 'shape') {\n                extend(this.shape, value);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, value);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Path.prototype.getDefaultStyle = function () {\n        return null;\n    };\n    Path.prototype.getDefaultShape = function () {\n        return {};\n    };\n    Path.prototype.canBeInsideText = function () {\n        return this.hasFill();\n    };\n    Path.prototype.getInsideTextFill = function () {\n        var pathFill = this.style.fill;\n        if (pathFill !== 'none') {\n            if (isString(pathFill)) {\n                var fillLum = lum(pathFill, 0);\n                if (fillLum > 0.5) {\n                    return DARK_LABEL_COLOR;\n                }\n                else if (fillLum > 0.2) {\n                    return LIGHTER_LABEL_COLOR;\n                }\n                return LIGHT_LABEL_COLOR;\n            }\n            else if (pathFill) {\n                return LIGHT_LABEL_COLOR;\n            }\n        }\n        return DARK_LABEL_COLOR;\n    };\n    Path.prototype.getInsideTextStroke = function (textFill) {\n        var pathFill = this.style.fill;\n        if (isString(pathFill)) {\n            var zr = this.__zr;\n            var isDarkMode = !!(zr && zr.isDarkMode());\n            var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\n            if (isDarkMode === isDarkLabel) {\n                return pathFill;\n            }\n        }\n    };\n    Path.prototype.buildPath = function (ctx, shapeCfg, inBatch) { };\n    Path.prototype.pathUpdated = function () {\n        this.__dirty &= ~SHAPE_CHANGED_BIT;\n    };\n    Path.prototype.getUpdatedPathProxy = function (inBatch) {\n        !this.path && this.createPathProxy();\n        this.path.beginPath();\n        this.buildPath(this.path, this.shape, inBatch);\n        return this.path;\n    };\n    Path.prototype.createPathProxy = function () {\n        this.path = new PathProxy(false);\n    };\n    Path.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n    };\n    Path.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    Path.prototype.getBoundingRect = function () {\n        var rect = this._rect;\n        var style = this.style;\n        var needsUpdateRect = !rect;\n        if (needsUpdateRect) {\n            var firstInvoke = false;\n            if (!this.path) {\n                firstInvoke = true;\n                this.createPathProxy();\n            }\n            var path = this.path;\n            if (firstInvoke || (this.__dirty & SHAPE_CHANGED_BIT)) {\n                path.beginPath();\n                this.buildPath(path, this.shape, false);\n                this.pathUpdated();\n            }\n            rect = path.getBoundingRect();\n        }\n        this._rect = rect;\n        if (this.hasStroke() && this.path && this.path.len() > 0) {\n            var rectStroke = this._rectStroke || (this._rectStroke = rect.clone());\n            if (this.__dirty || needsUpdateRect) {\n                rectStroke.copy(rect);\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                var w = style.lineWidth;\n                if (!this.hasFill()) {\n                    var strokeContainThreshold = this.strokeContainThreshold;\n                    w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\n                }\n                if (lineScale > 1e-10) {\n                    rectStroke.width += w / lineScale;\n                    rectStroke.height += w / lineScale;\n                    rectStroke.x -= w / lineScale / 2;\n                    rectStroke.y -= w / lineScale / 2;\n                }\n            }\n            return rectStroke;\n        }\n        return rect;\n    };\n    Path.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        var style = this.style;\n        x = localPos[0];\n        y = localPos[1];\n        if (rect.contain(x, y)) {\n            var pathProxy = this.path;\n            if (this.hasStroke()) {\n                var lineWidth = style.lineWidth;\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                if (lineScale > 1e-10) {\n                    if (!this.hasFill()) {\n                        lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n                    }\n                    if (pathContain.containStroke(pathProxy, lineWidth / lineScale, x, y)) {\n                        return true;\n                    }\n                }\n            }\n            if (this.hasFill()) {\n                return pathContain.contain(pathProxy, x, y);\n            }\n        }\n        return false;\n    };\n    Path.prototype.dirtyShape = function () {\n        this.__dirty |= SHAPE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n        if (this._decalEl) {\n            this._decalEl.dirtyShape();\n        }\n        this.markRedraw();\n    };\n    Path.prototype.dirty = function () {\n        this.dirtyStyle();\n        this.dirtyShape();\n    };\n    Path.prototype.animateShape = function (loop) {\n        return this.animate('shape', loop);\n    };\n    Path.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else if (targetKey === 'shape') {\n            this.dirtyShape();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Path.prototype.attrKV = function (key, value) {\n        if (key === 'shape') {\n            this.setShape(value);\n        }\n        else {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n    };\n    Path.prototype.setShape = function (keyOrObj, value) {\n        var shape = this.shape;\n        if (!shape) {\n            shape = this.shape = {};\n        }\n        if (typeof keyOrObj === 'string') {\n            shape[keyOrObj] = value;\n        }\n        else {\n            extend(shape, keyOrObj);\n        }\n        this.dirtyShape();\n        return this;\n    };\n    Path.prototype.shapeChanged = function () {\n        return !!(this.__dirty & SHAPE_CHANGED_BIT);\n    };\n    Path.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_PATH_STYLE, obj);\n    };\n    Path.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.shape && !normalState.shape) {\n            normalState.shape = extend({}, this.shape);\n        }\n    };\n    Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetShape;\n        if (state && state.shape) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetShape = state.shape;\n                }\n                else {\n                    targetShape = extend({}, normalState.shape);\n                    extend(targetShape, state.shape);\n                }\n            }\n            else {\n                targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\n                extend(targetShape, state.shape);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetShape = normalState.shape;\n        }\n        if (targetShape) {\n            if (transition) {\n                this.shape = extend({}, this.shape);\n                var targetShapePrimaryProps = {};\n                var shapeKeys = keys(targetShape);\n                for (var i = 0; i < shapeKeys.length; i++) {\n                    var key = shapeKeys[i];\n                    if (typeof targetShape[key] === 'object') {\n                        this.shape[key] = targetShape[key];\n                    }\n                    else {\n                        targetShapePrimaryProps[key] = targetShape[key];\n                    }\n                }\n                this._transitionState(stateName, {\n                    shape: targetShapePrimaryProps\n                }, animationCfg);\n            }\n            else {\n                this.shape = targetShape;\n                this.dirtyShape();\n            }\n        }\n    };\n    Path.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedShape;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.shape) {\n                mergedShape = mergedShape || {};\n                this._mergeStyle(mergedShape, state.shape);\n            }\n        }\n        if (mergedShape) {\n            mergedState.shape = mergedShape;\n        }\n        return mergedState;\n    };\n    Path.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_PATH_ANIMATION_PROPS;\n    };\n    Path.prototype.isZeroArea = function () {\n        return false;\n    };\n    Path.extend = function (defaultProps) {\n        var Sub = (function (_super) {\n            __extends(Sub, _super);\n            function Sub(opts) {\n                var _this = _super.call(this, opts) || this;\n                defaultProps.init && defaultProps.init.call(_this, opts);\n                return _this;\n            }\n            Sub.prototype.getDefaultStyle = function () {\n                return clone(defaultProps.style);\n            };\n            Sub.prototype.getDefaultShape = function () {\n                return clone(defaultProps.shape);\n            };\n            return Sub;\n        }(Path));\n        for (var key in defaultProps) {\n            if (typeof defaultProps[key] === 'function') {\n                Sub.prototype[key] = defaultProps[key];\n            }\n        }\n        return Sub;\n    };\n    Path.initDefaultProps = (function () {\n        var pathProto = Path.prototype;\n        pathProto.type = 'path';\n        pathProto.strokeContainThreshold = 5;\n        pathProto.segmentIgnoreThreshold = 0;\n        pathProto.subPixelOptimize = false;\n        pathProto.autoBatch = false;\n        pathProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT | SHAPE_CHANGED_BIT;\n    })();\n    return Path;\n}(Displayable));\nexport default Path;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar RadialGradient = (function (_super) {\n    __extends(RadialGradient, _super);\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0.5 : x;\n        _this.y = y == null ? 0.5 : y;\n        _this.r = r == null ? 0.5 : r;\n        _this.type = 'radial';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return RadialGradient;\n}(Gradient));\nexport default RadialGradient;\n","import { __extends } from \"tslib\";\nimport Displayable from './Displayable.js';\nimport { getBoundingRect } from '../contain/text.js';\nimport { DEFAULT_PATH_STYLE } from './Path.js';\nimport { createObject, defaults } from '../core/util.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nexport var DEFAULT_TSPAN_STYLE = defaults({\n    strokeFirst: true,\n    font: DEFAULT_FONT,\n    x: 0,\n    y: 0,\n    textAlign: 'left',\n    textBaseline: 'top',\n    miterLimit: 2\n}, DEFAULT_PATH_STYLE);\nvar TSpan = (function (_super) {\n    __extends(TSpan, _super);\n    function TSpan() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TSpan.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return stroke != null && stroke !== 'none' && style.lineWidth > 0;\n    };\n    TSpan.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    TSpan.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_TSPAN_STYLE, obj);\n    };\n    TSpan.prototype.setBoundingRect = function (rect) {\n        this._rect = rect;\n    };\n    TSpan.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            var text = style.text;\n            text != null ? (text += '') : (text = '');\n            var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\n            rect.x += style.x || 0;\n            rect.y += style.y || 0;\n            if (this.hasStroke()) {\n                var w = style.lineWidth;\n                rect.x -= w / 2;\n                rect.y -= w / 2;\n                rect.width += w;\n                rect.height += w;\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    TSpan.initDefaultProps = (function () {\n        var tspanProto = TSpan.prototype;\n        tspanProto.dirtyRectTolerance = 10;\n    })();\n    return TSpan;\n}(Displayable));\nTSpan.prototype.type = 'tspan';\nexport default TSpan;\n","import * as imageHelper from '../helper/image.js';\nimport { extend, retrieve2, retrieve3, reduce } from '../../core/util.js';\nimport { getLineHeight, getWidth, parsePercent } from '../../contain/text.js';\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nexport function truncateText(text, containerWidth, font, ellipsis, options) {\n    if (!containerWidth) {\n        return '';\n    }\n    var textLines = (text + '').split('\\n');\n    options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\n    for (var i = 0, len = textLines.length; i < len; i++) {\n        textLines[i] = truncateSingleLine(textLines[i], options);\n    }\n    return textLines.join('\\n');\n}\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n    options = options || {};\n    var preparedOpts = extend({}, options);\n    preparedOpts.font = font;\n    ellipsis = retrieve2(ellipsis, '...');\n    preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\n    var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\n    preparedOpts.cnCharWidth = getWidth('', font);\n    var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\n    preparedOpts.placeholder = retrieve2(options.placeholder, '');\n    var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\n    for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n        contentWidth -= ascCharWidth;\n    }\n    var ellipsisWidth = getWidth(ellipsis, font);\n    if (ellipsisWidth > contentWidth) {\n        ellipsis = '';\n        ellipsisWidth = 0;\n    }\n    contentWidth = containerWidth - ellipsisWidth;\n    preparedOpts.ellipsis = ellipsis;\n    preparedOpts.ellipsisWidth = ellipsisWidth;\n    preparedOpts.contentWidth = contentWidth;\n    preparedOpts.containerWidth = containerWidth;\n    return preparedOpts;\n}\nfunction truncateSingleLine(textLine, options) {\n    var containerWidth = options.containerWidth;\n    var font = options.font;\n    var contentWidth = options.contentWidth;\n    if (!containerWidth) {\n        return '';\n    }\n    var lineWidth = getWidth(textLine, font);\n    if (lineWidth <= containerWidth) {\n        return textLine;\n    }\n    for (var j = 0;; j++) {\n        if (lineWidth <= contentWidth || j >= options.maxIterations) {\n            textLine += options.ellipsis;\n            break;\n        }\n        var subLength = j === 0\n            ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth)\n            : lineWidth > 0\n                ? Math.floor(textLine.length * contentWidth / lineWidth)\n                : 0;\n        textLine = textLine.substr(0, subLength);\n        lineWidth = getWidth(textLine, font);\n    }\n    if (textLine === '') {\n        textLine = options.placeholder;\n    }\n    return textLine;\n}\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n    var width = 0;\n    var i = 0;\n    for (var len = text.length; i < len && width < contentWidth; i++) {\n        var charCode = text.charCodeAt(i);\n        width += (0 <= charCode && charCode <= 127) ? ascCharWidth : cnCharWidth;\n    }\n    return i;\n}\nexport function parsePlainText(text, style) {\n    text != null && (text += '');\n    var overflow = style.overflow;\n    var padding = style.padding;\n    var font = style.font;\n    var truncate = overflow === 'truncate';\n    var calculatedLineHeight = getLineHeight(font);\n    var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\n    var bgColorDrawn = !!(style.backgroundColor);\n    var truncateLineOverflow = style.lineOverflow === 'truncate';\n    var width = style.width;\n    var lines;\n    if (width != null && (overflow === 'break' || overflow === 'breakAll')) {\n        lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\n    }\n    else {\n        lines = text ? text.split('\\n') : [];\n    }\n    var contentHeight = lines.length * lineHeight;\n    var height = retrieve2(style.height, contentHeight);\n    if (contentHeight > height && truncateLineOverflow) {\n        var lineCount = Math.floor(height / lineHeight);\n        lines = lines.slice(0, lineCount);\n    }\n    if (text && truncate && width != null) {\n        var options = prepareTruncateOptions(width, font, style.ellipsis, {\n            minChar: style.truncateMinChar,\n            placeholder: style.placeholder\n        });\n        for (var i = 0; i < lines.length; i++) {\n            lines[i] = truncateSingleLine(lines[i], options);\n        }\n    }\n    var outerHeight = height;\n    var contentWidth = 0;\n    for (var i = 0; i < lines.length; i++) {\n        contentWidth = Math.max(getWidth(lines[i], font), contentWidth);\n    }\n    if (width == null) {\n        width = contentWidth;\n    }\n    var outerWidth = contentWidth;\n    if (padding) {\n        outerHeight += padding[0] + padding[2];\n        outerWidth += padding[1] + padding[3];\n        width += padding[1] + padding[3];\n    }\n    if (bgColorDrawn) {\n        outerWidth = width;\n    }\n    return {\n        lines: lines,\n        height: height,\n        outerWidth: outerWidth,\n        outerHeight: outerHeight,\n        lineHeight: lineHeight,\n        calculatedLineHeight: calculatedLineHeight,\n        contentWidth: contentWidth,\n        contentHeight: contentHeight,\n        width: width\n    };\n}\nvar RichTextToken = (function () {\n    function RichTextToken() {\n    }\n    return RichTextToken;\n}());\nvar RichTextLine = (function () {\n    function RichTextLine(tokens) {\n        this.tokens = [];\n        if (tokens) {\n            this.tokens = tokens;\n        }\n    }\n    return RichTextLine;\n}());\nvar RichTextContentBlock = (function () {\n    function RichTextContentBlock() {\n        this.width = 0;\n        this.height = 0;\n        this.contentWidth = 0;\n        this.contentHeight = 0;\n        this.outerWidth = 0;\n        this.outerHeight = 0;\n        this.lines = [];\n    }\n    return RichTextContentBlock;\n}());\nexport { RichTextContentBlock };\nexport function parseRichText(text, style) {\n    var contentBlock = new RichTextContentBlock();\n    text != null && (text += '');\n    if (!text) {\n        return contentBlock;\n    }\n    var topWidth = style.width;\n    var topHeight = style.height;\n    var overflow = style.overflow;\n    var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null\n        ? { width: topWidth, accumWidth: 0, breakAll: overflow === 'breakAll' }\n        : null;\n    var lastIndex = STYLE_REG.lastIndex = 0;\n    var result;\n    while ((result = STYLE_REG.exec(text)) != null) {\n        var matchedIndex = result.index;\n        if (matchedIndex > lastIndex) {\n            pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\n        }\n        pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\n        lastIndex = STYLE_REG.lastIndex;\n    }\n    if (lastIndex < text.length) {\n        pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\n    }\n    var pendingList = [];\n    var calculatedHeight = 0;\n    var calculatedWidth = 0;\n    var stlPadding = style.padding;\n    var truncate = overflow === 'truncate';\n    var truncateLine = style.lineOverflow === 'truncate';\n    function finishLine(line, lineWidth, lineHeight) {\n        line.width = lineWidth;\n        line.lineHeight = lineHeight;\n        calculatedHeight += lineHeight;\n        calculatedWidth = Math.max(calculatedWidth, lineWidth);\n    }\n    outer: for (var i = 0; i < contentBlock.lines.length; i++) {\n        var line = contentBlock.lines[i];\n        var lineHeight = 0;\n        var lineWidth = 0;\n        for (var j = 0; j < line.tokens.length; j++) {\n            var token = line.tokens[j];\n            var tokenStyle = token.styleName && style.rich[token.styleName] || {};\n            var textPadding = token.textPadding = tokenStyle.padding;\n            var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\n            var font = token.font = tokenStyle.font || style.font;\n            token.contentHeight = getLineHeight(font);\n            var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\n            token.innerHeight = tokenHeight;\n            textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n            token.height = tokenHeight;\n            token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\n            token.align = tokenStyle && tokenStyle.align || style.align;\n            token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\n            if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\n                if (j > 0) {\n                    line.tokens = line.tokens.slice(0, j);\n                    finishLine(line, lineWidth, lineHeight);\n                    contentBlock.lines = contentBlock.lines.slice(0, i + 1);\n                }\n                else {\n                    contentBlock.lines = contentBlock.lines.slice(0, i);\n                }\n                break outer;\n            }\n            var styleTokenWidth = tokenStyle.width;\n            var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\n            if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\n                token.percentWidth = styleTokenWidth;\n                pendingList.push(token);\n                token.contentWidth = getWidth(token.text, font);\n            }\n            else {\n                if (tokenWidthNotSpecified) {\n                    var textBackgroundColor = tokenStyle.backgroundColor;\n                    var bgImg = textBackgroundColor && textBackgroundColor.image;\n                    if (bgImg) {\n                        bgImg = imageHelper.findExistImage(bgImg);\n                        if (imageHelper.isImageReady(bgImg)) {\n                            token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\n                        }\n                    }\n                }\n                var remainTruncWidth = truncate && topWidth != null\n                    ? topWidth - lineWidth : null;\n                if (remainTruncWidth != null && remainTruncWidth < token.width) {\n                    if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\n                        token.text = '';\n                        token.width = token.contentWidth = 0;\n                    }\n                    else {\n                        token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style.ellipsis, { minChar: style.truncateMinChar });\n                        token.width = token.contentWidth = getWidth(token.text, font);\n                    }\n                }\n                else {\n                    token.contentWidth = getWidth(token.text, font);\n                }\n            }\n            token.width += paddingH;\n            lineWidth += token.width;\n            tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n        }\n        finishLine(line, lineWidth, lineHeight);\n    }\n    contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\n    contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\n    contentBlock.contentHeight = calculatedHeight;\n    contentBlock.contentWidth = calculatedWidth;\n    if (stlPadding) {\n        contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n        contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n    }\n    for (var i = 0; i < pendingList.length; i++) {\n        var token = pendingList[i];\n        var percentWidth = token.percentWidth;\n        token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\n    }\n    return contentBlock;\n}\nfunction pushTokens(block, str, style, wrapInfo, styleName) {\n    var isEmptyStr = str === '';\n    var tokenStyle = styleName && style.rich[styleName] || {};\n    var lines = block.lines;\n    var font = tokenStyle.font || style.font;\n    var newLine = false;\n    var strLines;\n    var linesWidths;\n    if (wrapInfo) {\n        var tokenPadding = tokenStyle.padding;\n        var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\n        if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\n            var outerWidth_1 = parsePercent(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\n            if (lines.length > 0) {\n                if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\n                    strLines = str.split('\\n');\n                    newLine = true;\n                }\n            }\n            wrapInfo.accumWidth = outerWidth_1;\n        }\n        else {\n            var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\n            wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\n            linesWidths = res.linesWidths;\n            strLines = res.lines;\n        }\n    }\n    else {\n        strLines = str.split('\\n');\n    }\n    for (var i = 0; i < strLines.length; i++) {\n        var text = strLines[i];\n        var token = new RichTextToken();\n        token.styleName = styleName;\n        token.text = text;\n        token.isLineHolder = !text && !isEmptyStr;\n        if (typeof tokenStyle.width === 'number') {\n            token.width = tokenStyle.width;\n        }\n        else {\n            token.width = linesWidths\n                ? linesWidths[i]\n                : getWidth(text, font);\n        }\n        if (!i && !newLine) {\n            var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\n            var tokensLen = tokens.length;\n            (tokensLen === 1 && tokens[0].isLineHolder)\n                ? (tokens[0] = token)\n                : ((text || !tokensLen || isEmptyStr) && tokens.push(token));\n        }\n        else {\n            lines.push(new RichTextLine([token]));\n        }\n    }\n}\nfunction isAlphabeticLetter(ch) {\n    var code = ch.charCodeAt(0);\n    return code >= 0x20 && code <= 0x24F\n        || code >= 0x370 && code <= 0x10FF\n        || code >= 0x1200 && code <= 0x13FF\n        || code >= 0x1E00 && code <= 0x206F;\n}\nvar breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\n    obj[ch] = true;\n    return obj;\n}, {});\nfunction isWordBreakChar(ch) {\n    if (isAlphabeticLetter(ch)) {\n        if (breakCharMap[ch]) {\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\nfunction wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\n    var lines = [];\n    var linesWidths = [];\n    var line = '';\n    var currentWord = '';\n    var currentWordWidth = 0;\n    var accumWidth = 0;\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\n') {\n            if (currentWord) {\n                line += currentWord;\n                accumWidth += currentWordWidth;\n            }\n            lines.push(line);\n            linesWidths.push(accumWidth);\n            line = '';\n            currentWord = '';\n            currentWordWidth = 0;\n            accumWidth = 0;\n            continue;\n        }\n        var chWidth = getWidth(ch, font);\n        var inWord = isBreakAll ? false : !isWordBreakChar(ch);\n        if (!lines.length\n            ? lastAccumWidth + accumWidth + chWidth > lineWidth\n            : accumWidth + chWidth > lineWidth) {\n            if (!accumWidth) {\n                if (inWord) {\n                    lines.push(currentWord);\n                    linesWidths.push(currentWordWidth);\n                    currentWord = ch;\n                    currentWordWidth = chWidth;\n                }\n                else {\n                    lines.push(ch);\n                    linesWidths.push(chWidth);\n                }\n            }\n            else if (line || currentWord) {\n                if (inWord) {\n                    if (!line) {\n                        line = currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                        accumWidth = currentWordWidth;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth - currentWordWidth);\n                    currentWord += ch;\n                    currentWordWidth += chWidth;\n                    line = '';\n                    accumWidth = currentWordWidth;\n                }\n                else {\n                    if (currentWord) {\n                        line += currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth);\n                    line = ch;\n                    accumWidth = chWidth;\n                }\n            }\n            continue;\n        }\n        accumWidth += chWidth;\n        if (inWord) {\n            currentWord += ch;\n            currentWordWidth += chWidth;\n        }\n        else {\n            if (currentWord) {\n                line += currentWord;\n                currentWord = '';\n                currentWordWidth = 0;\n            }\n            line += ch;\n        }\n    }\n    if (!lines.length && !line) {\n        line = text;\n        currentWord = '';\n        currentWordWidth = 0;\n    }\n    if (currentWord) {\n        line += currentWord;\n    }\n    if (line) {\n        lines.push(line);\n        linesWidths.push(accumWidth);\n    }\n    if (lines.length === 1) {\n        accumWidth += lastAccumWidth;\n    }\n    return {\n        accumWidth: accumWidth,\n        lines: lines,\n        linesWidths: linesWidths\n    };\n}\n","import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText } from './helper/parseText.js';\nimport TSpan from './TSpan.js';\nimport { retrieve2, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util.js';\nimport { adjustTextX, adjustTextY } from '../contain/text.js';\nimport ZRImage from './Image.js';\nimport Rect from './shape/Rect.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../core/platform.js';\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    __extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n    };\n    ZRText.prototype.updateTransform = function () {\n        var innerTransformable = this.innerTransformable;\n        if (innerTransformable) {\n            innerTransformable.updateTransform();\n            if (innerTransformable.transform) {\n                this.transform = innerTransformable.transform;\n            }\n        }\n        else {\n            _super.prototype.updateTransform.call(this);\n        }\n    };\n    ZRText.prototype.getLocalTransform = function (m) {\n        var innerTransformable = this.innerTransformable;\n        return innerTransformable\n            ? innerTransformable.getLocalTransform(m)\n            : _super.prototype.getLocalTransform.call(this, m);\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        if (process.env.NODE_ENV !== 'production') {\n            throw new Error('Can\\'t attach text on another text');\n        }\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || DEFAULT_FONT;\n        var textPadding = style.padding;\n        var text = getStyleText(style);\n        var contentBlock = parsePlainText(text, style);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var outerWidth = contentBlock.outerWidth;\n        var contentWidth = contentBlock.contentWidth;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        var defaultStyle = this._defaultStyle;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        var textX = baseX;\n        var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        var fixedBoundingRect = style.width != null\n            && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n        var calculatedLineHeight = contentBlock.calculatedLineHeight;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            subElStyle.stroke = textStroke;\n            subElStyle.fill = textFill;\n            if (textStroke) {\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            subElStyle.font = textFont;\n            setSeparateFont(subElStyle, style);\n            textY += lineHeight;\n            if (fixedBoundingRect) {\n                el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n            }\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var text = getStyleText(style);\n        var contentBlock = parseRichText(text, style);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || DEFAULT_FONT;\n        subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n        setSeparateFont(subElStyle, tokenStyle);\n        if (textStroke) {\n            subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        var textWidth = token.contentWidth;\n        var textHeight = token.contentHeight;\n        el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isImageBg = textBackgroundColor && textBackgroundColor.image;\n        var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainOrGradientBg || style.lineHeight || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainOrGradientBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n        }\n        else if (isImageBg) {\n            imgEl = this._getOrCreateChild(ZRImage);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (hasSeparateFont(style)) {\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                parseFontSize(style.fontSize),\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\nexport function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string'\n        && (fontSize.indexOf('px') !== -1\n            || fontSize.indexOf('rem') !== -1\n            || fontSize.indexOf('em') !== -1)) {\n        return fontSize;\n    }\n    else if (!isNaN(+fontSize)) {\n        return fontSize + 'px';\n    }\n    else {\n        return DEFAULT_FONT_SIZE + 'px';\n    }\n}\nfunction setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n        var fontProp = FONT_PARTS[i];\n        var val = sourceStyle[fontProp];\n        if (val != null) {\n            targetStyle[fontProp] = val;\n        }\n    }\n}\nexport function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\nexport function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n}\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || style.lineHeight\n        || (style.borderWidth && style.borderColor));\n}\nexport default ZRText;\n","export var REDRAW_BIT = 1;\nexport var STYLE_CHANGED_BIT = 2;\nexport var SHAPE_CHANGED_BIT = 4;\n","import LRU from '../../core/LRU.js';\nimport { platformApi } from '../../core/platform.js';\nvar globalImageCache = new LRU(50);\nexport function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        return cachedImgObj && cachedImgObj.image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nexport function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n        return image;\n    }\n    else if (typeof newImageOrSrc === 'string') {\n        if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\n            return image;\n        }\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        var pendingWrap = { hostEl: hostEl, cb: onload, cbPayload: cbPayload };\n        if (cachedImgObj) {\n            image = cachedImgObj.image;\n            !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n        }\n        else {\n            image = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n            image.__zrImageSrc = newImageOrSrc;\n            globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n                image: image,\n                pending: [pendingWrap]\n            });\n        }\n        return image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nfunction imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n        var pendingWrap = cachedImgObj.pending[i];\n        var cb = pendingWrap.cb;\n        cb && cb(this, pendingWrap.cbPayload);\n        pendingWrap.hostEl.dirty();\n    }\n    cachedImgObj.pending.length = 0;\n}\nexport function isImageReady(image) {\n    return image && image.width && image.height;\n}\n","import smoothBezier from './smoothBezier.js';\nexport function buildPath(ctx, shape, closePath) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n    if (points && points.length >= 2) {\n        if (smooth) {\n            var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n            ctx.moveTo(points[0][0], points[0][1]);\n            var len = points.length;\n            for (var i = 0; i < (closePath ? len : len - 1); i++) {\n                var cp1 = controlPoints[i * 2];\n                var cp2 = controlPoints[i * 2 + 1];\n                var p = points[(i + 1) % len];\n                ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n            }\n        }\n        else {\n            ctx.moveTo(points[0][0], points[0][1]);\n            for (var i = 1, l = points.length; i < l; i++) {\n                ctx.lineTo(points[i][0], points[i][1]);\n            }\n        }\n        closePath && ctx.closePath();\n    }\n}\n","import { min as v2Min, max as v2Max, scale as v2Scale, distance as v2Distance, add as v2Add, clone as v2Clone, sub as v2Sub } from '../../core/vector.js';\nexport default function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min;\n    var max;\n    if (constraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, len = points.length; i < len; i++) {\n            v2Min(min, min, points[i]);\n            v2Max(max, max, points[i]);\n        }\n        v2Min(min, min, constraint[0]);\n        v2Max(max, max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(v2Clone(points[i]));\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        v2Sub(v, nextPoint, prevPoint);\n        v2Scale(v, v, smooth);\n        var d0 = v2Distance(point, prevPoint);\n        var d1 = v2Distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        v2Scale(v1, v, -d0);\n        v2Scale(v2, v, d1);\n        var cp0 = v2Add([], point, v1);\n        var cp1 = v2Add([], point, v2);\n        if (constraint) {\n            v2Max(cp0, cp0, min);\n            v2Min(cp0, cp0, max);\n            v2Max(cp1, cp1, min);\n            v2Min(cp1, cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n","var round = Math.round;\nexport function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    if (round(x1 * 2) === round(x2 * 2)) {\n        outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n    if (round(y1 * 2) === round(y2 * 2)) {\n        outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n    return outputShape;\n}\nexport function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n}\nexport function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n        return position;\n    }\n    var doubledPosition = round(position * 2);\n    return (doubledPosition + round(lineWidth)) % 2 === 0\n        ? doubledPosition / 2\n        : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar ArcShape = (function () {\n    function ArcShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n    }\n    return ArcShape;\n}());\nexport { ArcShape };\nvar Arc = (function (_super) {\n    __extends(Arc, _super);\n    function Arc(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Arc.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Arc.prototype.getDefaultShape = function () {\n        return new ArcShape();\n    };\n    Arc.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var r = Math.max(shape.r, 0);\n        var startAngle = shape.startAngle;\n        var endAngle = shape.endAngle;\n        var clockwise = shape.clockwise;\n        var unitX = Math.cos(startAngle);\n        var unitY = Math.sin(startAngle);\n        ctx.moveTo(unitX * r + x, unitY * r + y);\n        ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    };\n    return Arc;\n}(Path));\nArc.prototype.type = 'arc';\nexport default Arc;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as vec2 from '../../core/vector.js';\nimport { quadraticSubdivide, cubicSubdivide, quadraticAt, cubicAt, quadraticDerivativeAt, cubicDerivativeAt } from '../../core/curve.js';\nvar out = [];\nvar BezierCurveShape = (function () {\n    function BezierCurveShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.cpx1 = 0;\n        this.cpy1 = 0;\n        this.percent = 1;\n    }\n    return BezierCurveShape;\n}());\nexport { BezierCurveShape };\nfunction someVectorAt(shape, t, isTangent) {\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    if (cpx2 != null || cpy2 != null) {\n        return [\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\n        ];\n    }\n    else {\n        return [\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\n        ];\n    }\n}\nvar BezierCurve = (function (_super) {\n    __extends(BezierCurve, _super);\n    function BezierCurve(opts) {\n        return _super.call(this, opts) || this;\n    }\n    BezierCurve.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    BezierCurve.prototype.getDefaultShape = function () {\n        return new BezierCurveShape();\n    };\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\n        var x1 = shape.x1;\n        var y1 = shape.y1;\n        var x2 = shape.x2;\n        var y2 = shape.y2;\n        var cpx1 = shape.cpx1;\n        var cpy1 = shape.cpy1;\n        var cpx2 = shape.cpx2;\n        var cpy2 = shape.cpy2;\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (cpx2 == null || cpy2 == null) {\n            if (percent < 1) {\n                quadraticSubdivide(x1, cpx1, x2, percent, out);\n                cpx1 = out[1];\n                x2 = out[2];\n                quadraticSubdivide(y1, cpy1, y2, percent, out);\n                cpy1 = out[1];\n                y2 = out[2];\n            }\n            ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n        }\n        else {\n            if (percent < 1) {\n                cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n                cpx1 = out[1];\n                cpx2 = out[2];\n                x2 = out[3];\n                cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n                cpy1 = out[1];\n                cpy2 = out[2];\n                y2 = out[3];\n            }\n            ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n        }\n    };\n    BezierCurve.prototype.pointAt = function (t) {\n        return someVectorAt(this.shape, t, false);\n    };\n    BezierCurve.prototype.tangentAt = function (t) {\n        var p = someVectorAt(this.shape, t, true);\n        return vec2.normalize(p, p);\n    };\n    return BezierCurve;\n}(Path));\n;\nBezierCurve.prototype.type = 'bezier-curve';\nexport default BezierCurve;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar CircleShape = (function () {\n    function CircleShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n    }\n    return CircleShape;\n}());\nexport { CircleShape };\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Circle.prototype.getDefaultShape = function () {\n        return new CircleShape();\n    };\n    Circle.prototype.buildPath = function (ctx, shape) {\n        ctx.moveTo(shape.cx + shape.r, shape.cy);\n        ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\n    };\n    return Circle;\n}(Path));\n;\nCircle.prototype.type = 'circle';\nexport default Circle;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar EllipseShape = (function () {\n    function EllipseShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.rx = 0;\n        this.ry = 0;\n    }\n    return EllipseShape;\n}());\nexport { EllipseShape };\nvar Ellipse = (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ellipse.prototype.getDefaultShape = function () {\n        return new EllipseShape();\n    };\n    Ellipse.prototype.buildPath = function (ctx, shape) {\n        var k = 0.5522848;\n        var x = shape.cx;\n        var y = shape.cy;\n        var a = shape.rx;\n        var b = shape.ry;\n        var ox = a * k;\n        var oy = b * k;\n        ctx.moveTo(x - a, y);\n        ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n        ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n        ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n        ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n        ctx.closePath();\n    };\n    return Ellipse;\n}(Path));\nEllipse.prototype.type = 'ellipse';\nexport default Ellipse;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport { subPixelOptimizeLine } from '../helper/subPixelOptimize.js';\nvar subPixelOptimizeOutputShape = {};\nvar LineShape = (function () {\n    function LineShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.percent = 1;\n    }\n    return LineShape;\n}());\nexport { LineShape };\nvar Line = (function (_super) {\n    __extends(Line, _super);\n    function Line(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Line.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Line.prototype.getDefaultShape = function () {\n        return new LineShape();\n    };\n    Line.prototype.buildPath = function (ctx, shape) {\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\n            x1 = optimizedShape.x1;\n            y1 = optimizedShape.y1;\n            x2 = optimizedShape.x2;\n            y2 = optimizedShape.y2;\n        }\n        else {\n            x1 = shape.x1;\n            y1 = shape.y1;\n            x2 = shape.x2;\n            y2 = shape.y2;\n        }\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (percent < 1) {\n            x2 = x1 * (1 - percent) + x2 * percent;\n            y2 = y1 * (1 - percent) + y2 * percent;\n        }\n        ctx.lineTo(x2, y2);\n    };\n    Line.prototype.pointAt = function (p) {\n        var shape = this.shape;\n        return [\n            shape.x1 * (1 - p) + shape.x2 * p,\n            shape.y1 * (1 - p) + shape.y2 * p\n        ];\n    };\n    return Line;\n}(Path));\nLine.prototype.type = 'line';\nexport default Line;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolygonShape = (function () {\n    function PolygonShape() {\n        this.points = null;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolygonShape;\n}());\nexport { PolygonShape };\nvar Polygon = (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polygon.prototype.getDefaultShape = function () {\n        return new PolygonShape();\n    };\n    Polygon.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, true);\n    };\n    return Polygon;\n}(Path));\n;\nPolygon.prototype.type = 'polygon';\nexport default Polygon;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolylineShape = (function () {\n    function PolylineShape() {\n        this.points = null;\n        this.percent = 1;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolylineShape;\n}());\nexport { PolylineShape };\nvar Polyline = (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polyline.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Polyline.prototype.getDefaultShape = function () {\n        return new PolylineShape();\n    };\n    Polyline.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, false);\n    };\n    return Polyline;\n}(Path));\nPolyline.prototype.type = 'polyline';\nexport default Polyline;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundRectHelper from '../helper/roundRect.js';\nimport { subPixelOptimizeRect } from '../helper/subPixelOptimize.js';\nvar RectShape = (function () {\n    function RectShape() {\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n    return RectShape;\n}());\nexport { RectShape };\nvar subPixelOptimizeOutputShape = {};\nvar Rect = (function (_super) {\n    __extends(Rect, _super);\n    function Rect(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Rect.prototype.getDefaultShape = function () {\n        return new RectShape();\n    };\n    Rect.prototype.buildPath = function (ctx, shape) {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n            x = optimizedShape.x;\n            y = optimizedShape.y;\n            width = optimizedShape.width;\n            height = optimizedShape.height;\n            optimizedShape.r = shape.r;\n            shape = optimizedShape;\n        }\n        else {\n            x = shape.x;\n            y = shape.y;\n            width = shape.width;\n            height = shape.height;\n        }\n        if (!shape.r) {\n            ctx.rect(x, y, width, height);\n        }\n        else {\n            roundRectHelper.buildPath(ctx, shape);\n        }\n    };\n    Rect.prototype.isZeroArea = function () {\n        return !this.shape.width || !this.shape.height;\n    };\n    return Rect;\n}(Path));\nRect.prototype.type = 'rect';\nexport default Rect;\n","export function buildPath(ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n    var r = shape.r;\n    var r1;\n    var r2;\n    var r3;\n    var r4;\n    if (width < 0) {\n        x = x + width;\n        width = -width;\n    }\n    if (height < 0) {\n        y = y + height;\n        height = -height;\n    }\n    if (typeof r === 'number') {\n        r1 = r2 = r3 = r4 = r;\n    }\n    else if (r instanceof Array) {\n        if (r.length === 1) {\n            r1 = r2 = r3 = r4 = r[0];\n        }\n        else if (r.length === 2) {\n            r1 = r3 = r[0];\n            r2 = r4 = r[1];\n        }\n        else if (r.length === 3) {\n            r1 = r[0];\n            r2 = r4 = r[1];\n            r3 = r[2];\n        }\n        else {\n            r1 = r[0];\n            r2 = r[1];\n            r3 = r[2];\n            r4 = r[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = 0;\n    }\n    var total;\n    if (r1 + r2 > width) {\n        total = r1 + r2;\n        r1 *= width / total;\n        r2 *= width / total;\n    }\n    if (r3 + r4 > width) {\n        total = r3 + r4;\n        r3 *= width / total;\n        r4 *= width / total;\n    }\n    if (r2 + r3 > height) {\n        total = r2 + r3;\n        r2 *= height / total;\n        r3 *= height / total;\n    }\n    if (r1 + r4 > height) {\n        total = r1 + r4;\n        r1 *= height / total;\n        r4 *= height / total;\n    }\n    ctx.moveTo(x + r1, y);\n    ctx.lineTo(x + width - r2, y);\n    r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n    ctx.lineTo(x + width, y + height - r3);\n    r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n    ctx.lineTo(x + r4, y + height);\n    r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n    ctx.lineTo(x, y + r1);\n    r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar RingShape = (function () {\n    function RingShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.r0 = 0;\n    }\n    return RingShape;\n}());\nexport { RingShape };\nvar Ring = (function (_super) {\n    __extends(Ring, _super);\n    function Ring(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ring.prototype.getDefaultShape = function () {\n        return new RingShape();\n    };\n    Ring.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var PI2 = Math.PI * 2;\n        ctx.moveTo(x + shape.r, y);\n        ctx.arc(x, y, shape.r, 0, PI2, false);\n        ctx.moveTo(x + shape.r0, y);\n        ctx.arc(x, y, shape.r0, 0, PI2, true);\n    };\n    return Ring;\n}(Path));\nRing.prototype.type = 'ring';\nexport default Ring;\n","import { isArray } from '../../core/util.js';\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar mathACos = Math.acos;\nvar mathATan2 = Math.atan2;\nvar mathAbs = Math.abs;\nvar mathSqrt = Math.sqrt;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar e = 1e-4;\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var dx10 = x1 - x0;\n    var dy10 = y1 - y0;\n    var dx32 = x3 - x2;\n    var dy32 = y3 - y2;\n    var t = dy32 * dx10 - dx32 * dy10;\n    if (t * t < e) {\n        return;\n    }\n    t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\n    return [x0 + t * dx10, y0 + t * dy10];\n}\nfunction computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\n    var x01 = x0 - x1;\n    var y01 = y0 - y1;\n    var lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);\n    var ox = lo * y01;\n    var oy = -lo * x01;\n    var x11 = x0 + ox;\n    var y11 = y0 + oy;\n    var x10 = x1 + ox;\n    var y10 = y1 + oy;\n    var x00 = (x11 + x10) / 2;\n    var y00 = (y11 + y10) / 2;\n    var dx = x10 - x11;\n    var dy = y10 - y11;\n    var d2 = dx * dx + dy * dy;\n    var r = radius - cr;\n    var s = x11 * y10 - x10 * y11;\n    var d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax(0, r * r * d2 - s * s));\n    var cx0 = (s * dy - dx * d) / d2;\n    var cy0 = (-s * dx - dy * d) / d2;\n    var cx1 = (s * dy + dx * d) / d2;\n    var cy1 = (-s * dx + dy * d) / d2;\n    var dx0 = cx0 - x00;\n    var dy0 = cy0 - y00;\n    var dx1 = cx1 - x00;\n    var dy1 = cy1 - y00;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n        cx0 = cx1;\n        cy0 = cy1;\n    }\n    return {\n        cx: cx0,\n        cy: cy0,\n        x0: -ox,\n        y0: -oy,\n        x1: cx0 * (radius / r - 1),\n        y1: cy0 * (radius / r - 1)\n    };\n}\nfunction normalizeCornerRadius(cr) {\n    var arr;\n    if (isArray(cr)) {\n        var len = cr.length;\n        if (!len) {\n            return cr;\n        }\n        if (len === 1) {\n            arr = [cr[0], cr[0], 0, 0];\n        }\n        else if (len === 2) {\n            arr = [cr[0], cr[0], cr[1], cr[1]];\n        }\n        else if (len === 3) {\n            arr = cr.concat(cr[2]);\n        }\n        else {\n            arr = cr;\n        }\n    }\n    else {\n        arr = [cr, cr, cr, cr];\n    }\n    return arr;\n}\nexport function buildPath(ctx, shape) {\n    var _a;\n    var radius = mathMax(shape.r, 0);\n    var innerRadius = mathMax(shape.r0 || 0, 0);\n    var hasRadius = radius > 0;\n    var hasInnerRadius = innerRadius > 0;\n    if (!hasRadius && !hasInnerRadius) {\n        return;\n    }\n    if (!hasRadius) {\n        radius = innerRadius;\n        innerRadius = 0;\n    }\n    if (innerRadius > radius) {\n        var tmp = radius;\n        radius = innerRadius;\n        innerRadius = tmp;\n    }\n    var startAngle = shape.startAngle, endAngle = shape.endAngle;\n    if (isNaN(startAngle) || isNaN(endAngle)) {\n        return;\n    }\n    var cx = shape.cx, cy = shape.cy;\n    var clockwise = !!shape.clockwise;\n    var arc = mathAbs(endAngle - startAngle);\n    var mod = arc > PI2 && arc % PI2;\n    mod > e && (arc = mod);\n    if (!(radius > e)) {\n        ctx.moveTo(cx, cy);\n    }\n    else if (arc > PI2 - e) {\n        ctx.moveTo(cx + radius * mathCos(startAngle), cy + radius * mathSin(startAngle));\n        ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        if (innerRadius > e) {\n            ctx.moveTo(cx + innerRadius * mathCos(endAngle), cy + innerRadius * mathSin(endAngle));\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    else {\n        var icrStart = void 0;\n        var icrEnd = void 0;\n        var ocrStart = void 0;\n        var ocrEnd = void 0;\n        var ocrs = void 0;\n        var ocre = void 0;\n        var icrs = void 0;\n        var icre = void 0;\n        var ocrMax = void 0;\n        var icrMax = void 0;\n        var limitedOcrMax = void 0;\n        var limitedIcrMax = void 0;\n        var xre = void 0;\n        var yre = void 0;\n        var xirs = void 0;\n        var yirs = void 0;\n        var xrs = radius * mathCos(startAngle);\n        var yrs = radius * mathSin(startAngle);\n        var xire = innerRadius * mathCos(endAngle);\n        var yire = innerRadius * mathSin(endAngle);\n        var hasArc = arc > e;\n        if (hasArc) {\n            var cornerRadius = shape.cornerRadius;\n            if (cornerRadius) {\n                _a = normalizeCornerRadius(cornerRadius), icrStart = _a[0], icrEnd = _a[1], ocrStart = _a[2], ocrEnd = _a[3];\n            }\n            var halfRd = mathAbs(radius - innerRadius) / 2;\n            ocrs = mathMin(halfRd, ocrStart);\n            ocre = mathMin(halfRd, ocrEnd);\n            icrs = mathMin(halfRd, icrStart);\n            icre = mathMin(halfRd, icrEnd);\n            limitedOcrMax = ocrMax = mathMax(ocrs, ocre);\n            limitedIcrMax = icrMax = mathMax(icrs, icre);\n            if (ocrMax > e || icrMax > e) {\n                xre = radius * mathCos(endAngle);\n                yre = radius * mathSin(endAngle);\n                xirs = innerRadius * mathCos(startAngle);\n                yirs = innerRadius * mathSin(startAngle);\n                if (arc < PI) {\n                    var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n                    if (it_1) {\n                        var x0 = xrs - it_1[0];\n                        var y0 = yrs - it_1[1];\n                        var x1 = xre - it_1[0];\n                        var y1 = yre - it_1[1];\n                        var a = 1 / mathSin(mathACos((x0 * x1 + y0 * y1) / (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1))) / 2);\n                        var b = mathSqrt(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\n                        limitedOcrMax = mathMin(ocrMax, (radius - b) / (a + 1));\n                        limitedIcrMax = mathMin(icrMax, (innerRadius - b) / (a - 1));\n                    }\n                }\n            }\n        }\n        if (!hasArc) {\n            ctx.moveTo(cx + xrs, cy + yrs);\n        }\n        else if (limitedOcrMax > e) {\n            var crStart = mathMin(ocrStart, limitedOcrMax);\n            var crEnd = mathMin(ocrEnd, limitedOcrMax);\n            var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);\n            var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);\n            ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedOcrMax < ocrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);\n                crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.moveTo(cx + xrs, cy + yrs);\n            ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        }\n        if (!(innerRadius > e) || !hasArc) {\n            ctx.lineTo(cx + xire, cy + yire);\n        }\n        else if (limitedIcrMax > e) {\n            var crStart = mathMin(icrStart, limitedIcrMax);\n            var crEnd = mathMin(icrEnd, limitedIcrMax);\n            var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);\n            var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);\n            ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedIcrMax < icrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);\n                crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.lineTo(cx + xire, cy + yire);\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    ctx.closePath();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundSectorHelper from '../helper/roundSector.js';\nvar SectorShape = (function () {\n    function SectorShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r0 = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n        this.cornerRadius = 0;\n    }\n    return SectorShape;\n}());\nexport { SectorShape };\nvar Sector = (function (_super) {\n    __extends(Sector, _super);\n    function Sector(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Sector.prototype.getDefaultShape = function () {\n        return new SectorShape();\n    };\n    Sector.prototype.buildPath = function (ctx, shape) {\n        roundSectorHelper.buildPath(ctx, shape);\n    };\n    Sector.prototype.isZeroArea = function () {\n        return this.shape.startAngle === this.shape.endAngle\n            || this.shape.r === this.shape.r0;\n    };\n    return Sector;\n}(Path));\nSector.prototype.type = 'sector';\nexport default Sector;\n","import { isAroundZero } from './helper.js';\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar SVGPathRebuilder = (function () {\n    function SVGPathRebuilder() {\n    }\n    SVGPathRebuilder.prototype.reset = function (precision) {\n        this._start = true;\n        this._d = [];\n        this._str = '';\n        this._p = Math.pow(10, precision || 4);\n    };\n    SVGPathRebuilder.prototype.moveTo = function (x, y) {\n        this._add('M', x, y);\n    };\n    SVGPathRebuilder.prototype.lineTo = function (x, y) {\n        this._add('L', x, y);\n    };\n    SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n        this._add('C', x, y, x2, y2, x3, y3);\n    };\n    SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n        this._add('Q', x, y, x2, y2);\n    };\n    SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n    };\n    SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n        var dTheta = endAngle - startAngle;\n        var clockwise = !anticlockwise;\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2)\n            || (clockwise ? dTheta >= PI2 : -dTheta >= PI2);\n        var unifiedTheta = dTheta > 0 ? dTheta % PI2 : (dTheta % PI2 + PI2);\n        var large = false;\n        if (isCircle) {\n            large = true;\n        }\n        else if (isAroundZero(dThetaPositive)) {\n            large = false;\n        }\n        else {\n            large = (unifiedTheta >= PI) === !!clockwise;\n        }\n        var x0 = cx + rx * mathCos(startAngle);\n        var y0 = cy + ry * mathSin(startAngle);\n        if (this._start) {\n            this._add('M', x0, y0);\n        }\n        var xRot = Math.round(psi * degree);\n        if (isCircle) {\n            var p = 1 / this._p;\n            var dTheta_1 = (clockwise ? 1 : -1) * (PI2 - p);\n            this._add('A', rx, ry, xRot, 1, +clockwise, cx + rx * mathCos(startAngle + dTheta_1), cy + ry * mathSin(startAngle + dTheta_1));\n            if (p > 1e-2) {\n                this._add('A', rx, ry, xRot, 0, +clockwise, x0, y0);\n            }\n        }\n        else {\n            var x = cx + rx * mathCos(endAngle);\n            var y = cy + ry * mathSin(endAngle);\n            this._add('A', rx, ry, xRot, +large, +clockwise, x, y);\n        }\n    };\n    SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n        this._add('M', x, y);\n        this._add('l', w, 0);\n        this._add('l', 0, h);\n        this._add('l', -w, 0);\n        this._add('Z');\n    };\n    SVGPathRebuilder.prototype.closePath = function () {\n        if (this._d.length > 0) {\n            this._add('Z');\n        }\n    };\n    SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n        var vals = [];\n        var p = this._p;\n        for (var i = 1; i < arguments.length; i++) {\n            var val = arguments[i];\n            if (isNaN(val)) {\n                this._invalid = true;\n                return;\n            }\n            vals.push(Math.round(val * p) / p);\n        }\n        this._d.push(cmd + vals.join(' '));\n        this._start = cmd === 'Z';\n    };\n    SVGPathRebuilder.prototype.generateStr = function () {\n        this._str = this._invalid ? '' : this._d.join('');\n        this._d = [];\n    };\n    SVGPathRebuilder.prototype.getStr = function () {\n        return this._str;\n    };\n    return SVGPathRebuilder;\n}());\nexport default SVGPathRebuilder;\n","import { DEFAULT_PATH_STYLE } from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineDash } from '../canvas/dashStyle.js';\nimport { map } from '../core/util.js';\nimport { normalizeColor } from './helper.js';\nvar NONE = 'none';\nvar mathRound = Math.round;\nfunction pathHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== NONE;\n}\nfunction pathHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== NONE;\n}\nvar strokeProps = ['lineCap', 'miterLimit', 'lineJoin'];\nvar svgStrokeProps = map(strokeProps, function (prop) { return \"stroke-\" + prop.toLowerCase(); });\nexport default function mapStyleToAttrs(updateAttr, style, el, forceUpdate) {\n    var opacity = style.opacity == null ? 1 : style.opacity;\n    if (el instanceof ZRImage) {\n        updateAttr('opacity', opacity);\n        return;\n    }\n    if (pathHasFill(style)) {\n        var fill = normalizeColor(style.fill);\n        updateAttr('fill', fill.color);\n        var fillOpacity = style.fillOpacity != null\n            ? style.fillOpacity * fill.opacity * opacity\n            : fill.opacity * opacity;\n        if (forceUpdate || fillOpacity < 1) {\n            updateAttr('fill-opacity', fillOpacity);\n        }\n    }\n    else {\n        updateAttr('fill', NONE);\n    }\n    if (pathHasStroke(style)) {\n        var stroke = normalizeColor(style.stroke);\n        updateAttr('stroke', stroke.color);\n        var strokeScale = style.strokeNoScale\n            ? el.getLineScale()\n            : 1;\n        var strokeWidth = (strokeScale ? (style.lineWidth || 0) / strokeScale : 0);\n        var strokeOpacity = style.strokeOpacity != null\n            ? style.strokeOpacity * stroke.opacity * opacity\n            : stroke.opacity * opacity;\n        var strokeFirst = style.strokeFirst;\n        if (forceUpdate || strokeWidth !== 1) {\n            updateAttr('stroke-width', strokeWidth);\n        }\n        if (forceUpdate || strokeFirst) {\n            updateAttr('paint-order', strokeFirst ? 'stroke' : 'fill');\n        }\n        if (forceUpdate || strokeOpacity < 1) {\n            updateAttr('stroke-opacity', strokeOpacity);\n        }\n        if (style.lineDash) {\n            var _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n            if (lineDash) {\n                lineDashOffset = mathRound(lineDashOffset || 0);\n                updateAttr('stroke-dasharray', lineDash.join(','));\n                if (lineDashOffset || forceUpdate) {\n                    updateAttr('stroke-dashoffset', lineDashOffset);\n                }\n            }\n        }\n        else if (forceUpdate) {\n            updateAttr('stroke-dasharray', NONE);\n        }\n        for (var i = 0; i < strokeProps.length; i++) {\n            var propName = strokeProps[i];\n            if (forceUpdate || style[propName] !== DEFAULT_PATH_STYLE[propName]) {\n                var val = style[propName] || DEFAULT_PATH_STYLE[propName];\n                val && updateAttr(svgStrokeProps[i], val);\n            }\n        }\n    }\n    else if (forceUpdate) {\n        updateAttr('stroke', NONE);\n    }\n}\n","import { keys, map } from '../core/util.js';\nimport { encodeHTML } from '../core/dom.js';\nexport var SVGNS = 'http://www.w3.org/2000/svg';\nexport var XLINKNS = 'http://www.w3.org/1999/xlink';\nexport var XMLNS = 'http://www.w3.org/2000/xmlns/';\nexport var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\nexport function createElement(name) {\n    return document.createElementNS(SVGNS, name);\n}\n;\nexport function createVNode(tag, key, attrs, children, text) {\n    return {\n        tag: tag,\n        attrs: attrs || {},\n        children: children,\n        text: text,\n        key: key\n    };\n}\nfunction createElementOpen(name, attrs) {\n    var attrsStr = [];\n    if (attrs) {\n        for (var key in attrs) {\n            var val = attrs[key];\n            var part = key;\n            if (val === false) {\n                continue;\n            }\n            else if (val !== true && val != null) {\n                part += \"=\\\"\" + val + \"\\\"\";\n            }\n            attrsStr.push(part);\n        }\n    }\n    return \"<\" + name + \" \" + attrsStr.join(' ') + \">\";\n}\nfunction createElementClose(name) {\n    return \"</\" + name + \">\";\n}\nexport function vNodeToString(el, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    function convertElToString(el) {\n        var children = el.children, tag = el.tag, attrs = el.attrs, text = el.text;\n        return createElementOpen(tag, attrs)\n            + (tag !== 'style' ? encodeHTML(text) : text || '')\n            + (children ? \"\" + S + map(children, function (child) { return convertElToString(child); }).join(S) + S : '')\n            + createElementClose(tag);\n    }\n    return convertElToString(el);\n}\nexport function getCssString(selectorNodes, animationNodes, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    var bracketBegin = \" {\" + S;\n    var bracketEnd = S + \"}\";\n    var selectors = map(keys(selectorNodes), function (className) {\n        return className + bracketBegin + map(keys(selectorNodes[className]), function (attrName) {\n            return attrName + \":\" + selectorNodes[className][attrName] + \";\";\n        }).join(S) + bracketEnd;\n    }).join(S);\n    var animations = map(keys(animationNodes), function (animationName) {\n        return \"@keyframes \" + animationName + bracketBegin + map(keys(animationNodes[animationName]), function (percent) {\n            return percent + bracketBegin + map(keys(animationNodes[animationName][percent]), function (attrName) {\n                var val = animationNodes[animationName][percent][attrName];\n                if (attrName === 'd') {\n                    val = \"path(\\\"\" + val + \"\\\")\";\n                }\n                return attrName + \":\" + val + \";\";\n            }).join(S) + bracketEnd;\n        }).join(S) + bracketEnd;\n    }).join(S);\n    if (!selectors && !animations) {\n        return '';\n    }\n    return ['<![CDATA[', selectors, animations, ']]>'].join(S);\n}\nexport function createBrushScope(zrId) {\n    return {\n        zrId: zrId,\n        shadowCache: {},\n        patternCache: {},\n        gradientCache: {},\n        clipPathCache: {},\n        defs: {},\n        cssNodes: {},\n        cssAnims: {},\n        cssClassIdx: 0,\n        cssAnimIdx: 0,\n        shadowIdx: 0,\n        gradientIdx: 0,\n        patternIdx: 0,\n        clipPathIdx: 0\n    };\n}\nexport function createSVGVNode(width, height, children, useViewBox) {\n    return createVNode('svg', 'root', {\n        'width': width,\n        'height': height,\n        'xmlns': SVGNS,\n        'xmlns:xlink': XLINKNS,\n        'version': '1.1',\n        'baseProfile': 'full',\n        'viewBox': useViewBox ? \"0 0 \" + width + \" \" + height : false\n    }, children);\n}\n","import { copyTransform } from '../core/Transformable.js';\nimport { createBrushScope } from './core.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { getPathPrecision, getSRTTransformString } from './helper.js';\nimport { each, extend, filter, isNumber, isString, keys } from '../core/util.js';\nimport CompoundPath from '../graphic/CompoundPath.js';\nimport { createCubicEasingFunc } from '../animation/cubicEasing.js';\nexport var EASING_MAP = {\n    cubicIn: '0.32,0,0.67,0',\n    cubicOut: '0.33,1,0.68,1',\n    cubicInOut: '0.65,0,0.35,1',\n    quadraticIn: '0.11,0,0.5,0',\n    quadraticOut: '0.5,1,0.89,1',\n    quadraticInOut: '0.45,0,0.55,1',\n    quarticIn: '0.5,0,0.75,0',\n    quarticOut: '0.25,1,0.5,1',\n    quarticInOut: '0.76,0,0.24,1',\n    quinticIn: '0.64,0,0.78,0',\n    quinticOut: '0.22,1,0.36,1',\n    quinticInOut: '0.83,0,0.17,1',\n    sinusoidalIn: '0.12,0,0.39,0',\n    sinusoidalOut: '0.61,1,0.88,1',\n    sinusoidalInOut: '0.37,0,0.63,1',\n    exponentialIn: '0.7,0,0.84,0',\n    exponentialOut: '0.16,1,0.3,1',\n    exponentialInOut: '0.87,0,0.13,1',\n    circularIn: '0.55,0,1,0.45',\n    circularOut: '0,0.55,0.45,1',\n    circularInOut: '0.85,0,0.15,1'\n};\nvar transformOriginKey = 'transform-origin';\nfunction buildPathString(el, kfShape, path) {\n    var shape = extend({}, el.shape);\n    extend(shape, kfShape);\n    el.buildPath(path, shape);\n    var svgPathBuilder = new SVGPathRebuilder();\n    svgPathBuilder.reset(getPathPrecision(el));\n    path.rebuildPath(svgPathBuilder, 1);\n    svgPathBuilder.generateStr();\n    return svgPathBuilder.getStr();\n}\nfunction setTransformOrigin(target, transform) {\n    var originX = transform.originX, originY = transform.originY;\n    if (originX || originY) {\n        target[transformOriginKey] = originX + \"px \" + originY + \"px\";\n    }\n}\nexport var ANIMATE_STYLE_MAP = {\n    fill: 'fill',\n    opacity: 'opacity',\n    lineWidth: 'stroke-width',\n    lineDashOffset: 'stroke-dashoffset'\n};\nfunction addAnimation(cssAnim, scope) {\n    var animationName = scope.zrId + '-ani-' + scope.cssAnimIdx++;\n    scope.cssAnims[animationName] = cssAnim;\n    return animationName;\n}\nfunction createCompoundPathCSSAnimation(el, attrs, scope) {\n    var paths = el.shape.paths;\n    var composedAnim = {};\n    var cssAnimationCfg;\n    var cssAnimationName;\n    each(paths, function (path) {\n        var subScope = createBrushScope(scope.zrId);\n        subScope.animation = true;\n        createCSSAnimation(path, {}, subScope, true);\n        var cssAnims = subScope.cssAnims;\n        var cssNodes = subScope.cssNodes;\n        var animNames = keys(cssAnims);\n        var len = animNames.length;\n        if (!len) {\n            return;\n        }\n        cssAnimationName = animNames[len - 1];\n        var lastAnim = cssAnims[cssAnimationName];\n        for (var percent in lastAnim) {\n            var kf = lastAnim[percent];\n            composedAnim[percent] = composedAnim[percent] || { d: '' };\n            composedAnim[percent].d += kf.d || '';\n        }\n        for (var className in cssNodes) {\n            var val = cssNodes[className].animation;\n            if (val.indexOf(cssAnimationName) >= 0) {\n                cssAnimationCfg = val;\n            }\n        }\n    });\n    if (!cssAnimationCfg) {\n        return;\n    }\n    attrs.d = false;\n    var animationName = addAnimation(composedAnim, scope);\n    return cssAnimationCfg.replace(cssAnimationName, animationName);\n}\nfunction getEasingFunc(easing) {\n    return isString(easing)\n        ? EASING_MAP[easing]\n            ? \"cubic-bezier(\" + EASING_MAP[easing] + \")\"\n            : createCubicEasingFunc(easing) ? easing : ''\n        : '';\n}\nexport function createCSSAnimation(el, attrs, scope, onlyShape) {\n    var animators = el.animators;\n    var len = animators.length;\n    var cssAnimations = [];\n    if (el instanceof CompoundPath) {\n        var animationCfg = createCompoundPathCSSAnimation(el, attrs, scope);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n        else if (!len) {\n            return;\n        }\n    }\n    else if (!len) {\n        return;\n    }\n    var groupAnimators = {};\n    for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n        var cfgArr = [animator.getMaxTime() / 1000 + 's'];\n        var easing = getEasingFunc(animator.getClip().easing);\n        var delay = animator.getDelay();\n        if (easing) {\n            cfgArr.push(easing);\n        }\n        else {\n            cfgArr.push('linear');\n        }\n        if (delay) {\n            cfgArr.push(delay / 1000 + 's');\n        }\n        if (animator.getLoop()) {\n            cfgArr.push('infinite');\n        }\n        var cfg = cfgArr.join(' ');\n        groupAnimators[cfg] = groupAnimators[cfg] || [cfg, []];\n        groupAnimators[cfg][1].push(animator);\n    }\n    function createSingleCSSAnimation(groupAnimator) {\n        var animators = groupAnimator[1];\n        var len = animators.length;\n        var transformKfs = {};\n        var shapeKfs = {};\n        var finalKfs = {};\n        var animationTimingFunctionAttrName = 'animation-timing-function';\n        function saveAnimatorTrackToCssKfs(animator, cssKfs, toCssAttrName) {\n            var tracks = animator.getTracks();\n            var maxTime = animator.getMaxTime();\n            for (var k = 0; k < tracks.length; k++) {\n                var track = tracks[k];\n                if (track.needsAnimate()) {\n                    var kfs = track.keyframes;\n                    var attrName = track.propName;\n                    toCssAttrName && (attrName = toCssAttrName(attrName));\n                    if (attrName) {\n                        for (var i = 0; i < kfs.length; i++) {\n                            var kf = kfs[i];\n                            var percent = Math.round(kf.time / maxTime * 100) + '%';\n                            var kfEasing = getEasingFunc(kf.easing);\n                            var rawValue = kf.rawValue;\n                            if (isString(rawValue) || isNumber(rawValue)) {\n                                cssKfs[percent] = cssKfs[percent] || {};\n                                cssKfs[percent][attrName] = kf.rawValue;\n                                if (kfEasing) {\n                                    cssKfs[percent][animationTimingFunctionAttrName] = kfEasing;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            var targetProp = animator.targetName;\n            if (!targetProp) {\n                !onlyShape && saveAnimatorTrackToCssKfs(animator, transformKfs);\n            }\n            else if (targetProp === 'shape') {\n                saveAnimatorTrackToCssKfs(animator, shapeKfs);\n            }\n        }\n        for (var percent in transformKfs) {\n            var transform = {};\n            copyTransform(transform, el);\n            extend(transform, transformKfs[percent]);\n            var str = getSRTTransformString(transform);\n            var timingFunction = transformKfs[percent][animationTimingFunctionAttrName];\n            finalKfs[percent] = str ? {\n                transform: str\n            } : {};\n            setTransformOrigin(finalKfs[percent], transform);\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        var path;\n        var canAnimateShape = true;\n        for (var percent in shapeKfs) {\n            finalKfs[percent] = finalKfs[percent] || {};\n            var isFirst = !path;\n            var timingFunction = shapeKfs[percent][animationTimingFunctionAttrName];\n            if (isFirst) {\n                path = new PathProxy();\n            }\n            var len_1 = path.len();\n            path.reset();\n            finalKfs[percent].d = buildPathString(el, shapeKfs[percent], path);\n            var newLen = path.len();\n            if (!isFirst && len_1 !== newLen) {\n                canAnimateShape = false;\n                break;\n            }\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        if (!canAnimateShape) {\n            for (var percent in finalKfs) {\n                delete finalKfs[percent].d;\n            }\n        }\n        if (!onlyShape) {\n            for (var i = 0; i < len; i++) {\n                var animator = animators[i];\n                var targetProp = animator.targetName;\n                if (targetProp === 'style') {\n                    saveAnimatorTrackToCssKfs(animator, finalKfs, function (propName) { return ANIMATE_STYLE_MAP[propName]; });\n                }\n            }\n        }\n        var percents = keys(finalKfs);\n        var allTransformOriginSame = true;\n        var transformOrigin;\n        for (var i = 1; i < percents.length; i++) {\n            var p0 = percents[i - 1];\n            var p1 = percents[i];\n            if (finalKfs[p0][transformOriginKey] !== finalKfs[p1][transformOriginKey]) {\n                allTransformOriginSame = false;\n                break;\n            }\n            transformOrigin = finalKfs[p0][transformOriginKey];\n        }\n        if (allTransformOriginSame && transformOrigin) {\n            for (var percent in finalKfs) {\n                if (finalKfs[percent][transformOriginKey]) {\n                    delete finalKfs[percent][transformOriginKey];\n                }\n            }\n            attrs[transformOriginKey] = transformOrigin;\n        }\n        if (filter(percents, function (percent) { return keys(finalKfs[percent]).length > 0; }).length) {\n            var animationName = addAnimation(finalKfs, scope);\n            return animationName + \" \" + groupAnimator[0] + \" both\";\n        }\n    }\n    for (var key in groupAnimators) {\n        var animationCfg = createSingleCSSAnimation(groupAnimators[key]);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n    }\n    if (cssAnimations.length) {\n        var className = scope.zrId + '-cls-' + scope.cssClassIdx++;\n        scope.cssNodes['.' + className] = {\n            animation: cssAnimations.join(',')\n        };\n        attrs[\"class\"] = className;\n    }\n}\n","import { adjustTextY, getIdURL, getMatrixStr, getPathPrecision, getShadowKey, getSRTTransformString, hasShadow, isAroundZero, isGradient, isImagePattern, isLinearGradient, isPattern, isRadialGradient, normalizeColor, round4, TEXT_ALIGN_TO_ANCHOR } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineHeight } from '../contain/text.js';\nimport TSpan from '../graphic/TSpan.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport mapStyleToAttrs from './mapStyleToAttrs.js';\nimport { createVNode, vNodeToString } from './core.js';\nimport { assert, clone, isFunction, isString, logError, map, retrieve2 } from '../core/util.js';\nimport { createOrUpdateImage } from '../graphic/helper/image.js';\nimport { createCSSAnimation } from './cssAnimation.js';\nimport { hasSeparateFont, parseFontSize } from '../graphic/Text.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_FAMILY } from '../core/platform.js';\nvar round = Math.round;\nfunction isImageLike(val) {\n    return val && isString(val.src);\n}\nfunction isCanvasLike(val) {\n    return val && isFunction(val.toDataURL);\n}\nfunction setStyleAttrs(attrs, style, el, scope) {\n    mapStyleToAttrs(function (key, val) {\n        var isFillStroke = key === 'fill' || key === 'stroke';\n        if (isFillStroke && isGradient(val)) {\n            setGradient(style, attrs, key, scope);\n        }\n        else if (isFillStroke && isPattern(val)) {\n            setPattern(el, attrs, key, scope);\n        }\n        else {\n            attrs[key] = val;\n        }\n    }, style, el, false);\n    setShadow(el, attrs, scope);\n}\nfunction noRotateScale(m) {\n    return isAroundZero(m[0] - 1)\n        && isAroundZero(m[1])\n        && isAroundZero(m[2])\n        && isAroundZero(m[3] - 1);\n}\nfunction noTranslate(m) {\n    return isAroundZero(m[4]) && isAroundZero(m[5]);\n}\nfunction setTransform(attrs, m, compress) {\n    if (m && !(noTranslate(m) && noRotateScale(m))) {\n        var mul = compress ? 10 : 1e4;\n        attrs.transform = noRotateScale(m)\n            ? \"translate(\" + round(m[4] * mul) / mul + \" \" + round(m[5] * mul) / mul + \")\" : getMatrixStr(m);\n    }\n}\nfunction convertPolyShape(shape, attrs, mul) {\n    var points = shape.points;\n    var strArr = [];\n    for (var i = 0; i < points.length; i++) {\n        strArr.push(round(points[i][0] * mul) / mul);\n        strArr.push(round(points[i][1] * mul) / mul);\n    }\n    attrs.points = strArr.join(' ');\n}\nfunction validatePolyShape(shape) {\n    return !shape.smooth;\n}\nfunction createAttrsConvert(desc) {\n    var normalizedDesc = map(desc, function (item) {\n        return (typeof item === 'string' ? [item, item] : item);\n    });\n    return function (shape, attrs, mul) {\n        for (var i = 0; i < normalizedDesc.length; i++) {\n            var item = normalizedDesc[i];\n            var val = shape[item[0]];\n            if (val != null) {\n                attrs[item[1]] = round(val * mul) / mul;\n            }\n        }\n    };\n}\nvar builtinShapesDef = {\n    circle: [createAttrsConvert(['cx', 'cy', 'r'])],\n    polyline: [convertPolyShape, validatePolyShape],\n    polygon: [convertPolyShape, validatePolyShape]\n};\nfunction hasShapeAnimation(el) {\n    var animators = el.animators;\n    for (var i = 0; i < animators.length; i++) {\n        if (animators[i].targetName === 'shape') {\n            return true;\n        }\n    }\n    return false;\n}\nexport function brushSVGPath(el, scope) {\n    var style = el.style;\n    var shape = el.shape;\n    var builtinShpDef = builtinShapesDef[el.type];\n    var attrs = {};\n    var needsAnimate = scope.animation;\n    var svgElType = 'path';\n    var strokePercent = el.style.strokePercent;\n    var precision = (scope.compress && getPathPrecision(el)) || 4;\n    if (builtinShpDef\n        && !scope.willUpdate\n        && !(builtinShpDef[1] && !builtinShpDef[1](shape))\n        && !(needsAnimate && hasShapeAnimation(el))\n        && !(strokePercent < 1)) {\n        svgElType = el.type;\n        var mul = Math.pow(10, precision);\n        builtinShpDef[0](shape, attrs, mul);\n    }\n    else {\n        var needBuildPath = !el.path || el.shapeChanged();\n        if (!el.path) {\n            el.createPathProxy();\n        }\n        var path = el.path;\n        if (needBuildPath) {\n            path.beginPath();\n            el.buildPath(path, el.shape);\n            el.pathUpdated();\n        }\n        var pathVersion = path.getVersion();\n        var elExt = el;\n        var svgPathBuilder = elExt.__svgPathBuilder;\n        if (elExt.__svgPathVersion !== pathVersion\n            || !svgPathBuilder\n            || strokePercent !== elExt.__svgPathStrokePercent) {\n            if (!svgPathBuilder) {\n                svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n            }\n            svgPathBuilder.reset(precision);\n            path.rebuildPath(svgPathBuilder, strokePercent);\n            svgPathBuilder.generateStr();\n            elExt.__svgPathVersion = pathVersion;\n            elExt.__svgPathStrokePercent = strokePercent;\n        }\n        attrs.d = svgPathBuilder.getStr();\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode(svgElType, el.id + '', attrs);\n}\nexport function brushSVGImage(el, scope) {\n    var style = el.style;\n    var image = style.image;\n    if (image && !isString(image)) {\n        if (isImageLike(image)) {\n            image = image.src;\n        }\n        else if (isCanvasLike(image)) {\n            image = image.toDataURL();\n        }\n    }\n    if (!image) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var attrs = {\n        href: image,\n        width: dw,\n        height: dh\n    };\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('image', el.id + '', attrs);\n}\n;\nexport function brushSVGTSpan(el, scope) {\n    var style = el.style;\n    var text = style.text;\n    text != null && (text += '');\n    if (!text || isNaN(style.x) || isNaN(style.y)) {\n        return;\n    }\n    var font = style.font || DEFAULT_FONT;\n    var x = style.x || 0;\n    var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n    var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign]\n        || style.textAlign;\n    var attrs = {\n        'dominant-baseline': 'central',\n        'text-anchor': textAlign\n    };\n    if (hasSeparateFont(style)) {\n        var separatedFontStr = '';\n        var fontStyle = style.fontStyle;\n        var fontSize = parseFontSize(style.fontSize);\n        if (!parseFloat(fontSize)) {\n            return;\n        }\n        var fontFamily = style.fontFamily || DEFAULT_FONT_FAMILY;\n        var fontWeight = style.fontWeight;\n        separatedFontStr += \"font-size:\" + fontSize + \";font-family:\" + fontFamily + \";\";\n        if (fontStyle && fontStyle !== 'normal') {\n            separatedFontStr += \"font-style:\" + fontStyle + \";\";\n        }\n        if (fontWeight && fontWeight !== 'normal') {\n            separatedFontStr += \"font-weight:\" + fontWeight + \";\";\n        }\n        attrs.style = separatedFontStr;\n    }\n    else {\n        attrs.style = \"font: \" + font;\n    }\n    if (text.match(/\\s/)) {\n        attrs['xml:space'] = 'preserve';\n    }\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('text', el.id + '', attrs, undefined, text);\n}\nexport function brush(el, scope) {\n    if (el instanceof Path) {\n        return brushSVGPath(el, scope);\n    }\n    else if (el instanceof ZRImage) {\n        return brushSVGImage(el, scope);\n    }\n    else if (el instanceof TSpan) {\n        return brushSVGTSpan(el, scope);\n    }\n}\nfunction setShadow(el, attrs, scope) {\n    var style = el.style;\n    if (hasShadow(style)) {\n        var shadowKey = getShadowKey(el);\n        var shadowCache = scope.shadowCache;\n        var shadowId = shadowCache[shadowKey];\n        if (!shadowId) {\n            var globalScale = el.getGlobalScale();\n            var scaleX = globalScale[0];\n            var scaleY = globalScale[1];\n            if (!scaleX || !scaleY) {\n                return;\n            }\n            var offsetX = style.shadowOffsetX || 0;\n            var offsetY = style.shadowOffsetY || 0;\n            var blur_1 = style.shadowBlur;\n            var _a = normalizeColor(style.shadowColor), opacity = _a.opacity, color = _a.color;\n            var stdDx = blur_1 / 2 / scaleX;\n            var stdDy = blur_1 / 2 / scaleY;\n            var stdDeviation = stdDx + ' ' + stdDy;\n            shadowId = scope.zrId + '-s' + scope.shadowIdx++;\n            scope.defs[shadowId] = createVNode('filter', shadowId, {\n                'id': shadowId,\n                'x': '-100%',\n                'y': '-100%',\n                'width': '300%',\n                'height': '300%'\n            }, [\n                createVNode('feDropShadow', '', {\n                    'dx': offsetX / scaleX,\n                    'dy': offsetY / scaleY,\n                    'stdDeviation': stdDeviation,\n                    'flood-color': color,\n                    'flood-opacity': opacity\n                })\n            ]);\n            shadowCache[shadowKey] = shadowId;\n        }\n        attrs.filter = getIdURL(shadowId);\n    }\n}\nexport function setGradient(style, attrs, target, scope) {\n    var val = style[target];\n    var gradientTag;\n    var gradientAttrs = {\n        'gradientUnits': val.global\n            ? 'userSpaceOnUse'\n            : 'objectBoundingBox'\n    };\n    if (isLinearGradient(val)) {\n        gradientTag = 'linearGradient';\n        gradientAttrs.x1 = val.x;\n        gradientAttrs.y1 = val.y;\n        gradientAttrs.x2 = val.x2;\n        gradientAttrs.y2 = val.y2;\n    }\n    else if (isRadialGradient(val)) {\n        gradientTag = 'radialGradient';\n        gradientAttrs.cx = retrieve2(val.x, 0.5);\n        gradientAttrs.cy = retrieve2(val.y, 0.5);\n        gradientAttrs.r = retrieve2(val.r, 0.5);\n    }\n    else {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Illegal gradient type.');\n        }\n        return;\n    }\n    var colors = val.colorStops;\n    var colorStops = [];\n    for (var i = 0, len = colors.length; i < len; ++i) {\n        var offset = round4(colors[i].offset) * 100 + '%';\n        var stopColor = colors[i].color;\n        var _a = normalizeColor(stopColor), color = _a.color, opacity = _a.opacity;\n        var stopsAttrs = {\n            'offset': offset\n        };\n        stopsAttrs['stop-color'] = color;\n        if (opacity < 1) {\n            stopsAttrs['stop-opacity'] = opacity;\n        }\n        colorStops.push(createVNode('stop', i + '', stopsAttrs));\n    }\n    var gradientVNode = createVNode(gradientTag, '', gradientAttrs, colorStops);\n    var gradientKey = vNodeToString(gradientVNode);\n    var gradientCache = scope.gradientCache;\n    var gradientId = gradientCache[gradientKey];\n    if (!gradientId) {\n        gradientId = scope.zrId + '-g' + scope.gradientIdx++;\n        gradientCache[gradientKey] = gradientId;\n        gradientAttrs.id = gradientId;\n        scope.defs[gradientId] = createVNode(gradientTag, gradientId, gradientAttrs, colorStops);\n    }\n    attrs[target] = getIdURL(gradientId);\n}\nexport function setPattern(el, attrs, target, scope) {\n    var val = el.style[target];\n    var boundingRect = el.getBoundingRect();\n    var patternAttrs = {};\n    var repeat = val.repeat;\n    var noRepeat = repeat === 'no-repeat';\n    var repeatX = repeat === 'repeat-x';\n    var repeatY = repeat === 'repeat-y';\n    var child;\n    if (isImagePattern(val)) {\n        var imageWidth_1 = val.imageWidth;\n        var imageHeight_1 = val.imageHeight;\n        var imageSrc = void 0;\n        var patternImage = val.image;\n        if (isString(patternImage)) {\n            imageSrc = patternImage;\n        }\n        else if (isImageLike(patternImage)) {\n            imageSrc = patternImage.src;\n        }\n        else if (isCanvasLike(patternImage)) {\n            imageSrc = patternImage.toDataURL();\n        }\n        if (typeof Image === 'undefined') {\n            var errMsg = 'Image width/height must been given explictly in svg-ssr renderer.';\n            assert(imageWidth_1, errMsg);\n            assert(imageHeight_1, errMsg);\n        }\n        else if (imageWidth_1 == null || imageHeight_1 == null) {\n            var setSizeToVNode_1 = function (vNode, img) {\n                if (vNode) {\n                    var svgEl = vNode.elm;\n                    var width = imageWidth_1 || img.width;\n                    var height = imageHeight_1 || img.height;\n                    if (vNode.tag === 'pattern') {\n                        if (repeatX) {\n                            height = 1;\n                            width /= boundingRect.width;\n                        }\n                        else if (repeatY) {\n                            width = 1;\n                            height /= boundingRect.height;\n                        }\n                    }\n                    vNode.attrs.width = width;\n                    vNode.attrs.height = height;\n                    if (svgEl) {\n                        svgEl.setAttribute('width', width);\n                        svgEl.setAttribute('height', height);\n                    }\n                }\n            };\n            var createdImage = createOrUpdateImage(imageSrc, null, el, function (img) {\n                noRepeat || setSizeToVNode_1(patternVNode, img);\n                setSizeToVNode_1(child, img);\n            });\n            if (createdImage && createdImage.width && createdImage.height) {\n                imageWidth_1 = imageWidth_1 || createdImage.width;\n                imageHeight_1 = imageHeight_1 || createdImage.height;\n            }\n        }\n        child = createVNode('image', 'img', {\n            href: imageSrc,\n            width: imageWidth_1,\n            height: imageHeight_1\n        });\n        patternAttrs.width = imageWidth_1;\n        patternAttrs.height = imageHeight_1;\n    }\n    else if (val.svgElement) {\n        child = clone(val.svgElement);\n        patternAttrs.width = val.svgWidth;\n        patternAttrs.height = val.svgHeight;\n    }\n    if (!child) {\n        return;\n    }\n    var patternWidth;\n    var patternHeight;\n    if (noRepeat) {\n        patternWidth = patternHeight = 1;\n    }\n    else if (repeatX) {\n        patternHeight = 1;\n        patternWidth = patternAttrs.width / boundingRect.width;\n    }\n    else if (repeatY) {\n        patternWidth = 1;\n        patternHeight = patternAttrs.height / boundingRect.height;\n    }\n    else {\n        patternAttrs.patternUnits = 'userSpaceOnUse';\n    }\n    if (patternWidth != null && !isNaN(patternWidth)) {\n        patternAttrs.width = patternWidth;\n    }\n    if (patternHeight != null && !isNaN(patternHeight)) {\n        patternAttrs.height = patternHeight;\n    }\n    var patternTransform = getSRTTransformString(val);\n    patternTransform && (patternAttrs.patternTransform = patternTransform);\n    var patternVNode = createVNode('pattern', '', patternAttrs, [child]);\n    var patternKey = vNodeToString(patternVNode);\n    var patternCache = scope.patternCache;\n    var patternId = patternCache[patternKey];\n    if (!patternId) {\n        patternId = scope.zrId + '-p' + scope.patternIdx++;\n        patternCache[patternKey] = patternId;\n        patternAttrs.id = patternId;\n        patternVNode = scope.defs[patternId] = createVNode('pattern', patternId, patternAttrs, [child]);\n    }\n    attrs[target] = getIdURL(patternId);\n}\nexport function setClipPath(clipPath, attrs, scope) {\n    var clipPathCache = scope.clipPathCache, defs = scope.defs;\n    var clipPathId = clipPathCache[clipPath.id];\n    if (!clipPathId) {\n        clipPathId = scope.zrId + '-c' + scope.clipPathIdx++;\n        var clipPathAttrs = {\n            id: clipPathId\n        };\n        clipPathCache[clipPath.id] = clipPathId;\n        defs[clipPathId] = createVNode('clipPath', clipPathId, clipPathAttrs, [brushSVGPath(clipPath, scope)]);\n    }\n    attrs['clip-path'] = getIdURL(clipPathId);\n}\n","export function createTextNode(text) {\n    return document.createTextNode(text);\n}\nexport function createComment(text) {\n    return document.createComment(text);\n}\nexport function insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nexport function removeChild(node, child) {\n    node.removeChild(child);\n}\nexport function appendChild(node, child) {\n    node.appendChild(child);\n}\nexport function parentNode(node) {\n    return node.parentNode;\n}\nexport function nextSibling(node) {\n    return node.nextSibling;\n}\nexport function tagName(elm) {\n    return elm.tagName;\n}\nexport function setTextContent(node, text) {\n    node.textContent = text;\n}\nexport function getTextContent(node) {\n    return node.textContent;\n}\nexport function isElement(node) {\n    return node.nodeType === 1;\n}\nexport function isText(node) {\n    return node.nodeType === 3;\n}\nexport function isComment(node) {\n    return node.nodeType === 8;\n}\n","import { isArray, isObject } from '../core/util.js';\nimport { createElement, createVNode, XMLNS, XML_NAMESPACE, XLINKNS } from './core.js';\nimport * as api from './domapi.js';\nvar colonChar = 58;\nvar xChar = 120;\nvar emptyNode = createVNode('', '');\nfunction isUndef(s) {\n    return s === undefined;\n}\nfunction isDef(s) {\n    return s !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var map = {};\n    for (var i = beginIdx; i <= endIdx; ++i) {\n        var key = children[i].key;\n        if (key !== undefined) {\n            if (process.env.NODE_ENV !== 'production') {\n                if (map[key] != null) {\n                    console.error(\"Duplicate key \" + key);\n                }\n            }\n            map[key] = i;\n        }\n    }\n    return map;\n}\nfunction sameVnode(vnode1, vnode2) {\n    var isSameKey = vnode1.key === vnode2.key;\n    var isSameTag = vnode1.tag === vnode2.tag;\n    return isSameTag && isSameKey;\n}\nfunction createElm(vnode) {\n    var i;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n        var elm = (vnode.elm = createElement(tag));\n        updateAttrs(emptyNode, vnode);\n        if (isArray(children)) {\n            for (i = 0; i < children.length; ++i) {\n                var ch = children[i];\n                if (ch != null) {\n                    api.appendChild(elm, createElm(ch));\n                }\n            }\n        }\n        else if (isDef(vnode.text) && !isObject(vnode.text)) {\n            api.appendChild(elm, api.createTextNode(vnode.text));\n        }\n    }\n    else {\n        vnode.elm = api.createTextNode(vnode.text);\n    }\n    return vnode.elm;\n}\nfunction addVnodes(parentElm, before, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            api.insertBefore(parentElm, createElm(ch), before);\n        }\n    }\n}\nfunction removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            if (isDef(ch.tag)) {\n                var parent_1 = api.parentNode(ch.elm);\n                api.removeChild(parent_1, ch.elm);\n            }\n            else {\n                api.removeChild(parentElm, ch.elm);\n            }\n        }\n    }\n}\nexport function updateAttrs(oldVnode, vnode) {\n    var key;\n    var elm = vnode.elm;\n    var oldAttrs = oldVnode && oldVnode.attrs || {};\n    var attrs = vnode.attrs || {};\n    if (oldAttrs === attrs) {\n        return;\n    }\n    for (key in attrs) {\n        var cur = attrs[key];\n        var old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, '');\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key === 'xmlns:xlink' || key === 'xmlns') {\n                    elm.setAttributeNS(XMLNS, key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    elm.setAttributeNS(XML_NAMESPACE, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    elm.setAttributeNS(XLINKNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nfunction updateChildren(parentElm, oldCh, newCh) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx;\n    var idxInOld;\n    var elmToMove;\n    var before;\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n        if (oldStartVnode == null) {\n            oldStartVnode = oldCh[++oldStartIdx];\n        }\n        else if (oldEndVnode == null) {\n            oldEndVnode = oldCh[--oldEndIdx];\n        }\n        else if (newStartVnode == null) {\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (newEndVnode == null) {\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newStartVnode)) {\n            patchVnode(oldStartVnode, newStartVnode);\n            oldStartVnode = oldCh[++oldStartIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (sameVnode(oldEndVnode, newEndVnode)) {\n            patchVnode(oldEndVnode, newEndVnode);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newEndVnode)) {\n            patchVnode(oldStartVnode, newEndVnode);\n            api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n            oldStartVnode = oldCh[++oldStartIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldEndVnode, newStartVnode)) {\n            patchVnode(oldEndVnode, newStartVnode);\n            api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else {\n            if (isUndef(oldKeyToIdx)) {\n                oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n            }\n            idxInOld = oldKeyToIdx[newStartVnode.key];\n            if (isUndef(idxInOld)) {\n                api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n            }\n            else {\n                elmToMove = oldCh[idxInOld];\n                if (elmToMove.tag !== newStartVnode.tag) {\n                    api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n                }\n                else {\n                    patchVnode(elmToMove, newStartVnode);\n                    oldCh[idxInOld] = undefined;\n                    api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                }\n            }\n            newStartVnode = newCh[++newStartIdx];\n        }\n    }\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n        if (oldStartIdx > oldEndIdx) {\n            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\n        }\n        else {\n            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n        }\n    }\n}\nfunction patchVnode(oldVnode, vnode) {\n    var elm = (vnode.elm = oldVnode.elm);\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (oldVnode === vnode) {\n        return;\n    }\n    updateAttrs(oldVnode, vnode);\n    if (isUndef(vnode.text)) {\n        if (isDef(oldCh) && isDef(ch)) {\n            if (oldCh !== ch) {\n                updateChildren(elm, oldCh, ch);\n            }\n        }\n        else if (isDef(ch)) {\n            if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, '');\n            }\n            addVnodes(elm, null, ch, 0, ch.length - 1);\n        }\n        else if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        else if (isDef(oldVnode.text)) {\n            api.setTextContent(elm, '');\n        }\n    }\n    else if (oldVnode.text !== vnode.text) {\n        if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        api.setTextContent(elm, vnode.text);\n    }\n}\nexport default function patch(oldVnode, vnode) {\n    if (sameVnode(oldVnode, vnode)) {\n        patchVnode(oldVnode, vnode);\n    }\n    else {\n        var elm = oldVnode.elm;\n        var parent_2 = api.parentNode(elm);\n        createElm(vnode);\n        if (parent_2 !== null) {\n            api.insertBefore(parent_2, vnode.elm, api.nextSibling(elm));\n            removeVnodes(parent_2, [oldVnode], 0, 0);\n        }\n    }\n    return vnode;\n}\n","import { brush, setClipPath, setGradient, setPattern } from './graphic.js';\nimport { createElement, createVNode, vNodeToString, getCssString, createBrushScope, createSVGVNode } from './core.js';\nimport { normalizeColor, encodeBase64, isGradient, isPattern } from './helper.js';\nimport { extend, keys, logError, map, noop, retrieve2 } from '../core/util.js';\nimport patch, { updateAttrs } from './patch.js';\nimport { getSize } from '../canvas/helper.js';\nvar svgId = 0;\nvar SVGPainter = (function () {\n    function SVGPainter(root, storage, opts) {\n        this.type = 'svg';\n        this.refreshHover = createMethodNotSupport('refreshHover');\n        this.configLayer = createMethodNotSupport('configLayer');\n        this.storage = storage;\n        this._opts = opts = extend({}, opts);\n        this.root = root;\n        this._id = 'zr' + svgId++;\n        this._oldVNode = createSVGVNode(opts.width, opts.height);\n        if (root && !opts.ssr) {\n            var viewport = this._viewport = document.createElement('div');\n            viewport.style.cssText = 'position:relative;overflow:hidden';\n            var svgDom = this._svgDom = this._oldVNode.elm = createElement('svg');\n            updateAttrs(null, this._oldVNode);\n            viewport.appendChild(svgDom);\n            root.appendChild(viewport);\n        }\n        this.resize(opts.width, opts.height);\n    }\n    SVGPainter.prototype.getType = function () {\n        return this.type;\n    };\n    SVGPainter.prototype.getViewportRoot = function () {\n        return this._viewport;\n    };\n    SVGPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    SVGPainter.prototype.getSvgDom = function () {\n        return this._svgDom;\n    };\n    SVGPainter.prototype.refresh = function () {\n        if (this.root) {\n            var vnode = this.renderToVNode({\n                willUpdate: true\n            });\n            vnode.attrs.style = 'position:absolute;left:0;top:0;user-select:none';\n            patch(this._oldVNode, vnode);\n            this._oldVNode = vnode;\n        }\n    };\n    SVGPainter.prototype.renderOneToVNode = function (el) {\n        return brush(el, createBrushScope(this._id));\n    };\n    SVGPainter.prototype.renderToVNode = function (opts) {\n        opts = opts || {};\n        var list = this.storage.getDisplayList(true);\n        var width = this._width;\n        var height = this._height;\n        var scope = createBrushScope(this._id);\n        scope.animation = opts.animation;\n        scope.willUpdate = opts.willUpdate;\n        scope.compress = opts.compress;\n        var children = [];\n        var bgVNode = this._bgVNode = createBackgroundVNode(width, height, this._backgroundColor, scope);\n        bgVNode && children.push(bgVNode);\n        var mainVNode = !opts.compress\n            ? (this._mainVNode = createVNode('g', 'main', {}, [])) : null;\n        this._paintList(list, scope, mainVNode ? mainVNode.children : children);\n        mainVNode && children.push(mainVNode);\n        var defs = map(keys(scope.defs), function (id) { return scope.defs[id]; });\n        if (defs.length) {\n            children.push(createVNode('defs', 'defs', {}, defs));\n        }\n        if (opts.animation) {\n            var animationCssStr = getCssString(scope.cssNodes, scope.cssAnims, { newline: true });\n            if (animationCssStr) {\n                var styleNode = createVNode('style', 'stl', {}, [], animationCssStr);\n                children.push(styleNode);\n            }\n        }\n        return createSVGVNode(width, height, children, opts.useViewBox);\n    };\n    SVGPainter.prototype.renderToString = function (opts) {\n        opts = opts || {};\n        return vNodeToString(this.renderToVNode({\n            animation: retrieve2(opts.cssAnimation, true),\n            willUpdate: false,\n            compress: true,\n            useViewBox: retrieve2(opts.useViewBox, true)\n        }), { newline: true });\n    };\n    SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n    };\n    SVGPainter.prototype.getSvgRoot = function () {\n        return this._mainVNode && this._mainVNode.elm;\n    };\n    SVGPainter.prototype._paintList = function (list, scope, out) {\n        var listLen = list.length;\n        var clipPathsGroupsStack = [];\n        var clipPathsGroupsStackDepth = 0;\n        var currentClipPathGroup;\n        var prevClipPaths;\n        var clipGroupNodeIdx = 0;\n        for (var i = 0; i < listLen; i++) {\n            var displayable = list[i];\n            if (!displayable.invisible) {\n                var clipPaths = displayable.__clipPaths;\n                var len = clipPaths && clipPaths.length || 0;\n                var prevLen = prevClipPaths && prevClipPaths.length || 0;\n                var lca = void 0;\n                for (lca = Math.max(len - 1, prevLen - 1); lca >= 0; lca--) {\n                    if (clipPaths && prevClipPaths\n                        && clipPaths[lca] === prevClipPaths[lca]) {\n                        break;\n                    }\n                }\n                for (var i_1 = prevLen - 1; i_1 > lca; i_1--) {\n                    clipPathsGroupsStackDepth--;\n                    currentClipPathGroup = clipPathsGroupsStack[clipPathsGroupsStackDepth - 1];\n                }\n                for (var i_2 = lca + 1; i_2 < len; i_2++) {\n                    var groupAttrs = {};\n                    setClipPath(clipPaths[i_2], groupAttrs, scope);\n                    var g = createVNode('g', 'clip-g-' + clipGroupNodeIdx++, groupAttrs, []);\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(g);\n                    clipPathsGroupsStack[clipPathsGroupsStackDepth++] = g;\n                    currentClipPathGroup = g;\n                }\n                prevClipPaths = clipPaths;\n                var ret = brush(displayable, scope);\n                if (ret) {\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(ret);\n                }\n            }\n        }\n    };\n    SVGPainter.prototype.resize = function (width, height) {\n        var opts = this._opts;\n        var root = this.root;\n        var viewport = this._viewport;\n        width != null && (opts.width = width);\n        height != null && (opts.height = height);\n        if (root && viewport) {\n            viewport.style.display = 'none';\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            viewport.style.display = '';\n        }\n        if (this._width !== width || this._height !== height) {\n            this._width = width;\n            this._height = height;\n            if (viewport) {\n                var viewportStyle = viewport.style;\n                viewportStyle.width = width + 'px';\n                viewportStyle.height = height + 'px';\n            }\n            if (!isPattern(this._backgroundColor)) {\n                var svgDom = this._svgDom;\n                if (svgDom) {\n                    svgDom.setAttribute('width', width);\n                    svgDom.setAttribute('height', height);\n                }\n                var bgEl = this._bgVNode && this._bgVNode.elm;\n                if (bgEl) {\n                    bgEl.setAttribute('width', width);\n                    bgEl.setAttribute('height', height);\n                }\n            }\n            else {\n                this.refresh();\n            }\n        }\n    };\n    SVGPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    SVGPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    SVGPainter.prototype.dispose = function () {\n        if (this.root) {\n            this.root.innerHTML = '';\n        }\n        this._svgDom =\n            this._viewport =\n                this.storage =\n                    this._oldVNode =\n                        this._bgVNode =\n                            this._mainVNode = null;\n    };\n    SVGPainter.prototype.clear = function () {\n        if (this._svgDom) {\n            this._svgDom.innerHTML = null;\n        }\n        this._oldVNode = null;\n    };\n    SVGPainter.prototype.toDataURL = function (base64) {\n        var str = this.renderToString();\n        var prefix = 'data:image/svg+xml;';\n        if (base64) {\n            str = encodeBase64(str);\n            return str && prefix + 'base64,' + str;\n        }\n        return prefix + 'charset=UTF-8,' + encodeURIComponent(str);\n    };\n    return SVGPainter;\n}());\nfunction createMethodNotSupport(method) {\n    return function () {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('In SVG mode painter not support method \"' + method + '\"');\n        }\n    };\n}\nfunction createBackgroundVNode(width, height, backgroundColor, scope) {\n    var bgVNode;\n    if (backgroundColor && backgroundColor !== 'none') {\n        bgVNode = createVNode('rect', 'bg', {\n            width: width,\n            height: height,\n            x: '0',\n            y: '0',\n            id: '0'\n        });\n        if (isGradient(backgroundColor)) {\n            setGradient({ fill: backgroundColor }, bgVNode.attrs, 'fill', scope);\n        }\n        else if (isPattern(backgroundColor)) {\n            setPattern({\n                style: {\n                    fill: backgroundColor\n                },\n                dirty: noop,\n                getBoundingRect: function () { return ({ width: width, height: height }); }\n            }, bgVNode.attrs, 'fill', scope);\n        }\n        else {\n            var _a = normalizeColor(backgroundColor), color = _a.color, opacity = _a.opacity;\n            bgVNode.attrs.fill = color;\n            opacity < 1 && (bgVNode.attrs['fill-opacity'] = opacity);\n        }\n    }\n    return bgVNode;\n}\nexport default SVGPainter;\n","import { RADIAN_TO_DEGREE, retrieve2, logError, isFunction } from '../core/util.js';\nimport { parse } from '../tool/color.js';\nimport env from '../core/env.js';\nvar mathRound = Math.round;\nexport function normalizeColor(color) {\n    var opacity;\n    if (!color || color === 'transparent') {\n        color = 'none';\n    }\n    else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n        var arr = parse(color);\n        if (arr) {\n            color = 'rgb(' + arr[0] + ',' + arr[1] + ',' + arr[2] + ')';\n            opacity = arr[3];\n        }\n    }\n    return {\n        color: color,\n        opacity: opacity == null ? 1 : opacity\n    };\n}\nvar EPSILON = 1e-4;\nexport function isAroundZero(transform) {\n    return transform < EPSILON && transform > -EPSILON;\n}\nexport function round3(transform) {\n    return mathRound(transform * 1e3) / 1e3;\n}\nexport function round4(transform) {\n    return mathRound(transform * 1e4) / 1e4;\n}\nexport function round1(transform) {\n    return mathRound(transform * 10) / 10;\n}\nexport function getMatrixStr(m) {\n    return 'matrix('\n        + round3(m[0]) + ','\n        + round3(m[1]) + ','\n        + round3(m[2]) + ','\n        + round3(m[3]) + ','\n        + round4(m[4]) + ','\n        + round4(m[5])\n        + ')';\n}\nexport var TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n};\nexport function adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n        y += lineHeight / 2;\n    }\n    else if (textBaseline === 'bottom') {\n        y -= lineHeight / 2;\n    }\n    return y;\n}\nexport function hasShadow(style) {\n    return style\n        && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n}\nexport function getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [\n        style.shadowColor,\n        (style.shadowBlur || 0).toFixed(2),\n        (style.shadowOffsetX || 0).toFixed(2),\n        (style.shadowOffsetY || 0).toFixed(2),\n        globalScale[0],\n        globalScale[1]\n    ].join(',');\n}\nexport function getClipPathsKey(clipPaths) {\n    var key = [];\n    if (clipPaths) {\n        for (var i = 0; i < clipPaths.length; i++) {\n            var clipPath = clipPaths[i];\n            key.push(clipPath.id);\n        }\n    }\n    return key.join(',');\n}\nexport function isImagePattern(val) {\n    return val && (!!val.image);\n}\nexport function isSVGPattern(val) {\n    return val && (!!val.svgElement);\n}\nexport function isPattern(val) {\n    return isImagePattern(val) || isSVGPattern(val);\n}\nexport function isLinearGradient(val) {\n    return val.type === 'linear';\n}\nexport function isRadialGradient(val) {\n    return val.type === 'radial';\n}\nexport function isGradient(val) {\n    return val && (val.type === 'linear'\n        || val.type === 'radial');\n}\nexport function getIdURL(id) {\n    return \"url(#\" + id + \")\";\n}\nexport function getPathPrecision(el) {\n    var scale = el.getGlobalScale();\n    var size = Math.max(scale[0], scale[1]);\n    return Math.max(Math.ceil(Math.log(size) / Math.log(10)), 1);\n}\nexport function getSRTTransformString(transform) {\n    var x = transform.x || 0;\n    var y = transform.y || 0;\n    var rotation = (transform.rotation || 0) * RADIAN_TO_DEGREE;\n    var scaleX = retrieve2(transform.scaleX, 1);\n    var scaleY = retrieve2(transform.scaleY, 1);\n    var skewX = transform.skewX || 0;\n    var skewY = transform.skewY || 0;\n    var res = [];\n    if (x || y) {\n        res.push(\"translate(\" + x + \"px,\" + y + \"px)\");\n    }\n    if (rotation) {\n        res.push(\"rotate(\" + rotation + \")\");\n    }\n    if (scaleX !== 1 || scaleY !== 1) {\n        res.push(\"scale(\" + scaleX + \",\" + scaleY + \")\");\n    }\n    if (skewX || skewY) {\n        res.push(\"skew(\" + mathRound(skewX * RADIAN_TO_DEGREE) + \"deg, \" + mathRound(skewY * RADIAN_TO_DEGREE) + \"deg)\");\n    }\n    return res.join(' ');\n}\nexport var encodeBase64 = (function () {\n    if (env.hasGlobalWindow && isFunction(window.btoa)) {\n        return function (str) {\n            return window.btoa(unescape(encodeURIComponent(str)));\n        };\n    }\n    if (typeof Buffer !== 'undefined') {\n        return function (str) {\n            return Buffer.from(str).toString('base64');\n        };\n    }\n    return function (str) {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Base64 isn\\'t natively supported in the current environment.');\n        }\n        return null;\n    };\n})();\n","import LRU from '../core/LRU.js';\nvar kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\nfunction clampCssByte(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\nfunction clampCssAngle(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\nfunction clampCssFloat(f) {\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\nfunction parseCssInt(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\nfunction parseCssFloat(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nvar colorCache = new LRU(20);\nvar lastRemovedArr = null;\nfunction putToCache(colorStr, rgbaArr) {\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\nexport function parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n    colorStr = colorStr + '';\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n    var strLen = str.length;\n    if (str.charAt(0) === '#') {\n        if (strLen === 4 || strLen === 5) {\n            var iv = parseInt(str.slice(1, 4), 16);\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8), (iv & 0xf0) | ((iv & 0xf0) >> 4), (iv & 0xf) | ((iv & 0xf) << 4), strLen === 5 ? parseInt(str.slice(4), 16) / 0xf : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (strLen === 7 || strLen === 9) {\n            var iv = parseInt(str.slice(1, 7), 16);\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, strLen === 9 ? parseInt(str.slice(7), 16) / 0xff : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        return;\n    }\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === strLen) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    return params.length === 3\n                        ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1)\n                        : setRgba(rgbaArr, 0, 0, 0, 1);\n                }\n                alpha = parseCssFloat(params.pop());\n            case 'rgb':\n                if (params.length >= 3) {\n                    setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), params.length === 3 ? alpha : parseCssFloat(params[3]));\n                    putToCache(colorStr, rgbaArr);\n                    return rgbaArr;\n                }\n                else {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n}\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n    rgba = rgba || [];\n    setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n    return rgba;\n}\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n    var vMin = Math.min(R, G, B);\n    var vMax = Math.max(R, G, B);\n    var delta = vMax - vMin;\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n        if (H < 0) {\n            H += 1;\n        }\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n    var hsla = [H * 360, S, L];\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n    return hsla;\n}\nexport function lift(color, level) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n            if (colorArr[i] > 255) {\n                colorArr[i] = 255;\n            }\n            else if (colorArr[i] < 0) {\n                colorArr[i] = 0;\n            }\n        }\n        return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\nexport function toHex(color) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n}\nexport function fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    out = out || [];\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n    return out;\n}\nexport var fastMapToColor = fastLerp;\nexport function lerp(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n    var color = stringify([\n        clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n        clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n        clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n        clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n    ], 'rgba');\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\nexport var mapToColor = lerp;\nexport function modifyHSL(color, h, s, l) {\n    var colorArr = parse(color);\n    if (color) {\n        colorArr = rgba2hsla(colorArr);\n        h != null && (colorArr[0] = clampCssAngle(h));\n        s != null && (colorArr[1] = parseCssFloat(s));\n        l != null && (colorArr[2] = parseCssFloat(l));\n        return stringify(hsla2rgba(colorArr), 'rgba');\n    }\n}\nexport function modifyAlpha(color, alpha) {\n    var colorArr = parse(color);\n    if (colorArr && alpha != null) {\n        colorArr[3] = clampCssFloat(alpha);\n        return stringify(colorArr, 'rgba');\n    }\n}\nexport function stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\nexport function lum(color, backgroundLum) {\n    var arr = parse(color);\n    return arr\n        ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255\n            + (1 - arr[3]) * backgroundLum\n        : 0;\n}\nexport function random() {\n    return stringify([\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255)\n    ], 'rgb');\n}\n","import { cubicSubdivide } from '../core/curve.js';\nimport PathProxy from '../core/PathProxy.js';\nvar CMD = PathProxy.CMD;\nfunction aroundEqual(a, b) {\n    return Math.abs(a - b) < 1e-5;\n}\nexport function pathToBezierCurves(path) {\n    var data = path.data;\n    var len = path.len();\n    var bezierArrayGroups = [];\n    var currentSubpath;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    function createNewSubpath(x, y) {\n        if (currentSubpath && currentSubpath.length > 2) {\n            bezierArrayGroups.push(currentSubpath);\n        }\n        currentSubpath = [x, y];\n    }\n    function addLine(x0, y0, x1, y1) {\n        if (!(aroundEqual(x0, x1) && aroundEqual(y0, y1))) {\n            currentSubpath.push(x0, y0, x1, y1, x1, y1);\n        }\n    }\n    function addArc(startAngle, endAngle, cx, cy, rx, ry) {\n        var delta = Math.abs(endAngle - startAngle);\n        var len = Math.tan(delta / 4) * 4 / 3;\n        var dir = endAngle < startAngle ? -1 : 1;\n        var c1 = Math.cos(startAngle);\n        var s1 = Math.sin(startAngle);\n        var c2 = Math.cos(endAngle);\n        var s2 = Math.sin(endAngle);\n        var x1 = c1 * rx + cx;\n        var y1 = s1 * ry + cy;\n        var x4 = c2 * rx + cx;\n        var y4 = s2 * ry + cy;\n        var hx = rx * len * dir;\n        var hy = ry * len * dir;\n        currentSubpath.push(x1 - hx * s1, y1 + hy * c1, x4 + hx * s2, y4 - hy * c2, x4, y4);\n    }\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n            if (cmd === CMD.L || cmd === CMD.C || cmd === CMD.Q) {\n                currentSubpath = [x0, y0];\n            }\n        }\n        switch (cmd) {\n            case CMD.M:\n                xi = x0 = data[i++];\n                yi = y0 = data[i++];\n                createNewSubpath(x0, y0);\n                break;\n            case CMD.L:\n                x1 = data[i++];\n                y1 = data[i++];\n                addLine(xi, yi, x1, y1);\n                xi = x1;\n                yi = y1;\n                break;\n            case CMD.C:\n                currentSubpath.push(data[i++], data[i++], data[i++], data[i++], xi = data[i++], yi = data[i++]);\n                break;\n            case CMD.Q:\n                x1 = data[i++];\n                y1 = data[i++];\n                x2 = data[i++];\n                y2 = data[i++];\n                currentSubpath.push(xi + 2 / 3 * (x1 - xi), yi + 2 / 3 * (y1 - yi), x2 + 2 / 3 * (x1 - x2), y2 + 2 / 3 * (y1 - y2), x2, y2);\n                xi = x2;\n                yi = y2;\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var startAngle = data[i++];\n                var endAngle = data[i++] + startAngle;\n                i += 1;\n                var anticlockwise = !data[i++];\n                x1 = Math.cos(startAngle) * rx + cx;\n                y1 = Math.sin(startAngle) * ry + cy;\n                if (isFirst) {\n                    x0 = x1;\n                    y0 = y1;\n                    createNewSubpath(x0, y0);\n                }\n                else {\n                    addLine(xi, yi, x1, y1);\n                }\n                xi = Math.cos(endAngle) * rx + cx;\n                yi = Math.sin(endAngle) * ry + cy;\n                var step = (anticlockwise ? -1 : 1) * Math.PI / 2;\n                for (var angle = startAngle; anticlockwise ? angle > endAngle : angle < endAngle; angle += step) {\n                    var nextAngle = anticlockwise ? Math.max(angle + step, endAngle)\n                        : Math.min(angle + step, endAngle);\n                    addArc(angle, nextAngle, cx, cy, rx, ry);\n                }\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                x1 = x0 + data[i++];\n                y1 = y0 + data[i++];\n                createNewSubpath(x1, y0);\n                addLine(x1, y0, x1, y1);\n                addLine(x1, y1, x0, y1);\n                addLine(x0, y1, x0, y0);\n                addLine(x0, y0, x1, y0);\n                break;\n            case CMD.Z:\n                currentSubpath && addLine(xi, yi, x0, y0);\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (currentSubpath && currentSubpath.length > 2) {\n        bezierArrayGroups.push(currentSubpath);\n    }\n    return bezierArrayGroups;\n}\nfunction adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, out, scale) {\n    if (aroundEqual(x0, x1) && aroundEqual(y0, y1) && aroundEqual(x2, x3) && aroundEqual(y2, y3)) {\n        out.push(x3, y3);\n        return;\n    }\n    var PIXEL_DISTANCE = 2 / scale;\n    var PIXEL_DISTANCE_SQR = PIXEL_DISTANCE * PIXEL_DISTANCE;\n    var dx = x3 - x0;\n    var dy = y3 - y0;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    dx /= d;\n    dy /= d;\n    var dx1 = x1 - x0;\n    var dy1 = y1 - y0;\n    var dx2 = x2 - x3;\n    var dy2 = y2 - y3;\n    var cp1LenSqr = dx1 * dx1 + dy1 * dy1;\n    var cp2LenSqr = dx2 * dx2 + dy2 * dy2;\n    if (cp1LenSqr < PIXEL_DISTANCE_SQR && cp2LenSqr < PIXEL_DISTANCE_SQR) {\n        out.push(x3, y3);\n        return;\n    }\n    var projLen1 = dx * dx1 + dy * dy1;\n    var projLen2 = -dx * dx2 - dy * dy2;\n    var d1Sqr = cp1LenSqr - projLen1 * projLen1;\n    var d2Sqr = cp2LenSqr - projLen2 * projLen2;\n    if (d1Sqr < PIXEL_DISTANCE_SQR && projLen1 >= 0\n        && d2Sqr < PIXEL_DISTANCE_SQR && projLen2 >= 0) {\n        out.push(x3, y3);\n        return;\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    cubicSubdivide(x0, x1, x2, x3, 0.5, tmpSegX);\n    cubicSubdivide(y0, y1, y2, y3, 0.5, tmpSegY);\n    adpativeBezier(tmpSegX[0], tmpSegY[0], tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], tmpSegX[3], tmpSegY[3], out, scale);\n    adpativeBezier(tmpSegX[4], tmpSegY[4], tmpSegX[5], tmpSegY[5], tmpSegX[6], tmpSegY[6], tmpSegX[7], tmpSegY[7], out, scale);\n}\nexport function pathToPolygons(path, scale) {\n    var bezierArrayGroups = pathToBezierCurves(path);\n    var polygons = [];\n    scale = scale || 1;\n    for (var i = 0; i < bezierArrayGroups.length; i++) {\n        var beziers = bezierArrayGroups[i];\n        var polygon = [];\n        var x0 = beziers[0];\n        var y0 = beziers[1];\n        polygon.push(x0, y0);\n        for (var k = 2; k < beziers.length;) {\n            var x1 = beziers[k++];\n            var y1 = beziers[k++];\n            var x2 = beziers[k++];\n            var y2 = beziers[k++];\n            var x3 = beziers[k++];\n            var y3 = beziers[k++];\n            adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, polygon, scale);\n            x0 = x3;\n            y0 = y3;\n        }\n        polygons.push(polygon);\n    }\n    return polygons;\n}\n","import { fromPoints } from '../core/bbox.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Point from '../core/Point.js';\nimport { map } from '../core/util.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Sector from '../graphic/shape/Sector.js';\nimport { pathToPolygons } from './convertPath.js';\nimport { clonePath } from './path.js';\nfunction getDividingGrids(dimSize, rowDim, count) {\n    var rowSize = dimSize[rowDim];\n    var columnSize = dimSize[1 - rowDim];\n    var ratio = Math.abs(rowSize / columnSize);\n    var rowCount = Math.ceil(Math.sqrt(ratio * count));\n    var columnCount = Math.floor(count / rowCount);\n    if (columnCount === 0) {\n        columnCount = 1;\n        rowCount = count;\n    }\n    var grids = [];\n    for (var i = 0; i < rowCount; i++) {\n        grids.push(columnCount);\n    }\n    var currentCount = rowCount * columnCount;\n    var remained = count - currentCount;\n    if (remained > 0) {\n        for (var i = 0; i < remained; i++) {\n            grids[i % rowCount] += 1;\n        }\n    }\n    return grids;\n}\nfunction divideSector(sectorShape, count, outShapes) {\n    var r0 = sectorShape.r0;\n    var r = sectorShape.r;\n    var startAngle = sectorShape.startAngle;\n    var endAngle = sectorShape.endAngle;\n    var angle = Math.abs(endAngle - startAngle);\n    var arcLen = angle * r;\n    var deltaR = r - r0;\n    var isAngleRow = arcLen > Math.abs(deltaR);\n    var grids = getDividingGrids([arcLen, deltaR], isAngleRow ? 0 : 1, count);\n    var rowSize = (isAngleRow ? angle : deltaR) / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = (isAngleRow ? deltaR : angle) / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            if (isAngleRow) {\n                newShape.startAngle = startAngle + rowSize * row;\n                newShape.endAngle = startAngle + rowSize * (row + 1);\n                newShape.r0 = r0 + columnSize * column;\n                newShape.r = r0 + columnSize * (column + 1);\n            }\n            else {\n                newShape.startAngle = startAngle + columnSize * column;\n                newShape.endAngle = startAngle + columnSize * (column + 1);\n                newShape.r0 = r0 + rowSize * row;\n                newShape.r = r0 + rowSize * (row + 1);\n            }\n            newShape.clockwise = sectorShape.clockwise;\n            newShape.cx = sectorShape.cx;\n            newShape.cy = sectorShape.cy;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction divideRect(rectShape, count, outShapes) {\n    var width = rectShape.width;\n    var height = rectShape.height;\n    var isHorizontalRow = width > height;\n    var grids = getDividingGrids([width, height], isHorizontalRow ? 0 : 1, count);\n    var rowSizeDim = isHorizontalRow ? 'width' : 'height';\n    var columnSizeDim = isHorizontalRow ? 'height' : 'width';\n    var rowDim = isHorizontalRow ? 'x' : 'y';\n    var columnDim = isHorizontalRow ? 'y' : 'x';\n    var rowSize = rectShape[rowSizeDim] / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = rectShape[columnSizeDim] / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            newShape[rowDim] = row * rowSize;\n            newShape[columnDim] = column * columnSize;\n            newShape[rowSizeDim] = rowSize;\n            newShape[columnSizeDim] = columnSize;\n            newShape.x += rectShape.x;\n            newShape.y += rectShape.y;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction crossProduct2d(x1, y1, x2, y2) {\n    return x1 * y2 - x2 * y1;\n}\nfunction lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n    var mx = a2x - a1x;\n    var my = a2y - a1y;\n    var nx = b2x - b1x;\n    var ny = b2y - b1y;\n    var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n    if (Math.abs(nmCrossProduct) < 1e-6) {\n        return null;\n    }\n    var b1a1x = a1x - b1x;\n    var b1a1y = a1y - b1y;\n    var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n    if (p < 0 || p > 1) {\n        return null;\n    }\n    return new Point(p * mx + a1x, p * my + a1y);\n}\nfunction projPtOnLine(pt, lineA, lineB) {\n    var dir = new Point();\n    Point.sub(dir, lineB, lineA);\n    dir.normalize();\n    var dir2 = new Point();\n    Point.sub(dir2, pt, lineA);\n    var len = dir2.dot(dir);\n    return len;\n}\nfunction addToPoly(poly, pt) {\n    var last = poly[poly.length - 1];\n    if (last && last[0] === pt[0] && last[1] === pt[1]) {\n        return;\n    }\n    poly.push(pt);\n}\nfunction splitPolygonByLine(points, lineA, lineB) {\n    var len = points.length;\n    var intersections = [];\n    for (var i = 0; i < len; i++) {\n        var p0 = points[i];\n        var p1 = points[(i + 1) % len];\n        var intersectionPt = lineLineIntersect(p0[0], p0[1], p1[0], p1[1], lineA.x, lineA.y, lineB.x, lineB.y);\n        if (intersectionPt) {\n            intersections.push({\n                projPt: projPtOnLine(intersectionPt, lineA, lineB),\n                pt: intersectionPt,\n                idx: i\n            });\n        }\n    }\n    if (intersections.length < 2) {\n        return [{ points: points }, { points: points }];\n    }\n    intersections.sort(function (a, b) {\n        return a.projPt - b.projPt;\n    });\n    var splitPt0 = intersections[0];\n    var splitPt1 = intersections[intersections.length - 1];\n    if (splitPt1.idx < splitPt0.idx) {\n        var tmp = splitPt0;\n        splitPt0 = splitPt1;\n        splitPt1 = tmp;\n    }\n    var splitPt0Arr = [splitPt0.pt.x, splitPt0.pt.y];\n    var splitPt1Arr = [splitPt1.pt.x, splitPt1.pt.y];\n    var newPolyA = [splitPt0Arr];\n    var newPolyB = [splitPt1Arr];\n    for (var i = splitPt0.idx + 1; i <= splitPt1.idx; i++) {\n        addToPoly(newPolyA, points[i].slice());\n    }\n    addToPoly(newPolyA, splitPt1Arr);\n    addToPoly(newPolyA, splitPt0Arr);\n    for (var i = splitPt1.idx + 1; i <= splitPt0.idx + len; i++) {\n        addToPoly(newPolyB, points[i % len].slice());\n    }\n    addToPoly(newPolyB, splitPt0Arr);\n    addToPoly(newPolyB, splitPt1Arr);\n    return [{\n            points: newPolyA\n        }, {\n            points: newPolyB\n        }];\n}\nfunction binaryDividePolygon(polygonShape) {\n    var points = polygonShape.points;\n    var min = [];\n    var max = [];\n    fromPoints(points, min, max);\n    var boundingRect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    var width = boundingRect.width;\n    var height = boundingRect.height;\n    var x = boundingRect.x;\n    var y = boundingRect.y;\n    var pt0 = new Point();\n    var pt1 = new Point();\n    if (width > height) {\n        pt0.x = pt1.x = x + width / 2;\n        pt0.y = y;\n        pt1.y = y + height;\n    }\n    else {\n        pt0.y = pt1.y = y + height / 2;\n        pt0.x = x;\n        pt1.x = x + width;\n    }\n    return splitPolygonByLine(points, pt0, pt1);\n}\nfunction binaryDivideRecursive(divider, shape, count, out) {\n    if (count === 1) {\n        out.push(shape);\n    }\n    else {\n        var mid = Math.floor(count / 2);\n        var sub = divider(shape);\n        binaryDivideRecursive(divider, sub[0], mid, out);\n        binaryDivideRecursive(divider, sub[1], count - mid, out);\n    }\n    return out;\n}\nexport function clone(path, count) {\n    var paths = [];\n    for (var i = 0; i < count; i++) {\n        paths.push(clonePath(path));\n    }\n    return paths;\n}\nfunction copyPathProps(source, target) {\n    target.setStyle(source.style);\n    target.z = source.z;\n    target.z2 = source.z2;\n    target.zlevel = source.zlevel;\n}\nfunction polygonConvert(points) {\n    var out = [];\n    for (var i = 0; i < points.length;) {\n        out.push([points[i++], points[i++]]);\n    }\n    return out;\n}\nexport function split(path, count) {\n    var outShapes = [];\n    var shape = path.shape;\n    var OutShapeCtor;\n    switch (path.type) {\n        case 'rect':\n            divideRect(shape, count, outShapes);\n            OutShapeCtor = Rect;\n            break;\n        case 'sector':\n            divideSector(shape, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        case 'circle':\n            divideSector({\n                r0: 0, r: shape.r, startAngle: 0, endAngle: Math.PI * 2,\n                cx: shape.cx, cy: shape.cy\n            }, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        default:\n            var m = path.getComputedTransform();\n            var scale = m ? Math.sqrt(Math.max(m[0] * m[0] + m[1] * m[1], m[2] * m[2] + m[3] * m[3])) : 1;\n            var polygons = map(pathToPolygons(path.getUpdatedPathProxy(), scale), function (poly) { return polygonConvert(poly); });\n            var polygonCount = polygons.length;\n            if (polygonCount === 0) {\n                binaryDivideRecursive(binaryDividePolygon, {\n                    points: polygons[0]\n                }, count, outShapes);\n            }\n            else if (polygonCount === count) {\n                for (var i = 0; i < polygonCount; i++) {\n                    outShapes.push({\n                        points: polygons[i]\n                    });\n                }\n            }\n            else {\n                var totalArea_1 = 0;\n                var items = map(polygons, function (poly) {\n                    var min = [];\n                    var max = [];\n                    fromPoints(poly, min, max);\n                    var area = (max[1] - min[1]) * (max[0] - min[0]);\n                    totalArea_1 += area;\n                    return { poly: poly, area: area };\n                });\n                items.sort(function (a, b) { return b.area - a.area; });\n                var left = count;\n                for (var i = 0; i < polygonCount; i++) {\n                    var item = items[i];\n                    if (left <= 0) {\n                        break;\n                    }\n                    var selfCount = i === polygonCount - 1\n                        ? left\n                        : Math.ceil(item.area / totalArea_1 * count);\n                    if (selfCount < 0) {\n                        continue;\n                    }\n                    binaryDivideRecursive(binaryDividePolygon, {\n                        points: item.poly\n                    }, selfCount, outShapes);\n                    left -= selfCount;\n                }\n                ;\n            }\n            OutShapeCtor = Polygon;\n            break;\n    }\n    if (!OutShapeCtor) {\n        return clone(path, count);\n    }\n    var out = [];\n    for (var i = 0; i < outShapes.length; i++) {\n        var subPath = new OutShapeCtor();\n        subPath.setShape(outShapes[i]);\n        copyPathProps(path, subPath);\n        out.push(subPath);\n    }\n    return out;\n}\n","import { cubicSubdivide } from '../core/curve.js';\nimport Path from '../graphic/Path.js';\nimport { defaults, map } from '../core/util.js';\nimport { lerp } from '../core/vector.js';\nimport { clonePath } from './path.js';\nimport Transformable from '../core/Transformable.js';\nimport { split } from './dividePath.js';\nimport { pathToBezierCurves } from './convertPath.js';\nfunction alignSubpath(subpath1, subpath2) {\n    var len1 = subpath1.length;\n    var len2 = subpath2.length;\n    if (len1 === len2) {\n        return [subpath1, subpath2];\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    var shorterPath = len1 < len2 ? subpath1 : subpath2;\n    var shorterLen = Math.min(len1, len2);\n    var diff = Math.abs(len2 - len1) / 6;\n    var shorterBezierCount = (shorterLen - 2) / 6;\n    var eachCurveSubDivCount = Math.ceil(diff / shorterBezierCount) + 1;\n    var newSubpath = [shorterPath[0], shorterPath[1]];\n    var remained = diff;\n    for (var i = 2; i < shorterLen;) {\n        var x0 = shorterPath[i - 2];\n        var y0 = shorterPath[i - 1];\n        var x1 = shorterPath[i++];\n        var y1 = shorterPath[i++];\n        var x2 = shorterPath[i++];\n        var y2 = shorterPath[i++];\n        var x3 = shorterPath[i++];\n        var y3 = shorterPath[i++];\n        if (remained <= 0) {\n            newSubpath.push(x1, y1, x2, y2, x3, y3);\n            continue;\n        }\n        var actualSubDivCount = Math.min(remained, eachCurveSubDivCount - 1) + 1;\n        for (var k = 1; k <= actualSubDivCount; k++) {\n            var p = k / actualSubDivCount;\n            cubicSubdivide(x0, x1, x2, x3, p, tmpSegX);\n            cubicSubdivide(y0, y1, y2, y3, p, tmpSegY);\n            x0 = tmpSegX[3];\n            y0 = tmpSegY[3];\n            newSubpath.push(tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], x0, y0);\n            x1 = tmpSegX[5];\n            y1 = tmpSegY[5];\n            x2 = tmpSegX[6];\n            y2 = tmpSegY[6];\n        }\n        remained -= actualSubDivCount - 1;\n    }\n    return shorterPath === subpath1 ? [newSubpath, subpath2] : [subpath1, newSubpath];\n}\nfunction createSubpath(lastSubpathSubpath, otherSubpath) {\n    var len = lastSubpathSubpath.length;\n    var lastX = lastSubpathSubpath[len - 2];\n    var lastY = lastSubpathSubpath[len - 1];\n    var newSubpath = [];\n    for (var i = 0; i < otherSubpath.length;) {\n        newSubpath[i++] = lastX;\n        newSubpath[i++] = lastY;\n    }\n    return newSubpath;\n}\nexport function alignBezierCurves(array1, array2) {\n    var _a;\n    var lastSubpath1;\n    var lastSubpath2;\n    var newArray1 = [];\n    var newArray2 = [];\n    for (var i = 0; i < Math.max(array1.length, array2.length); i++) {\n        var subpath1 = array1[i];\n        var subpath2 = array2[i];\n        var newSubpath1 = void 0;\n        var newSubpath2 = void 0;\n        if (!subpath1) {\n            newSubpath1 = createSubpath(lastSubpath1 || subpath2, subpath2);\n            newSubpath2 = subpath2;\n        }\n        else if (!subpath2) {\n            newSubpath2 = createSubpath(lastSubpath2 || subpath1, subpath1);\n            newSubpath1 = subpath1;\n        }\n        else {\n            _a = alignSubpath(subpath1, subpath2), newSubpath1 = _a[0], newSubpath2 = _a[1];\n            lastSubpath1 = newSubpath1;\n            lastSubpath2 = newSubpath2;\n        }\n        newArray1.push(newSubpath1);\n        newArray2.push(newSubpath2);\n    }\n    return [newArray1, newArray2];\n}\nexport function centroid(array) {\n    var signedArea = 0;\n    var cx = 0;\n    var cy = 0;\n    var len = array.length;\n    for (var i = 0, j = len - 2; i < len; j = i, i += 2) {\n        var x0 = array[j];\n        var y0 = array[j + 1];\n        var x1 = array[i];\n        var y1 = array[i + 1];\n        var a = x0 * y1 - x1 * y0;\n        signedArea += a;\n        cx += (x0 + x1) * a;\n        cy += (y0 + y1) * a;\n    }\n    if (signedArea === 0) {\n        return [array[0] || 0, array[1] || 0];\n    }\n    return [cx / signedArea / 3, cy / signedArea / 3, signedArea];\n}\nfunction findBestRingOffset(fromSubBeziers, toSubBeziers, fromCp, toCp) {\n    var bezierCount = (fromSubBeziers.length - 2) / 6;\n    var bestScore = Infinity;\n    var bestOffset = 0;\n    var len = fromSubBeziers.length;\n    var len2 = len - 2;\n    for (var offset = 0; offset < bezierCount; offset++) {\n        var cursorOffset = offset * 6;\n        var score = 0;\n        for (var k = 0; k < len; k += 2) {\n            var idx = k === 0 ? cursorOffset : ((cursorOffset + k - 2) % len2 + 2);\n            var x0 = fromSubBeziers[idx] - fromCp[0];\n            var y0 = fromSubBeziers[idx + 1] - fromCp[1];\n            var x1 = toSubBeziers[k] - toCp[0];\n            var y1 = toSubBeziers[k + 1] - toCp[1];\n            var dx = x1 - x0;\n            var dy = y1 - y0;\n            score += dx * dx + dy * dy;\n        }\n        if (score < bestScore) {\n            bestScore = score;\n            bestOffset = offset;\n        }\n    }\n    return bestOffset;\n}\nfunction reverse(array) {\n    var newArr = [];\n    var len = array.length;\n    for (var i = 0; i < len; i += 2) {\n        newArr[i] = array[len - i - 2];\n        newArr[i + 1] = array[len - i - 1];\n    }\n    return newArr;\n}\nfunction findBestMorphingRotation(fromArr, toArr, searchAngleIteration, searchAngleRange) {\n    var result = [];\n    var fromNeedsReverse;\n    for (var i = 0; i < fromArr.length; i++) {\n        var fromSubpathBezier = fromArr[i];\n        var toSubpathBezier = toArr[i];\n        var fromCp = centroid(fromSubpathBezier);\n        var toCp = centroid(toSubpathBezier);\n        if (fromNeedsReverse == null) {\n            fromNeedsReverse = fromCp[2] < 0 !== toCp[2] < 0;\n        }\n        var newFromSubpathBezier = [];\n        var newToSubpathBezier = [];\n        var bestAngle = 0;\n        var bestScore = Infinity;\n        var tmpArr = [];\n        var len = fromSubpathBezier.length;\n        if (fromNeedsReverse) {\n            fromSubpathBezier = reverse(fromSubpathBezier);\n        }\n        var offset = findBestRingOffset(fromSubpathBezier, toSubpathBezier, fromCp, toCp) * 6;\n        var len2 = len - 2;\n        for (var k = 0; k < len2; k += 2) {\n            var idx = (offset + k) % len2 + 2;\n            newFromSubpathBezier[k + 2] = fromSubpathBezier[idx] - fromCp[0];\n            newFromSubpathBezier[k + 3] = fromSubpathBezier[idx + 1] - fromCp[1];\n        }\n        newFromSubpathBezier[0] = fromSubpathBezier[offset] - fromCp[0];\n        newFromSubpathBezier[1] = fromSubpathBezier[offset + 1] - fromCp[1];\n        if (searchAngleIteration > 0) {\n            var step = searchAngleRange / searchAngleIteration;\n            for (var angle = -searchAngleRange / 2; angle <= searchAngleRange / 2; angle += step) {\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                var score = 0;\n                for (var k = 0; k < fromSubpathBezier.length; k += 2) {\n                    var x0 = newFromSubpathBezier[k];\n                    var y0 = newFromSubpathBezier[k + 1];\n                    var x1 = toSubpathBezier[k] - toCp[0];\n                    var y1 = toSubpathBezier[k + 1] - toCp[1];\n                    var newX1 = x1 * ca - y1 * sa;\n                    var newY1 = x1 * sa + y1 * ca;\n                    tmpArr[k] = newX1;\n                    tmpArr[k + 1] = newY1;\n                    var dx = newX1 - x0;\n                    var dy = newY1 - y0;\n                    score += dx * dx + dy * dy;\n                }\n                if (score < bestScore) {\n                    bestScore = score;\n                    bestAngle = angle;\n                    for (var m = 0; m < tmpArr.length; m++) {\n                        newToSubpathBezier[m] = tmpArr[m];\n                    }\n                }\n            }\n        }\n        else {\n            for (var i_1 = 0; i_1 < len; i_1 += 2) {\n                newToSubpathBezier[i_1] = toSubpathBezier[i_1] - toCp[0];\n                newToSubpathBezier[i_1 + 1] = toSubpathBezier[i_1 + 1] - toCp[1];\n            }\n        }\n        result.push({\n            from: newFromSubpathBezier,\n            to: newToSubpathBezier,\n            fromCp: fromCp,\n            toCp: toCp,\n            rotation: -bestAngle\n        });\n    }\n    return result;\n}\nexport function isCombineMorphing(path) {\n    return path.__isCombineMorphing;\n}\nexport function isMorphing(el) {\n    return el.__morphT >= 0;\n}\nvar SAVED_METHOD_PREFIX = '__mOriginal_';\nfunction saveAndModifyMethod(obj, methodName, modifiers) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    var originalMethod = obj[savedMethodName] || obj[methodName];\n    if (!obj[savedMethodName]) {\n        obj[savedMethodName] = obj[methodName];\n    }\n    var replace = modifiers.replace;\n    var after = modifiers.after;\n    var before = modifiers.before;\n    obj[methodName] = function () {\n        var args = arguments;\n        var res;\n        before && before.apply(this, args);\n        if (replace) {\n            res = replace.apply(this, args);\n        }\n        else {\n            res = originalMethod.apply(this, args);\n        }\n        after && after.apply(this, args);\n        return res;\n    };\n}\nfunction restoreMethod(obj, methodName) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    if (obj[savedMethodName]) {\n        obj[methodName] = obj[savedMethodName];\n        obj[savedMethodName] = null;\n    }\n}\nfunction applyTransformOnBeziers(bezierCurves, mm) {\n    for (var i = 0; i < bezierCurves.length; i++) {\n        var subBeziers = bezierCurves[i];\n        for (var k = 0; k < subBeziers.length;) {\n            var x = subBeziers[k];\n            var y = subBeziers[k + 1];\n            subBeziers[k++] = mm[0] * x + mm[2] * y + mm[4];\n            subBeziers[k++] = mm[1] * x + mm[3] * y + mm[5];\n        }\n    }\n}\nfunction prepareMorphPath(fromPath, toPath) {\n    var fromPathProxy = fromPath.getUpdatedPathProxy();\n    var toPathProxy = toPath.getUpdatedPathProxy();\n    var _a = alignBezierCurves(pathToBezierCurves(fromPathProxy), pathToBezierCurves(toPathProxy)), fromBezierCurves = _a[0], toBezierCurves = _a[1];\n    var fromPathTransform = fromPath.getComputedTransform();\n    var toPathTransform = toPath.getComputedTransform();\n    function updateIdentityTransform() {\n        this.transform = null;\n    }\n    fromPathTransform && applyTransformOnBeziers(fromBezierCurves, fromPathTransform);\n    toPathTransform && applyTransformOnBeziers(toBezierCurves, toPathTransform);\n    saveAndModifyMethod(toPath, 'updateTransform', { replace: updateIdentityTransform });\n    toPath.transform = null;\n    var morphingData = findBestMorphingRotation(fromBezierCurves, toBezierCurves, 10, Math.PI);\n    var tmpArr = [];\n    saveAndModifyMethod(toPath, 'buildPath', { replace: function (path) {\n            var t = toPath.__morphT;\n            var onet = 1 - t;\n            var newCp = [];\n            for (var i = 0; i < morphingData.length; i++) {\n                var item = morphingData[i];\n                var from = item.from;\n                var to = item.to;\n                var angle = item.rotation * t;\n                var fromCp = item.fromCp;\n                var toCp = item.toCp;\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                lerp(newCp, fromCp, toCp, t);\n                for (var m = 0; m < from.length; m += 2) {\n                    var x0_1 = from[m];\n                    var y0_1 = from[m + 1];\n                    var x1 = to[m];\n                    var y1 = to[m + 1];\n                    var x = x0_1 * onet + x1 * t;\n                    var y = y0_1 * onet + y1 * t;\n                    tmpArr[m] = (x * ca - y * sa) + newCp[0];\n                    tmpArr[m + 1] = (x * sa + y * ca) + newCp[1];\n                }\n                var x0 = tmpArr[0];\n                var y0 = tmpArr[1];\n                path.moveTo(x0, y0);\n                for (var m = 2; m < from.length;) {\n                    var x1 = tmpArr[m++];\n                    var y1 = tmpArr[m++];\n                    var x2 = tmpArr[m++];\n                    var y2 = tmpArr[m++];\n                    var x3 = tmpArr[m++];\n                    var y3 = tmpArr[m++];\n                    if (x0 === x1 && y0 === y1 && x2 === x3 && y2 === y3) {\n                        path.lineTo(x3, y3);\n                    }\n                    else {\n                        path.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    }\n                    x0 = x3;\n                    y0 = y3;\n                }\n            }\n        } });\n}\nexport function morphPath(fromPath, toPath, animationOpts) {\n    if (!fromPath || !toPath) {\n        return toPath;\n    }\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    prepareMorphPath(fromPath, toPath);\n    toPath.__morphT = 0;\n    function restoreToPath() {\n        restoreMethod(toPath, 'buildPath');\n        restoreMethod(toPath, 'updateTransform');\n        toPath.__morphT = -1;\n        toPath.createPathProxy();\n        toPath.dirtyShape();\n    }\n    toPath.animateTo({\n        __morphT: 1\n    }, defaults({\n        during: function (p) {\n            toPath.dirtyShape();\n            oldDuring && oldDuring(p);\n        },\n        done: function () {\n            restoreToPath();\n            oldDone && oldDone();\n        }\n    }, animationOpts));\n    return toPath;\n}\nfunction hilbert(x, y, minX, minY, maxX, maxY) {\n    var bits = 16;\n    x = (maxX === minX) ? 0 : Math.round(32767 * (x - minX) / (maxX - minX));\n    y = (maxY === minY) ? 0 : Math.round(32767 * (y - minY) / (maxY - minY));\n    var d = 0;\n    var tmp;\n    for (var s = (1 << bits) / 2; s > 0; s /= 2) {\n        var rx = 0;\n        var ry = 0;\n        if ((x & s) > 0) {\n            rx = 1;\n        }\n        if ((y & s) > 0) {\n            ry = 1;\n        }\n        d += s * s * ((3 * rx) ^ ry);\n        if (ry === 0) {\n            if (rx === 1) {\n                x = s - 1 - x;\n                y = s - 1 - y;\n            }\n            tmp = x;\n            x = y;\n            y = tmp;\n        }\n    }\n    return d;\n}\nfunction sortPaths(pathList) {\n    var xMin = Infinity;\n    var yMin = Infinity;\n    var xMax = -Infinity;\n    var yMax = -Infinity;\n    var cps = map(pathList, function (path) {\n        var rect = path.getBoundingRect();\n        var m = path.getComputedTransform();\n        var x = rect.x + rect.width / 2 + (m ? m[4] : 0);\n        var y = rect.y + rect.height / 2 + (m ? m[5] : 0);\n        xMin = Math.min(x, xMin);\n        yMin = Math.min(y, yMin);\n        xMax = Math.max(x, xMax);\n        yMax = Math.max(y, yMax);\n        return [x, y];\n    });\n    var items = map(cps, function (cp, idx) {\n        return {\n            cp: cp,\n            z: hilbert(cp[0], cp[1], xMin, yMin, xMax, yMax),\n            path: pathList[idx]\n        };\n    });\n    return items.sort(function (a, b) { return a.z - b.z; }).map(function (item) { return item.path; });\n}\n;\nfunction defaultDividePath(param) {\n    return split(param.path, param.count);\n}\nfunction createEmptyReturn() {\n    return {\n        fromIndividuals: [],\n        toIndividuals: [],\n        count: 0\n    };\n}\nexport function combineMorph(fromList, toPath, animationOpts) {\n    var fromPathList = [];\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    addFromPath(fromList);\n    var separateCount = fromPathList.length;\n    if (!separateCount) {\n        return createEmptyReturn();\n    }\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    var toSubPathList = dividePath({\n        path: toPath, count: separateCount\n    });\n    if (toSubPathList.length !== separateCount) {\n        console.error('Invalid morphing: unmatched splitted path');\n        return createEmptyReturn();\n    }\n    fromPathList = sortPaths(fromPathList);\n    toSubPathList = sortPaths(toSubPathList);\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    var individualDelay = animationOpts.individualDelay;\n    var identityTransform = new Transformable();\n    for (var i = 0; i < separateCount; i++) {\n        var from = fromPathList[i];\n        var to = toSubPathList[i];\n        to.parent = toPath;\n        to.copyTransform(identityTransform);\n        if (!individualDelay) {\n            prepareMorphPath(from, to);\n        }\n    }\n    toPath.__isCombineMorphing = true;\n    toPath.childrenRef = function () {\n        return toSubPathList;\n    };\n    function addToSubPathListToZr(zr) {\n        for (var i = 0; i < toSubPathList.length; i++) {\n            toSubPathList[i].addSelfToZr(zr);\n        }\n    }\n    saveAndModifyMethod(toPath, 'addSelfToZr', {\n        after: function (zr) {\n            addToSubPathListToZr(zr);\n        }\n    });\n    saveAndModifyMethod(toPath, 'removeSelfFromZr', {\n        after: function (zr) {\n            for (var i = 0; i < toSubPathList.length; i++) {\n                toSubPathList[i].removeSelfFromZr(zr);\n            }\n        }\n    });\n    function restoreToPath() {\n        toPath.__isCombineMorphing = false;\n        toPath.__morphT = -1;\n        toPath.childrenRef = null;\n        restoreMethod(toPath, 'addSelfToZr');\n        restoreMethod(toPath, 'removeSelfFromZr');\n    }\n    var toLen = toSubPathList.length;\n    if (individualDelay) {\n        var animating_1 = toLen;\n        var eachDone = function () {\n            animating_1--;\n            if (animating_1 === 0) {\n                restoreToPath();\n                oldDone && oldDone();\n            }\n        };\n        for (var i = 0; i < toLen; i++) {\n            var indivdualAnimationOpts = individualDelay ? defaults({\n                delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toSubPathList[i]),\n                done: eachDone\n            }, animationOpts) : animationOpts;\n            morphPath(fromPathList[i], toSubPathList[i], indivdualAnimationOpts);\n        }\n    }\n    else {\n        toPath.__morphT = 0;\n        toPath.animateTo({\n            __morphT: 1\n        }, defaults({\n            during: function (p) {\n                for (var i = 0; i < toLen; i++) {\n                    var child = toSubPathList[i];\n                    child.__morphT = toPath.__morphT;\n                    child.dirtyShape();\n                }\n                oldDuring && oldDuring(p);\n            },\n            done: function () {\n                restoreToPath();\n                for (var i = 0; i < fromList.length; i++) {\n                    restoreMethod(fromList[i], 'updateTransform');\n                }\n                oldDone && oldDone();\n            }\n        }, animationOpts));\n    }\n    if (toPath.__zr) {\n        addToSubPathListToZr(toPath.__zr);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toSubPathList,\n        count: toLen\n    };\n}\nexport function separateMorph(fromPath, toPathList, animationOpts) {\n    var toLen = toPathList.length;\n    var fromPathList = [];\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    if (isCombineMorphing(fromPath)) {\n        addFromPath(fromPath.childrenRef());\n        var fromLen = fromPathList.length;\n        if (fromLen < toLen) {\n            var k = 0;\n            for (var i = fromLen; i < toLen; i++) {\n                fromPathList.push(clonePath(fromPathList[k++ % fromLen]));\n            }\n        }\n        fromPathList.length = toLen;\n    }\n    else {\n        fromPathList = dividePath({ path: fromPath, count: toLen });\n        var fromPathTransform = fromPath.getComputedTransform();\n        for (var i = 0; i < fromPathList.length; i++) {\n            fromPathList[i].setLocalTransform(fromPathTransform);\n        }\n        if (fromPathList.length !== toLen) {\n            console.error('Invalid morphing: unmatched splitted path');\n            return createEmptyReturn();\n        }\n    }\n    fromPathList = sortPaths(fromPathList);\n    toPathList = sortPaths(toPathList);\n    var individualDelay = animationOpts.individualDelay;\n    for (var i = 0; i < toLen; i++) {\n        var indivdualAnimationOpts = individualDelay ? defaults({\n            delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toPathList[i])\n        }, animationOpts) : animationOpts;\n        morphPath(fromPathList[i], toPathList[i], indivdualAnimationOpts);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toPathList,\n        count: toPathList.length\n    };\n}\nexport { split as defaultDividePath };\n","import Group from '../graphic/Group.js';\nimport ZRImage from '../graphic/Image.js';\nimport Circle from '../graphic/shape/Circle.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Ellipse from '../graphic/shape/Ellipse.js';\nimport Line from '../graphic/shape/Line.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Polyline from '../graphic/shape/Polyline.js';\nimport * as matrix from '../core/matrix.js';\nimport { createFromString } from './path.js';\nimport { defaults, trim, each, map, keys, hasOwn } from '../core/util.js';\nimport LinearGradient from '../graphic/LinearGradient.js';\nimport RadialGradient from '../graphic/RadialGradient.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { parseXML } from './parseXML.js';\n;\nvar nodeParsers;\nvar INHERITABLE_STYLE_ATTRIBUTES_MAP = {\n    'fill': 'fill',\n    'stroke': 'stroke',\n    'stroke-width': 'lineWidth',\n    'opacity': 'opacity',\n    'fill-opacity': 'fillOpacity',\n    'stroke-opacity': 'strokeOpacity',\n    'stroke-dasharray': 'lineDash',\n    'stroke-dashoffset': 'lineDashOffset',\n    'stroke-linecap': 'lineCap',\n    'stroke-linejoin': 'lineJoin',\n    'stroke-miterlimit': 'miterLimit',\n    'font-family': 'fontFamily',\n    'font-size': 'fontSize',\n    'font-style': 'fontStyle',\n    'font-weight': 'fontWeight',\n    'text-anchor': 'textAlign',\n    'visibility': 'visibility',\n    'display': 'display'\n};\nvar INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS = keys(INHERITABLE_STYLE_ATTRIBUTES_MAP);\nvar SELF_STYLE_ATTRIBUTES_MAP = {\n    'alignment-baseline': 'textBaseline',\n    'stop-color': 'stopColor'\n};\nvar SELF_STYLE_ATTRIBUTES_MAP_KEYS = keys(SELF_STYLE_ATTRIBUTES_MAP);\nvar SVGParser = (function () {\n    function SVGParser() {\n        this._defs = {};\n        this._root = null;\n    }\n    SVGParser.prototype.parse = function (xml, opt) {\n        opt = opt || {};\n        var svg = parseXML(xml);\n        if (process.env.NODE_ENV !== 'production') {\n            if (!svg) {\n                throw new Error('Illegal svg');\n            }\n        }\n        this._defsUsePending = [];\n        var root = new Group();\n        this._root = root;\n        var named = [];\n        var viewBox = svg.getAttribute('viewBox') || '';\n        var width = parseFloat((svg.getAttribute('width') || opt.width));\n        var height = parseFloat((svg.getAttribute('height') || opt.height));\n        isNaN(width) && (width = null);\n        isNaN(height) && (height = null);\n        parseAttributes(svg, root, null, true, false);\n        var child = svg.firstChild;\n        while (child) {\n            this._parseNode(child, root, named, null, false, false);\n            child = child.nextSibling;\n        }\n        applyDefs(this._defs, this._defsUsePending);\n        this._defsUsePending = [];\n        var viewBoxRect;\n        var viewBoxTransform;\n        if (viewBox) {\n            var viewBoxArr = splitNumberSequence(viewBox);\n            if (viewBoxArr.length >= 4) {\n                viewBoxRect = {\n                    x: parseFloat((viewBoxArr[0] || 0)),\n                    y: parseFloat((viewBoxArr[1] || 0)),\n                    width: parseFloat(viewBoxArr[2]),\n                    height: parseFloat(viewBoxArr[3])\n                };\n            }\n        }\n        if (viewBoxRect && width != null && height != null) {\n            viewBoxTransform = makeViewBoxTransform(viewBoxRect, { x: 0, y: 0, width: width, height: height });\n            if (!opt.ignoreViewBox) {\n                var elRoot = root;\n                root = new Group();\n                root.add(elRoot);\n                elRoot.scaleX = elRoot.scaleY = viewBoxTransform.scale;\n                elRoot.x = viewBoxTransform.x;\n                elRoot.y = viewBoxTransform.y;\n            }\n        }\n        if (!opt.ignoreRootClip && width != null && height != null) {\n            root.setClipPath(new Rect({\n                shape: { x: 0, y: 0, width: width, height: height }\n            }));\n        }\n        return {\n            root: root,\n            width: width,\n            height: height,\n            viewBoxRect: viewBoxRect,\n            viewBoxTransform: viewBoxTransform,\n            named: named\n        };\n    };\n    SVGParser.prototype._parseNode = function (xmlNode, parentGroup, named, namedFrom, isInDefs, isInText) {\n        var nodeName = xmlNode.nodeName.toLowerCase();\n        var el;\n        var namedFromForSub = namedFrom;\n        if (nodeName === 'defs') {\n            isInDefs = true;\n        }\n        if (nodeName === 'text') {\n            isInText = true;\n        }\n        if (nodeName === 'defs' || nodeName === 'switch') {\n            el = parentGroup;\n        }\n        else {\n            if (!isInDefs) {\n                var parser_1 = nodeParsers[nodeName];\n                if (parser_1 && hasOwn(nodeParsers, nodeName)) {\n                    el = parser_1.call(this, xmlNode, parentGroup);\n                    var nameAttr = xmlNode.getAttribute('name');\n                    if (nameAttr) {\n                        var newNamed = {\n                            name: nameAttr,\n                            namedFrom: null,\n                            svgNodeTagLower: nodeName,\n                            el: el\n                        };\n                        named.push(newNamed);\n                        if (nodeName === 'g') {\n                            namedFromForSub = newNamed;\n                        }\n                    }\n                    else if (namedFrom) {\n                        named.push({\n                            name: namedFrom.name,\n                            namedFrom: namedFrom,\n                            svgNodeTagLower: nodeName,\n                            el: el\n                        });\n                    }\n                    parentGroup.add(el);\n                }\n            }\n            var parser = paintServerParsers[nodeName];\n            if (parser && hasOwn(paintServerParsers, nodeName)) {\n                var def = parser.call(this, xmlNode);\n                var id = xmlNode.getAttribute('id');\n                if (id) {\n                    this._defs[id] = def;\n                }\n            }\n        }\n        if (el && el.isGroup) {\n            var child = xmlNode.firstChild;\n            while (child) {\n                if (child.nodeType === 1) {\n                    this._parseNode(child, el, named, namedFromForSub, isInDefs, isInText);\n                }\n                else if (child.nodeType === 3 && isInText) {\n                    this._parseText(child, el);\n                }\n                child = child.nextSibling;\n            }\n        }\n    };\n    SVGParser.prototype._parseText = function (xmlNode, parentGroup) {\n        var text = new TSpan({\n            style: {\n                text: xmlNode.textContent\n            },\n            silent: true,\n            x: this._textX || 0,\n            y: this._textY || 0\n        });\n        inheritStyle(parentGroup, text);\n        parseAttributes(xmlNode, text, this._defsUsePending, false, false);\n        applyTextAlignment(text, parentGroup);\n        var textStyle = text.style;\n        var fontSize = textStyle.fontSize;\n        if (fontSize && fontSize < 9) {\n            textStyle.fontSize = 9;\n            text.scaleX *= fontSize / 9;\n            text.scaleY *= fontSize / 9;\n        }\n        var font = (textStyle.fontSize || textStyle.fontFamily) && [\n            textStyle.fontStyle,\n            textStyle.fontWeight,\n            (textStyle.fontSize || 12) + 'px',\n            textStyle.fontFamily || 'sans-serif'\n        ].join(' ');\n        textStyle.font = font;\n        var rect = text.getBoundingRect();\n        this._textX += rect.width;\n        parentGroup.add(text);\n        return text;\n    };\n    SVGParser.internalField = (function () {\n        nodeParsers = {\n            'g': function (xmlNode, parentGroup) {\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, false);\n                return g;\n            },\n            'rect': function (xmlNode, parentGroup) {\n                var rect = new Rect();\n                inheritStyle(parentGroup, rect);\n                parseAttributes(xmlNode, rect, this._defsUsePending, false, false);\n                rect.setShape({\n                    x: parseFloat(xmlNode.getAttribute('x') || '0'),\n                    y: parseFloat(xmlNode.getAttribute('y') || '0'),\n                    width: parseFloat(xmlNode.getAttribute('width') || '0'),\n                    height: parseFloat(xmlNode.getAttribute('height') || '0')\n                });\n                rect.silent = true;\n                return rect;\n            },\n            'circle': function (xmlNode, parentGroup) {\n                var circle = new Circle();\n                inheritStyle(parentGroup, circle);\n                parseAttributes(xmlNode, circle, this._defsUsePending, false, false);\n                circle.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    r: parseFloat(xmlNode.getAttribute('r') || '0')\n                });\n                circle.silent = true;\n                return circle;\n            },\n            'line': function (xmlNode, parentGroup) {\n                var line = new Line();\n                inheritStyle(parentGroup, line);\n                parseAttributes(xmlNode, line, this._defsUsePending, false, false);\n                line.setShape({\n                    x1: parseFloat(xmlNode.getAttribute('x1') || '0'),\n                    y1: parseFloat(xmlNode.getAttribute('y1') || '0'),\n                    x2: parseFloat(xmlNode.getAttribute('x2') || '0'),\n                    y2: parseFloat(xmlNode.getAttribute('y2') || '0')\n                });\n                line.silent = true;\n                return line;\n            },\n            'ellipse': function (xmlNode, parentGroup) {\n                var ellipse = new Ellipse();\n                inheritStyle(parentGroup, ellipse);\n                parseAttributes(xmlNode, ellipse, this._defsUsePending, false, false);\n                ellipse.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    rx: parseFloat(xmlNode.getAttribute('rx') || '0'),\n                    ry: parseFloat(xmlNode.getAttribute('ry') || '0')\n                });\n                ellipse.silent = true;\n                return ellipse;\n            },\n            'polygon': function (xmlNode, parentGroup) {\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polygon = new Polygon({\n                    shape: {\n                        points: pointsArr || []\n                    },\n                    silent: true\n                });\n                inheritStyle(parentGroup, polygon);\n                parseAttributes(xmlNode, polygon, this._defsUsePending, false, false);\n                return polygon;\n            },\n            'polyline': function (xmlNode, parentGroup) {\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polyline = new Polyline({\n                    shape: {\n                        points: pointsArr || []\n                    },\n                    silent: true\n                });\n                inheritStyle(parentGroup, polyline);\n                parseAttributes(xmlNode, polyline, this._defsUsePending, false, false);\n                return polyline;\n            },\n            'image': function (xmlNode, parentGroup) {\n                var img = new ZRImage();\n                inheritStyle(parentGroup, img);\n                parseAttributes(xmlNode, img, this._defsUsePending, false, false);\n                img.setStyle({\n                    image: xmlNode.getAttribute('xlink:href') || xmlNode.getAttribute('href'),\n                    x: +xmlNode.getAttribute('x'),\n                    y: +xmlNode.getAttribute('y'),\n                    width: +xmlNode.getAttribute('width'),\n                    height: +xmlNode.getAttribute('height')\n                });\n                img.silent = true;\n                return img;\n            },\n            'text': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x') || '0';\n                var y = xmlNode.getAttribute('y') || '0';\n                var dx = xmlNode.getAttribute('dx') || '0';\n                var dy = xmlNode.getAttribute('dy') || '0';\n                this._textX = parseFloat(x) + parseFloat(dx);\n                this._textY = parseFloat(y) + parseFloat(dy);\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, true);\n                return g;\n            },\n            'tspan': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x');\n                var y = xmlNode.getAttribute('y');\n                if (x != null) {\n                    this._textX = parseFloat(x);\n                }\n                if (y != null) {\n                    this._textY = parseFloat(y);\n                }\n                var dx = xmlNode.getAttribute('dx') || '0';\n                var dy = xmlNode.getAttribute('dy') || '0';\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, true);\n                this._textX += parseFloat(dx);\n                this._textY += parseFloat(dy);\n                return g;\n            },\n            'path': function (xmlNode, parentGroup) {\n                var d = xmlNode.getAttribute('d') || '';\n                var path = createFromString(d);\n                inheritStyle(parentGroup, path);\n                parseAttributes(xmlNode, path, this._defsUsePending, false, false);\n                path.silent = true;\n                return path;\n            }\n        };\n    })();\n    return SVGParser;\n}());\nvar paintServerParsers = {\n    'lineargradient': function (xmlNode) {\n        var x1 = parseInt(xmlNode.getAttribute('x1') || '0', 10);\n        var y1 = parseInt(xmlNode.getAttribute('y1') || '0', 10);\n        var x2 = parseInt(xmlNode.getAttribute('x2') || '10', 10);\n        var y2 = parseInt(xmlNode.getAttribute('y2') || '0', 10);\n        var gradient = new LinearGradient(x1, y1, x2, y2);\n        parsePaintServerUnit(xmlNode, gradient);\n        parseGradientColorStops(xmlNode, gradient);\n        return gradient;\n    },\n    'radialgradient': function (xmlNode) {\n        var cx = parseInt(xmlNode.getAttribute('cx') || '0', 10);\n        var cy = parseInt(xmlNode.getAttribute('cy') || '0', 10);\n        var r = parseInt(xmlNode.getAttribute('r') || '0', 10);\n        var gradient = new RadialGradient(cx, cy, r);\n        parsePaintServerUnit(xmlNode, gradient);\n        parseGradientColorStops(xmlNode, gradient);\n        return gradient;\n    }\n};\nfunction parsePaintServerUnit(xmlNode, gradient) {\n    var gradientUnits = xmlNode.getAttribute('gradientUnits');\n    if (gradientUnits === 'userSpaceOnUse') {\n        gradient.global = true;\n    }\n}\nfunction parseGradientColorStops(xmlNode, gradient) {\n    var stop = xmlNode.firstChild;\n    while (stop) {\n        if (stop.nodeType === 1\n            && stop.nodeName.toLocaleLowerCase() === 'stop') {\n            var offsetStr = stop.getAttribute('offset');\n            var offset = void 0;\n            if (offsetStr && offsetStr.indexOf('%') > 0) {\n                offset = parseInt(offsetStr, 10) / 100;\n            }\n            else if (offsetStr) {\n                offset = parseFloat(offsetStr);\n            }\n            else {\n                offset = 0;\n            }\n            var styleVals = {};\n            parseInlineStyle(stop, styleVals, styleVals);\n            var stopColor = styleVals.stopColor\n                || stop.getAttribute('stop-color')\n                || '#000000';\n            gradient.colorStops.push({\n                offset: offset,\n                color: stopColor\n            });\n        }\n        stop = stop.nextSibling;\n    }\n}\nfunction inheritStyle(parent, child) {\n    if (parent && parent.__inheritedStyle) {\n        if (!child.__inheritedStyle) {\n            child.__inheritedStyle = {};\n        }\n        defaults(child.__inheritedStyle, parent.__inheritedStyle);\n    }\n}\nfunction parsePoints(pointsString) {\n    var list = splitNumberSequence(pointsString);\n    var points = [];\n    for (var i = 0; i < list.length; i += 2) {\n        var x = parseFloat(list[i]);\n        var y = parseFloat(list[i + 1]);\n        points.push([x, y]);\n    }\n    return points;\n}\nfunction parseAttributes(xmlNode, el, defsUsePending, onlyInlineStyle, isTextGroup) {\n    var disp = el;\n    var inheritedStyle = disp.__inheritedStyle = disp.__inheritedStyle || {};\n    var selfStyle = {};\n    if (xmlNode.nodeType === 1) {\n        parseTransformAttribute(xmlNode, el);\n        parseInlineStyle(xmlNode, inheritedStyle, selfStyle);\n        if (!onlyInlineStyle) {\n            parseAttributeStyle(xmlNode, inheritedStyle, selfStyle);\n        }\n    }\n    disp.style = disp.style || {};\n    if (inheritedStyle.fill != null) {\n        disp.style.fill = getFillStrokeStyle(disp, 'fill', inheritedStyle.fill, defsUsePending);\n    }\n    if (inheritedStyle.stroke != null) {\n        disp.style.stroke = getFillStrokeStyle(disp, 'stroke', inheritedStyle.stroke, defsUsePending);\n    }\n    each([\n        'lineWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'miterLimit', 'fontSize'\n    ], function (propName) {\n        if (inheritedStyle[propName] != null) {\n            disp.style[propName] = parseFloat(inheritedStyle[propName]);\n        }\n    });\n    each([\n        'lineDashOffset', 'lineCap', 'lineJoin', 'fontWeight', 'fontFamily', 'fontStyle', 'textAlign'\n    ], function (propName) {\n        if (inheritedStyle[propName] != null) {\n            disp.style[propName] = inheritedStyle[propName];\n        }\n    });\n    if (isTextGroup) {\n        disp.__selfStyle = selfStyle;\n    }\n    if (inheritedStyle.lineDash) {\n        disp.style.lineDash = map(splitNumberSequence(inheritedStyle.lineDash), function (str) {\n            return parseFloat(str);\n        });\n    }\n    if (inheritedStyle.visibility === 'hidden' || inheritedStyle.visibility === 'collapse') {\n        disp.invisible = true;\n    }\n    if (inheritedStyle.display === 'none') {\n        disp.ignore = true;\n    }\n}\nfunction applyTextAlignment(text, parentGroup) {\n    var parentSelfStyle = parentGroup.__selfStyle;\n    if (parentSelfStyle) {\n        var textBaseline = parentSelfStyle.textBaseline;\n        var zrTextBaseline = textBaseline;\n        if (!textBaseline || textBaseline === 'auto') {\n            zrTextBaseline = 'alphabetic';\n        }\n        else if (textBaseline === 'baseline') {\n            zrTextBaseline = 'alphabetic';\n        }\n        else if (textBaseline === 'before-edge' || textBaseline === 'text-before-edge') {\n            zrTextBaseline = 'top';\n        }\n        else if (textBaseline === 'after-edge' || textBaseline === 'text-after-edge') {\n            zrTextBaseline = 'bottom';\n        }\n        else if (textBaseline === 'central' || textBaseline === 'mathematical') {\n            zrTextBaseline = 'middle';\n        }\n        text.style.textBaseline = zrTextBaseline;\n    }\n    var parentInheritedStyle = parentGroup.__inheritedStyle;\n    if (parentInheritedStyle) {\n        var textAlign = parentInheritedStyle.textAlign;\n        var zrTextAlign = textAlign;\n        if (textAlign) {\n            if (textAlign === 'middle') {\n                zrTextAlign = 'center';\n            }\n            text.style.textAlign = zrTextAlign;\n        }\n    }\n}\nvar urlRegex = /^url\\(\\s*#(.*?)\\)/;\nfunction getFillStrokeStyle(el, method, str, defsUsePending) {\n    var urlMatch = str && str.match(urlRegex);\n    if (urlMatch) {\n        var url = trim(urlMatch[1]);\n        defsUsePending.push([el, method, url]);\n        return;\n    }\n    if (str === 'none') {\n        str = null;\n    }\n    return str;\n}\nfunction applyDefs(defs, defsUsePending) {\n    for (var i = 0; i < defsUsePending.length; i++) {\n        var item = defsUsePending[i];\n        item[0].style[item[1]] = defs[item[2]];\n    }\n}\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction splitNumberSequence(rawStr) {\n    return rawStr.match(numberReg) || [];\n}\nvar transformRegex = /(translate|scale|rotate|skewX|skewY|matrix)\\(([\\-\\s0-9\\.eE,]*)\\)/g;\nvar DEGREE_TO_ANGLE = Math.PI / 180;\nfunction parseTransformAttribute(xmlNode, node) {\n    var transform = xmlNode.getAttribute('transform');\n    if (transform) {\n        transform = transform.replace(/,/g, ' ');\n        var transformOps_1 = [];\n        var mt = null;\n        transform.replace(transformRegex, function (str, type, value) {\n            transformOps_1.push(type, value);\n            return '';\n        });\n        for (var i = transformOps_1.length - 1; i > 0; i -= 2) {\n            var value = transformOps_1[i];\n            var type = transformOps_1[i - 1];\n            var valueArr = splitNumberSequence(value);\n            mt = mt || matrix.create();\n            switch (type) {\n                case 'translate':\n                    matrix.translate(mt, mt, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || '0')]);\n                    break;\n                case 'scale':\n                    matrix.scale(mt, mt, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || valueArr[0])]);\n                    break;\n                case 'rotate':\n                    matrix.rotate(mt, mt, -parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    break;\n                case 'skewX':\n                    var sx = Math.tan(parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    matrix.mul(mt, [1, 0, sx, 1, 0, 0], mt);\n                    break;\n                case 'skewY':\n                    var sy = Math.tan(parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    matrix.mul(mt, [1, sy, 0, 1, 0, 0], mt);\n                    break;\n                case 'matrix':\n                    mt[0] = parseFloat(valueArr[0]);\n                    mt[1] = parseFloat(valueArr[1]);\n                    mt[2] = parseFloat(valueArr[2]);\n                    mt[3] = parseFloat(valueArr[3]);\n                    mt[4] = parseFloat(valueArr[4]);\n                    mt[5] = parseFloat(valueArr[5]);\n                    break;\n            }\n        }\n        node.setLocalTransform(mt);\n    }\n}\nvar styleRegex = /([^\\s:;]+)\\s*:\\s*([^:;]+)/g;\nfunction parseInlineStyle(xmlNode, inheritableStyleResult, selfStyleResult) {\n    var style = xmlNode.getAttribute('style');\n    if (!style) {\n        return;\n    }\n    styleRegex.lastIndex = 0;\n    var styleRegResult;\n    while ((styleRegResult = styleRegex.exec(style)) != null) {\n        var svgStlAttr = styleRegResult[1];\n        var zrInheritableStlAttr = hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP, svgStlAttr)\n            ? INHERITABLE_STYLE_ATTRIBUTES_MAP[svgStlAttr]\n            : null;\n        if (zrInheritableStlAttr) {\n            inheritableStyleResult[zrInheritableStlAttr] = styleRegResult[2];\n        }\n        var zrSelfStlAttr = hasOwn(SELF_STYLE_ATTRIBUTES_MAP, svgStlAttr)\n            ? SELF_STYLE_ATTRIBUTES_MAP[svgStlAttr]\n            : null;\n        if (zrSelfStlAttr) {\n            selfStyleResult[zrSelfStlAttr] = styleRegResult[2];\n        }\n    }\n}\nfunction parseAttributeStyle(xmlNode, inheritableStyleResult, selfStyleResult) {\n    for (var i = 0; i < INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length; i++) {\n        var svgAttrName = INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[i];\n        var attrValue = xmlNode.getAttribute(svgAttrName);\n        if (attrValue != null) {\n            inheritableStyleResult[INHERITABLE_STYLE_ATTRIBUTES_MAP[svgAttrName]] = attrValue;\n        }\n    }\n    for (var i = 0; i < SELF_STYLE_ATTRIBUTES_MAP_KEYS.length; i++) {\n        var svgAttrName = SELF_STYLE_ATTRIBUTES_MAP_KEYS[i];\n        var attrValue = xmlNode.getAttribute(svgAttrName);\n        if (attrValue != null) {\n            selfStyleResult[SELF_STYLE_ATTRIBUTES_MAP[svgAttrName]] = attrValue;\n        }\n    }\n}\nexport function makeViewBoxTransform(viewBoxRect, boundingRect) {\n    var scaleX = boundingRect.width / viewBoxRect.width;\n    var scaleY = boundingRect.height / viewBoxRect.height;\n    var scale = Math.min(scaleX, scaleY);\n    return {\n        scale: scale,\n        x: -(viewBoxRect.x + viewBoxRect.width / 2) * scale + (boundingRect.x + boundingRect.width / 2),\n        y: -(viewBoxRect.y + viewBoxRect.height / 2) * scale + (boundingRect.y + boundingRect.height / 2)\n    };\n}\nexport function parseSVG(xml, opt) {\n    var parser = new SVGParser();\n    return parser.parse(xml, opt);\n}\nexport { parseXML };\n","import { isString } from '../core/util.js';\nexport function parseXML(svg) {\n    if (isString(svg)) {\n        var parser = new DOMParser();\n        svg = parser.parseFromString(svg, 'text/xml');\n    }\n    var svgNode = svg;\n    if (svgNode.nodeType === 9) {\n        svgNode = svgNode.firstChild;\n    }\n    while (svgNode.nodeName.toLowerCase() !== 'svg' || svgNode.nodeType !== 1) {\n        svgNode = svgNode.nextSibling;\n    }\n    return svgNode;\n}\n","import PathProxy from '../core/PathProxy.js';\nimport { applyTransform as v2ApplyTransform } from '../core/vector.js';\nvar CMD = PathProxy.CMD;\nvar points = [[], [], []];\nvar mathSqrt = Math.sqrt;\nvar mathAtan2 = Math.atan2;\nexport default function transformPath(path, m) {\n    if (!m) {\n        return;\n    }\n    var data = path.data;\n    var len = path.len();\n    var cmd;\n    var nPoint;\n    var i;\n    var j;\n    var k;\n    var p;\n    var M = CMD.M;\n    var C = CMD.C;\n    var L = CMD.L;\n    var R = CMD.R;\n    var A = CMD.A;\n    var Q = CMD.Q;\n    for (i = 0, j = 0; i < len;) {\n        cmd = data[i++];\n        j = i;\n        nPoint = 0;\n        switch (cmd) {\n            case M:\n                nPoint = 1;\n                break;\n            case L:\n                nPoint = 1;\n                break;\n            case C:\n                nPoint = 3;\n                break;\n            case Q:\n                nPoint = 2;\n                break;\n            case A:\n                var x = m[4];\n                var y = m[5];\n                var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\n                var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\n                var angle = mathAtan2(-m[1] / sy, m[0] / sx);\n                data[i] *= sx;\n                data[i++] += x;\n                data[i] *= sy;\n                data[i++] += y;\n                data[i++] *= sx;\n                data[i++] *= sy;\n                data[i++] += angle;\n                data[i++] += angle;\n                i += 2;\n                j = i;\n                break;\n            case R:\n                p[0] = data[i++];\n                p[1] = data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n                p[0] += data[i++];\n                p[1] += data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n        }\n        for (k = 0; k < nPoint; k++) {\n            var p_1 = points[k];\n            p_1[0] = data[i++];\n            p_1[1] = data[i++];\n            v2ApplyTransform(p_1, p_1, m);\n            data[j++] = p_1[0];\n            data[j++] = p_1[1];\n        }\n    }\n    path.increaseVersion();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../graphic/Path.js';\nimport PathProxy from '../core/PathProxy.js';\nimport transformPath from './transformPath.js';\nimport { extend } from '../core/util.js';\nvar mathSqrt = Math.sqrt;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n;\nfunction vRatio(u, v) {\n    return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n}\n;\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\n        * Math.acos(vRatio(u, v));\n}\n;\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n    var psi = psiDeg * (PI / 180.0);\n    var xp = mathCos(psi) * (x1 - x2) / 2.0\n        + mathSin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0\n        + mathCos(psi) * (y1 - y2) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= mathSqrt(lambda);\n        ry *= mathSqrt(lambda);\n    }\n    var f = (fa === fs ? -1 : 1)\n        * mathSqrt((((rx * rx) * (ry * ry))\n            - ((rx * rx) * (yp * yp))\n            - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\n            + (ry * ry) * (xp * xp))) || 0;\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0\n        + mathCos(psi) * cxp\n        - mathSin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0\n        + mathSin(psi) * cxp\n        + mathCos(psi) * cyp;\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (dTheta < 0) {\n        var n = Math.round(dTheta / PI * 1e6) / 1e6;\n        dTheta = PI * 2 + (n % 2) * PI;\n    }\n    path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n}\nvar commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction createPathProxyFromString(data) {\n    var path = new PathProxy();\n    if (!data) {\n        return path;\n    }\n    var cpx = 0;\n    var cpy = 0;\n    var subpathX = cpx;\n    var subpathY = cpy;\n    var prevCmd;\n    var CMD = PathProxy.CMD;\n    var cmdList = data.match(commandReg);\n    if (!cmdList) {\n        return path;\n    }\n    for (var l = 0; l < cmdList.length; l++) {\n        var cmdText = cmdList[l];\n        var cmdStr = cmdText.charAt(0);\n        var cmd = void 0;\n        var p = cmdText.match(numberReg) || [];\n        var pLen = p.length;\n        for (var i = 0; i < pLen; i++) {\n            p[i] = parseFloat(p[i]);\n        }\n        var off = 0;\n        while (off < pLen) {\n            var ctlPtx = void 0;\n            var ctlPty = void 0;\n            var rx = void 0;\n            var ry = void 0;\n            var psi = void 0;\n            var fa = void 0;\n            var fs = void 0;\n            var x1 = cpx;\n            var y1 = cpy;\n            var len = void 0;\n            var pathData = void 0;\n            switch (cmdStr) {\n                case 'l':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'L':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'm':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'l';\n                    break;\n                case 'M':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'L';\n                    break;\n                case 'h':\n                    cpx += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'H':\n                    cpx = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'v':\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'V':\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'C':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n                    cpx = p[off - 2];\n                    cpy = p[off - 1];\n                    break;\n                case 'c':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n                    cpx += p[off - 2];\n                    cpy += p[off - 1];\n                    break;\n                case 'S':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 's':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = cpx + p[off++];\n                    y1 = cpy + p[off++];\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 'Q':\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'q':\n                    x1 = p[off++] + cpx;\n                    y1 = p[off++] + cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'T':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 't':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 'A':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n                case 'a':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n            }\n        }\n        if (cmdStr === 'z' || cmdStr === 'Z') {\n            cmd = CMD.Z;\n            path.addData(cmd);\n            cpx = subpathX;\n            cpy = subpathY;\n        }\n        prevCmd = cmd;\n    }\n    path.toStatic();\n    return path;\n}\nvar SVGPath = (function (_super) {\n    __extends(SVGPath, _super);\n    function SVGPath() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SVGPath.prototype.applyTransform = function (m) { };\n    return SVGPath;\n}(Path));\nfunction isPathProxy(path) {\n    return path.setData != null;\n}\nfunction createPathOptions(str, opts) {\n    var pathProxy = createPathProxyFromString(str);\n    var innerOpts = extend({}, opts);\n    innerOpts.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.setData(pathProxy.data);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n        else {\n            var ctx = path;\n            pathProxy.rebuildPath(ctx, 1);\n        }\n    };\n    innerOpts.applyTransform = function (m) {\n        transformPath(pathProxy, m);\n        this.dirtyShape();\n    };\n    return innerOpts;\n}\nexport function createFromString(str, opts) {\n    return new SVGPath(createPathOptions(str, opts));\n}\nexport function extendFromString(str, defaultOpts) {\n    var innerOpts = createPathOptions(str, defaultOpts);\n    var Sub = (function (_super) {\n        __extends(Sub, _super);\n        function Sub(opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.applyTransform = innerOpts.applyTransform;\n            _this.buildPath = innerOpts.buildPath;\n            return _this;\n        }\n        return Sub;\n    }(SVGPath));\n    return Sub;\n}\nexport function mergePath(pathEls, opts) {\n    var pathList = [];\n    var len = pathEls.length;\n    for (var i = 0; i < len; i++) {\n        var pathEl = pathEls[i];\n        pathList.push(pathEl.getUpdatedPathProxy(true));\n    }\n    var pathBundle = new Path(opts);\n    pathBundle.createPathProxy();\n    pathBundle.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.appendPath(pathList);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n    };\n    return pathBundle;\n}\nexport function clonePath(sourcePath, opts) {\n    opts = opts || {};\n    var path = new Path();\n    if (sourcePath.shape) {\n        path.setShape(sourcePath.shape);\n    }\n    path.setStyle(sourcePath.style);\n    if (opts.bakeTransform) {\n        transformPath(path.path, sourcePath.getComputedTransform());\n    }\n    else {\n        if (opts.toLocal) {\n            path.setLocalTransform(sourcePath.getComputedTransform());\n        }\n        else {\n            path.copyTransform(sourcePath);\n        }\n    }\n    path.buildPath = sourcePath.buildPath;\n    path.applyTransform = path.applyTransform;\n    path.z = sourcePath.z;\n    path.z2 = sourcePath.z2;\n    path.zlevel = sourcePath.zlevel;\n    return path;\n}\n","var Param = (function () {\n    function Param(target, e) {\n        this.target = target;\n        this.topTarget = e && e.topTarget;\n    }\n    return Param;\n}());\nvar Draggable = (function () {\n    function Draggable(handler) {\n        this.handler = handler;\n        handler.on('mousedown', this._dragStart, this);\n        handler.on('mousemove', this._drag, this);\n        handler.on('mouseup', this._dragEnd, this);\n    }\n    Draggable.prototype._dragStart = function (e) {\n        var draggingTarget = e.target;\n        while (draggingTarget && !draggingTarget.draggable) {\n            draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n        }\n        if (draggingTarget) {\n            this._draggingTarget = draggingTarget;\n            draggingTarget.dragging = true;\n            this._x = e.offsetX;\n            this._y = e.offsetY;\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n        }\n    };\n    Draggable.prototype._drag = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            var x = e.offsetX;\n            var y = e.offsetY;\n            var dx = x - this._x;\n            var dy = y - this._y;\n            this._x = x;\n            this._y = y;\n            draggingTarget.drift(dx, dy, e);\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n            var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n            var lastDropTarget = this._dropTarget;\n            this._dropTarget = dropTarget;\n            if (draggingTarget !== dropTarget) {\n                if (lastDropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n                }\n                if (dropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n                }\n            }\n        }\n    };\n    Draggable.prototype._dragEnd = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            draggingTarget.dragging = false;\n        }\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n        if (this._dropTarget) {\n            this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n        }\n        this._draggingTarget = null;\n        this._dropTarget = null;\n    };\n    return Draggable;\n}());\nexport default Draggable;\n","import * as eventUtil from './event.js';\nvar GestureMgr = (function () {\n    function GestureMgr() {\n        this._track = [];\n    }\n    GestureMgr.prototype.recognize = function (event, target, root) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    };\n    GestureMgr.prototype.clear = function () {\n        this._track.length = 0;\n        return this;\n    };\n    GestureMgr.prototype._doTrack = function (event, target, root) {\n        var touches = event.touches;\n        if (!touches) {\n            return;\n        }\n        var trackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n        for (var i = 0, len = touches.length; i < len; i++) {\n            var touch = touches[i];\n            var pos = eventUtil.clientToLocal(root, touch, {});\n            trackItem.points.push([pos.zrX, pos.zrY]);\n            trackItem.touches.push(touch);\n        }\n        this._track.push(trackItem);\n    };\n    GestureMgr.prototype._recognize = function (event) {\n        for (var eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                var gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    };\n    return GestureMgr;\n}());\nexport { GestureMgr };\nfunction dist(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction center(pointPair) {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\nvar recognizers = {\n    pinch: function (tracks, event) {\n        var trackLen = tracks.length;\n        if (!trackLen) {\n            return;\n        }\n        var pinchEnd = (tracks[trackLen - 1] || {}).points;\n        var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1) {\n            var pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n            event.pinchScale = pinchScale;\n            var pinchCenter = center(pinchEnd);\n            event.pinchX = pinchCenter[0];\n            event.pinchY = pinchCenter[1];\n            return {\n                type: 'pinch',\n                target: tracks[0].target,\n                event: event\n            };\n        }\n    }\n};\n","import { __extends } from \"tslib\";\nimport * as util from './core/util.js';\nimport * as vec2 from './core/vector.js';\nimport Draggable from './mixin/Draggable.js';\nimport Eventful from './core/Eventful.js';\nimport * as eventTool from './core/event.js';\nimport { GestureMgr } from './core/GestureMgr.js';\nimport BoundingRect from './core/BoundingRect.js';\nvar SILENT = 'silent';\nfunction makeEventPacket(eveType, targetInfo, event) {\n    return {\n        type: eveType,\n        event: event,\n        target: targetInfo.target,\n        topTarget: targetInfo.topTarget,\n        cancelBubble: false,\n        offsetX: event.zrX,\n        offsetY: event.zrY,\n        gestureEvent: event.gestureEvent,\n        pinchX: event.pinchX,\n        pinchY: event.pinchY,\n        pinchScale: event.pinchScale,\n        wheelDelta: event.zrDelta,\n        zrByTouch: event.zrByTouch,\n        which: event.which,\n        stop: stopEvent\n    };\n}\nfunction stopEvent() {\n    eventTool.stop(this.event);\n}\nvar EmptyProxy = (function (_super) {\n    __extends(EmptyProxy, _super);\n    function EmptyProxy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handler = null;\n        return _this;\n    }\n    EmptyProxy.prototype.dispose = function () { };\n    EmptyProxy.prototype.setCursor = function () { };\n    return EmptyProxy;\n}(Eventful));\nvar HoveredResult = (function () {\n    function HoveredResult(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return HoveredResult;\n}());\nvar handlerNames = [\n    'click', 'dblclick', 'mousewheel', 'mouseout',\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n];\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar Handler = (function (_super) {\n    __extends(Handler, _super);\n    function Handler(storage, painter, proxy, painterRoot, pointerSize) {\n        var _this = _super.call(this) || this;\n        _this._hovered = new HoveredResult(0, 0);\n        _this.storage = storage;\n        _this.painter = painter;\n        _this.painterRoot = painterRoot;\n        _this._pointerSize = pointerSize;\n        proxy = proxy || new EmptyProxy();\n        _this.proxy = null;\n        _this.setHandlerProxy(proxy);\n        _this._draggingMgr = new Draggable(_this);\n        return _this;\n    }\n    Handler.prototype.setHandlerProxy = function (proxy) {\n        if (this.proxy) {\n            this.proxy.dispose();\n        }\n        if (proxy) {\n            util.each(handlerNames, function (name) {\n                proxy.on && proxy.on(name, this[name], this);\n            }, this);\n            proxy.handler = this;\n        }\n        this.proxy = proxy;\n    };\n    Handler.prototype.mousemove = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var lastHovered = this._hovered;\n        var lastHoveredTarget = lastHovered.target;\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n            lastHoveredTarget = lastHovered.target;\n        }\n        var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n        var hoveredTarget = hovered.target;\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(lastHovered, 'mouseout', event);\n        }\n        this.dispatchToElement(hovered, 'mousemove', event);\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(hovered, 'mouseover', event);\n        }\n    };\n    Handler.prototype.mouseout = function (event) {\n        var eventControl = event.zrEventControl;\n        if (eventControl !== 'only_globalout') {\n            this.dispatchToElement(this._hovered, 'mouseout', event);\n        }\n        if (eventControl !== 'no_globalout') {\n            this.trigger('globalout', { type: 'globalout', event: event });\n        }\n    };\n    Handler.prototype.resize = function () {\n        this._hovered = new HoveredResult(0, 0);\n    };\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n        var handler = this[eventName];\n        handler && handler.call(this, eventArgs);\n    };\n    Handler.prototype.dispose = function () {\n        this.proxy.dispose();\n        this.storage = null;\n        this.proxy = null;\n        this.painter = null;\n    };\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n        targetInfo = targetInfo || {};\n        var el = targetInfo.target;\n        if (el && el.silent) {\n            return;\n        }\n        var eventKey = ('on' + eventName);\n        var eventPacket = makeEventPacket(eventName, targetInfo, event);\n        while (el) {\n            el[eventKey]\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n            el.trigger(eventName, eventPacket);\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\n            if (eventPacket.cancelBubble) {\n                break;\n            }\n        }\n        if (!eventPacket.cancelBubble) {\n            this.trigger(eventName, eventPacket);\n            if (this.painter && this.painter.eachOtherLayer) {\n                this.painter.eachOtherLayer(function (layer) {\n                    if (typeof (layer[eventKey]) === 'function') {\n                        layer[eventKey].call(layer, eventPacket);\n                    }\n                    if (layer.trigger) {\n                        layer.trigger(eventName, eventPacket);\n                    }\n                });\n            }\n        }\n    };\n    Handler.prototype.findHover = function (x, y, exclude) {\n        var list = this.storage.getDisplayList();\n        var out = new HoveredResult(x, y);\n        setHoverTarget(list, out, x, y, exclude);\n        if (this._pointerSize && !out.target) {\n            var candidates = [];\n            var pointerSize = this._pointerSize;\n            var targetSizeHalf = pointerSize / 2;\n            var pointerRect = new BoundingRect(x - targetSizeHalf, y - targetSizeHalf, pointerSize, pointerSize);\n            for (var i = list.length - 1; i >= 0; i--) {\n                var el = list[i];\n                if (el !== exclude\n                    && !el.ignore\n                    && !el.ignoreCoarsePointer\n                    && (!el.parent || !el.parent.ignoreCoarsePointer)) {\n                    tmpRect.copy(el.getBoundingRect());\n                    if (el.transform) {\n                        tmpRect.applyTransform(el.transform);\n                    }\n                    if (tmpRect.intersect(pointerRect)) {\n                        candidates.push(el);\n                    }\n                }\n            }\n            if (candidates.length) {\n                var rStep = 4;\n                var thetaStep = Math.PI / 12;\n                var PI2 = Math.PI * 2;\n                for (var r = 0; r < targetSizeHalf; r += rStep) {\n                    for (var theta = 0; theta < PI2; theta += thetaStep) {\n                        var x1 = x + r * Math.cos(theta);\n                        var y1 = y + r * Math.sin(theta);\n                        setHoverTarget(candidates, out, x1, y1, exclude);\n                        if (out.target) {\n                            return out;\n                        }\n                    }\n                }\n            }\n        }\n        return out;\n    };\n    Handler.prototype.processGesture = function (event, stage) {\n        if (!this._gestureMgr) {\n            this._gestureMgr = new GestureMgr();\n        }\n        var gestureMgr = this._gestureMgr;\n        stage === 'start' && gestureMgr.clear();\n        var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n        stage === 'end' && gestureMgr.clear();\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n            var res = new HoveredResult();\n            res.target = gestureInfo.target;\n            this.dispatchToElement(res, type, gestureInfo.event);\n        }\n    };\n    return Handler;\n}(Eventful));\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var hovered;\n        var hoveredTarget;\n        if (name !== 'mouseup' || !isOutside) {\n            hovered = this.findHover(x, y);\n            hoveredTarget = hovered.target;\n        }\n        if (name === 'mousedown') {\n            this._downEl = hoveredTarget;\n            this._downPoint = [event.zrX, event.zrY];\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'mouseup') {\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'click') {\n            if (this._downEl !== this._upEl\n                || !this._downPoint\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n                return;\n            }\n            this._downPoint = null;\n        }\n        this.dispatchToElement(hovered, name, event);\n    };\n});\nfunction isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n        var el = displayable;\n        var isSilent = void 0;\n        var ignoreClip = false;\n        while (el) {\n            if (el.ignoreClip) {\n                ignoreClip = true;\n            }\n            if (!ignoreClip) {\n                var clipPath = el.getClipPath();\n                if (clipPath && !clipPath.contain(x, y)) {\n                    return false;\n                }\n                if (el.silent) {\n                    isSilent = true;\n                }\n            }\n            var hostEl = el.__hostTarget;\n            el = hostEl ? hostEl : el.parent;\n        }\n        return isSilent ? SILENT : true;\n    }\n    return false;\n}\nfunction setHoverTarget(list, out, x, y, exclude) {\n    for (var i = list.length - 1; i >= 0; i--) {\n        var el = list[i];\n        var hoverCheckResult = void 0;\n        if (el !== exclude\n            && !el.ignore\n            && (hoverCheckResult = isHover(el, x, y))) {\n            !out.topTarget && (out.topTarget = el);\n            if (hoverCheckResult !== SILENT) {\n                out.target = el;\n                break;\n            }\n        }\n    }\n}\nfunction isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\nexport default Handler;\n","import * as util from './core/util.js';\nimport timsort from './core/timsort.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nvar invalidZErrorLogged = false;\nfunction logInvalidZError() {\n    if (invalidZErrorLogged) {\n        return;\n    }\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n}\nfunction shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n        if (a.z === b.z) {\n            return a.z2 - b.z2;\n        }\n        return a.z - b.z;\n    }\n    return a.zlevel - b.zlevel;\n}\nvar Storage = (function () {\n    function Storage() {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        this.displayableSortFunc = shapeCompareFunc;\n    }\n    Storage.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._roots.length; i++) {\n            this._roots[i].traverse(cb, context);\n        }\n    };\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n        includeIgnore = includeIgnore || false;\n        var displayList = this._displayList;\n        if (update || !displayList.length) {\n            this.updateDisplayList(includeIgnore);\n        }\n        return displayList;\n    };\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n        this._displayListLen = 0;\n        var roots = this._roots;\n        var displayList = this._displayList;\n        for (var i = 0, len = roots.length; i < len; i++) {\n            this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n        }\n        displayList.length = this._displayListLen;\n        timsort(displayList, shapeCompareFunc);\n    };\n    Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\n        if (el.ignore && !includeIgnore) {\n            return;\n        }\n        el.beforeUpdate();\n        el.update();\n        el.afterUpdate();\n        var userSetClipPath = el.getClipPath();\n        if (el.ignoreClip) {\n            clipPaths = null;\n        }\n        else if (userSetClipPath) {\n            if (clipPaths) {\n                clipPaths = clipPaths.slice();\n            }\n            else {\n                clipPaths = [];\n            }\n            var currentClipPath = userSetClipPath;\n            var parentClipPath = el;\n            while (currentClipPath) {\n                currentClipPath.parent = parentClipPath;\n                currentClipPath.updateTransform();\n                clipPaths.push(currentClipPath);\n                parentClipPath = currentClipPath;\n                currentClipPath = currentClipPath.getClipPath();\n            }\n        }\n        if (el.childrenRef) {\n            var children = el.childrenRef();\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (el.__dirty) {\n                    child.__dirty |= REDRAW_BIT;\n                }\n                this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n            }\n            el.__dirty = 0;\n        }\n        else {\n            var disp = el;\n            if (clipPaths && clipPaths.length) {\n                disp.__clipPaths = clipPaths;\n            }\n            else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n                disp.__clipPaths = [];\n            }\n            if (isNaN(disp.z)) {\n                logInvalidZError();\n                disp.z = 0;\n            }\n            if (isNaN(disp.z2)) {\n                logInvalidZError();\n                disp.z2 = 0;\n            }\n            if (isNaN(disp.zlevel)) {\n                logInvalidZError();\n                disp.zlevel = 0;\n            }\n            this._displayList[this._displayListLen++] = disp;\n        }\n        var decalEl = el.getDecalElement && el.getDecalElement();\n        if (decalEl) {\n            this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n        }\n        var textGuide = el.getTextGuideLine();\n        if (textGuide) {\n            this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n        }\n        var textEl = el.getTextContent();\n        if (textEl) {\n            this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n        }\n    };\n    Storage.prototype.addRoot = function (el) {\n        if (el.__zr && el.__zr.storage === this) {\n            return;\n        }\n        this._roots.push(el);\n    };\n    Storage.prototype.delRoot = function (el) {\n        if (el instanceof Array) {\n            for (var i = 0, l = el.length; i < l; i++) {\n                this.delRoot(el[i]);\n            }\n            return;\n        }\n        var idx = util.indexOf(this._roots, el);\n        if (idx >= 0) {\n            this._roots.splice(idx, 1);\n        }\n    };\n    Storage.prototype.delAllRoots = function () {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        return;\n    };\n    Storage.prototype.getRoots = function () {\n        return this._roots;\n    };\n    Storage.prototype.dispose = function () {\n        this._displayList = null;\n        this._roots = null;\n    };\n    return Storage;\n}());\nexport default Storage;\n","import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n    return new Date().getTime();\n}\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._head) {\n            this._head = this._tail = clip;\n        }\n        else {\n            this._tail.next = clip;\n            clip.prev = this._tail;\n            clip.next = null;\n            this._tail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._tail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += getTime() - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._head = this._tail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._head == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n","import { __extends } from \"tslib\";\nimport { addEventListener, removeEventListener, normalizeEvent, getNativeEvent } from '../core/event.js';\nimport * as zrUtil from '../core/util.js';\nimport Eventful from '../core/Eventful.js';\nimport env from '../core/env.js';\nvar TOUCH_CLICK_DELAY = 300;\nvar globalEventSupported = env.domSupported;\nvar localNativeListenerNames = (function () {\n    var mouseHandlerNames = [\n        'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n    ];\n    var touchHandlerNames = [\n        'touchstart', 'touchend', 'touchmove'\n    ];\n    var pointerEventNameMap = {\n        pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\n    };\n    var pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n        var nm = name.replace('mouse', 'pointer');\n        return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n    return {\n        mouse: mouseHandlerNames,\n        touch: touchHandlerNames,\n        pointer: pointerHandlerNames\n    };\n})();\nvar globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n};\nvar wheelEventSupported = false;\nfunction isPointerFromTouch(event) {\n    var pointerType = event.pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n}\nfunction setTouchTimer(scope) {\n    scope.touching = true;\n    if (scope.touchTimer != null) {\n        clearTimeout(scope.touchTimer);\n        scope.touchTimer = null;\n    }\n    scope.touchTimer = setTimeout(function () {\n        scope.touching = false;\n        scope.touchTimer = null;\n    }, 700);\n}\nfunction markTouch(event) {\n    event && (event.zrByTouch = true);\n}\nfunction normalizeGlobalEvent(instance, event) {\n    return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n}\nfunction isLocalEl(instance, el) {\n    var elTmp = el;\n    var isLocal = false;\n    while (elTmp && elTmp.nodeType !== 9\n        && !(isLocal = elTmp.domBelongToZr\n            || (elTmp !== el && elTmp === instance.painterRoot))) {\n        elTmp = elTmp.parentNode;\n    }\n    return isLocal;\n}\nvar FakeGlobalEvent = (function () {\n    function FakeGlobalEvent(instance, event) {\n        this.stopPropagation = zrUtil.noop;\n        this.stopImmediatePropagation = zrUtil.noop;\n        this.preventDefault = zrUtil.noop;\n        this.type = event.type;\n        this.target = this.currentTarget = instance.dom;\n        this.pointerType = event.pointerType;\n        this.clientX = event.clientX;\n        this.clientY = event.clientY;\n    }\n    return FakeGlobalEvent;\n}());\nvar localDOMHandlers = {\n    mousedown: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__mayPointerCapture = [event.zrX, event.zrY];\n        this.trigger('mousedown', event);\n    },\n    mousemove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var downPoint = this.__mayPointerCapture;\n        if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n            this.__togglePointerCapture(true);\n        }\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n    },\n    mouseout: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var element = event.toElement || event.relatedTarget;\n        if (!isLocalEl(this, element)) {\n            if (this.__pointerCapturing) {\n                event.zrEventControl = 'no_globalout';\n            }\n            this.trigger('mouseout', event);\n        }\n    },\n    wheel: function (event) {\n        wheelEventSupported = true;\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    mousewheel: function (event) {\n        if (wheelEventSupported) {\n            return;\n        }\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    touchstart: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.__lastTouchMoment = new Date();\n        this.handler.processGesture(event, 'start');\n        localDOMHandlers.mousemove.call(this, event);\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    touchmove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'change');\n        localDOMHandlers.mousemove.call(this, event);\n    },\n    touchend: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'end');\n        localDOMHandlers.mouseup.call(this, event);\n        if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\n            localDOMHandlers.click.call(this, event);\n        }\n    },\n    pointerdown: function (event) {\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        localDOMHandlers.mouseup.call(this, event);\n    },\n    pointerout: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mouseout.call(this, event);\n        }\n    }\n};\nzrUtil.each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.trigger(name, event);\n    };\n});\nvar globalDOMHandlers = {\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            globalDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        globalDOMHandlers.mouseup.call(this, event);\n    },\n    mousemove: function (event) {\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        var pointerCaptureReleasing = this.__pointerCapturing;\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n        if (pointerCaptureReleasing) {\n            event.zrEventControl = 'only_globalout';\n            this.trigger('mouseout', event);\n        }\n    }\n};\nfunction mountLocalDOMEventListeners(instance, scope) {\n    var domHandlers = scope.domHandlers;\n    if (env.pointerEventsSupported) {\n        zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                domHandlers[nativeEventName].call(instance, event);\n            });\n        });\n    }\n    else {\n        if (env.touchEventsSupported) {\n            zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                    domHandlers[nativeEventName].call(instance, event);\n                    setTouchTimer(scope);\n                });\n            });\n        }\n        zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                event = getNativeEvent(event);\n                if (!scope.touching) {\n                    domHandlers[nativeEventName].call(instance, event);\n                }\n            });\n        });\n    }\n}\nfunction mountGlobalDOMEventListeners(instance, scope) {\n    if (env.pointerEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.pointer, mount);\n    }\n    else if (!env.touchEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n    function mount(nativeEventName) {\n        function nativeEventListener(event) {\n            event = getNativeEvent(event);\n            if (!isLocalEl(instance, event.target)) {\n                event = normalizeGlobalEvent(instance, event);\n                scope.domHandlers[nativeEventName].call(instance, event);\n            }\n        }\n        mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });\n    }\n}\nfunction mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n}\nfunction unmountDOMEventListeners(scope) {\n    var mounted = scope.mounted;\n    for (var nativeEventName in mounted) {\n        if (mounted.hasOwnProperty(nativeEventName)) {\n            removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n        }\n    }\n    scope.mounted = {};\n}\nvar DOMHandlerScope = (function () {\n    function DOMHandlerScope(domTarget, domHandlers) {\n        this.mounted = {};\n        this.listenerOpts = {};\n        this.touching = false;\n        this.domTarget = domTarget;\n        this.domHandlers = domHandlers;\n    }\n    return DOMHandlerScope;\n}());\nvar HandlerDomProxy = (function (_super) {\n    __extends(HandlerDomProxy, _super);\n    function HandlerDomProxy(dom, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this.__pointerCapturing = false;\n        _this.dom = dom;\n        _this.painterRoot = painterRoot;\n        _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n        if (globalEventSupported) {\n            _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n        }\n        mountLocalDOMEventListeners(_this, _this._localHandlerScope);\n        return _this;\n    }\n    HandlerDomProxy.prototype.dispose = function () {\n        unmountDOMEventListeners(this._localHandlerScope);\n        if (globalEventSupported) {\n            unmountDOMEventListeners(this._globalHandlerScope);\n        }\n    };\n    HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\n        this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    };\n    HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\n        this.__mayPointerCapture = null;\n        if (globalEventSupported\n            && ((+this.__pointerCapturing) ^ (+isPointerCapturing))) {\n            this.__pointerCapturing = isPointerCapturing;\n            var globalHandlerScope = this._globalHandlerScope;\n            isPointerCapturing\n                ? mountGlobalDOMEventListeners(this, globalHandlerScope)\n                : unmountDOMEventListeners(globalHandlerScope);\n        }\n    };\n    return HandlerDomProxy;\n}(Eventful));\nexport default HandlerDomProxy;\n","/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nimport env from './core/env.js';\nimport * as zrUtil from './core/util.js';\nimport Handler from './Handler.js';\nimport Storage from './Storage.js';\nimport Animation, { getTime } from './animation/Animation.js';\nimport HandlerProxy from './dom/HandlerProxy.js';\nimport { lum } from './tool/color.js';\nimport { DARK_MODE_THRESHOLD } from './config.js';\nimport Group from './graphic/Group.js';\nvar painterCtors = {};\nvar instances = {};\nfunction delInstance(id) {\n    delete instances[id];\n}\nfunction isDarkMode(backgroundColor) {\n    if (!backgroundColor) {\n        return false;\n    }\n    if (typeof backgroundColor === 'string') {\n        return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\n    }\n    else if (backgroundColor.colorStops) {\n        var colorStops = backgroundColor.colorStops;\n        var totalLum = 0;\n        var len = colorStops.length;\n        for (var i = 0; i < len; i++) {\n            totalLum += lum(colorStops[i].color, 1);\n        }\n        totalLum /= len;\n        return totalLum < DARK_MODE_THRESHOLD;\n    }\n    return false;\n}\nvar ZRender = (function () {\n    function ZRender(id, dom, opts) {\n        var _this = this;\n        this._sleepAfterStill = 10;\n        this._stillFrameAccum = 0;\n        this._needsRefresh = true;\n        this._needsRefreshHover = true;\n        this._darkMode = false;\n        opts = opts || {};\n        this.dom = dom;\n        this.id = id;\n        var storage = new Storage();\n        var rendererType = opts.renderer || 'canvas';\n        if (!painterCtors[rendererType]) {\n            rendererType = zrUtil.keys(painterCtors)[0];\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (!painterCtors[rendererType]) {\n                throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n            }\n        }\n        opts.useDirtyRect = opts.useDirtyRect == null\n            ? false\n            : opts.useDirtyRect;\n        var painter = new painterCtors[rendererType](dom, storage, opts, id);\n        var ssrMode = opts.ssr || painter.ssrOnly;\n        this.storage = storage;\n        this.painter = painter;\n        var handerProxy = (!env.node && !env.worker && !ssrMode)\n            ? new HandlerProxy(painter.getViewportRoot(), painter.root)\n            : null;\n        var useCoarsePointer = opts.useCoarsePointer;\n        var usePointerSize = (useCoarsePointer == null || useCoarsePointer === 'auto')\n            ? env.touchEventsSupported\n            : !!useCoarsePointer;\n        var defaultPointerSize = 44;\n        var pointerSize;\n        if (usePointerSize) {\n            pointerSize = zrUtil.retrieve2(opts.pointerSize, defaultPointerSize);\n        }\n        this.handler = new Handler(storage, painter, handerProxy, painter.root, pointerSize);\n        this.animation = new Animation({\n            stage: {\n                update: ssrMode ? null : function () { return _this._flush(true); }\n            }\n        });\n        if (!ssrMode) {\n            this.animation.start();\n        }\n    }\n    ZRender.prototype.add = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.addRoot(el);\n        el.addSelfToZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.remove = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.delRoot(el);\n        el.removeSelfFromZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.configLayer = function (zLevel, config) {\n        if (this.painter.configLayer) {\n            this.painter.configLayer(zLevel, config);\n        }\n        this.refresh();\n    };\n    ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n        if (this.painter.setBackgroundColor) {\n            this.painter.setBackgroundColor(backgroundColor);\n        }\n        this.refresh();\n        this._backgroundColor = backgroundColor;\n        this._darkMode = isDarkMode(backgroundColor);\n    };\n    ZRender.prototype.getBackgroundColor = function () {\n        return this._backgroundColor;\n    };\n    ZRender.prototype.setDarkMode = function (darkMode) {\n        this._darkMode = darkMode;\n    };\n    ZRender.prototype.isDarkMode = function () {\n        return this._darkMode;\n    };\n    ZRender.prototype.refreshImmediately = function (fromInside) {\n        if (!fromInside) {\n            this.animation.update(true);\n        }\n        this._needsRefresh = false;\n        this.painter.refresh();\n        this._needsRefresh = false;\n    };\n    ZRender.prototype.refresh = function () {\n        this._needsRefresh = true;\n        this.animation.start();\n    };\n    ZRender.prototype.flush = function () {\n        this._flush(false);\n    };\n    ZRender.prototype._flush = function (fromInside) {\n        var triggerRendered;\n        var start = getTime();\n        if (this._needsRefresh) {\n            triggerRendered = true;\n            this.refreshImmediately(fromInside);\n        }\n        if (this._needsRefreshHover) {\n            triggerRendered = true;\n            this.refreshHoverImmediately();\n        }\n        var end = getTime();\n        if (triggerRendered) {\n            this._stillFrameAccum = 0;\n            this.trigger('rendered', {\n                elapsedTime: end - start\n            });\n        }\n        else if (this._sleepAfterStill > 0) {\n            this._stillFrameAccum++;\n            if (this._stillFrameAccum > this._sleepAfterStill) {\n                this.animation.stop();\n            }\n        }\n    };\n    ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n        this._sleepAfterStill = stillFramesCount;\n    };\n    ZRender.prototype.wakeUp = function () {\n        this.animation.start();\n        this._stillFrameAccum = 0;\n    };\n    ZRender.prototype.refreshHover = function () {\n        this._needsRefreshHover = true;\n    };\n    ZRender.prototype.refreshHoverImmediately = function () {\n        this._needsRefreshHover = false;\n        if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n            this.painter.refreshHover();\n        }\n    };\n    ZRender.prototype.resize = function (opts) {\n        opts = opts || {};\n        this.painter.resize(opts.width, opts.height);\n        this.handler.resize();\n    };\n    ZRender.prototype.clearAnimation = function () {\n        this.animation.clear();\n    };\n    ZRender.prototype.getWidth = function () {\n        return this.painter.getWidth();\n    };\n    ZRender.prototype.getHeight = function () {\n        return this.painter.getHeight();\n    };\n    ZRender.prototype.setCursorStyle = function (cursorStyle) {\n        this.handler.setCursorStyle(cursorStyle);\n    };\n    ZRender.prototype.findHover = function (x, y) {\n        return this.handler.findHover(x, y);\n    };\n    ZRender.prototype.on = function (eventName, eventHandler, context) {\n        this.handler.on(eventName, eventHandler, context);\n        return this;\n    };\n    ZRender.prototype.off = function (eventName, eventHandler) {\n        this.handler.off(eventName, eventHandler);\n    };\n    ZRender.prototype.trigger = function (eventName, event) {\n        this.handler.trigger(eventName, event);\n    };\n    ZRender.prototype.clear = function () {\n        var roots = this.storage.getRoots();\n        for (var i = 0; i < roots.length; i++) {\n            if (roots[i] instanceof Group) {\n                roots[i].removeSelfFromZr(this);\n            }\n        }\n        this.storage.delAllRoots();\n        this.painter.clear();\n    };\n    ZRender.prototype.dispose = function () {\n        this.animation.stop();\n        this.clear();\n        this.storage.dispose();\n        this.painter.dispose();\n        this.handler.dispose();\n        this.animation =\n            this.storage =\n                this.painter =\n                    this.handler = null;\n        delInstance(this.id);\n    };\n    return ZRender;\n}());\nexport function init(dom, opts) {\n    var zr = new ZRender(zrUtil.guid(), dom, opts);\n    instances[zr.id] = zr;\n    return zr;\n}\nexport function dispose(zr) {\n    zr.dispose();\n}\nexport function disposeAll() {\n    for (var key in instances) {\n        if (instances.hasOwnProperty(key)) {\n            instances[key].dispose();\n        }\n    }\n    instances = {};\n}\nexport function getInstance(id) {\n    return instances[id];\n}\nexport function registerPainter(name, Ctor) {\n    painterCtors[name] = Ctor;\n}\nexport var version = '5.4.4';\n;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n"],"names":["PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","concat","DEFAULT_ANIMATABLE_MAP","obj","key","ignore","tmpTextPosCalcRes","tmpBoundingRect","Element","props","this","id","animators","currentStates","states","_init","prototype","attr","drift","dx","dy","e","draggable","m","transform","decomposeTransform","markRedraw","beforeUpdate","afterUpdate","update","updateTransform","__dirty","updateInnerText","forceUpdate","textEl","_textContent","textConfig","isLocal","local","innerTransformable","textAlign","textVerticalAlign","textStyleChanged","parent","innerOrigin","copyTransform","position","layoutRect","copy","getBoundingRect","applyTransform","calculateTextPosition","x","y","align","verticalAlign","textOrigin","origin","rotation","relOriginX","relOriginY","width","height","originX","originY","textOffset","offset","isInside","inside","indexOf","innerTextDefaultStyle","_innerTextDefaultStyle","textFill","textStroke","autoStroke","canBeInsideText","insideFill","insideStroke","getInsideTextFill","getInsideTextStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","fill","stroke","setDefaultTextStyle","dirtyStyle","__zr","isDarkMode","backgroundColor","getBackgroundColor","colorArr","alpha","isDark","i","traverse","cb","context","attrKV","value","setTextConfig","setTextContent","setClipPath","extra","hide","show","keyOrObj","keysArr","length","saveCurrentToNormalState","toState","_innerSaveToNormal","normalState","_normalState","animator","fromStateTransition","__fromStateTransition","getLoop","targetName","target","saveTo","_savePrimaryToNormal","primaryKeys","hasState","getState","name","ensureState","clearStates","noAnimation","useState","stateName","keepCurrentStates","forceUseHoverLayer","toNormalState","animationCfg","stateTransition","state","stateProxy","useHoverLayer","hoverLayer","_toggleHoverLayerFlag","_applyStateObj","__inHover","duration","textContent","textGuide","_textGuide","push","_updateAnimationTargets","useStates","stateObjects","len","notChange","stateObj","lastStateObj","mergedState","_mergeStates","join","slice","changeTarget","removeState","idx","splice","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","__changeFinalValue","_transitionState","_attachComponent","componentEl","__hostTarget","zr","addSelfToZr","_detachComponent","removeSelfFromZr","getClipPath","_clipPath","clipPath","removeClipPath","getTextContent","previousTextContent","removeTextContent","cfg","removeTextConfig","getTextGuideLine","setTextGuideLine","guideLine","removeTextGuideLine","refreshHover","refresh","dirty","inHover","animation","addAnimator","removeAnimator","animate","loop","allowDiscreteAnimation","el","during","updateDuringAnimation","done","wakeUp","stopAnimation","scope","forwardToLast","leftAnimators","stop","animateTo","animationProps","animateFrom","getPaintRect","initDefaultProps","elProto","type","silent","isGroup","dragging","ignoreClip","createLegacyProperty","privateKey","xKey","yKey","enhanceArray","self","pos","Object","defineProperty","get","set","val","animatable","reverse","animateToShallow","finishCount","doneHappened","cfgDone","cfgAborted","aborted","doneCb","abortedCb","percent","force","start","easing","copyArrShallow","source","copyValue","sourceArr","targetArr","len0","len1","Array","call","topKey","animateObj","targetKeys","delay","additive","setToFinal","animateAll","existsAnimators","animationKeys","k","innerKey","targetVal","keyLen","stopTracks","val1","val2","arr0","arr1","is1DArraySame","revertedSource","reversedTarget","sourceClone","whenWithKeys","easingFuncs","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","Math","cos","PI","sinusoidalOut","sin","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","sqrt","circularOut","circularInOut","elasticIn","s","a","p","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","Clip","opts","_inited","_startTime","_pausedTime","_paused","_life","life","_delay","onframe","ondestroy","onrestart","setEasing","step","globalTime","deltaTime","elapsedTime","min","easingFunc","schedule","remainder","pause","resume","arraySlice","interpolateNumber","p0","p1","interpolate1DArray","out","add1DArray","sign","add2DArray","len2","j","fillColorStops","val0","shorterArr","shorterLen","last","color","max","fillArray","arrDim","arr0Len","arr1Len","isNaN","cloneValue","ret","rgba2String","rgba","floor","isGradientValueType","valType","isArrayValueType","tmpRgba","Track","propName","keyframes","discrete","_invalid","_needsSort","_lastFr","_lastFrP","isFinished","_finished","setFinished","_additiveTrack","needsAnimate","getAdditiveTrack","addKeyframe","time","rawValue","arrayDim","guessArrayDim","colorArray","parsedGradient","colorStops","colorStop","kf","prepare","maxTime","additiveTrack","kfs","sort","b","kfsLen","lastKf","isDiscrete","isArr","isGradient","lastValue","startValue","additiveValue","frameIdx","frame","nextFrame","isAdditive","valueKey","kfsNum","isValueColor","lastFrame","mathMin","interval","w","_additiveValue","interpolate2DArray","nextVal_1","isLinearGradient_1","nextColorStop","global","x2","y2","r","_addToTarget","Animator","additiveTo","_tracks","_trackKeys","_maxTime","_started","_clip","_target","_loop","_additiveAnimators","_allowDiscrete","getMaxTime","getDelay","getTarget","when","propNames","tracks","track","initialValue","_getAdditiveTrack","addtiveTrackKfs","lastFinalKf","isPaused","_force","_doneCallback","_setTracksFinished","doneList","_doneCbs","_abortedCallback","abortedList","_abortedCbs","removeClip","tracksKeys","trackName","additiveAnimators","getTrack","clip","stillHasAdditiveAnimator","onframeList","_onframeCbs","addClip","getClip","getTracks","_this","allAborted","trackKeys","firstOrLast","finalProps","pop","regexp","createCubicEasingFunc","cubicEasingStr","cubic","exec","points","split","a_1","b_1","c_1","d_1","roots_1","requestAnimationFrame","hasGlobalWindow","window","bind","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","func","setTimeout","createDom","painter","dpr","newDom","platform","createCanvas","getWidth","getHeight","newDomStyle","style","left","top","setAttribute","_super","Layer","dom","motionBlur","lastFrameAlpha","virtual","config","incremental","zlevel","maxRepaintRectCount","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","util","domStyle","onselectstart","padding","margin","borderWidth","getElementCount","afterBrush","initContext","ctx","getContext","setUnpainted","createBackBuffer","domBack","ctxBack","scale","createRepaintRects","displayList","prevList","viewWidth","viewHeight","hasIntersections","mergedRepaintRects","full","pendingRect","BoundingRect","addRectToMergePool","rect","isFinite","isZero","boundingRect","isMerged","minDeltaArea","Infinity","bestRectToMergeIdx","mergedRect","intersect","pendingRect_1","union","aArea","bArea","deltaArea","shouldPaint","shouldBePainted","prevRect","__isRendered","getPrevPaintRect","curRect","_paintRects","debugGetPaintRects","resize","clear","clearAll","clearColor","repaintRects","haveMotionBLur","globalCompositeOperation","drawImage","doClear","clearRect","clearColorGradientOrPattern","__width","__height","__canvasGradient","scaleX","scaleY","__painter","save","fillStyle","fillRect","restore","globalAlpha","Eventful","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","CanvasPainter","root","storage","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","nodeName","toUpperCase","_opts","devicePixelRatio","_singleCanvas","innerHTML","zlevelList","layers","rootCanvas","_width","_height","mainLayer","__builtin__","_domRoot","domRoot","document","createElement","cssText","createRoot","appendChild","getType","isSingleCanvas","getViewportRoot","getViewportRootOffset","viewportRoot","offsetLeft","offsetTop","paintAll","list","getDisplayList","_redrawId","random","_paintList","z","layer","_backgroundColor","useDirtyRect","_paintHoverList","_hoverlayer","getLayer","getHoverLayer","paintOne","redrawId","_updateLayerStatus","_a","_doPaintList","finished","needsRefreshHover","_compositeManually","eachLayer","self_1","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","Date","now","startTime","firstEl","notClear","repaint","repaintRect","allClipped","prevEl","_doPaintEl","prevElClipPaths","beginPath","env","wxa","draw","currentLayer","isLast","paintRect","setPrevPaintRect","insertLayer","layersMap","prevLayer","isLayerValid","prevDom","nextSibling","insertBefore","firstChild","eachOtherLayer","getLayers","updatePrevLayer","i_1","prevZlevel","incrementalLayerCount","_clearLayer","setBackgroundColor","configLayer","layerConfig","_zlevel","delLayer","parentNode","removeChild","display","hasOwnProperty","clearLayer","dispose","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","renderToCanvas","getLineDash","lineType","lineWidth","lineDash","lineDashOffset","lineScale_1","strokeNoScale","getLineScale","rawVal","pathProxyForDraw","styleHasStroke","isValidStrokeFillStyle","strokeOrFill","styleHasFill","doFillPath","fillOpacity","originalGlobalAlpha","opacity","doStrokePath","strokeOpacity","createCanvasPattern","pattern","image","__image","canvasPattern","createPattern","repeat","DOMMatrix","setTransform","matrix","translateSelf","rotateSelf","scaleSelf","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","styleChanged","flushPathDrawn","blend","shadowColor","bindPathAndTextCommonStyle","getStyle","strokeStyle","hasStroke","newLineWidth","prop","setContextTransform","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","batchFill","batchStroke","__hoverStyle","brushSingle","brush","clipPaths","__clipPaths","forceSetTransform","forceSetStyle","isZeroArea","buildPath","shape","updateClipStatus","beforeBrush","innerBeforeBrush","m0","m1","canBatchPath","autoBatch","hasFill","strokePercent","canPathBatch","lastDrawType","inBatch","strokePart","firstDraw","path","createPathProxy","dirtyFlag","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","getGlobalScale","setScale","segmentIgnoreThreshold","setLineDash","needsRebuild","setDPR","setContext","reset","toStatic","pathUpdated","rebuildPath","strokeFirst","brushPath","text","font","textBaseline","strokeText","fillText","brushText","bindImageStyle","onload","aspect","sWidth","sHeight","sx","sy","brushImage","getTemporalDisplayables","displayables","getDisplayables","temporalDisplayables","innerScope","getCursor","displayable","innerAfterBrush","len_1","clearTemporalDisplayables","brushIncremental","isSafeNum","num","getCanvasGradient","canvasGradient","createRadialGradient","createLinearGradient","addColorStop","isClipPathChanged","prevClipPaths","parseInt10","parseInt","getSize","whIdx","wh","cwh","plt","prb","parseFloat","stl","defaultView","getComputedStyle","screen","deviceXDPI","logicalXDPI","DARK_MODE_THRESHOLD","DARK_LABEL_COLOR","LIGHT_LABEL_COLOR","LIGHTER_LABEL_COLOR","containStroke","x0","y0","x1","y1","_l","abs","tmp","EPSILON","isAroundEqual","contain","p2","textWidthCache","cacheOfFont","measureText","put","innerGetBoundingRect","getLineHeight","adjustTextX","adjustTextY","textLines","uniondRect","parsePercent","maxValue","lastIndexOf","textPosition","distance","halfHeight","PI2","normalizeRadian","angle","windingLine","t","dir","x_","mathMax","lt","rb","lb","rt","minTv","maxTv","other","calculateTransform","mtv","create","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","dMin","dMax","d0","d1","d2","d3","clone","plain","tx","ty","maxX","maxY","eventProcessors","_$eventProcessor","on","event","query","handler","_$handlers","_h","eventProcessor","normalizeQuery","h","wrap","callAtLast","zrEventfulCallAtLast","lastIndex","lastWrap","isSilent","eventName","off","eventType","newList","l","trigger","args","_i","arguments","argLen","hItem","filter","apply","afterTrigger","triggerWithContext","Entry","LinkedList","_len","insert","entry","insertEntry","head","tail","next","prev","remove","LRU","maxSize","_list","_maxSize","_map","map","removed","_lastRemovedEntry","leastUsedEntry","extent","extent2","OrientedBoundingRect","_corners","_axes","_origin","fromBoundingRect","corners","axes","sub","normalize","dot","overlapped","noMtv","_intersectCheckOneSide","inverse","axis","_getProjMinMaxOnAxis","dist0","dist1","dim","proj","proj_1","CMD","M","L","C","Q","A","Z","R","tmpOutX","tmpOutY","min2","max2","mathCos","mathSin","mathAbs","hasTypedArray","Float32Array","tmpAngles","modPI2","radian","round","normalizeArcAngles","angles","anticlockwise","newStartAngle","delta","newEndAngle","PathProxy","notSaveData","_xi","_yi","_x0","_y0","_saveData","data","proto","increaseVersion","_version","getVersion","_ux","_uy","_ctx","_pathSegLen","_pathLen","moveTo","_drawPendingPt","addData","lineTo","exceedUnit","_pendingPtDist","_pendingPtX","_pendingPtY","bezierCurveTo","x3","y3","quadraticCurveTo","arc","cx","cy","startAngle","endAngle","arcTo","radius","closePath","setData","appendPath","appendSize","appendPathData","cmd","c","d","f","g","_expandData","newData","Number","MAX_VALUE","xi","yi","isFirst","rx","ry","_calculateLength","ux","uy","pathSegLen","pathTotalLen","segCount","displayedLength","pendingPtX","pendingPtY","drawPart","accumLength","pendingPtDist","lo","psi","isEllipse","breakBuild","ellipse","newProxy","Point","equal","add","scalar","scaleAndAdd","lenSquare","distanceSquare","negate","toArray","fromArray","input","lerp","onet","mIdentity","isNotAroundZero","scaleTmp","tmpTransform","originTransform","Transformable","getLocalTransform","setPosition","arr","setSkew","skewX","skewY","setOrigin","needLocalTransform","parentTransform","_resolveGlobalScaleRatio","invTransform","globalScaleRatio","relX","relY","getComputedTransform","transformNode","ancestors","setLocalTransform","atan2","shearX","ox","oy","transformCoordToLocal","v2","transformCoordToGlobal","ax","anchorX","ay","anchorY","tan","TRANSFORMABLE_PROPS","wmUniqueIndex","supportDefineProperty","WeakMap","_id","_guard","enumerable","configurable","has","TypeError","end","extremity","fromPoints","right","bottom","fromLine","xDim","yDim","fromCubic","cubicExtrema","cubicAt","n","fromQuadratic","quadraticExtremum","quadraticAt","fromArc","vec2Min","vec2Max","diff","mathPow","mathSqrt","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","_v1","_v2","isAroundZero","p3","cubicDerivativeAt","cubicRootAt","roots","B","t1","disc","K","t2","discSqrt","Y1","Y2","T","theta","acos","ASqrt","t3","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","_t","cubicLength","iteration","px","py","quadraticDerivativeAt","quadraticRootAt","divider","quadraticSubdivide","quadraticProjectPoint","quadraticLength","LN2","log","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","subRowMask","subRowStart","sum","colLocalIdx","colTag","buildTransformer","src","dest","mA","det","vh","srcPointX","srcPointY","pk","EVENT_SAVED_PROP","_calcOut","transformLocalCoord","elFrom","elTarget","inX","inY","transformCoordWithViewport","getBoundingClientRect","domSupported","isCanvasEl","saved","markers","propLR","propTB","marker","idxLR","idxTB","prepareCoordMarkers","transformer","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","ii","preparePointerTransformer","replaceReg","replaceMap","encodeHTML","replace","str","Browser","firefox","ie","edge","newEdge","weChat","browser","node","worker","svgSupported","touchEventsSupported","pointerEventsSupported","transformSupported","transform3dSupported","wx","getSystemInfoSync","navigator","ua","match","test","version","SVGRect","documentElement","WebKitCSSMatrix","detect","userAgent","MOUSE_EVENT_REG","firefoxNotSupportOffsetXY","clientToLocal","calculate","calculateZrXY","layerX","offsetX","zrX","zrY","layerY","offsetY","ex","clientX","ey","clientY","box","getNativeEvent","normalizeEvent","touch","targetTouches","changedTouches","wheelDelta","rawWheelDelta","deltaX","deltaY","getWheelDeltaMayPolyfill","zrDelta","detail","button","which","undefined","addEventListener","opt","removeEventListener","preventDefault","stopPropagation","cancelBubble","isMiddleOrRightButtonOnMouseUpDown","identity","mul","m2","out0","out1","out2","out3","out4","out5","translate","v","rotate","rad","aa","ac","atx","ab","ad","aty","st","ct","vx","vy","invert","DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_FONT","_cachedFont","DEFAULT_TEXT_WIDTH_MAP","mapStr","JSON","char","String","fromCharCode","size","charCodeAt","getTextWidthMap","platformApi","canvas","res","fontSize","preCalcWidth","loadImage","onerror","Image","DEFAULT_MIN_MERGE","DEFAULT_MIN_GALLOPING","makeAscendingRun","array","hi","compare","runHi","reverseRun","binaryInsertionSort","mid","pivot","gallopLeft","hint","lastOffset","maxOffset","gallopRight","TimSort","runStart","runLength","minGallop","stackSize","mergeAt","start1","length1","start2","length2","cursor1","cursor2","count1","count2","exit","_minGallop","Error","mergeLow","customCursor","customDest","mergeHigh","mergeRuns","forceMergeRuns","pushRun","_runStart","_runLength","remaining","ts","minRun","minRunLength","BUILTIN_OBJECT","reduce","TYPED_ARRAY","objToString","toString","arrayProto","nativeForEach","forEach","nativeFilter","nativeSlice","nativeMap","ctorFunction","constructor","protoFunction","protoKey","idStart","guid","logError","result","typeStr","isPrimitive","Ctor","from","isDom","merge","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","mergeAll","targetAndSources","extend","assign","defaults","overlay","keys","inherits","clazz","baseClazz","clazzPrototype","F","superClass","mixin","override","getOwnPropertyNames","keyList","isArrayLike","each","memo","find","isFunction","curry","isString","isStringSafe","isNumber","isTypedArray","nodeType","ownerDocument","isGradientObject","isImagePatternObject","isRegExp","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","assert","condition","message","trim","primitiveKey","setAsPrimitive","MapPolyfill","existed","callback","isNativeMapSupported","Map","HashMap","thisMap","visit","hasKey","removeKey","createHashMap","concatArray","newArray","createObject","properties","StyleCtor","disableUserSelect","webkitUserSelect","userSelect","webkitTapHighlightColor","hasOwn","own","noop","RADIAN_TO_DEGREE","v1","dist","distSquare","CompoundPath","_updatePathDirty","paths","dirtyPath","shapeChanged","dirtyShape","STYLE_MAGIC_KEY","DEFAULT_COMMON_STYLE","shadowBlur","shadowOffsetX","shadowOffsetY","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS_IN_HOVER_LAYER","Displayable","dispProto","useStyle","considerClipPath","considerAncestors","invisible","culling","tmpRect","viewRect","isDisplayableCulled","parent_1","rectContain","coord","_paintRect","elRect","shadowSize","tolerance","dirtyRectTolerance","ceil","_prevPaintRect","animateStyle","targetKey","setStyle","notRedraw","_rect","styleUpdated","createStyle","isStyleObject","_mergeStyle","targetStyle","sourceStyle","changedKeys","getAnimationStyleProps","statesKeys","mergedStyle","z2","cursor","rectHover","Gradient","Group","_children","childrenRef","children","childAt","childOfName","childCount","child","_doAdd","addBefore","oldChild","newChild","replaceAt","index","old","removeAll","eachChild","stopped","includeChildren","tmpMat","childRect","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","ZRImage","_getSize","imageSource","otherDim","otherDimSize","IncrementalDisplayable","_displayables","_temporaryDisplayables","_cursor","clearDisplaybles","addDisplayable","notPersistent","addDisplayables","eachPendingDisplayable","localPos","LinearGradient","globalCoord","curve","windingCubic","nRoots","nExtrema","y0_","y1_","unit","windingQuadratic","y_","windingArc","dTheta","tmp_1","containPath","isStroke","line","quadratic","_x","DEFAULT_PATH_STYLE","lineCap","miterLimit","DEFAULT_PATH_ANIMATION_PROPS","pathCopyParams","Path","pathProto","decal","decalEl","_decalEl","decalElStyle","getDecalElement","getDefaultShape","defaultStyle","getDefaultStyle","pathFill","fillLum","shapeCfg","getUpdatedPathProxy","needsUpdateRect","firstInvoke","rectStroke","_rectStroke","lineScale","strokeContainThreshold","pathProxy","animateShape","setShape","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","defaultProps","Sub","init","subPixelOptimize","RadialGradient","DEFAULT_TSPAN_STYLE","TSpan","setBoundingRect","STYLE_REG","truncateText","containerWidth","ellipsis","options","prepareTruncateOptions","truncateSingleLine","preparedOpts","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","contentWidth","ellipsisWidth","textLine","subLength","estimateLength","substr","charCode","RichTextToken","RichTextLine","tokens","RichTextContentBlock","contentHeight","outerWidth","outerHeight","lines","pushTokens","block","wrapInfo","styleName","strLines","linesWidths","isEmptyStr","tokenStyle","rich","newLine","tokenPadding","tokenPaddingH","outerWidth_1","accumWidth","wrapText","breakAll","token","isLineHolder","tokensLen","breakCharMap","ch","isWordBreakChar","code","isAlphabeticLetter","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","charAt","chWidth","inWord","DEFAULT_RICH_TEXT_COLOR","DEFAULT_TEXT_ANIMATION_PROPS","lineHeight","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","borderColor","borderRadius","ZRText","_defaultStyle","_updateSubTexts","_childCursor","normalizeStyle","_updateRichTexts","_updatePlainTexts","defaultTextStyle","sourceRich","targetRich","_mergeRich","richNames","richName","_getOrCreateChild","textFont","textPadding","contentBlock","overflow","truncate","calculatedLineHeight","bgColorDrawn","truncateLineOverflow","lineOverflow","lineCount","truncateMinChar","parsePlainText","getStyleText","needDrawBg","needDrawBackground","baseX","baseY","textX","textY","boxX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","getFill","getStroke","hasShadow","fixedBoundingRect","subElStyle","setSeparateFont","topWidth","topHeight","matchedIndex","substring","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","finishLine","outer","paddingH","tokenHeight","innerHeight","styleTokenWidth","tokenWidthNotSpecified","percentWidth","textBackgroundColor","bgImg","remainTruncWidth","parseRichText","xLeft","lineTop","xRight","tokenCount","remainedWidth","leftIndex","lineXLeft","lineXRight","rightIndex","_placeToken","parentBgColorDrawn","textWidth","textHeight","topStyle","rectEl","imgEl","rectStyle","textBorderWidth","textBorderColor","isImageBg","isPlainOrGradientBg","textBorderRadius","Rect","rectShape","imgStyle","borderDash","borderDashOffset","commonStyle","makeFont","hasSeparateFont","fontStyle","fontWeight","parseFontSize","fontFamily","VALID_TEXT_ALIGN","center","VALID_TEXT_VERTICAL_ALIGN","middle","FONT_PARTS","fontProp","REDRAW_BIT","STYLE_CHANGED_BIT","SHAPE_CHANGED_BIT","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","createOrUpdateImage","hostEl","cbPayload","__zrImageSrc","pendingWrap","isImageReady","pending","imageOnLoad","__cachedImgObj","smooth","controlPoints","isLoop","constraint","prevPoint","nextPoint","cps","point","cp0","cp1","shift","smoothBezier","smoothConstraint","cp2","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimizeRect","originWidth","originHeight","positiveOrNegative","doubledPosition","ArcShape","clockwise","Arc","unitX","unitY","BezierCurveShape","cpx1","cpy1","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","pointAt","tangentAt","CircleShape","Circle","EllipseShape","Ellipse","subPixelOptimizeOutputShape","LineShape","Line","optimizedShape","PolygonShape","Polygon","PolylineShape","Polyline","RectShape","r1","r2","r3","r4","total","RingShape","r0","Ring","mathACos","mathATan2","computeCornerTangents","cr","x01","y01","x11","y11","x10","y10","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","innerRadius","hasRadius","mod","icrStart","icrEnd","ocrStart","ocrEnd","ocrs","ocre","icrs","icre","ocrMax","icrMax","limitedOcrMax","limitedIcrMax","xre","yre","xirs","yirs","xrs","yrs","xire","yire","hasArc","cornerRadius","normalizeCornerRadius","halfRd","it_1","dx10","dy10","dx32","dy32","crStart","crEnd","ct0","ct1","SectorShape","Sector","degree","SVGPathRebuilder","precision","_start","_d","_str","_p","_add","dThetaPositive","isCircle","unifiedTheta","large","xRot","dTheta_1","vals","generateStr","getStr","NONE","mathRound","strokeProps","svgStrokeProps","toLowerCase","mapStyleToAttrs","updateAttr","pathHasFill","pathHasStroke","strokeScale","strokeWidth","SVGNS","XLINKNS","XMLNS","XML_NAMESPACE","createElementNS","createVNode","tag","attrs","vNodeToString","S","newline","convertElToString","attrsStr","part","createElementOpen","createBrushScope","zrId","shadowCache","patternCache","gradientCache","clipPathCache","defs","cssNodes","cssAnims","cssClassIdx","cssAnimIdx","shadowIdx","gradientIdx","patternIdx","clipPathIdx","createSVGVNode","useViewBox","EASING_MAP","transformOriginKey","buildPathString","kfShape","svgPathBuilder","setTransformOrigin","ANIMATE_STYLE_MAP","addAnimation","cssAnim","animationName","getEasingFunc","createCSSAnimation","onlyShape","cssAnimations","cssAnimationCfg","cssAnimationName","composedAnim","subScope","animNames","lastAnim","className","createCompoundPathCSSAnimation","groupAnimators","cfgArr","createSingleCSSAnimation","groupAnimator","transformKfs","shapeKfs","finalKfs","animationTimingFunctionAttrName","saveAnimatorTrackToCssKfs","cssKfs","toCssAttrName","attrName","kfEasing","timingFunction","canAnimateShape","newLen","transformOrigin","percents","allTransformOriginSame","isImageLike","isCanvasLike","toDataURL","setStyleAttrs","isFillStroke","setGradient","setPattern","shadowKey","shadowId","globalScale","blur_1","stdDeviation","setShadow","noRotateScale","compress","noTranslate","convertPolyShape","strArr","validatePolyShape","desc","normalizedDesc","builtinShapesDef","circle","item","polyline","polygon","brushSVGPath","builtinShpDef","svgElType","willUpdate","hasShapeAnimation","needBuildPath","pathVersion","elExt","__svgPathBuilder","__svgPathVersion","__svgPathStrokePercent","href","brushSVGImage","separatedFontStr","brushSVGTSpan","gradientTag","gradientAttrs","colors","stopColor","stopsAttrs","gradientKey","gradientId","patternAttrs","noRepeat","repeatX","repeatY","imageWidth_1","imageWidth","imageHeight_1","imageHeight","imageSrc","patternImage","errMsg","setSizeToVNode_1","vNode","img","svgEl","elm","createdImage","patternVNode","svgElement","svgWidth","svgHeight","patternWidth","patternHeight","patternUnits","patternTransform","patternKey","patternId","clipPathId","clipPathAttrs","createTextNode","newNode","referenceNode","colonChar","xChar","emptyNode","isUndef","isDef","createKeyToOldIdx","beginIdx","endIdx","sameVnode","vnode1","vnode2","isSameKey","createElm","vnode","updateAttrs","addVnodes","parentElm","before","vnodes","startIdx","removeVnodes","oldVnode","oldAttrs","cur","removeAttribute","setAttributeNS","patchVnode","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","updateChildren","svgId","SVGPainter","_oldVNode","ssr","viewport","_viewport","svgDom","_svgDom","getSvgDom","renderToVNode","parent_2","patch","renderOneToVNode","bgVNode","_bgVNode","createBackgroundVNode","mainVNode","_mainVNode","animationCssStr","selectorNodes","animationNodes","bracketBegin","bracketEnd","selectors","animations","getCssString","styleNode","renderToString","cssAnimation","getSvgRoot","currentClipPathGroup","listLen","clipPathsGroupsStack","clipPathsGroupsStackDepth","clipGroupNodeIdx","prevLen","lca","i_2","groupAttrs","viewportStyle","bgEl","base64","prefix","encodeURIComponent","normalizeColor","round3","round4","getMatrixStr","TEXT_ALIGN_TO_ANCHOR","getShadowKey","toFixed","isImagePattern","isPattern","isSVGPattern","isLinearGradient","isRadialGradient","getIdURL","getPathPrecision","getSRTTransformString","encodeBase64","btoa","unescape","Buffer","kCSSColorTable","clampCssByte","clampCssFloat","parseCssInt","parseCssFloat","cssHueToRgb","lerpNumber","setRgba","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","parse","cached","iv","strLen","op","ep","fname","params","hsla2rgba","hsla","lift","level","stringify","fastLerp","normalizedValue","leftColor","rightColor","dv","fullOutput","modifyHSL","H","G","vMin","vMax","deltaR","deltaG","deltaB","rgba2hsla","modifyAlpha","arrColor","lum","backgroundLum","aroundEqual","pathToBezierCurves","currentSubpath","bezierArrayGroups","createNewSubpath","addLine","addArc","c1","s1","c2","s2","x4","y4","hx","hy","adpativeBezier","PIXEL_DISTANCE","PIXEL_DISTANCE_SQR","dx2","dy2","cp1LenSqr","cp2LenSqr","projLen1","projLen2","tmpSegX","tmpSegY","getDividingGrids","dimSize","rowDim","count","rowSize","columnSize","ratio","rowCount","columnCount","grids","remained","divideSector","sectorShape","outShapes","arcLen","isAngleRow","row","column","newShape","crossProduct2d","lineLineIntersect","a1x","a1y","a2x","a2y","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","projPtOnLine","pt","lineA","lineB","dir2","addToPoly","poly","binaryDividePolygon","polygonShape","pt0","pt1","intersections","intersectionPt","projPt","splitPt0","splitPt1","splitPt0Arr","splitPt1Arr","newPolyA","newPolyB","splitPolygonByLine","binaryDivideRecursive","OutShapeCtor","isHorizontalRow","rowSizeDim","columnSizeDim","columnDim","divideRect","polygons","beziers","pathToPolygons","polygonConvert","polygonCount","totalArea_1","items","area","selfCount","subPath","alignSubpath","subpath1","subpath2","shorterPath","shorterBezierCount","eachCurveSubDivCount","newSubpath","actualSubDivCount","createSubpath","lastSubpathSubpath","otherSubpath","lastX","lastY","centroid","signedArea","findBestRingOffset","fromSubBeziers","toSubBeziers","fromCp","toCp","bezierCount","bestScore","bestOffset","cursorOffset","score","newArr","isCombineMorphing","__isCombineMorphing","SAVED_METHOD_PREFIX","saveAndModifyMethod","methodName","modifiers","savedMethodName","originalMethod","after","restoreMethod","applyTransformOnBeziers","bezierCurves","mm","subBeziers","prepareMorphPath","fromPath","toPath","fromPathProxy","toPathProxy","array1","array2","lastSubpath1","lastSubpath2","newArray1","newArray2","newSubpath1","newSubpath2","alignBezierCurves","fromBezierCurves","toBezierCurves","fromPathTransform","toPathTransform","morphingData","fromArr","toArr","searchAngleIteration","searchAngleRange","fromNeedsReverse","fromSubpathBezier","toSubpathBezier","newFromSubpathBezier","newToSubpathBezier","bestAngle","tmpArr","sa","ca","newX1","newY1","to","findBestMorphingRotation","__morphT","newCp","x0_1","y0_1","morphPath","animationOpts","oldDone","oldDuring","hilbert","minX","minY","sortPaths","pathList","xMin","yMin","xMax","yMax","cp","defaultDividePath","param","combineMorph","fromList","fromPathList","addFromPath","separateCount","fromIndividuals","toIndividuals","toSubPathList","dividePath","individualDelay","identityTransform","addToSubPathListToZr","restoreToPath","toLen","animating_1","eachDone","indivdualAnimationOpts","separateMorph","toPathList","fromLen","nodeParsers","INHERITABLE_STYLE_ATTRIBUTES_MAP","INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS","SELF_STYLE_ATTRIBUTES_MAP","SELF_STYLE_ATTRIBUTES_MAP_KEYS","SVGParser","_defs","_root","xml","svg","_defsUsePending","named","viewBox","getAttribute","parseAttributes","viewBoxRect","viewBoxTransform","_parseNode","defsUsePending","applyDefs","viewBoxArr","splitNumberSequence","makeViewBoxTransform","ignoreViewBox","elRoot","ignoreRootClip","xmlNode","parentGroup","namedFrom","isInDefs","isInText","namedFromForSub","parser_1","nameAttr","newNamed","svgNodeTagLower","parser","paintServerParsers","def","_parseText","_textX","_textY","inheritStyle","parentSelfStyle","__selfStyle","zrTextBaseline","parentInheritedStyle","__inheritedStyle","zrTextAlign","applyTextAlignment","textStyle","internalField","pointsArr","pointsStr","parsePoints","gradient","parsePaintServerUnit","parseGradientColorStops","toLocaleLowerCase","offsetStr","styleVals","parseInlineStyle","pointsString","onlyInlineStyle","isTextGroup","disp","inheritedStyle","selfStyle","transformOps_1","mt","transformRegex","valueArr","DEGREE_TO_ANGLE","parseTransformAttribute","inheritableStyleResult","selfStyleResult","svgAttrName","attrValue","parseAttributeStyle","getFillStrokeStyle","visibility","urlRegex","method","urlMatch","url","numberReg","rawStr","styleRegex","styleRegResult","svgStlAttr","zrInheritableStlAttr","zrSelfStlAttr","parseSVG","parseXML","DOMParser","parseFromString","svgNode","mathAtan2","transformPath","nPoint","p_1","vMag","vRatio","u","vAngle","processArc","fa","fs","psiDeg","xp","yp","lambda","cxp","cyp","commandReg","SVGPath","isPathProxy","createPathOptions","prevCmd","cpx","cpy","subpathX","subpathY","cmdList","cmdText","cmdStr","pLen","ctlPtx","ctlPty","pathData","createPathProxyFromString","innerOpts","createFromString","extendFromString","defaultOpts","mergePath","pathEls","pathEl","pathBundle","clonePath","sourcePath","bakeTransform","toLocal","Param","topTarget","Draggable","_dragStart","_drag","_dragEnd","draggingTarget","_draggingTarget","_y","dispatchToElement","dropTarget","findHover","lastDropTarget","_dropTarget","GestureMgr","_track","recognize","_doTrack","_recognize","touches","trackItem","recognizers","gestureInfo","pointPair","pinch","trackLen","pinchEnd","pinchPre","pinchScale","pinchCenter","pinchX","pinchY","SILENT","stopEvent","EmptyProxy","setCursor","HoveredResult","handlerNames","Handler","proxy","painterRoot","pointerSize","_hovered","_pointerSize","setHandlerProxy","_draggingMgr","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","hovered","hoveredTarget","mouseout","eventControl","zrEventControl","dispatch","eventArgs","setCursorStyle","cursorStyle","targetInfo","eventKey","eventPacket","eveType","gestureEvent","zrByTouch","makeEventPacket","exclude","setHoverTarget","candidates","targetSizeHalf","pointerRect","ignoreCoarsePointer","thetaStep","processGesture","stage","_gestureMgr","gestureMgr","isHover","hoverCheckResult","handlerInstance","_downEl","_downPoint","_upEl","invalidZErrorLogged","logInvalidZError","shapeCompareFunc","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","includeIgnore","updateDisplayList","_updateAndAddDisplayable","timsort","userSetClipPath","currentClipPath","parentClipPath","addRoot","delRoot","delAllRoots","getRoots","getTime","mouseHandlerNames","pointerEventNameMap","Animation","_running","_time","_pauseStart","_head","_tail","notTriggerFrameAndStageUpdate","nextClip","_startLoop","globalEventSupported","localNativeListenerNames","pointerdown","pointerup","pointermove","pointerout","mouse","pointer","nm","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","markTouch","isLocalEl","instance","elTmp","domBelongToZr","FakeGlobalEvent","stopImmediatePropagation","currentTarget","localDOMHandlers","mousedown","__mayPointerCapture","downPoint","__togglePointerCapture","mouseup","toElement","relatedTarget","__pointerCapturing","wheel","mousewheel","touchstart","__lastTouchMoment","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","touching","touchTimer","clearTimeout","setTouchTimer","mountGlobalDOMEventListeners","mount","normalizeGlobalEvent","capture","listener","mounted","listenerOpts","domTarget","unmountDOMEventListeners","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","_globalHandlerScope","isPointerCapturing","globalHandlerScope","painterCtors","instances","ZRender","_sleepAfterStill","_stillFrameAccum","_needsRefresh","_needsRefreshHover","_darkMode","rendererType","renderer","ssrMode","ssrOnly","handerProxy","HandlerProxy","useCoarsePointer","_flush","zLevel","totalLum","setDarkMode","darkMode","refreshImmediately","fromInside","flush","triggerRendered","refreshHoverImmediately","setSleepAfterStill","stillFramesCount","clearAnimation","eventHandler","registerPainter","extendStatics","setPrototypeOf","__proto__","__extends","__"],"sourceRoot":""}