{"version":3,"file":"static/js/9118.37f937831a.chunk.js","mappings":"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","sources":["webpack://large-screen-configuration/./src/compoents/widgetPreviewDialog/index.tsx","webpack://large-screen-configuration/./src/compoents/dragdrop/moveMask/index.tsx","webpack://large-screen-configuration/./src/compoents/dragdrop/previewItem/index.tsx","webpack://large-screen-configuration/./src/compoents/dragdrop/dragContent/index.tsx","webpack://large-screen-configuration/./src/layout/widgetLayout/index.tsx","webpack://large-screen-configuration/./src/pages/widgets/edit/index copy.tsx"],"sourcesContent":["import React, { FC, useCallback } from \"react\";\r\nimport { Modal, ModalProps } from \"antd\";\r\nimport { IElement, IWidget } from \"@src/service\";\r\nimport PreviewLayout from \"@src/layout/previewLayout\";\r\nimport { capitalizeFirstLetter } from \"@src/utils\";\r\nimport {\r\n  WIDGET_BODY_COLUMN,\r\n  WIDGET_BODY_GAP,\r\n  WIDGET_BODY_ROW,\r\n  WIDGET_HEADER_COLUMN,\r\n  WIDGET_HEADER_GAP,\r\n  WIDGET_HEADER_ROW,\r\n} from \"@src/core/enums/access.enums\";\r\nimport elements from \"@src/elements\";\r\nimport GridLayout from \"@src/layout/gridLayout\";\r\n\r\ninterface IWidgetPreviewDialog extends ModalProps {\r\n  onClose: () => void;\r\n  data: IWidget;\r\n}\r\n\r\nconst WidgetPreviewDialog: FC<IWidgetPreviewDialog> = ({\r\n  open,\r\n  onClose,\r\n  data,\r\n}) => {\r\n  const renderPreview = useCallback((data: IAnyObject) => {\r\n    if (data.element && elements[capitalizeFirstLetter(data.element)]) {\r\n      return React.createElement(\r\n        elements[capitalizeFirstLetter(data.element)],\r\n        {\r\n          options: data.configuration.configureValue,\r\n          data: data.configuration?.dataValue?.mock,\r\n          field: data.configuration?.dataValue?.field,\r\n        }\r\n      );\r\n    }\r\n    return <div>你访问的组件不存在请联系售后人员</div>;\r\n  }, []);\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onClose={onClose}\r\n      onCancel={onClose}\r\n      footer={null}\r\n      title={`微件预览`}\r\n      destroyOnClose\r\n      width={\r\n        data?.configuration?.configureValue?.widgetConfigWidth\r\n          ? data?.configuration?.configureValue?.widgetConfigWidth + 30\r\n          : 630\r\n      }\r\n    >\r\n      <PreviewLayout\r\n        data={data}\r\n        style={{\r\n          width: `${\r\n            data?.configuration?.configureValue?.widgetConfigWidth || 600\r\n          }px`,\r\n          height: `${\r\n            data?.configuration?.configureValue?.widgetConfigHeight || 400\r\n          }px`,\r\n        }}\r\n        header={\r\n          <GridLayout\r\n            datas={\r\n              data?.elements.filter(\r\n                (item: IElement) => item.position === \"header\"\r\n              ) || []\r\n            }\r\n            isDroppable={false}\r\n            isResizable={false}\r\n            column={WIDGET_HEADER_COLUMN}\r\n            row={WIDGET_HEADER_ROW}\r\n            gap={WIDGET_HEADER_GAP}\r\n            render={renderPreview}\r\n            staticed\r\n          />\r\n        }\r\n        body={\r\n          <GridLayout\r\n            datas={\r\n              data?.elements.filter(\r\n                (item: IElement) => item.position === \"body\"\r\n              ) || []\r\n            }\r\n            isDroppable={false}\r\n            isResizable={false}\r\n            column={WIDGET_BODY_COLUMN}\r\n            row={WIDGET_BODY_ROW}\r\n            gap={WIDGET_BODY_GAP}\r\n            render={renderPreview}\r\n            staticed\r\n          />\r\n        }\r\n      />\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default WidgetPreviewDialog;\r\n","import React, { FC, HtmlHTMLAttributes, ReactNode, useMemo } from \"react\";\r\nimport { getItemSizeStyle } from \"../drag\";\r\nimport \"./index.scss\";\r\n\r\ninterface IMoveMask extends HtmlHTMLAttributes<HTMLDivElement> {\r\n  /** 容器格子宽 */\r\n  width: number;\r\n  /** 容器格子高 */\r\n  height: number;\r\n  /** 格子间隔 */\r\n  gap: number;\r\n  /** 拖拽元素列数 */\r\n  column: number;\r\n  /** 拖拽元素行数 */\r\n  row: number;\r\n  /** 拖拽元素 x 坐标 */\r\n  x: number;\r\n  /** 拖拽元素 y 坐标 */\r\n  y: number;\r\n  children: ReactNode;\r\n}\r\n\r\nconst MoveMask: FC<IMoveMask> = ({\r\n  width = 0,\r\n  height = 0,\r\n  gap = 0,\r\n  column = 0,\r\n  row = 0,\r\n  x = 0,\r\n  y = 0,\r\n  style,\r\n  children,\r\n}) => {\r\n  // 获取遮罩层样式\r\n  const maskStyle = useMemo(() => {\r\n    return getItemSizeStyle(width, height, x, y, gap, column, row);\r\n  }, [column, gap, height, row, width, x, y]);\r\n  return (\r\n    <div className=\"cms-drag__moveMask\" style={{ ...maskStyle, ...style }}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MoveMask;\r\n","import React, {\r\n  HtmlHTMLAttributes,\r\n  useCallback,\r\n  useMemo,\r\n  useState,\r\n  memo,\r\n  ReactNode,\r\n} from \"react\";\r\nimport \"./index.scss\";\r\nimport { dragStore } from \"../drag\";\r\ninterface IPreviewItem extends HtmlHTMLAttributes<HTMLDivElement> {\r\n  data: IAnyObject;\r\n  onResizeStart?: () => void;\r\n  onResizeing?: (e: React.DragEvent<HTMLDivElement>) => void;\r\n  onResizeEnd?: () => void;\r\n  groupName?: string;\r\n  /**\r\n   * @param id 刪除的数据ID\r\n   * @returns\r\n   */\r\n  onCloseHander?: (id: string) => void;\r\n  children: ReactNode;\r\n  isShowCloseBtn?: boolean;\r\n}\r\n\r\nconst PreviewItem = memo((props: IPreviewItem) => {\r\n  const {\r\n    data,\r\n    style,\r\n    groupName,\r\n    onResizeStart,\r\n    onResizeing,\r\n    onResizeEnd,\r\n    onCloseHander,\r\n    children,\r\n    isShowCloseBtn,\r\n  } = props;\r\n  const [moveing, setMoveing] = useState(false);\r\n  const [resizeing, setResizeing] = useState(false);\r\n  const previewStyles = useMemo(() => {\r\n    return {\r\n      gridArea: `${data.y} / ${data.x} / ${data.y + data.row}/ ${\r\n        data.x + data.column\r\n      }`,\r\n      ...(moveing\r\n        ? {\r\n            opacity: 0,\r\n            // 将当前元素移出容器外,将元素占位空置出来\r\n            transform: `translate(-999999999px, -9999999999px)`,\r\n          }\r\n        : {}),\r\n      ...(resizeing ? { opacity: 0.5 } : {}),\r\n    };\r\n  }, [data.column, data.row, data.x, data.y, moveing, resizeing]);\r\n  // 移动开始\r\n  const onDragStart = useCallback(\r\n    (e: React.DragEvent<HTMLDivElement>) => {\r\n      dragStore.set(groupName as string, {\r\n        ...data,\r\n        pageX: e.pageX,\r\n        pageY: e.pageY,\r\n      });\r\n      setTimeout(() => {\r\n        setMoveing(true);\r\n      }, 0);\r\n      setResizeing(false);\r\n    },\r\n    [data, groupName]\r\n  );\r\n  // 移动结束\r\n  const onDragEnd = useCallback(\r\n    (e: React.DragEvent<HTMLDivElement>) => {\r\n      setMoveing(false);\r\n      dragStore.remove(groupName as string);\r\n    },\r\n    [groupName]\r\n  );\r\n\r\n  const onMouseDown = useCallback(\r\n    (e: React.DragEvent<HTMLDivElement>) => {\r\n      dragStore.set(groupName as string, data);\r\n      setResizeing(true);\r\n      onResizeStart?.();\r\n    },\r\n    [data, groupName, onResizeStart]\r\n  );\r\n\r\n  const onMouseMove = useCallback(\r\n    (e: React.DragEvent<HTMLDivElement>) => {\r\n      e.preventDefault();\r\n      onResizeing?.(e);\r\n    },\r\n    [onResizeing]\r\n  );\r\n\r\n  const onMouseUp = useCallback(\r\n    (e: any) => {\r\n      onResizeEnd?.();\r\n      e.target.style.width = \"100%\";\r\n      e.target.style.height = \"100%\";\r\n      setResizeing(false);\r\n    },\r\n    [onResizeEnd]\r\n  );\r\n  return (\r\n    <div\r\n      className=\"cms-drag__preview--item\"\r\n      style={{ ...previewStyles, ...style }}\r\n      onDragStart={onDragStart}\r\n      draggable\r\n      onDragEnd={onDragEnd}\r\n      onMouseDown={onMouseDown}\r\n      onMouseMove={onMouseMove}\r\n      onMouseUp={onMouseUp}\r\n    >\r\n      {children}\r\n      {isShowCloseBtn ? (\r\n        <div\r\n          className=\"close\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            onCloseHander?.(data.elementId);\r\n          }}\r\n        ></div>\r\n      ) : (\r\n        \"none\"\r\n      )}\r\n      {/* <div className=\"resize\"></div> */}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default PreviewItem;\r\n","import React, {\r\n  memo,\r\n  ReactNode,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport \"./index.scss\";\r\nimport { booleanWithin, dragStore } from \"../drag\";\r\nimport MoveMask from \"../moveMask\";\r\nimport { guid } from \"@src/utils\";\r\nimport PreviewItem from \"../previewItem\";\r\n\r\ninterface IDragContent {\r\n  // 辅助线配置\r\n  auxiliaryLineConfig?: IAnyObject;\r\n  datas: IAnyObject[];\r\n  /** 拖拽分组标识 */\r\n  groupName?: string;\r\n  /** 容器需要分隔列数 */\r\n  column: number;\r\n  /** 容器需要分隔行数 */\r\n  row: number;\r\n  /** 容器格子间隔 */\r\n  gap: number;\r\n  /** 是否显示拖拽预占位层 */\r\n  mask?: boolean;\r\n  /** drop时对比的id字段 */\r\n  field?: string;\r\n  /**\r\n   * @param isAdd 是否新增\r\n   * @param data 数据\r\n   * @returns\r\n   */\r\n  onDropHandler?: (isAdd: boolean, data: IAnyObject) => void;\r\n  /**\r\n   * @param data 改变的数据\r\n   * @returns\r\n   */\r\n  onResizeEndHandler?: (data: IAnyObject) => void;\r\n  /**\r\n   * @param id 刪除的数据ID\r\n   * @returns\r\n   */\r\n  onCloseHander?: (id: string) => void;\r\n\r\n  renderPreview?: (data: IAnyObject) => ReactNode;\r\n}\r\n\r\nconst DragContent = memo((props: IDragContent) => {\r\n  const {\r\n    groupName,\r\n    column,\r\n    row,\r\n    gap,\r\n    mask = true,\r\n    field = \"id\",\r\n    onDropHandler,\r\n    datas,\r\n    onResizeEndHandler,\r\n    onCloseHander,\r\n    renderPreview,\r\n    auxiliaryLineConfig,\r\n  } = props;\r\n  // 目标元素\r\n  const target = useRef<HTMLDivElement>(null);\r\n  // 宽高\r\n  const [clientRect, setClientRect] = useState({\r\n    width: 0,\r\n    height: 0,\r\n    x: 0,\r\n    y: 0,\r\n  });\r\n  const [resizeEnd, setResizeEnd] = useState(false);\r\n  // 拖拽中的元素\r\n  const [current, setCuurent] = useState<IAnyObject>({});\r\n  // 动态计算目标元素的宽高\r\n  const getClientRect = useCallback(() => {\r\n    if (!target.current) return;\r\n    const { width, height, x, y } = (\r\n      target.current as HTMLDivElement\r\n    )?.getBoundingClientRect();\r\n    setClientRect({\r\n      width: (width - (column - 1) * gap) / column,\r\n      height: (height - (row - 1) * gap) / row,\r\n      x: x,\r\n      y: y,\r\n    });\r\n  }, [column, gap, row]);\r\n  useEffect(() => {\r\n    getClientRect();\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      if (!Array.isArray(entries) || !entries.length) {\r\n        return;\r\n      }\r\n      getClientRect();\r\n    });\r\n\r\n    resizeObserver.observe(target.current as HTMLDivElement);\r\n    return () => {\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [getClientRect]);\r\n  // 判断是否可放置\r\n  const isPutDown = useMemo(() => {\r\n    const currentXy: [number, number, number, number] = [\r\n      current.x,\r\n      current.y,\r\n      current.x + current.column - 1,\r\n      current.y + current.row - 1,\r\n    ];\r\n    return booleanWithin([0, 0, column, row], currentXy);\r\n    // return (\r\n    //   booleanWithin([0, 0, column, row], currentXy) &&\r\n    //   datas.every(\r\n    //     (item) =>\r\n    //       item[field] === current[field] ||\r\n    //       !booleanIntersects(\r\n    //         [item.x - 1, item.y - 1, item.x + item.column, item.y + item.row],\r\n    //         currentXy\r\n    //       )\r\n    //   )\r\n    // );\r\n  }, [column, current, row]);\r\n\r\n  // 计算 x 坐标\r\n  const getX = useCallback(\r\n    (num: number) =>\r\n      parseInt(String((num - clientRect.x) / (clientRect.width + gap))) + 1,\r\n    [clientRect.width, clientRect.x, gap]\r\n  );\r\n  // 计算 y 坐标\r\n  const getY = useCallback(\r\n    (num: number) =>\r\n      parseInt(String((num - clientRect.y) / (clientRect.height + gap))) + 1,\r\n    [clientRect.height, clientRect.y, gap]\r\n  );\r\n  // 计算列数\r\n  const getColumn = useCallback(\r\n    (num: number) => Math.max(1, Math.ceil(num / (clientRect.width + gap))),\r\n    [clientRect.width, gap]\r\n  );\r\n  // 计算行数\r\n  const getRow = useCallback(\r\n    (num: number) => Math.max(1, Math.ceil(num / (clientRect.height + gap))),\r\n    [clientRect.height, gap]\r\n  );\r\n  // 进入放置目标\r\n  const onDragEnter = useCallback(\r\n    (e: React.DragEvent<HTMLDivElement>) => {\r\n      e.preventDefault();\r\n      const dragData = dragStore.get(groupName as string);\r\n      if (dragData) {\r\n        setCuurent((state) => ({\r\n          ...state,\r\n          ...dragData,\r\n          x: getX(e.pageX),\r\n          y: getY(e.pageY),\r\n          show: true,\r\n        }));\r\n      }\r\n      console.log(\"onDragEnter\");\r\n    },\r\n    [getX, getY, groupName]\r\n  );\r\n  // 在目标中移动\r\n  const onDragOver = useCallback(\r\n    (e: React.DragEvent<HTMLDivElement>) => {\r\n      e.preventDefault();\r\n      const dragData = dragStore.get(groupName as string);\r\n      if (dragData) {\r\n        setCuurent((state) => ({\r\n          ...state,\r\n          ...dragData,\r\n          x: getX(e.pageX),\r\n          y: getY(e.pageY),\r\n          show: true,\r\n        }));\r\n      }\r\n      console.log(\"onDragOver\");\r\n    },\r\n    [getX, getY, groupName]\r\n  );\r\n  // 离开目标\r\n  const onDragLeave = useCallback(\r\n    (e: React.DragEvent<HTMLDivElement>) => {\r\n      e.preventDefault();\r\n      setCuurent((state) => ({\r\n        ...state,\r\n        show: false,\r\n        [field]: undefined,\r\n      }));\r\n      console.log(\"onDragLeave\");\r\n    },\r\n    [field]\r\n  );\r\n  // 放置在目标上\r\n  const onDrop = useCallback(\r\n    (e: React.DragEvent<HTMLDivElement>) => {\r\n      const dragData = dragStore.get(groupName as string);\r\n      e.preventDefault();\r\n      setCuurent((state) => ({\r\n        ...state,\r\n        show: false,\r\n      }));\r\n      if (isPutDown) {\r\n        onDropHandler &&\r\n          onDropHandler(!Boolean(dragData && dragData[field]), {\r\n            ...dragData,\r\n            ...current,\r\n            [field]: dragData && dragData[field] ? dragData[field] : guid(),\r\n          });\r\n      }\r\n      console.log(\"onDrop\");\r\n    },\r\n    [current, field, groupName, isPutDown, onDropHandler]\r\n  );\r\n  // 调整大小开始\r\n  const onResizeStart = useCallback(() => {\r\n    const dragData = dragStore.get(groupName as string);\r\n    if (dragData) {\r\n      setResizeEnd(false);\r\n      setCuurent((state) => ({\r\n        ...state,\r\n        ...dragData,\r\n        show: true,\r\n      }));\r\n    }\r\n  }, [groupName]);\r\n  // 调正大小时\r\n  const onResizeing = useCallback(\r\n    (e: any) => {\r\n      setResizeEnd(false);\r\n      setCuurent((state) => ({\r\n        ...state,\r\n        column: getColumn(e.target.offsetWidth),\r\n        row: getRow(e.target.offsetHeight),\r\n      }));\r\n    },\r\n    [getColumn, getRow]\r\n  );\r\n  // 调整大小结束\r\n  const onResizeEnd = useCallback(() => {\r\n    setResizeEnd(true);\r\n    setCuurent((state) => ({\r\n      ...state,\r\n      show: false,\r\n    }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const dragData = dragStore.get(groupName as string);\r\n    if (resizeEnd && isPutDown) {\r\n      if (\r\n        dragData?.column !== current.column ||\r\n        dragData?.row !== current.row\r\n      ) {\r\n        console.log(dragData, current, groupName, \"update onResizeEndHandler\");\r\n        onResizeEndHandler?.(current);\r\n        setResizeEnd(false);\r\n      }\r\n    }\r\n  }, [onResizeEndHandler, current, groupName, resizeEnd, isPutDown]);\r\n\r\n  return (\r\n    <div\r\n      ref={target}\r\n      className=\"cms-drag__content\"\r\n      onDragEnter={onDragEnter}\r\n      onDragOver={onDragOver}\r\n      onDragLeave={onDragLeave}\r\n      onDrop={onDrop}\r\n    >\r\n      <div\r\n        className=\"cms-drag__content--container\"\r\n        style={{\r\n          display: auxiliaryLineConfig?.show ? \"grid\" : \"none\",\r\n          gap: `${gap}px`,\r\n          gridTemplateColumns: `repeat(${column}, ${clientRect.width}px)`,\r\n          gridTemplateRows: `repeat(${row},  ${clientRect.height}px)`,\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n        }}\r\n      >\r\n        {new Array(column * row).fill(null).map((_, index) => (\r\n          <div\r\n            key={index}\r\n            style={{\r\n              borderColor:\r\n                auxiliaryLineConfig?.borderColor || \"rgba(255, 255, 255, 0.2)\",\r\n            }}\r\n          ></div>\r\n        ))}\r\n      </div>\r\n      <div\r\n        className=\"cms-drag__preview\"\r\n        style={{\r\n          display: \"grid\",\r\n          gap: `${gap}px`,\r\n          gridTemplateColumns: `repeat(${column}, ${clientRect.width}px)`,\r\n          gridTemplateRows: `repeat(${row},  ${clientRect.height}px)`,\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n        }}\r\n      >\r\n        {datas.map((item) => (\r\n          <PreviewItem\r\n            key={item[field]}\r\n            data={item}\r\n            groupName={groupName}\r\n            style={{\r\n              pointerEvents:\r\n                current.show && item[field] !== current[field] ? \"none\" : \"all\",\r\n              resize: auxiliaryLineConfig?.show ? \"both\" : \"none\",\r\n            }}\r\n            onResizeStart={onResizeStart}\r\n            onResizeing={onResizeing}\r\n            onResizeEnd={onResizeEnd}\r\n            onCloseHander={onCloseHander}\r\n            isShowCloseBtn={auxiliaryLineConfig?.show}\r\n          >\r\n            {renderPreview?.(item)}\r\n          </PreviewItem>\r\n        ))}\r\n\r\n        {mask ? (\r\n          <MoveMask\r\n            style={{\r\n              display: current?.show ? \"flex\" : \"none\",\r\n              background: isPutDown\r\n                ? \"var(--cms-divider-color)\"\r\n                : \"var(--cms-color-help)\",\r\n            }}\r\n            width={clientRect.width}\r\n            height={clientRect.height}\r\n            gap={gap}\r\n            column={current?.column}\r\n            row={current?.row}\r\n            x={current?.x}\r\n            y={current?.y}\r\n          >\r\n            {isPutDown ? \"可放置\" : \"不可放置\"}\r\n          </MoveMask>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DragContent;\r\n","import React, { FC, HtmlHTMLAttributes, ReactNode } from \"react\";\r\nimport \"./index.scss\";\r\ninterface IWidgetLayout extends HtmlHTMLAttributes<HTMLDivElement> {\r\n  header: ReactNode;\r\n  body: ReactNode;\r\n  headerStyles: IAnyObject;\r\n  bodyStyles: IAnyObject;\r\n}\r\n\r\nconst WidgetLayout: FC<IWidgetLayout> = ({\r\n  header,\r\n  body,\r\n  style,\r\n  headerStyles,\r\n  bodyStyles,\r\n  id,\r\n}) => {\r\n  return (\r\n    <div className=\"cms-widget\" style={style} id={id}>\r\n      <div className=\"cms-widget__header\" style={headerStyles}>\r\n        {header}\r\n      </div>\r\n      <div className=\"cms-widget__body\" style={bodyStyles}>\r\n        {body}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WidgetLayout;\r\n","import React, {\r\n  FC,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useReducer,\r\n  useState,\r\n} from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport DragContent from \"@src/compoents/dragdrop/dragContent\";\r\nimport elements from \"@src/elements\";\r\nimport {\r\n  ConfigLayoutHeader,\r\n  ConfigLayoutMain,\r\n  ConfigLayoutLeftAside,\r\n  ConfigLayoutRightAside,\r\n  ConfigLayoutLeftAsideElements,\r\n  ConfigLayoutRightAsideLayer,\r\n  ConfigLayoutRightAsideWidget,\r\n  ConfigLayoutRightAsideElement,\r\n  ConfigLayoutRightAsideData,\r\n  ConfigLayoutMask,\r\n} from \"@src/layout/configLayout\";\r\n\r\nimport { widgetConfig } from \"@src/core/config/base\";\r\n\r\nimport \"@src/layout/configLayout/index.scss\";\r\nimport WidgetLayout from \"@src/layout/widgetLayout\";\r\nimport { initialState, widgetReducer } from \"./store/reducers\";\r\nimport { IElement, IWidget } from \"@src/service\";\r\nimport { capitalizeFirstLetter, guid, getStyles } from \"@src/utils\";\r\nimport \"animate.css\";\r\nimport {\r\n  CACHE_WIDGETS,\r\n  ELEMETSTYPE,\r\n  WIDGET_BODY_COLUMN,\r\n  WIDGET_BODY_GAP,\r\n  WIDGET_BODY_ROW,\r\n  WIDGET_HEADER_COLUMN,\r\n  WIDGET_HEADER_GAP,\r\n  WIDGET_HEADER_ROW,\r\n} from \"@src/core/enums/access.enums\";\r\nimport WidgetPreviewDialog from \"@src/compoents/widgetPreviewDialog\";\r\nimport localforage from \"localforage\";\r\nimport html2canvas from \"html2canvas\";\r\nimport { Button, Form, message, Modal, Select } from \"antd\";\r\ninterface IConfigLayout {}\r\n\r\nconst ConfigLayout: FC<IConfigLayout> = () => {\r\n  let location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [layout, dispatch] = useReducer(widgetReducer, initialState);\r\n  const [show, setShow] = useState(false);\r\n  const [isShowAuxiliaryLine, setIsShowAuxiliaryLine] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const queryParams = new URLSearchParams(location.search);\r\n    // 编辑\r\n    if (queryParams.size) {\r\n      const widgetId = queryParams.get(\"widgetId\");\r\n      if (widgetId) {\r\n        localforage.getItem(CACHE_WIDGETS, (err, value) => {\r\n          if (value) {\r\n            const curr = (value as IWidget[]).find(\r\n              (item) => item.widgetId === widgetId\r\n            );\r\n            if (curr) {\r\n              dispatch({\r\n                type: \"WIDGET\",\r\n                data: curr,\r\n              });\r\n            } else {\r\n              console.log(\"找不到微件ID\");\r\n            }\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      // 新增\r\n      dispatch({\r\n        type: \"WIDGET\",\r\n        data: {\r\n          name: \"未命名微件\",\r\n          url: \"\",\r\n          id: \"\",\r\n          createTime: \"\",\r\n          type: \"text\",\r\n          count: 0,\r\n          x: 0,\r\n          y: 0,\r\n          column: 1,\r\n          row: 1,\r\n          widgetId: guid(),\r\n          configuration: {\r\n            configureValue: widgetConfig.configureValue,\r\n            dataValue: widgetConfig.dataValue,\r\n          },\r\n          elements: [],\r\n        },\r\n      });\r\n    }\r\n  }, [location]);\r\n\r\n  const onDropHandler = (\r\n    position: \"header\" | \"body\",\r\n    isAdd: boolean,\r\n    data: IAnyObject\r\n  ) => {\r\n    // 新增\r\n    if (isAdd) {\r\n      dispatch({\r\n        type: \"ADD_ELEMENT\",\r\n        data: {\r\n          ...data,\r\n          position: position,\r\n        } as IElement,\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: \"MODIFY_ELEMENT\",\r\n        data: {\r\n          ...data,\r\n          position: position,\r\n        } as IElement,\r\n      });\r\n    }\r\n  };\r\n\r\n  const onResizeEndHandler = useCallback((data: IAnyObject) => {\r\n    dispatch({\r\n      type: \"MODIFY_ELEMENT\",\r\n      data: { ...data },\r\n    });\r\n  }, []);\r\n\r\n  const onCloseHander = useCallback((id: string) => {\r\n    console.log(id, \"onCloseHander\");\r\n    dispatch({\r\n      type: \"DELETE_ELEMENT\",\r\n      id,\r\n    });\r\n  }, []);\r\n\r\n  const renderPreview = useCallback(\r\n    (data: IAnyObject) => {\r\n      if (data.element && elements[capitalizeFirstLetter(data.element)]) {\r\n        return (\r\n          <>\r\n            {layout?.elementId === data.elementId &&\r\n            layout?.selectedType === \"element\" ? (\r\n              <ConfigLayoutMask />\r\n            ) : null}\r\n\r\n            {React.createElement(\r\n              elements[capitalizeFirstLetter(data.element)],\r\n              {\r\n                options: data.configuration.configureValue,\r\n                data: data.configuration?.dataValue?.mock,\r\n                field: data.configuration?.dataValue?.field,\r\n              }\r\n            )}\r\n          </>\r\n        );\r\n      }\r\n      return <div>你访问的组件不存在请联系售后人员</div>;\r\n    },\r\n    [layout?.elementId, layout?.selectedType]\r\n  );\r\n  // 判断右侧边栏所需模块\r\n  const rightAside = useMemo(() => {\r\n    let arr: PageType[] = [];\r\n    if (layout?.widgetId) {\r\n      if (layout?.elementId) {\r\n        arr = [\"layer\", \"element\", \"data\"];\r\n      } else {\r\n        arr = [\"layer\", \"data\"];\r\n      }\r\n    } else {\r\n      arr = [\"layer\"];\r\n    }\r\n    return arr;\r\n  }, [layout?.elementId, layout?.widgetId]);\r\n\r\n  const onSelected = useCallback(\r\n    (type: \"page\" | \"widget\" | \"element\", id: string) => {\r\n      if (type === \"element\" && id && layout?.elementId !== id) {\r\n        dispatch({\r\n          type: \"SELECT_ELEMENT\",\r\n          id: id,\r\n        });\r\n      }\r\n    },\r\n    [layout?.elementId]\r\n  );\r\n  const types = useMemo(() => {\r\n    let arr: any[] = [];\r\n    for (let field in ELEMETSTYPE) {\r\n      arr.push({\r\n        label: ELEMETSTYPE[field],\r\n        value: field,\r\n      });\r\n    }\r\n    return arr;\r\n  }, []);\r\n  const onFinish = (values: any) => {\r\n    message.success(\"发布成功\");\r\n    navigate(-1);\r\n    console.log(\r\n      JSON.stringify({\r\n        ...layout?.widget,\r\n        ...values,\r\n      })\r\n    );\r\n  };\r\n\r\n  const currentElement = useMemo(() => {\r\n    return layout?.widget.elements.find(\r\n      (item) => item.elementId === layout?.elementId\r\n    );\r\n  }, [layout?.elementId, layout?.widget.elements]);\r\n\r\n  const onChnage = useCallback((data: PageType | \"\") => {\r\n    dispatch({\r\n      type: \"SELECTED_TYPE\",\r\n      data,\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"cms-config-layout\">\r\n      <ConfigLayoutHeader\r\n        logo=\"&#xe634;\"\r\n        name={layout?.widget.name}\r\n        pageType=\"widget\"\r\n        modifyNameSuccessHander={(name) => {\r\n          dispatch({\r\n            type: \"MODIFY_WIDGET\",\r\n            data: {\r\n              name: name,\r\n            },\r\n          });\r\n        }}\r\n        previewHandler={() => setShow(true)}\r\n        publishHandler={() => {\r\n          setIsShowAuxiliaryLine(false);\r\n          setTimeout(() => {\r\n            html2canvas(document.getElementById(\"js_widget\") as HTMLElement, {\r\n              allowTaint: true,\r\n              scale: 0.5,\r\n              backgroundColor: \"rgb(9, 5, 72)\",\r\n            }).then((canvas) => {\r\n              try {\r\n                dispatch({\r\n                  type: \"MODIFY_WIDGET\",\r\n                  data: {\r\n                    url: canvas?.toDataURL(),\r\n                  },\r\n                });\r\n              } catch (e) {\r\n                message.error(\"存在跨域资源，缩略图获取失败\");\r\n              }\r\n            });\r\n          }, 10);\r\n        }}\r\n      />\r\n      <div className=\"cms-config-layout__content\">\r\n        <ConfigLayoutLeftAside\r\n          navs={[\"element\"]}\r\n          render={(data) => {\r\n            if (data === \"element\") {\r\n              return <ConfigLayoutLeftAsideElements />;\r\n            }\r\n            return null;\r\n          }}\r\n        />\r\n        <ConfigLayoutMain>\r\n          <WidgetLayout\r\n            id=\"js_widget\"\r\n            style={getStyles(\r\n              layout?.widget?.configuration?.configureValue || {}\r\n            )}\r\n            headerStyles={{\r\n              ...getStyles(\r\n                layout?.widget?.configuration?.configureValue || {},\r\n                \"headerStyle\"\r\n              ),\r\n              display: layout?.widget?.configuration?.configureValue?.headerShow\r\n                ? \"block\"\r\n                : \"none\",\r\n            }}\r\n            bodyStyles={getStyles(\r\n              layout?.widget?.configuration?.configureValue || {},\r\n              \"bodyStyle\"\r\n            )}\r\n            header={\r\n              <DragContent\r\n                auxiliaryLineConfig={{\r\n                  show: isShowAuxiliaryLine,\r\n                  borderColor:\r\n                    layout?.widget?.configuration?.configureValue\r\n                      ?.auxiliaryLineBorderColor,\r\n                }}\r\n                column={WIDGET_HEADER_COLUMN}\r\n                row={WIDGET_HEADER_ROW}\r\n                gap={WIDGET_HEADER_GAP}\r\n                groupName=\"elements\"\r\n                field=\"elementId\"\r\n                datas={\r\n                  layout?.widget.elements.filter(\r\n                    (item) => item.position === \"header\"\r\n                  ) || []\r\n                }\r\n                onDropHandler={(isAdd, data) =>\r\n                  onDropHandler(\"header\", isAdd, data)\r\n                }\r\n                onResizeEndHandler={onResizeEndHandler}\r\n                onCloseHander={onCloseHander}\r\n                renderPreview={renderPreview}\r\n              />\r\n            }\r\n            body={\r\n              <DragContent\r\n                auxiliaryLineConfig={{\r\n                  show: isShowAuxiliaryLine,\r\n                  borderColor:\r\n                    layout?.widget?.configuration?.configureValue\r\n                      ?.auxiliaryLineBorderColor,\r\n                }}\r\n                column={WIDGET_BODY_COLUMN}\r\n                row={WIDGET_BODY_ROW}\r\n                gap={WIDGET_BODY_GAP}\r\n                groupName=\"elements\"\r\n                field=\"elementId\"\r\n                datas={\r\n                  layout?.widget.elements.filter(\r\n                    (item) => item.position === \"body\"\r\n                  ) || []\r\n                }\r\n                onDropHandler={(isAdd, data) =>\r\n                  onDropHandler(\"body\", isAdd, data)\r\n                }\r\n                onResizeEndHandler={onResizeEndHandler}\r\n                onCloseHander={onCloseHander}\r\n                renderPreview={renderPreview}\r\n              />\r\n            }\r\n          />\r\n        </ConfigLayoutMain>\r\n        <ConfigLayoutRightAside\r\n          navs={rightAside}\r\n          render={(data) => {\r\n            if (data === \"layer\") {\r\n              return (\r\n                <ConfigLayoutRightAsideLayer\r\n                  datas={layout?.widget ? [layout?.widget] : []}\r\n                  widgetId={layout?.widgetId}\r\n                  elementId={layout?.elementId}\r\n                  onSelected={onSelected}\r\n                />\r\n              );\r\n            } else if (data === \"widget\") {\r\n              return (\r\n                <ConfigLayoutRightAsideWidget\r\n                  configureValue={\r\n                    (layout?.widget?.configuration\r\n                      ?.configureValue as IAnyObject) || {}\r\n                  }\r\n                  onFinish={(data: IAnyObject) => {\r\n                    const configuration = JSON.parse(\r\n                      JSON.stringify(layout?.widget?.configuration)\r\n                    );\r\n                    dispatch({\r\n                      type: \"MODIFY_WIDGET\",\r\n                      data: {\r\n                        configuration: {\r\n                          ...configuration,\r\n                          configureValue: {\r\n                            ...configuration.configureValue,\r\n                            ...data,\r\n                          },\r\n                        },\r\n                      },\r\n                    });\r\n                  }}\r\n                />\r\n              );\r\n            } else if (data === \"element\") {\r\n              return (\r\n                <ConfigLayoutRightAsideElement\r\n                  element={currentElement?.element}\r\n                  configureValue={\r\n                    currentElement?.configuration.configureValue || {}\r\n                  }\r\n                  onFinish={(data: IAnyObject) => {\r\n                    const currentElement = JSON.parse(\r\n                      JSON.stringify(\r\n                        layout?.widget?.elements.find(\r\n                          (item) => item.elementId === layout.elementId\r\n                        )\r\n                      )\r\n                    );\r\n                    if (currentElement) {\r\n                      dispatch({\r\n                        type: \"MODIFY_ELEMENT\",\r\n                        data: {\r\n                          ...currentElement,\r\n                          configuration: {\r\n                            ...currentElement.configuration,\r\n                            configureValue: {\r\n                              ...currentElement.configuration.configureValue,\r\n                              ...data,\r\n                            },\r\n                          },\r\n                        },\r\n                      });\r\n                    }\r\n                  }}\r\n                />\r\n              );\r\n            } else if (data === \"data\") {\r\n              return (\r\n                <ConfigLayoutRightAsideData\r\n                  widgetDataValue={layout?.widget?.configuration?.dataValue}\r\n                  widgetOnFinish={(data: IAnyObject) => {\r\n                    const widget = layout?.widget;\r\n                    console.log(widget, \"123\");\r\n                    dispatch({\r\n                      type: \"MODIFY_WIDGET\",\r\n                      data: {\r\n                        ...widget,\r\n                        configuration: {\r\n                          ...widget?.configuration,\r\n                          dataValue: {\r\n                            ...widget?.configuration?.dataValue,\r\n                            ...data,\r\n                          },\r\n                        },\r\n                      },\r\n                    });\r\n                  }}\r\n                  elementDataValue={currentElement?.configuration.dataValue}\r\n                  elementOnFinish={(data: IAnyObject) => {\r\n                    const currentElement = JSON.parse(\r\n                      JSON.stringify(\r\n                        layout?.widget?.elements.find(\r\n                          (item) => item.elementId === layout.elementId\r\n                        )\r\n                      )\r\n                    );\r\n                    if (currentElement) {\r\n                      dispatch({\r\n                        type: \"MODIFY_ELEMENT\",\r\n                        data: {\r\n                          ...currentElement,\r\n                          configuration: {\r\n                            ...currentElement.configuration,\r\n                            dataValue: {\r\n                              ...currentElement.configuration.dataValue,\r\n                              ...data,\r\n                            },\r\n                          },\r\n                        },\r\n                      });\r\n                    }\r\n                  }}\r\n                />\r\n              );\r\n            }\r\n            return <div>{data}</div>;\r\n          }}\r\n          onChange={onChnage}\r\n        />\r\n      </div>\r\n\r\n      <WidgetPreviewDialog\r\n        open={show}\r\n        onClose={() => setShow(false)}\r\n        data={layout?.widget as IWidget}\r\n      />\r\n      <Modal\r\n        open={!isShowAuxiliaryLine}\r\n        title=\"发布微件\"\r\n        footer={null}\r\n        width={400}\r\n        maskClosable={false}\r\n        onCancel={() => setIsShowAuxiliaryLine(true)}\r\n      >\r\n        <Form\r\n          autoComplete=\"off\"\r\n          initialValues={layout?.widget}\r\n          labelCol={{ flex: \"60px\" }}\r\n          onFinish={onFinish}\r\n        >\r\n          <Form.Item<any> name=\"name\" label=\"微件名称\">\r\n            <Form.Item<any> noStyle>{layout?.widget?.name}</Form.Item>\r\n          </Form.Item>\r\n          <Form.Item<any> name=\"url\" label=\"缩略图\">\r\n            <Form.Item<any> noStyle>\r\n              <img\r\n                src={layout?.widget?.url as string}\r\n                alt=\"缩略图\"\r\n                style={{ borderRadius: \"5px\", width: \"100%\" }}\r\n              />\r\n            </Form.Item>\r\n          </Form.Item>\r\n          <Form.Item<any>\r\n            name=\"type\"\r\n            label=\"类型\"\r\n            rules={[{ required: true, message: \"请选择类型\" }]}\r\n          >\r\n            <Select showSearch placeholder=\"请选择类型\" options={types} />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\" block>\r\n              发布\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfigLayout;\r\n"],"names":["_ref","_data$configuration3","_data$configuration3$","_data$configuration4","_data$configuration4$","_data$configuration5","_data$configuration5$","_data$configuration6","_data$configuration6$","open","onClose","data","renderPreview","useCallback","_data$configuration","_data$configuration$d","_data$configuration2","_data$configuration2$","element","elements","capitalizeFirstLetter","React","options","configuration","configureValue","dataValue","mock","field","Modal","onCancel","footer","title","destroyOnClose","width","widgetConfigWidth","PreviewLayout","style","height","widgetConfigHeight","header","GridLayout","datas","filter","item","position","isDroppable","isResizable","column","WIDGET_HEADER_COLUMN","row","WIDGET_HEADER_ROW","gap","WIDGET_HEADER_GAP","render","staticed","body","WIDGET_BODY_COLUMN","WIDGET_BODY_ROW","WIDGET_BODY_GAP","x","y","children","maskStyle","useMemo","getItemSizeStyle","className","memo","props","groupName","onResizeStart","onResizeing","onResizeEnd","onCloseHander","isShowCloseBtn","moveing","setMoveing","useState","resizeing","setResizeing","previewStyles","gridArea","opacity","transform","onDragStart","e","dragStore","set","pageX","pageY","setTimeout","onDragEnd","remove","onMouseDown","onMouseMove","preventDefault","onMouseUp","target","draggable","onClick","elementId","mask","onDropHandler","onResizeEndHandler","auxiliaryLineConfig","useRef","clientRect","setClientRect","resizeEnd","setResizeEnd","current","setCuurent","getClientRect","_target$current","getBoundingClientRect","useEffect","resizeObserver","ResizeObserver","entries","Array","isArray","length","observe","disconnect","isPutDown","currentXy","booleanWithin","getX","num","parseInt","String","getY","getColumn","Math","max","ceil","getRow","onDragEnter","dragData","get","state","show","onDragOver","onDragLeave","undefined","onDrop","Boolean","guid","offsetWidth","offsetHeight","ref","display","gridTemplateColumns","gridTemplateRows","fill","map","_","index","key","borderColor","PreviewItem","pointerEvents","resize","MoveMask","background","headerStyles","bodyStyles","id","ConfigLayout","_layout$widget","_layout$widget$config","_layout$widget2","_layout$widget2$confi","_layout$widget3","_layout$widget3$confi","_layout$widget3$confi2","_layout$widget4","_layout$widget4$confi","_layout$widget5","_layout$widget5$confi","_layout$widget5$confi2","_layout$widget6","_layout$widget6$confi","_layout$widget6$confi2","_layout$widget12","_layout$widget13","location","useLocation","navigate","useNavigate","layout","dispatch","useReducer","widgetReducer","initialState","setShow","isShowAuxiliaryLine","setIsShowAuxiliaryLine","queryParams","URLSearchParams","search","size","widgetId","localforage","CACHE_WIDGETS","err","value","curr","find","type","name","url","createTime","count","widgetConfig","isAdd","selectedType","ConfigLayoutMask","rightAside","arr","onSelected","types","ELEMETSTYPE","push","label","currentElement","widget","onChnage","ConfigLayoutHeader","logo","pageType","modifyNameSuccessHander","previewHandler","publishHandler","html2canvas","document","getElementById","allowTaint","scale","backgroundColor","then","canvas","toDataURL","message","error","ConfigLayoutLeftAside","navs","ConfigLayoutLeftAsideElements","ConfigLayoutMain","WidgetLayout","getStyles","headerShow","DragContent","auxiliaryLineBorderColor","ConfigLayoutRightAside","ConfigLayoutRightAsideLayer","ConfigLayoutRightAsideWidget","_layout$widget7","_layout$widget7$confi","onFinish","_layout$widget8","JSON","parse","stringify","ConfigLayoutRightAsideElement","_layout$widget9","ConfigLayoutRightAsideData","widgetDataValue","_layout$widget10","_layout$widget10$conf","widgetOnFinish","_widget$configuration","elementDataValue","elementOnFinish","_layout$widget11","onChange","WidgetPreviewDialog","maskClosable","Form","autoComplete","initialValues","labelCol","flex","values","success","Item","noStyle","src","alt","borderRadius","rules","required","Select","showSearch","placeholder","Button","htmlType","block"],"sourceRoot":""}