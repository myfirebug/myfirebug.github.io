{"version":3,"file":"static/js/3727.93d141e935.chunk.js","mappings":"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","sources":["webpack://large-screen-configuration/./src/pages/widgets/index.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport type { ActionType, ProColumns } from \"@ant-design/pro-components\";\r\nimport { ProTable } from \"@ant-design/pro-components\";\r\nimport React, { useRef, FC, useEffect, useState, useContext } from \"react\";\r\nimport { IWidget } from \"@src/service\";\r\nimport \"./index.scss\";\r\nimport { Button } from \"antd\";\r\nimport { PlusOutlined } from \"@ant-design/icons\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { widgets } from \"@src/core/hook\";\r\nimport PreviewDialog from \"@src/compoents/previewDialog\";\r\nimport { LocaleContext } from \"@src/core/i18n/localeContent\";\r\n\r\nexport const waitTimePromise = async (time: number = 100) => {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve(true);\r\n    }, time);\r\n  });\r\n};\r\n\r\nexport const waitTime = async (time: number = 100) => {\r\n  await waitTimePromise(time);\r\n};\r\n\r\nconst Widgets: FC<any> = () => {\r\n  const { $t } = useContext(LocaleContext);\r\n  const actionRef = useRef<ActionType>();\r\n  const navigate = useNavigate();\r\n\r\n  const [show, setShow] = useState(false);\r\n  const [widget, setWidget] = useState<IWidget>();\r\n\r\n  const { filterWidgetsList, getWidgets, filterHandle } = widgets();\r\n\r\n  useEffect(() => {\r\n    getWidgets();\r\n  }, [getWidgets]);\r\n\r\n  const columns: ProColumns<IWidget>[] = [\r\n    {\r\n      title: $t(\"widget_name\" /*名称*/),\r\n      dataIndex: \"name\",\r\n      width: 250,\r\n    },\r\n    {\r\n      title: $t(\"widget_img\" /*图片*/),\r\n      dataIndex: \"url\",\r\n      search: false,\r\n      render: (text, record, _, action) => {\r\n        return <img src={text as string} alt=\"\" width={150} />;\r\n      },\r\n    },\r\n    {\r\n      title: $t(\"widget_type\" /*类型*/),\r\n      dataIndex: \"type\",\r\n      onFilter: true,\r\n      ellipsis: true,\r\n      valueType: \"select\",\r\n      width: 100,\r\n      valueEnum: {\r\n        all: { text: $t(\"widget_all\" /*全部*/), status: \"\" },\r\n        text: {\r\n          text: $t(\"widget_text\" /*文本*/),\r\n          status: \"text\",\r\n        },\r\n        image: {\r\n          text: $t(\"widget_img\" /*图片*/),\r\n          status: \"image\",\r\n        },\r\n        table: {\r\n          text: $t(\"widget_table\" /*表格*/),\r\n          status: \"table\",\r\n        },\r\n        line: {\r\n          text: $t(\"widget_line\" /*折线图*/),\r\n          status: \"line\",\r\n        },\r\n        bar: {\r\n          text: $t(\"widget_bar\" /*柱状图*/),\r\n          status: \"bar\",\r\n        },\r\n        pie: {\r\n          text: $t(\"widget_pie\" /*饼图*/),\r\n          status: \"pie\",\r\n        },\r\n      },\r\n    },\r\n    {\r\n      title: $t(\"widget_use_num\" /*使用次数*/),\r\n      dataIndex: \"count\",\r\n      search: false,\r\n      width: 100,\r\n    },\r\n    {\r\n      title: $t(\"widget_create_time\" /*创建时间*/),\r\n      dataIndex: \"createTime\",\r\n      valueType: \"date\",\r\n      hideInSearch: true,\r\n      width: 150,\r\n    },\r\n    {\r\n      title: $t(\"widget_create_time\" /*创建时间*/),\r\n      dataIndex: \"createTime\",\r\n      valueType: \"dateRange\",\r\n      hideInTable: true,\r\n    },\r\n    {\r\n      title: $t(\"widget_operation\" /*操作*/),\r\n      valueType: \"option\",\r\n      key: \"option\",\r\n      width: 120,\r\n      render: (text, record, _, action) => (\r\n        <div className=\"option\">\r\n          <span\r\n            key=\"view\"\r\n            onClick={() => {\r\n              setShow(true);\r\n              setWidget(record);\r\n            }}\r\n          >\r\n            {$t(\"operation_view\" /*预览*/)}\r\n          </span>\r\n          {record.count === 0 ? (\r\n            <>\r\n              <span\r\n                key=\"editable\"\r\n                onClick={() => {\r\n                  navigate(`/widgets/configuration?widgetId=${record.id}`);\r\n                }}\r\n              >\r\n                {$t(\"operation_edit\" /*编辑*/)}\r\n              </span>\r\n              <span key=\"delete\">{$t(\"operation_delete\" /*删除*/)}</span>\r\n            </>\r\n          ) : null}\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"cms-widgets\">\r\n      <ProTable<IWidget>\r\n        columns={columns}\r\n        actionRef={actionRef}\r\n        // request={async (params) => {\r\n        //   await waitTime(2000);\r\n        //   return API.widgetsService.widgets({ params }).then((res) => {\r\n        //     console.log(res, \"res\");\r\n        //     return res;\r\n        //   });\r\n        // }}\r\n        rowKey=\"widgetId\"\r\n        dataSource={filterWidgetsList}\r\n        onSubmit={filterHandle}\r\n        onReset={filterHandle}\r\n        options={{\r\n          setting: {\r\n            listsHeight: 400,\r\n          },\r\n        }}\r\n        pagination={{\r\n          pageSize: 20,\r\n          onChange: (page) => console.log(page),\r\n        }}\r\n        dateFormatter=\"string\"\r\n        headerTitle={$t(\"widget_list\" /*微件列表*/)}\r\n        toolBarRender={() => [\r\n          <Button\r\n            key=\"button\"\r\n            icon={<PlusOutlined />}\r\n            onClick={() => navigate(\"/widgets/configuration\")}\r\n            type=\"primary\"\r\n          >\r\n            {$t(\"operation_create\" /*新建*/)}\r\n          </Button>,\r\n        ]}\r\n      />\r\n      {/* 预览功能 */}\r\n      <PreviewDialog\r\n        open={show}\r\n        data={widget}\r\n        pageType=\"widget\"\r\n        onClose={() => setShow(false)}\r\n        title=\"微件预览\"\r\n        width={widget?.configuration?.configureValue?.widgetConfigWidth || 600}\r\n        height={\r\n          widget?.configuration?.configureValue?.widgetConfigHeight || 400\r\n        }\r\n      ></PreviewDialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Widgets;\r\n"],"names":["waitTimePromise","async","time","arguments","length","undefined","Promise","resolve","setTimeout","waitTime","Widgets","_widget$configuration","_widget$configuration2","_widget$configuration3","_widget$configuration4","$t","useContext","LocaleContext","actionRef","useRef","navigate","useNavigate","show","setShow","useState","widget","setWidget","filterWidgetsList","getWidgets","filterHandle","widgets","useEffect","columns","title","dataIndex","width","search","render","text","record","_","action","React","src","alt","onFilter","ellipsis","valueType","valueEnum","all","status","image","table","line","bar","pie","hideInSearch","hideInTable","key","className","onClick","count","id","ProTable","rowKey","dataSource","onSubmit","onReset","options","setting","listsHeight","pagination","pageSize","onChange","page","dateFormatter","headerTitle","toolBarRender","Button","icon","PlusOutlined","type","PreviewDialog","open","data","pageType","onClose","configuration","configureValue","widgetConfigWidth","height","widgetConfigHeight"],"sourceRoot":""}