(self.webpackChunkcli=self.webpackChunkcli||[]).push([[179],{2051:function(e,t,n){"use strict";n.d(t,{w:function(){return p},f:function(){return g}});var r=n(7294),l=n(9250);const o="/login",a="/user-info";var c=n(2861),i=n(129),m=n.n(i);const u="production";console.log(u),c.Z.defaults.baseURL="https://myfirebug.github.io";const s=[],d=function(e){for(let t=0,n=s.length;t<n;t++)if(s[t]===e){s.splice(t,1);break}};c.Z.interceptors.request.use((e=>{const t=c.Z.CancelToken.source();return"object"==typeof e.headers&&(e.headers.Authorization="Bearer 123"),e.cancelToken=t.token,function(e,t){for(let n=0,r=s.length;n<r;n++)if(s[n]===e)return void t.cancel();s.push(e)}(`${e.url}?${m().stringify(e.params)}&method=${e.method}`,t),e}),(e=>Promise.reject(e))),c.Z.interceptors.response.use((e=>{const{config:t,status:n}=e;if(t&&d(`${t.url}?${m().stringify(t.params)}&method=${t.method}`),200!==n)throw new Error("请求出现异常, HTTP 状态码不为 200");return e.data}),(e=>{const{config:t}=e;return t&&d(`${t.url}?${m().stringify(t.params)}&method=${t.method}`),Promise.reject(e)}));var h=c.Z;const f={loginService:{login(e){return h.post(o,e)}},userService:{userInfo(){return h.get(a)}}};function g(){const[e,t]=(0,r.useState)(!1),n=(0,l.s0)();return{loginLoading:e,login:(0,r.useCallback)(((e,r)=>{t(!0),f.loginService.login(e).then((e=>{t(!1),n("/home"),r&&r(e.data)})).catch((()=>{t(!1)}))}),[n])}}function p(){const[e,t]=(0,r.useState)(!1);return{userInfoLoading:e,getUserInfo:(0,r.useCallback)((e=>{t(!0),f.userService.userInfo().then((n=>{t(!1),e&&e(n.data)})).catch((()=>{t(!1)}))}),[])}}},7525:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,{login:function(){return ie}});var l={};n.r(l),n.d(l,{userInfo:function(){return me}});var o=n(7294),a=n(9655),c=n(745),i=n(9244),m=n(8603),u=n(6706),s=n(9569),d=n(9372),h=n(9250);var f=[{path:"/",title:"",modulePath:"layout",meta:{auth:!1},children:[{path:"/login",title:"登录",redirect:"/login",modulePath:"login",meta:{auth:!1,fullScreen:!0,menu:!1}},{path:"/home",title:"首页",modulePath:"home",icon:"&#xe8b9;",meta:{auth:!0,menu:!0}},{path:"/components",title:"组件",modulePath:"home",icon:"&#xe640;",meta:{auth:!0,menu:!0}},{path:"/web",title:"电脑端",icon:"&#xe61f;",modulePath:"",meta:{auth:!0,menu:!0},children:[{path:"/web/project-list",title:"项目",modulePath:"home",meta:{auth:!0,menu:!0}},{path:"/web/widget-list",title:"微件模版",modulePath:"home",meta:{auth:!0,menu:!0}},{path:"/web/page-list",title:"页面模版",modulePath:"home",meta:{auth:!0,menu:!0}}]},{path:"/mobile",title:"移动端",icon:"&#xe6b2;",modulePath:"",meta:{auth:!0,menu:!0},children:[{path:"/mobile/project-list",title:"项目",modulePath:"home",meta:{auth:!0,menu:!0}},{path:"/mobile/widget-list",title:"微件模版",modulePath:"home",meta:{auth:!0,menu:!0}},{path:"/mobile/page-list",title:"页面模版",modulePath:"home",meta:{auth:!0,menu:!0}}]},{path:"/404",title:"404",modulePath:"notFound",meta:{auth:!1,menu:!1}},{path:"*",title:"404",modulePath:"",meta:{auth:!1}}]}];var g=e=>{let{Header:t,Footer:n,Sidder:r,className:l,children:a,style:c}=e;return o.createElement("div",{className:`cms-layout ${l||""}`},t,o.createElement("div",{className:"cms-layout__main",style:c},r,a),n)};var p=function(e){const t=(0,o.lazy)((()=>n(717)(`./${e}`)));return o.createElement(t,null)},E=n(4e3),v=n(1351),k=n(6629),y=n(7254),b=n(2665),_=n(902),N=n(3718),T=n(9713);var w=n(2051);function x(e,t){for(const n in e){if(e[n].children){let r=x(e[n].children,t);if(void 0!==r){const t=e[n].children.findIndex((e=>e.meta.menu));return-1!==t?r.concat({path:e[n].children[t].path,name:e[n].title}):r.concat({path:e[n].path,name:e[n].title})}}if(e[n].path===t)return[{path:"",name:e[n].title}]}}const S={clearToken:N.q,setUserInfo:e=>t=>{t((e=>({type:T.fN,data:e}))(e))}};var C=(0,u.$j)((e=>({userInfo:e.userInfo})),S)((e=>{let{collapsed:t,setCollapsed:n,clearToken:r,setUserInfo:l,userInfo:c}=e;const{pathname:i}=(0,h.TH)(),{getUserInfo:m}=(0,w.w)(),[u,s]=(0,o.useState)([]);(0,o.useEffect)((()=>{s(x(f[0].children,i).reverse())}),[i]),(0,o.useEffect)((()=>{m(l)}),[m,l]);const d=[{key:"1",label:o.createElement("div",{onClick:r},o.createElement(E.Z,null),"退出登录")}];return o.createElement("div",{className:"cms-header"},o.createElement("div",{className:"cms-header__left"},o.createElement("div",{className:"cms-icon"},""),o.createElement("h1",{className:"title"},"大屏管理系统")),o.createElement("div",{className:"cms-header__right"},o.createElement("div",{className:"cms-header__right--left"},o.createElement("span",{onClick:()=>n(!t)},t?o.createElement(v.Z,null):o.createElement(k.Z,null)),u&&u.length?o.createElement(b.Z,{items:u.map((e=>({title:e.path?o.createElement(a.rU,{to:e.path},e.name):e.name})))}):null),o.createElement("div",{className:"cms-header__right--right"},o.createElement(M,null),o.createElement(_.Z,{menu:{items:d}},o.createElement("div",{className:"user"},o.createElement("div",{className:"cms-avatar"},o.createElement("img",{src:c.avatar,alt:""})),o.createElement("span",{className:"user-name"},"欢迎",c.username),o.createElement(y.Z,null))))))}));const $={"--primary-color":"#1677ff","--white":"#fff","--html-background-color":"#eee","--html-font-color":"#262626","--light-font-color":"#999","--change-primary-color":"#1677ff","--module-background-color":"#fff","--module-dark-background-color":"#ccc","--module-box-shadow-color":"rgba(0,0,0,.05)","--border-color":"#ddd"},P={"--primary-color":"#1677ff","--white":"#fff","--html-background-color":"#222","--html-font-color":"#fff","--change-primary-color":"#001529","--light-font-color":"#999","--module-background-color":"#001529","--module-dark-background-color":"#333","--module-box-shadow-color":"rgba(0,0,0,.1)","--border-color":"#333"},I={"--primary-color":"#00b96b","--white":"#fff","--html-background-color":"#eee","--html-font-color":"#262626","--light-font-color":"#999","--change-primary-color":"#00b96b","--module-background-color":"#fff","--module-dark-background-color":"#ccc","--module-box-shadow-color":"rgba(0,0,0,.05)","--border-color":"#ddd"},O={"--primary-color":"#00b96b","--white":"#fff","--html-background-color":"#222","--html-font-color":"#fff","--change-primary-color":"#001529","--light-font-color":"#999","--module-background-color":"#001529","--module-dark-background-color":"#333","--module-box-shadow-color":"rgba(0,0,0,.1)","--border-color":"#333"},Z=[{name:"theme01_light",color:$["--primary-color"]},{name:"theme01_dark",color:P["--primary-color"]},{name:"theme02_light",color:I["--primary-color"]},{name:"theme02_dark",color:O["--primary-color"]}],A={theme01_light:$,theme01_dark:P,theme02_light:I,theme02_dark:O};var F=n(8037);const j=window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style[data-theme='theme']";const n=t&&document.querySelector(t)||document.createElement("style");if(console.log(n,"root"),n.innerHTML=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Object.keys(e).map((t=>`${t}:${e[t]};\n`)).join("");return t?`:root{\n${n}}`:n}(e),!n.getAttribute("data-theme")){n.setAttribute("data-theme","theme");const e=document.head||document.getElementsByName("head")[0];if(!e)return;e.appendChild(n)}};function U(e){j?H(A[e]):(document.documentElement.setAttribute("data-theme",e),(0,F.Z)({watch:!0,variables:A[e],onlyLegacy:!1}))}function L(e){var t;return null===(t=Z.find((t=>t.name===e)))||void 0===t?void 0:t.color}const R={setCurrentTheme:e=>t=>{t((e=>({type:T.C6,data:e}))(e)),U(e)}};var M=(0,u.$j)((e=>({currentTheme:e.currentTheme})),R)((e=>{let{currentTheme:t,setCurrentTheme:n}=e;return o.createElement("div",{className:"cms-theme"},o.createElement("div",{className:"cms-theme__select"},o.createElement("div",{className:"hd",style:{background:L(t)}}),o.createElement("div",{className:"bd"},Z.filter((e=>!e.name.includes("_dark"))).map((e=>o.createElement("div",{title:e.name,className:"option",key:e.name,onClick:()=>n(t.includes("_dark")?`${e.name.split("_")[0]}_dark`:`${e.name.split("_")[0]}_light`),style:{background:e.color}}))))),o.createElement("div",{title:"切换模式",className:"cms-theme__mode "+(t.includes("_dark")?"is-moon":""),onClick:()=>{let e=t.includes("_dark")?`${t.split("_")[0]}_light`:`${t.split("_")[0]}_dark`;n(e)}}))})),z=n(1811);var q=(0,u.$j)((e=>({currentTheme:e.currentTheme})),{})((e=>{let{collapsed:t,currentTheme:n}=e;const{pathname:r}=(0,h.TH)(),l=(0,h.s0)(),[a,c]=(0,o.useState)([]),[i,m]=(0,o.useState)([]);(0,o.useEffect)((()=>{if("/404"!==r){c([r]);const e=r.split("/");if(e.length>2){let t=[];for(let n=2;n<e.length;n++)t.push(e.slice(0,n).join("/"));m(t)}}}),[r]);const u=e=>e.filter((e=>e.meta.menu)).map((e=>({key:e.path,label:e.title,icon:o.createElement("span",{className:"cms-icon",style:{fontSize:"18px"},dangerouslySetInnerHTML:{__html:e.icon}}),children:Array.isArray(e.children)?u(e.children):null}))),s=u(f[0].children);return o.createElement("div",{className:"cms-sidder"},o.createElement(z.Z,{className:"cms-menu",selectedKeys:a,openKeys:i,mode:"inline",theme:n.includes("_dark")?"dark":"light",inlineCollapsed:t,items:s,onSelect:e=>{l(e.key)},onOpenChange:e=>{m(e.slice(e.length-1))}}))}));const B=(0,u.$j)((e=>({token:e.token})),{})((e=>{let{children:t,meta:n,title:r,token:l}=e;return r&&(document.title=`${window.CONFIG.title}-${r}`),n.auth&&!l?o.createElement(h.Fg,{to:"/login"}):t})),K=e=>e.map((e=>{let{path:t,children:n,modulePath:r,title:l,meta:a,redirect:c}=e;return n&&n.length?o.createElement(h.AW,{path:t,element:r?o.createElement(B,{title:l,meta:a},p(r)):null,key:r},K(n),c?o.createElement(h.AW,{path:t,element:o.createElement(h.Fg,{to:c})}):o.createElement(h.AW,{path:t,element:o.createElement(h.Fg,{to:n[0].path})})):o.createElement(h.AW,{path:t,element:"*"===t?o.createElement(h.Fg,{to:"/404",replace:!0}):r?o.createElement(B,{title:l,meta:a},p(r)):null,key:r})}));var W=(0,o.memo)((()=>o.createElement(o.Suspense,null,o.createElement(h.Z5,null,K(f)))),((e,t)=>!0)),D=n(7484),Y=n.n(D),J=(n(3852),n(2925));Y().locale("zh-cn");var G=(0,u.$j)((e=>({currentTheme:e.currentTheme})),{})((e=>{var t,n,r,l;let{currentTheme:a}=e;const[c,i]=(0,o.useState)(!1),{pathname:m}=(0,h.TH)();console.log(m,"location1");const u=function(e,t,n){let r,l=!1,o=function(e){if(Array.isArray(e)&&!l)for(let a=0;a<e.length;a++){if(e[a][n]===t){r=e[a],l=!0;break}e[a].children&&o(e[a].children)}};return o(e),r}(f,m,"path");return(0,o.useEffect)((()=>{U(a)}),[a]),o.createElement(s.ZP,{locale:J.Z,theme:{token:{colorPrimary:L(a)},algorithm:a.includes("_dark")?d.default.darkAlgorithm:d.default.defaultAlgorithm}},o.createElement(g,{className:c?"is-collapsed":"",Header:null!=u&&null!==(t=u.meta)&&void 0!==t&&t.fullScreen?null:o.createElement(C,{collapsed:c,setCollapsed:i}),Sidder:null!=u&&null!==(n=u.meta)&&void 0!==n&&n.fullScreen?null:o.createElement(q,{collapsed:c}),style:{paddingTop:null!=u&&null!==(r=u.meta)&&void 0!==r&&r.fullScreen?"0px":"55px",paddingLeft:null!=u&&null!==(l=u.meta)&&void 0!==l&&l.fullScreen?"0px":c?"80px":"200px"}},o.createElement(W,null)))})),Q=n(4890),V=n(2168),X=(n(4500),n(3894));const ee={username:"",email:"",age:0,avatar:""};var te=(0,Q.UY)({counter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;switch((arguments.length>1?arguments[1]:void 0).type){case T.Y9:return e-1;case T.MO:return e+1;default:return e}},currentTheme:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"theme01_light",t=arguments.length>1?arguments[1]:void 0;return t.type===T.C6?t.data:e},token:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.TH:return t.data;case T.lr:return"";default:return e}},userInfo:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.fN:return t.data;case T.$c:return ee;default:return e}}});const ne=[X.Z];const re={key:"BASE_ROOT",storage:V.Z,whitelist:["counter","currentTheme","token","userInfo"]},le=(0,i.OJ)(re,te);var oe=(0,Q.MT)(le,(0,Q.md)(...ne)),ae=n(5623),ce=n.n(ae);const ie={url:"/login",method:"post",data:{result:!0,data:ce().mock("@guid"),message:"登录成功"}},me={url:"/user-info",method:"get",data:{result:!0,data:ce().mock({email:"@email()","age|20-80":10,username:"admin",avatar:"@image(40x40)"}),message:"登录成功"}};function ue(e){for(let t in e)ce().mock(RegExp(e[t].url+"*"),e[t].method,(n=>{const r=JSON.parse(n.body),{url:l,data:o}=e[t];return"/login"!==l||"admin"===r.username&&"123456"===r.password?o:{result:!1,data:null,message:"用户名或密码错误"}}))}ue(r),ue(l);const se=(0,i.p5)(oe);c.createRoot(document.getElementById("root")).render(o.createElement(u.zt,{store:oe},o.createElement(m.r,{loading:null,persistor:se},o.createElement(a.UT,null,o.createElement(G,null)))))},9713:function(e,t,n){"use strict";n.d(t,{$c:function(){return m},C6:function(){return o},MO:function(){return r},TH:function(){return a},Y9:function(){return l},fN:function(){return i},lr:function(){return c}});const r="INCREMENT",l="DECREMENT",o="THEME",a="SETTOKEN",c="CLEARTOKEN",i="USERINFO",m="CLEARUSERINFO"},3718:function(e,t,n){"use strict";n.d(t,{o:function(){return l},q:function(){return o}});var r=n(9713);const l=e=>t=>{t((e=>({type:r.TH,data:e}))(e))},o=()=>e=>{e({type:r.lr}),e({type:r.$c})}},717:function(e,t,n){var r={"./home":[8788,9,788],"./home/":[8788,9,788],"./home/index":[8788,9,788],"./home/index.scss":[1407,9,407],"./home/index.tsx":[8788,9,788],"./layout":[9598,9,598],"./layout/":[9598,9,598],"./layout/index":[9598,9,598],"./layout/index.tsx":[9598,9,598],"./login":[6221,9,676,334,771],"./login/":[6221,9,676,334,771],"./login/assets/bg01.png":[9839,1,839],"./login/assets/bg02.png":[8244,1,244],"./login/assets/bg03.png":[460,1,460],"./login/index":[6221,9,676,334,771],"./login/index.scss":[3242,9,242],"./login/index.tsx":[6221,9,676,334,771],"./notFound":[8204,9,676,922],"./notFound/":[8204,9,676,922],"./notFound/index":[8204,9,676,922],"./notFound/index.scss":[1229,9,229],"./notFound/index.tsx":[8204,9,676,922]};function l(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],l=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(l,16|t[1])}))}l.keys=function(){return Object.keys(r)},l.id=717,e.exports=l},4654:function(){}},function(e){e.O(0,[676,426,664],(function(){return t=7525,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.a578646a0c.js.map