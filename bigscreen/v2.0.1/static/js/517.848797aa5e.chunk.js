"use strict";(self.webpackChunklarge_screen_configuration=self.webpackChunklarge_screen_configuration||[]).push([[517],{45073:function(e,l,t){t.d(l,{Z:function(){return i}});var a=t(67294),n=t(46258),r=t(81615),o=JSON.parse('{"color":["#c1232b","#27727b","#fcce10","#e87c25","#b5c334","#fe8463","#9bca63","#fad860","#f3a43b","#60c0dd","#d7504b","#c6e579","#f4e001","#f0805a","#26c0c0"],"backgroundColor":"transparent","textStyle":{},"title":{"textStyle":{"color":"#ffffff"},"subtextStyle":{"color":"rgba(255,255,255,0.5)"}},"line":{"itemStyle":{"borderWidth":"1"},"lineStyle":{"width":"2"},"symbolSize":"5","symbol":"emptyCircle","smooth":true},"radar":{"itemStyle":{"borderWidth":"1"},"lineStyle":{"width":"2"},"symbolSize":"5","symbol":"emptyCircle","smooth":true},"bar":{"itemStyle":{"barBorderWidth":"0","barBorderColor":"rgba(255,255,255,0.1)"}},"pie":{"itemStyle":{"borderWidth":"0","borderColor":"rgba(255,255,255,0.1)"}},"scatter":{"itemStyle":{"borderWidth":"0","borderColor":"rgba(255,255,255,0.1)"}},"boxplot":{"itemStyle":{"borderWidth":"0","borderColor":"rgba(255,255,255,0.1)"}},"parallel":{"itemStyle":{"borderWidth":"0","borderColor":"rgba(255,255,255,0.1)"}},"sankey":{"itemStyle":{"borderWidth":"0","borderColor":"rgba(255,255,255,0.1)"}},"funnel":{"itemStyle":{"borderWidth":"0","borderColor":"rgba(255,255,255,0.1)"}},"gauge":{"itemStyle":{"borderWidth":"0","borderColor":"rgba(255,255,255,0.1)"}},"candlestick":{"itemStyle":{"color":"#c1232b","color0":"#b5c334","borderColor":"#c1232b","borderColor0":"#b5c334","borderWidth":1}},"graph":{"itemStyle":{"borderWidth":"0","borderColor":"rgba(255,255,255,0.1)"},"lineStyle":{"width":1,"color":"#aaaaaa"},"symbolSize":"5","symbol":"emptyCircle","smooth":true,"color":["#c1232b","#27727b","#fcce10","#e87c25","#b5c334","#fe8463","#9bca63","#fad860","#f3a43b","#60c0dd","#d7504b","#c6e579","#f4e001","#f0805a","#26c0c0"],"label":{"color":"rgba(255,255,255,0.5)"}},"map":{"itemStyle":{"areaColor":"#dddddd","borderColor":"#eeeeee","borderWidth":0.5},"label":{"color":"#c1232b"},"emphasis":{"itemStyle":{"areaColor":"#fe994e","borderColor":"#444","borderWidth":1},"label":{"color":"rgb(100,0,0)"}}},"geo":{"itemStyle":{"areaColor":"#dddddd","borderColor":"#eeeeee","borderWidth":0.5},"label":{"color":"#c1232b"},"emphasis":{"itemStyle":{"areaColor":"#fe994e","borderColor":"#444","borderWidth":1},"label":{"color":"rgb(100,0,0)"}}},"categoryAxis":{"axisLine":{"show":true,"lineStyle":{"color":"rgba(255,255,255,0.2)"}},"axisTick":{"show":true,"lineStyle":{"color":"rgba(255,255,255,0.2)"}},"axisLabel":{"show":true,"color":"rgba(255,255,255,0.6)"},"splitLine":{"show":false,"lineStyle":{"color":["#ccc"]}},"splitArea":{"show":false,"areaStyle":{"color":["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},"valueAxis":{"axisLine":{"show":false,"lineStyle":{"color":"#333"}},"axisTick":{"show":false,"lineStyle":{"color":"#333"}},"axisLabel":{"show":true,"color":"rgba(255,255,255,0.6)"},"splitLine":{"show":true,"lineStyle":{"color":["rgba(255,255,255,0.2)"]}},"splitArea":{"show":false,"areaStyle":{"color":["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},"logAxis":{"axisLine":{"show":true,"lineStyle":{"color":"#27727b"}},"axisTick":{"show":true,"lineStyle":{"color":"#333"}},"axisLabel":{"show":true,"color":"#333"},"splitLine":{"show":true,"lineStyle":{"color":["#ccc"]}},"splitArea":{"show":false,"areaStyle":{"color":["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},"timeAxis":{"axisLine":{"show":true,"lineStyle":{"color":"#27727b"}},"axisTick":{"show":true,"lineStyle":{"color":"#333"}},"axisLabel":{"show":true,"color":"#333"},"splitLine":{"show":true,"lineStyle":{"color":["#ccc"]}},"splitArea":{"show":false,"areaStyle":{"color":["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},"toolbox":{"iconStyle":{"borderColor":"#c1232b"},"emphasis":{"iconStyle":{"borderColor":"#e87c25"}}},"legend":{"textStyle":{"color":"rgba(255,255,255,0.6)"}},"tooltip":{"axisPointer":{"lineStyle":{"color":"rgba(255,255,255,0.6)","width":1},"crossStyle":{"color":"rgba(255,255,255,0.6)","width":1}}},"timeline":{"lineStyle":{"color":"#293c55","width":1},"itemStyle":{"color":"#27727b","borderWidth":1},"controlStyle":{"color":"#27727b","borderColor":"#27727b","borderWidth":0.5},"checkpointStyle":{"color":"#c1232b","borderColor":"#c23531"},"label":{"color":"#293c55"},"emphasis":{"itemStyle":{"color":"#72d4e0"},"controlStyle":{"color":"#27727b","borderColor":"#27727b","borderWidth":0.5},"label":{"color":"#293c55"}}},"visualMap":{"color":["#c1232b","#fcce10"]},"dataZoom":{"backgroundColor":"rgba(0,0,0,0)","dataBackgroundColor":"rgba(181,195,52,0.3)","fillerColor":"rgba(181,195,52,0.2)","handleColor":"#27727b","handleSize":"100%","textStyle":{"color":"#999999"}},"markPoint":{"label":{"color":"rgba(255,255,255,0.5)"},"emphasis":{"label":{"color":"rgba(255,255,255,0.5)"}}}}');n.aW("infographic",o);var i=(0,a.memo)((e=>{const{theme:l,group:t,initOptions:n,option:o,updateOptions:i,loading:c=!1,loadingOptions:s,autoresize:d={}}=e,m=(0,a.useRef)(null),u=(0,a.useRef)(),g=(0,a.useRef)(0),p=(0,a.useRef)(-1),y=(0,a.useCallback)((()=>{if(!o.series||!o.series.length)return!1;u.current&&(g.current&&clearInterval(g.current),g.current=setInterval((()=>{var e,l,t,a;const n=o.series&&o.series.length?(null===(e=o.series[0])||void 0===e?void 0:e.data).length:0;null==u||null===(l=u.current)||void 0===l||l.dispatchAction({type:"downplay",seriesIndex:0}),p.current=(p.current+1)%n,null==u||null===(t=u.current)||void 0===t||t.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:p.current}),null==u||null===(a=u.current)||void 0===a||a.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:p.current})}),3e3))}),[u,g,o,p]),b=(0,a.useCallback)((e=>{var l,t;clearInterval(g.current),p.current=e.dataIndex,null==u||null===(l=u.current)||void 0===l||l.dispatchAction({type:"downplay",seriesIndex:0}),null==u||null===(t=u.current)||void 0===t||t.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:p.current})}),[]),h=(0,a.useCallback)((()=>{m.current&&(u.current||(u.current=(0,r.S1)(m.current,l||"infographic",n)),t&&(u.current.group=t),c?u.current.showLoading(s):u.current.hideLoading(),o&&(u.current.setOption({...o,tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.6)",borderColor:"rgba(255,255,255,.2)",padding:[8,8],textStyle:{color:"#fff",fontSize:12},...o.tooltip}},i),y()))}),[n,o,l,t,c,s,i,y]),E=(0,a.useCallback)((()=>{u.current&&(u.current.off("mouseover",b),u.current.off("mouseout",y),u.current.dispose(),u.current=void 0)}),[y,b]);return(0,a.useEffect)((()=>{h();const{onResize:e}=d;u.current&&(u.current.on("mouseover",b),u.current.on("mouseout",y));const l=new ResizeObserver((l=>{var t;Array.isArray(l)&&l.length&&(null===(t=u.current)||void 0===t||t.resize(),null==e||e())}));return l.observe(m.current),()=>{E(),l.disconnect()}}),[E,h,d,u,b,y]),console.log(123),a.createElement("div",{className:"cms-echarts",ref:m,style:{width:"100%",height:"100%"}})}),((e,l)=>JSON.stringify(e)===JSON.stringify(l)))},16517:function(e,l,t){t.r(l),t.d(l,{default:function(){return ae}});var a=t(67294),n=t(89250);const r=new class{constructor(){this.moveItem=new Map}set(e,l){this.moveItem.set(e,l)}remove(e){this.moveItem.delete(e)}get(e){return this.moveItem.get(e)}};var o=e=>{let{width:l=0,height:t=0,gap:n=0,column:r=0,row:o=0,x:i=0,y:c=0,style:s,children:d}=e;const m=(0,a.useMemo)((()=>((e,l,t,a,n,r,o)=>({width:e*r+(r-1)*n+"px",height:l*o+(o-1)*n+"px",transform:`translate(${(e+n)*(t-1)}px,${(l+n)*(a-1)}px)`}))(l,t,i,c,n,r,o)),[r,n,t,o,l,i,c]);return a.createElement("div",{className:"cms-drag__moveMask",style:{...m,...s}},d)},i=t(51433);var c=(0,a.memo)((e=>{const{data:l,style:t,groupName:n,onResizeStart:o,onResizeing:i,onResizeEnd:c,onCloseHander:s,children:d,isShowCloseBtn:m}=e,[u,g]=(0,a.useState)(!1),[p,y]=(0,a.useState)(!1),b=(0,a.useMemo)((()=>({gridArea:`${l.y} / ${l.x} / ${l.y+l.row}/ ${l.x+l.column}`,...u?{opacity:0,transform:"translate(-999999999px, -9999999999px)"}:{},...p?{opacity:.5}:{}})),[l.column,l.row,l.x,l.y,u,p]),h=(0,a.useCallback)((e=>{r.set(n,{...l,pageX:e.pageX,pageY:e.pageY}),setTimeout((()=>{g(!0)}),0),y(!1)}),[l,n]),E=(0,a.useCallback)((e=>{g(!1),r.remove(n)}),[n]),f=(0,a.useCallback)((e=>{r.set(n,l),y(!0),null==o||o()}),[l,n,o]),v=(0,a.useCallback)((e=>{e.preventDefault(),null==i||i(e)}),[i]),x=(0,a.useCallback)((e=>{null==c||c(),e.target.style.width="100%",e.target.style.height="100%",y(!1)}),[c]);return a.createElement("div",{className:"cms-drag__preview--item",style:{...b,...t},onDragStart:h,draggable:!0,onDragEnd:E,onMouseDown:f,onMouseMove:v,onMouseUp:x},d,m?a.createElement("div",{className:"close",onClick:e=>{e.preventDefault(),null==s||s(l.elementId)}}):"none")}));var s=(0,a.memo)((e=>{const{groupName:l,column:t,row:n,gap:s,mask:d=!0,field:m="id",onDropHandler:u,datas:g,onResizeEndHandler:p,onCloseHander:y,renderPreview:b,auxiliaryLineConfig:h}=e,E=(0,a.useRef)(null),[f,v]=(0,a.useState)({width:0,height:0,x:0,y:0}),[x,w]=(0,a.useState)(!1),[S,C]=(0,a.useState)({}),N=(0,a.useCallback)((()=>{var e;if(!E.current)return;const{width:l,height:a,x:r,y:o}=null===(e=E.current)||void 0===e?void 0:e.getBoundingClientRect();v({width:(l-(t-1)*s)/t,height:(a-(n-1)*s)/n,x:r,y:o})}),[t,s,n]);(0,a.useEffect)((()=>{N();const e=new ResizeObserver((e=>{Array.isArray(e)&&e.length&&N()}));return e.observe(E.current),()=>{e.disconnect()}}),[N]);const _=(0,a.useMemo)((()=>{const e=[S.x,S.y,S.x+S.column-1,S.y+S.row-1];return(l=[0,0,t,n])[0]<=(a=e)[0]&&l[1]<=a[1]&&l[2]>=a[2]&&l[3]>=a[3]&&g.every((l=>l[m]===S[m]||!((e,l)=>!(e[2]<=l[0]||l[2]<=e[0]||e[3]<=l[1]||l[3]<=e[1]))([l.x-1,l.y-1,l.x+l.column,l.y+l.row],e)));var l,a}),[t,S,g,m,n]),k=(0,a.useCallback)((e=>parseInt(String((e-f.x)/(f.width+s)))+1),[f.width,f.x,s]),I=(0,a.useCallback)((e=>parseInt(String((e-f.y)/(f.height+s)))+1),[f.height,f.y,s]),A=(0,a.useCallback)((e=>Math.max(1,Math.ceil(e/(f.width+s)))),[f.width,s]),M=(0,a.useCallback)((e=>Math.max(1,Math.ceil(e/(f.height+s)))),[f.height,s]),T=(0,a.useCallback)((e=>{e.preventDefault();const t=r.get(l);t&&C((l=>({...l,...t,x:k(e.pageX),y:I(e.pageY),show:!0}))),console.log("onDragEnter")}),[k,I,l]),L=(0,a.useCallback)((e=>{e.preventDefault();const t=r.get(l);t&&C((l=>({...l,...t,x:k(e.pageX),y:I(e.pageY),show:!0}))),console.log("onDragOver")}),[k,I,l]),D=(0,a.useCallback)((e=>{e.preventDefault(),C((e=>({...e,show:!1,[m]:void 0}))),console.log("onDragLeave")}),[m]),Z=(0,a.useCallback)((e=>{const t=r.get(l);e.preventDefault(),C((e=>({...e,show:!1}))),_&&u&&u(!Boolean(t&&t[m]),{...t,...S,[m]:t&&t[m]?t[m]:(0,i.M8)()}),console.log("onDrop")}),[S,m,l,_,u]),z=(0,a.useCallback)((()=>{const e=r.get(l);e&&(w(!1),C((l=>({...l,...e,show:!0}))))}),[l]),V=(0,a.useCallback)((e=>{w(!1),C((l=>({...l,column:A(e.target.offsetWidth),row:M(e.target.offsetHeight)})))}),[A,M]),W=(0,a.useCallback)((()=>{w(!0),C((e=>({...e,show:!1})))}),[]);return(0,a.useEffect)((()=>{const e=r.get(l);x&&_&&((null==e?void 0:e.column)===S.column&&(null==e?void 0:e.row)===S.row||(console.log(e,S,l,"update onResizeEndHandler"),null==p||p(S),w(!1)))}),[p,S,l,x,_]),a.createElement("div",{ref:E,className:"cms-drag__content",onDragEnter:T,onDragOver:L,onDragLeave:D,onDrop:Z},a.createElement("div",{className:"cms-drag__content--container",style:{display:null!=h&&h.show?"grid":"none",gap:`${s}px`,gridTemplateColumns:`repeat(${t}, ${f.width}px)`,gridTemplateRows:`repeat(${n},  ${f.height}px)`,width:"100%",height:"100%"}},new Array(t*n).fill(null).map(((e,l)=>a.createElement("div",{key:l,style:{borderColor:(null==h?void 0:h.borderColor)||"rgba(255, 255, 255, 0.2)"}})))),a.createElement("div",{className:"cms-drag__preview",style:{display:"grid",gap:`${s}px`,gridTemplateColumns:`repeat(${t}, ${f.width}px)`,gridTemplateRows:`repeat(${n},  ${f.height}px)`,width:"100%",height:"100%"}},g.map((e=>a.createElement(c,{key:e[m],data:e,groupName:l,style:{pointerEvents:S.show&&e[m]!==S[m]?"none":"all",resize:null!=h&&h.show?"both":"none"},onResizeStart:z,onResizeing:V,onResizeEnd:W,onCloseHander:y,isShowCloseBtn:null==h?void 0:h.show},null==b?void 0:b(e)))),d?a.createElement(o,{style:{display:null!=S&&S.show?"flex":"none",background:_?"var(--cms-divider-color)":"var(--cms-color-help)"},width:f.width,height:f.height,gap:s,column:null==S?void 0:S.column,row:null==S?void 0:S.row,x:null==S?void 0:S.x,y:null==S?void 0:S.y},_?"可放置":"不可放置"):null))}));var d=t(45073);var m={BaseText:e=>{let{data:l,field:t,options:n}=e;const r=(0,a.useMemo)((()=>(0,i.Wi)(n)),[n]),o=(0,a.useMemo)((()=>(0,i.Wi)(n,"iconStyle")),[n]);return a.createElement("div",{className:"cms-base-text",style:r},n.iconStyleSelect?a.createElement("span",{className:"cms-icon",style:o,dangerouslySetInnerHTML:{__html:n.iconStyleSelect}}):null,l&&l[t]?l[t]:"文本框")},Line:(0,a.memo)((e=>{const{options:l,data:t,field:n}=e,r=(0,a.useMemo)((()=>{const e=(0,i.P2)(l),a=t&&t[n]?t[n]:[],{legendData:r,xAxisData:o,yAxisData:c,series:s}=(0,i.Cf)(a);return{...e,legend:{...e.legend,data:r},xAxis:{...e.xAxis,data:o},yAxis:{...e.yAxis,data:c},series:s?s.map((l=>({...e.line.series,...l}))):[]}}),[t,n,l]),o=(0,a.useMemo)((()=>(0,i.Wi)(l)),[l]);return console.log(r,"123"),a.createElement("div",{style:{...o,width:"100%",height:"100%"}},a.createElement(d.Z,{option:r}))}))},u=t(24404),g=t(2639),p=t(48093),y=t(71258),b=t(34002),h=t(83309);var E=e=>{let{name:l,open:t,onClose:n,pageType:r,modifyNameSuccessHander:o}=e;return a.createElement(g.Z,{open:t,onClose:n,onCancel:n,footer:null,title:`修改${h.E0[r]}名称`,destroyOnClose:!0},a.createElement(p.Z,{onFinish:e=>{null==o||o(e.name),u.ZP.success("修改成功"),n()},initialValues:{name:l||""},autoComplete:"off"},a.createElement(p.Z.Item,{name:"name",rules:[{required:!0,message:`请输入${h.E0[r]}名称`}]},a.createElement(y.Z,{placeholder:`请输入${h.E0[r]}名称`})),a.createElement(p.Z.Item,null,a.createElement(b.ZP,{type:"primary",htmlType:"submit",block:!0},"保存"))))};const f=e=>{let{name:l,logo:t,pageType:r,modifyNameSuccessHander:o}=e;const i=(0,n.s0)(),[c,s]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement("div",{className:"cms-config-layout__header"},a.createElement("div",{className:"cms-config-layout__header--left"},a.createElement("span",{className:"cms-icon logo",dangerouslySetInnerHTML:{__html:t||"&#xe625;"}}),a.createElement("h1",{className:"name"},l),a.createElement("span",{className:"cms-icon edit",onClick:()=>s(!0)},"")),a.createElement("div",{className:"cms-config-layout__header--right"},a.createElement("div",{className:"preview"},a.createElement("i",{className:"cms-icon"},""),"预览"),a.createElement("div",{className:"publish"},a.createElement("i",{className:"cms-icon"},""),"发布"),a.createElement("div",{className:"preview",onClick:()=>i(-1)},a.createElement("i",{className:"cms-icon"},""),"返回"))),a.createElement(E,{name:l||"",pageType:r,open:c,onClose:()=>s(!1),modifyNameSuccessHander:o}))};var v=()=>{const e=Array.from(new Array(100).keys());return a.createElement("div",{className:"cms-config-layout__ruler"},a.createElement("div",{className:"cms-config-layout__ruler--hwrapper"},a.createElement("div",{className:"cms-config-layout__ruler--h"},a.createElement("span",{className:"ruler-h-50"},a.createElement("b",null,"50"),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null)),e.map(((e,l)=>a.createElement("span",{className:"ruler-h-50",key:l},a.createElement("b",null,50*l),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null)))))),a.createElement("div",{className:"cms-config-layout__ruler--vwrapper"},a.createElement("div",{className:"cms-config-layout__ruler--v"},a.createElement("span",{className:"ruler-h-50"},a.createElement("b",null,"50"),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null)),e.map(((e,l)=>a.createElement("span",{className:"ruler-h-50",key:l},a.createElement("b",null,50*l),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null),a.createElement("i",null)))))))};const x=e=>{let{children:l}=e;return a.createElement("div",{className:"cms-config-layout__main"},a.createElement("div",{className:"cms-config-layout__center"},a.createElement(v,null),l))};var w=t(53807),S=t(54549);var C=e=>{let{title:l,children:t,onClose:n}=e;return a.createElement("div",{className:"cms-box",style:{display:l?"flex":"none"}},a.createElement("div",{className:"cms-box__header"},a.createElement("div",{className:"name"},l),a.createElement(S.Z,{onClick:n})),a.createElement("div",{className:"cms-box__body"},t))};const N=[{icon:"&#xe652;",type:"element"},{icon:"&#xe634;",type:"widget"},{icon:"&#xe652;",type:"page"}],_=e=>{let{render:l,navs:t}=e;const[n,r]=(0,a.useState)("element"),[o,i]=(0,a.useState)([]);return(0,a.useEffect)((()=>{i((()=>N.filter((e=>t.includes(e.type))))),r(t[0])}),[t,i,r]),a.createElement("div",{className:"cms-config-layout__leftAside"},a.createElement("ul",{className:"cms-config-layout__leftAside--tabs"},o.map((e=>a.createElement("li",{className:"cms-config-layout__leftAside--tabItem "+(n===e.type?"is-active":""),onClick:()=>r(e.type),key:e.type},a.createElement(w.Z,{placement:"left",title:h.E0[e.type]},a.createElement("i",{className:"cms-icon",dangerouslySetInnerHTML:{__html:e.icon}})))))),a.createElement("div",{className:"cms-config-layout__leftAside--tabContent",style:{borderRight:n?"1px solid var(--cms-divider-color)":"none"}},a.createElement(C,{title:n?h.E0[n]:"",onClose:()=>r("")},l(n))))};var k=t(96801),I=t(41431),A=t(45795);var M=e=>{let{title:l,children:t,data:n,groupName:o="DrapDrop"}=e;return a.createElement("div",{className:"cms-drag__item",draggable:!0,onDragStart:e=>{r.set(o,n)},onDragEnd:e=>{r.remove(o)}},a.createElement("div",{className:"cms-drag__item--body"},t),a.createElement("div",{className:"cms-drag__item--footer"},l))};const T=["text","image","table","line","bar","pie"],L=()=>{var e,l;const[t,n]=(0,a.useState)("text"),{getElements:r,elementsList:o,elementsLoading:i}=(0,k.Rm)();return(0,a.useEffect)((()=>{r()}),[r]),a.createElement("div",{className:"cms-config-layout__elements"},a.createElement("ul",{className:"cms-config-layout__elements--left"},T.map((e=>a.createElement("div",{key:e,className:t===e?"is-active":"",onClick:()=>n(e)},h.JN[e])))),a.createElement("div",{className:"cms-config-layout__elements--right"},null===(e=o.filter((e=>e.type===t)))||void 0===e?void 0:e.map((e=>a.createElement(M,{key:e.code,title:e.name,data:e,groupName:"elements"},a.createElement(I.Z,{width:174,height:86,src:`./elements/${e.code}.png`,preview:!1})))),!i&&!(null!==(l=o.filter((e=>e.type===t)))&&void 0!==l&&l.length)&&a.createElement(A.Z,{image:A.Z.PRESENTED_IMAGE_SIMPLE})))},D=[{icon:"&#xe63c;",type:"layer"},{icon:"&#xe652;",type:"element"},{icon:"&#xe634;",type:"widget"},{icon:"&#xe62e;",type:"data"},{icon:"&#xe652;",type:"page"},{icon:"&#xe61c;",type:"linkage"}],Z=e=>{let{render:l,navs:t}=e;const[n,r]=(0,a.useState)("element"),[o,i]=(0,a.useState)([]);return(0,a.useEffect)((()=>{i((()=>D.filter((e=>t.includes(e.type))))),r(t[0])}),[t,i,r]),a.createElement("div",{className:"cms-config-layout__rightAside"},a.createElement("div",{className:"cms-config-layout__rightAside--tabContent",style:{borderLeft:n?"1px solid var(--cms-divider-color)":"none"}},a.createElement(C,{title:""+(n?h.E0[n]+"配置":""),onClose:()=>r("")},l(n))),a.createElement("ul",{className:"cms-config-layout__rightAside--tabs"},o.map((e=>a.createElement("li",{className:"cms-config-layout__rightAside--tabItem "+(n===e.type?"is-active":""),onClick:()=>r(e.type),key:e.type},a.createElement(w.Z,{placement:"left",title:`${h.E0[e.type]}配置`},a.createElement("i",{className:"cms-icon",dangerouslySetInnerHTML:{__html:e.icon}})))))))};var z=t(91816),V=t(63258);const W=e=>{let{datas:l,widgetId:t,elementId:n,onSelected:r}=e;return a.createElement("div",{className:"cms-config-layout__layer"},l.map(((e,l)=>a.createElement("div",{key:e.widgetId||l,className:"cms-config-layout__layer--item"},a.createElement("div",{className:"name "+(t===e.widgetId?"is-active":""),onClick:()=>r(e.widgetId)},a.createElement(z.Z,null)," ",e.name),a.createElement("div",{className:"content"},e.elements.map((l=>a.createElement("div",{key:l.elementId,className:""+(n===l.elementId?"is-active":""),onClick:()=>r(e.widgetId,l.elementId)},a.createElement(V.Z,null)," ",l.name))))))))};var R=t(34913),$=t(34041),H=t(91153),F=t(32904),O=t(54732),Y=t(16553),q=t(56860);const{Option:P}=$.default;var B=e=>{let{item:l}=e;return a.createElement(a.Fragment,null,"Input"===l.componentName&&a.createElement(p.Z.Item,{label:l.label,name:l.name,tooltip:l.tooltip,rules:[{required:l.require}],validateTrigger:"onBlur"},a.createElement(y.Z,{size:"small",allowClear:!0,disabled:l.disabled,placeholder:l.placeholder})),"InputNumber"===l.componentName&&a.createElement(p.Z.Item,{label:l.label,name:l.name,tooltip:l.tooltip,validateTrigger:"onBlur",rules:[{required:l.require}]},a.createElement(H.Z,{size:"small",disabled:l.disabled,min:l.min,max:l.max,style:{width:"100%"},addonAfter:l.addonAfter||"",placeholder:l.placeholder})),"TextArea"===l.componentName&&a.createElement(p.Z.Item,{label:l.label,name:l.name,tooltip:l.tooltip,rules:[{required:l.require}],validateTrigger:"onBlur"},a.createElement(q.Z,{size:"small",allowClear:!0,disabled:l.disabled,rows:8,placeholder:l.placeholder})),"Switch"===l.componentName&&a.createElement(p.Z.Item,{label:l.label,name:l.name,tooltip:l.tooltip,valuePropName:"checked",rules:[{required:l.require}]},a.createElement(F.Z,{size:"small"})),"Slider"===l.componentName&&a.createElement(p.Z.Item,{label:l.label,name:l.name,tooltip:l.tooltip,rules:[{required:l.require}]},a.createElement(O.Z,{min:l.min||0,max:l.max||100,disabled:l.disabled,step:l.step||1})),"Select"===l.componentName&&a.createElement(p.Z.Item,{label:l.label,name:l.name,tooltip:l.tooltip,rules:[{required:l.require}]},a.createElement($.default,{size:"small",allowClear:!0,disabled:l.disabled,placeholder:l.placeholder},l.options.map((e=>a.createElement(P,{key:e.code,value:e.code},a.createElement("div",{className:""+("iconStyleSelect"===l.name?"cms-icon":""),dangerouslySetInnerHTML:{__html:e.name}})))))),"SketchPicker"===l.componentName&&a.createElement(p.Z.Item,{label:l.label,name:l.name},a.createElement(Y.Z,{size:"small",allowClear:!0,format:"hex",showText:!0})))};const{Panel:X}=R.default,J=(e,l)=>Object.prototype.toString.call(e)===l,j=e=>{let{datas:l}=e;return l.map(((e,l)=>{if(J(e,"[object Object]")){const t=void 0!==e.relationFields?e.relationFields.split(","):[];return a.createElement("div",{key:l},t.length?a.createElement(p.Z.Item,{noStyle:!0,shouldUpdate:!0},(l=>{let{getFieldValue:n}=l;if(t.every((l=>e.relationValues.includes(String(n(l))))))return a.createElement(B,{item:e})})):a.createElement(B,{item:e}))}return J(e,"[object Array]")?a.createElement("div",{key:l},e.map(((e,t)=>{const n=void 0!==e.relationFields?e.relationFields.split(","):[];return a.createElement(R.default,{key:t,size:"small",defaultActiveKey:["0-0"],bordered:!1},void 0===e.relationFields?a.createElement(X,{header:e.name,key:`${l}-${t}`},a.createElement(j,{datas:e.list})):a.createElement(p.Z.Item,{noStyle:!0,shouldUpdate:!0},(r=>{let{getFieldValue:o}=r;if(n.every((l=>e.relationValues.includes(String(o(l))))))return a.createElement(R.default,{key:t,size:"small",bordered:!1},a.createElement(X,{header:e.name,key:`${l}-${t}`},a.createElement(j,{datas:e.list})))})))}))):null}))};var G=j,U=t(39082);const K=e=>{let{configureValue:l,onFinish:t}=e;const[n]=p.Z.useForm();(0,a.useEffect)((()=>{n.setFieldsValue(l)}),[l,n]);const r=(0,a.useCallback)(((e,l)=>{let a={...l};for(let e in a)"object"==typeof a[e]&&(a[e]=`#${a[e].toHex()}`);t(a)}),[t]);return a.createElement("div",{className:"cms-config-layout__widget"},a.createElement(p.Z,{labelCol:{flex:"110px"},labelAlign:"left",form:n,onValuesChange:r},a.createElement(G,{datas:U.X3.configure||[]})))};var Q={baseText:{code:"baseText",configure:[[{name:"基础设置",list:[...U.r.configure,[{name:"文字阴影",list:[{componentName:"InputNumber",label:"X轴偏移",name:"styleTextShadowX",required:!1,placeholder:"请输入X轴偏移",addonAfter:"px"},{componentName:"InputNumber",label:"Y轴偏移",name:"styleTextShadowY",required:!1,placeholder:"请输入Y轴偏移",addonAfter:"px"},{componentName:"InputNumber",label:"模糊值",name:"styleTextShadowF",required:!1,placeholder:"请输入模糊值",addonAfter:"px"},{componentName:"SketchPicker",label:"颜色",name:"styleTextShadowC",required:!1,placeholder:"请选择颜色"}]},...U.c2.configure]]},{name:"icon图标",list:[{componentName:"Select",label:"图标",name:"iconStyleSelect",required:!1,placeholder:"",options:[{code:"&#xe62e",name:"&#xe62e"},{code:"&#xeb04",name:"&#xeb04"},{code:"&#xec89",name:"&#xec89"},{code:"&#xe668",name:"&#xe668"},{code:"&#xe620",name:"&#xe620"},{code:"&#xe652",name:"&#xe652"},{code:"&#xe63d",name:"&#xe63d"},{code:"&#xe65a",name:"&#xe65a"},{code:"&#xe7de",name:"&#xe7de"},{code:"&#xe7b0",name:"&#xe7b0"},{code:"&#xe7b1",name:"&#xe7b1"}]},{componentName:"InputNumber",label:"字体大小",name:"iconStyleFontSize",required:!1,min:12,placeholder:"",addonAfter:"px"},{componentName:"SketchPicker",label:"字体颜色",name:"iconStyleColor",required:!1,placeholder:"请选择字体颜色"}]}]],data:U.L2.configure},line:{configure:[[{name:"基础设置",list:[...U.YM.line,...U.YM.seriesStack,U.YM.seriesLabel,U.YM.symbol]},{name:"标题",list:U.YM.title},{name:"图例",list:U.YM.legend},{name:"网格",list:U.YM.grid},{name:"X轴",list:U.YM.xAxis},{name:"y轴",list:U.YM.yAxis},{name:"自定义颜色",list:U.YM.echartColor},...U.hV.configure]],data:U.L2.configure}};const ee=e=>{var l;let{configureValue:t,onFinish:n,element:r}=e;const[o]=p.Z.useForm(),i=(0,a.useCallback)(((e,l)=>{let t={...l};for(let e in t)"object"==typeof t[e]&&(t[e]=`#${t[e].toHex()}`);n(t)}),[n]);return(0,a.useEffect)((()=>{o.setFieldsValue(t)}),[t,o]),a.createElement("div",{className:"cms-config-layout__element"},a.createElement(p.Z,{labelCol:{flex:"110px"},labelAlign:"left",form:o,onValuesChange:i},a.createElement(G,{datas:(null==Q||null===(l=Q[r])||void 0===l?void 0:l.configure)||[]})))};var le=e=>{let{header:l,body:t,style:n,headerStyles:r,bodyStyles:o}=e;return a.createElement("div",{className:"cms-widget",style:n},a.createElement("div",{className:"cms-widget__header",style:r},l),a.createElement("div",{className:"cms-widget__body",style:o},t))},te=t(25096);var ae=()=>{var e,l,t,r,o,c,d,u,g,p,y,b,h,E,v,w,S,C;let N=(0,n.TH)();const[k,I]=(0,a.useReducer)(te.widgetReducer,te.initialState);(0,a.useEffect)((()=>{new URLSearchParams(N.search).size||I({type:"WIDGET",data:{name:"未命名微件",url:"",id:"",createTime:"",type:"text",count:0,x:0,y:0,column:1,row:1,widgetId:(0,i.M8)(),configuration:{},elements:[]}})}),[N]);const A=(e,l,t)=>{I(l?{type:"ADD_ELEMENT",data:{...t,position:e}}:{type:"MODIFY_ELEMENT",data:{...t,position:e}})},M=(0,a.useCallback)((e=>{I({type:"MODIFY_ELEMENT",data:{...e}})}),[]),T=(0,a.useCallback)((e=>{console.log(e,"onCloseHander"),I({type:"DELETE_ELEMENT",id:e})}),[]),D=(0,a.useCallback)((e=>e.element&&m[(0,i.fm)(e.element)]?a.createElement(m[(0,i.fm)(e.element)],{options:e.configuration.configureValue,data:e.configuration.dataValue.mock,field:e.configuration.dataValue.field}):a.createElement("div",null,"你访问的组件不存在请联系售后人员")),[]),z=(0,a.useMemo)((()=>{let e=[];return e=null!=k&&k.widgetId?null!=k&&k.elementId?["layer","element","widget","data","linkage"]:["layer","widget","data","linkage"]:["layer"],e}),[null==k?void 0:k.elementId,null==k?void 0:k.widgetId]),V=(0,a.useCallback)(((e,l)=>{l&&(null==k?void 0:k.elementId)!==l&&I({type:"SELECT_ELEMENT",id:l})}),[null==k?void 0:k.elementId]),R=(0,a.useMemo)((()=>null==k?void 0:k.widget.elements.find((e=>e.elementId===(null==k?void 0:k.elementId)))),[null==k?void 0:k.elementId,null==k?void 0:k.widget.elements]);return a.createElement("div",{className:"cms-config-layout"},a.createElement(f,{name:null==k?void 0:k.widget.name,pageType:"widget",modifyNameSuccessHander:e=>{I({type:"MODIFY_WIDGET",data:{name:e}})}}),a.createElement("div",{className:"cms-config-layout__content"},a.createElement(_,{navs:["element"],render:e=>"element"===e?a.createElement(L,null):null}),a.createElement(x,null,a.createElement(le,{style:(0,i.Wi)((null==k||null===(e=k.widget)||void 0===e||null===(l=e.configuration)||void 0===l?void 0:l.configureValue)||{}),headerStyles:(0,i.Wi)((null==k||null===(t=k.widget)||void 0===t||null===(r=t.configuration)||void 0===r?void 0:r.configureValue)||{},"headerStyle"),bodyStyles:(0,i.Wi)((null==k||null===(o=k.widget)||void 0===o||null===(c=o.configuration)||void 0===c?void 0:c.configureValue)||{},"bodyStyle"),header:a.createElement(s,{auxiliaryLineConfig:{show:null==k||null===(d=k.widget)||void 0===d||null===(u=d.configuration)||void 0===u||null===(g=u.configureValue)||void 0===g?void 0:g.isShowAuxiliaryLine,borderColor:null==k||null===(p=k.widget)||void 0===p||null===(y=p.configuration)||void 0===y||null===(b=y.configureValue)||void 0===b?void 0:b.auxiliaryLineBorderColor},column:8,row:1,gap:4,groupName:"elements",field:"elementId",datas:(null==k?void 0:k.widget.elements.filter((e=>"header"===e.position)))||[],onDropHandler:(e,l)=>A("header",e,l),onResizeEndHandler:M,onCloseHander:T,renderPreview:D}),body:a.createElement(s,{auxiliaryLineConfig:{show:null==k||null===(h=k.widget)||void 0===h||null===(E=h.configuration)||void 0===E||null===(v=E.configureValue)||void 0===v?void 0:v.isShowAuxiliaryLine,borderColor:null==k||null===(w=k.widget)||void 0===w||null===(S=w.configuration)||void 0===S||null===(C=S.configureValue)||void 0===C?void 0:C.auxiliaryLineBorderColor},column:8,row:8,gap:4,groupName:"elements",field:"elementId",datas:(null==k?void 0:k.widget.elements.filter((e=>"body"===e.position)))||[],onDropHandler:(e,l)=>A("body",e,l),onResizeEndHandler:M,onCloseHander:T,renderPreview:D})})),a.createElement(Z,{navs:z,render:e=>{return"layer"===e?a.createElement(W,{datas:null!=k&&k.widget?[null==k?void 0:k.widget]:[],widgetId:null==k?void 0:k.widgetId,elementId:null==k?void 0:k.elementId,onSelected:V}):"widget"===e?a.createElement(K,{configureValue:(null==k||null===(l=k.widget)||void 0===l||null===(t=l.configuration)||void 0===t?void 0:t.configureValue)||{},onFinish:e=>{var l;const t=JSON.parse(JSON.stringify(null==k||null===(l=k.widget)||void 0===l?void 0:l.configuration));I({type:"MODIFY_WIDGET",data:{configuration:{...t,configureValue:{...t.configureValue,...e}}}})}}):"element"===e?a.createElement(ee,{element:null==R?void 0:R.element,configureValue:(null==R?void 0:R.configuration.configureValue)||{},onFinish:e=>{var l;const t=JSON.parse(JSON.stringify(null==k||null===(l=k.widget)||void 0===l?void 0:l.elements.find((e=>e.elementId===k.elementId))));t&&I({type:"MODIFY_ELEMENT",data:{...t,configuration:{...t.configuration,configureValue:{...t.configuration.configureValue,...e}}}})}}):a.createElement("div",null,e);var l,t}})))}}}]);
//# sourceMappingURL=517.848797aa5e.chunk.js.map