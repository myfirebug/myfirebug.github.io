(self.webpackChunkcli=self.webpackChunkcli||[]).push([[179],{3309:function(e,t,n){"use strict";n.d(t,{kR:function(){return o},p9:function(){return r},vT:function(){return c}});const o="ACCESS_TOKEN",r="ACCESS_USER_INFO",c="ACCESS_THEME"},2051:function(e,t,n){"use strict";n.d(t,{w:function(){return v},f:function(){return g}});var o=n(7294),r=n(9250);const c="/login",a="/user-info";var l=n(2861),s=n(129),m=n.n(s);const i="production";console.log(i),l.Z.defaults.baseURL="https://myfirebug.github.io";const u=[],d=function(e){for(let t=0,n=u.length;t<n;t++)if(u[t]===e){u.splice(t,1);break}};l.Z.interceptors.request.use((e=>{const t=l.Z.CancelToken.source();return"object"==typeof e.headers&&(e.headers.Authorization="Bearer 123"),e.cancelToken=t.token,function(e,t){for(let n=0,o=u.length;n<o;n++)if(u[n]===e)return void t.cancel();u.push(e)}(`${e.url}?${m().stringify(e.params)}&method=${e.method}`,t),e}),(e=>Promise.reject(e))),l.Z.interceptors.response.use((e=>{const{config:t,status:n}=e;if(t&&d(`${t.url}?${m().stringify(t.params)}&method=${t.method}`),200!==n)throw new Error("请求出现异常, HTTP 状态码不为 200");return e.data}),(e=>{const{config:t}=e;return t&&d(`${t.url}?${m().stringify(t.params)}&method=${t.method}`),Promise.reject(e)}));var f=l.Z;const h={loginService:{login(e){return f.post(c,e)}},userService:{userInfo(){return f.get(a)}}};var p=n(4404);function g(){const[e,t]=(0,o.useState)(!1),n=(0,r.s0)();return{loginLoading:e,login:(0,o.useCallback)(((e,o)=>{t(!0),h.loginService.login(e).then((e=>{t(!1),e.result?(n("/home"),o&&o(e.data)):p.ZP.error(e.message)})).catch((()=>{t(!1)}))}),[n])}}function v(){const[e,t]=(0,o.useState)(!1);return{userInfoLoading:e,getUserInfo:(0,o.useCallback)((e=>{t(!0),h.userService.userInfo().then((n=>{t(!1),e&&e(n.data)})).catch((()=>{t(!1)}))}),[])}}},9220:function(e,t,n){"use strict";n.d(t,{Dc:function(){return a},bn:function(){return l}});var o=n(9878);const r=window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style[data-theme='theme']";const n=t&&document.querySelector(t)||document.createElement("style");if(console.log(n,"root"),n.innerHTML=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Object.keys(e).map((t=>`${t}:${e[t]};\n`)).join("");return t?`:root{\n${n}}`:n}(e),!n.getAttribute("data-theme")){n.setAttribute("data-theme","theme");const e=document.head||document.getElementsByName("head")[0];if(!e)return;e.appendChild(n)}};function a(e){r?c(o.n[e]):(document.documentElement.setAttribute("data-theme",e),n.e(37).then(n.bind(n,8037)).then((t=>{t.default({watch:!0,variables:o.n[e],onlyLegacy:!1})})))}function l(e){var t;return null===(t=o.Z.find((t=>t.name===e)))||void 0===t?void 0:t.color}},6053:function(e,t,n){"use strict";n.d(t,{f6:function(){return u},Fg:function(){return d},l5:function(){return f}});var o=n(7294);var r=n(9220),c=n(4108),a=n(3309);const l=c.Xb.get(a.vT)||"themeGreen",s=function(){let e=arguments.length>1?arguments[1]:void 0;if("MODIFY_THEME_NAME"===e.type)return(0,r.Dc)(e.data),c.Xb.set(a.vT,e.data),e.data;console.log("当前类型不存在")},m=(0,o.createContext)(void 0),i=(0,o.createContext)((()=>{}));function u(e){const{children:t}=e,[n,c]=(0,o.useReducer)(s,l);return(0,r.Dc)(n),o.createElement(m.Provider,{value:n},o.createElement(i.Provider,{value:c},t))}function d(){return(0,o.useContext)(m)}function f(){return(0,o.useContext)(i)}},9878:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},n:function(){return s}});const o={"--cms-primary-color":"#facf20","--cms-secondary-color":"#ffb800","--cms-theme-text-color-primary":"#0f5d49","--cms-theme-divider-color":"#00000014","--cms-theme-text-color-secondary":"#ff4a4a","--cms-background-color-primary":"#22674b","--cms-background-color-secondary":"#194c38","--cms-divider-color":"#318763","--cms-text-color-primary":"#fff","--cms-text-color-secondary":"#7cffae","--cms-color-help":"#ff4a4a","--cms-top-background-color":"#1c553e","--cms-aside-background-color":"#1c553e"},r={"--cms-primary-color":"#d460ff","--cms-secondary-color":"#ba00ff","--cms-theme-text-color-primary":"#2b0979","--cms-theme-divider-color":"#f2cfff","--cms-theme-text-color-secondary":"#ec1212","--cms-background-color-primary":"#451f98","--cms-background-color-secondary":"#2b0979","--cms-divider-color":"#5635bd","--cms-text-color-primary":"#fff","--cms-text-color-secondary":"#edddff","--cms-color-help":"#ec1212","--cms-top-background-color":"#3e1989","--cms-aside-background-color":"#3e1989"},c={"--cms-primary-color":"#ffc308","--cms-secondary-color":"#ffd34b","--cms-theme-text-color-primary":"#8d0a0b","--cms-theme-divider-color":"#00000014","--cms-theme-text-color-secondary":"#ff4a4a","--cms-background-color-primary":"#b41315","--cms-background-color-secondary":"#8d0a0b","--cms-divider-color":"#df4949","--cms-text-color-primary":"#fff","--cms-text-color-secondary":"#ff6c6c","--cms-color-help":"#ff4a4a","--cms-top-background-color":"#720809","--cms-aside-background-color":"#720809"},a={"--cms-primary-color":"#f2bf5a","--cms-secondary-color":"#ffc33c","--cms-theme-text-color-primary":"#131217","--cms-theme-divider-color":"#b58c3a","--cms-theme-text-color-secondary":"#9d0109","--cms-background-color-primary":"#212227","--cms-background-color-secondary":"#131217","--cms-divider-color":"#363840","--cms-text-color-primary":"#fff","--cms-text-color-secondary":"#adb4bc","--cms-color-help":"#9d0109","--cms-top-background-color":"#1e1d25","--cms-aside-background-color":"#1e1d25"},l=[{name:"themeBlue",color:o["--cms-primary-color"],bgColor:o["--cms-background-color-primary"]},{name:"themeGreen",color:r["--cms-primary-color"],bgColor:r["--cms-background-color-primary"]},{name:"themeRed",color:c["--cms-primary-color"],bgColor:c["--cms-background-color-primary"]},{name:"themeBlack",color:a["--cms-primary-color"],bgColor:a["--cms-background-color-primary"]}],s={themeBlue:o,themeGreen:r,themeRed:c,themeBlack:a}},2168:function(e,t,n){"use strict";n.d(t,{js:function(){return I},dk:function(){return O},Zg:function(){return Z}});var o=n(7294);var r=n(4108),c=n(3309);const a={token:r.Xb.get(c.kR)||"",userInfo:r.Xb.get(c.p9)||null},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODIFY_TOKEN":return r.Xb.set(c.kR,t.data),{...e,token:t.data};case"REMOVE_TOKEN":return r.Xb.remove(c.kR),r.Xb.remove(c.p9),{...e,token:"",userInfo:null};case"USER_INFO":return r.Xb.set(c.p9,t.data),{...e,userInfo:t.data};default:console.log("当前类型不存在")}};var s=n(6053),m=n(9250),i=n(7496),u=n(9655),d=n(2665),f=n(8870),h=n(4e3),p=n(7254),g=n(9878),v=n(2051);var y=()=>{var e;const{pathname:t}=(0,m.TH)(),[n,c]=(0,o.useState)([]),a=(0,s.l5)(),l=(0,s.Fg)(),y=O(),E=Z(),{getUserInfo:b}=(0,v.w)();(0,o.useEffect)((()=>{c((()=>{const e=(0,r.Nz)(i.Z[0].children,t);return e?e.reverse():[]}))}),[t]),(0,o.useEffect)((()=>{null!=y&&y.userInfo||b((e=>{E({type:"USER_INFO",data:e})}))}),[null==y?void 0:y.userInfo,E,b]);const x=[{key:"1",label:o.createElement("div",{onClick:()=>E({type:"REMOVE_TOKEN"})},o.createElement(h.Z,null),"退出登录")}];return o.createElement("div",{className:"cms-frame-layout__header"},o.createElement("div",{className:"cms-frame-layout__header--left"},o.createElement("div",{className:"cms-icon"},""),o.createElement("h1",null,"大屏管理系统"),n&&n.length?o.createElement(d.Z,{items:n.map((e=>({title:e.path?o.createElement(u.rU,{to:e.path},e.name):e.name})))}):null),o.createElement("div",null),o.createElement("div",{className:"cms-frame-layout__header--right"},o.createElement("div",{className:"cms-theme__select"},o.createElement("div",{className:"cms-theme__select--header"}),o.createElement("div",{className:"cms-theme__select--body"},g.Z.map((e=>o.createElement("div",{className:"cms-theme__select--item",key:e.name,onClick:()=>{l!==e.name&&a({type:"MODIFY_THEME_NAME",data:e.name})},style:{background:e.bgColor}}))))),o.createElement(f.Z,{menu:{items:x},overlayClassName:"cms-user-dropdown"},o.createElement("div",{className:"cms-user"},o.createElement("div",{className:"cms-avatar"},o.createElement("img",{alt:""})),o.createElement("span",{className:"cms-user__name"},"欢迎 ",o.createElement("b",null,(null==y||null===(e=y.userInfo)||void 0===e?void 0:e.username)||"--")),o.createElement(p.Z,null)))))},E=n(8401);var b=()=>{const{pathname:e}=(0,m.TH)(),t=(0,m.s0)(),[n,r]=(0,o.useState)([]),[c,a]=(0,o.useState)([]);(0,o.useEffect)((()=>{if("/404"!==e){r([e]);const t=e.split("/");if(t.length>2){let e=[];for(let n=2;n<t.length;n++)e.push(t.slice(0,n).join("/"));a(e)}}}),[e]);const l=e=>e.filter((e=>e.meta.menu)).map((e=>({key:e.path,label:e.title,icon:o.createElement("span",{className:"cms-icon",style:{fontSize:"18px"},dangerouslySetInnerHTML:{__html:e.icon}}),children:Array.isArray(e.children)&&-1!==e.children.findIndex((e=>e.meta.menu))?l(e.children):null}))),s=l(i.Z[0].children);return o.createElement("div",{className:"cms-frame-layout__aside"},o.createElement(E.Z,{className:"cms-menu",selectedKeys:n,openKeys:c,mode:"inline",items:s,theme:"dark",onSelect:e=>{t(e.key)},inlineCollapsed:!0,onOpenChange:e=>{a(e.slice(e.length-1))}}))};var x=e=>{var t,n;let{children:c,style:a,className:l}=e;const s=(0,m.TH)(),u=(0,r.VL)(i.Z,s.pathname,"path");return o.createElement("div",{className:`cms-frame-layout ${l||""}`},null!=u&&null!==(t=u.meta)&&void 0!==t&&t.fullScreen?null:o.createElement(y,null),o.createElement("div",{className:"cms-frame-layout__content"},null!=u&&null!==(n=u.meta)&&void 0!==n&&n.fullScreen?null:o.createElement(b,null),o.createElement("div",{className:"cms-frame-layout__main"},c)))},k=n(6682),S=n(9220),_=n(7484),w=n.n(_),N=(n(3852),n(2925));w().locale("zh-cn");const C=(0,o.createContext)(a),T=(0,o.createContext)((()=>{}));function I(e){const{children:t}=e,[n,r]=(0,o.useReducer)(l,a),c=(0,s.Fg)();return o.createElement(k.ZP,{locale:N.Z,theme:{token:{colorPrimary:(0,S.bn)(c),colorBgContainer:"var(--cms-background-color-primary)",colorBorder:"var(--cms-divider-color)",colorIcon:"var(--cms-divider-color)",colorIconHover:"var(--cms-primary-color)",colorTextPlaceholder:"var(--cms-divider-color)",colorText:"var(--cms-text-color-secondary)",controlOutline:"var(--cms-secondary-color)",colorErrorOutline:"#ff4d4f",colorBorderSecondary:"var(--cms-divider-color)"}}},o.createElement(C.Provider,{value:n},o.createElement(T.Provider,{value:r},o.createElement(x,null,t))))}function O(){return(0,o.useContext)(C)}function Z(){return(0,o.useContext)(T)}},5133:function(e,t,n){"use strict";var o={};n.r(o),n.d(o,{login:function(){return E}});var r={};n.r(r),n.d(r,{userInfo:function(){return b}});var c=n(7294),a=n(9655),l=n(745),s=n(6053),m=n(2168),i=n(9250),u=n(7496);var d=function(e){const t=(0,c.lazy)((()=>n(717)(`./${e}`)));return c.createElement(t,null)};const f=e=>{let{children:t,meta:n,title:o,token:r}=e;return o&&(document.title=`${window.CONFIG.title}-${o}`),n.auth&&!r?c.createElement(i.Fg,{to:"/login"}):t},h=e=>{const t=(0,m.dk)();return e.map((e=>{let{path:n,children:o,modulePath:r,title:a,meta:l,redirect:s}=e;return o&&o.length?c.createElement(i.AW,{path:n,element:r?c.createElement(f,{title:a,meta:l,token:null==t?void 0:t.token},d(r)):null,key:r},h(o),s?c.createElement(i.AW,{path:n,element:c.createElement(i.Fg,{to:s})}):c.createElement(i.AW,{path:n,element:c.createElement(i.Fg,{to:o[0].path})})):c.createElement(i.AW,{path:n,element:"*"===n?c.createElement(i.Fg,{to:"/404",replace:!0}):r?c.createElement(f,{title:a,meta:l,token:null==t?void 0:t.token},d(r)):null,key:r})}))};var p=(0,c.memo)((()=>c.createElement(c.Suspense,null,c.createElement(i.Z5,null,h(u.Z)))),((e,t)=>!0));var g=function(){return c.createElement(s.f6,null,c.createElement(m.js,null,c.createElement(c.Suspense,null,c.createElement(p,null))))},v=n(5623),y=n.n(v);const E={url:"/login",method:"post",data:{result:!0,data:y().mock("@guid"),message:"登录成功"}},b={url:"/user-info",method:"get",data:{result:!0,data:y().mock({email:"@email()","age|20-80":10,username:"admin",avatar:"@image(40x40)"}),message:"登录成功"}};function x(e){for(let t in e)y().mock(RegExp(e[t].url+"*"),e[t].method,(n=>{const o=JSON.parse(n.body),{url:r,data:c}=e[t];return"/login"!==r||"admin"===o.username&&"123456"===o.password?c:{result:!1,data:null,message:"用户名或密码错误"}}))}x(o),x(r);l.createRoot(document.getElementById("root")).render(c.createElement(a.UT,null,c.createElement(g,null)))},7496:function(e,t){"use strict";t.Z=[{path:"/",title:"",modulePath:"layout",meta:{auth:!1,fullScreen:!0},children:[{path:"/login",title:"登录",redirect:"/login",modulePath:"login",meta:{auth:!1,fullScreen:!0,menu:!1}},{path:"/home",title:"首页",modulePath:"home",icon:"&#xe8b9;",meta:{auth:!0,menu:!0}},{path:"/elements",title:"组件",modulePath:"elements",icon:"&#xe640;",meta:{auth:!0,menu:!0}},{path:"/404",title:"404",modulePath:"notFound",meta:{auth:!1,menu:!1}},{path:"*",title:"404",modulePath:"",meta:{auth:!1}}]}]},4108:function(e,t,n){"use strict";function o(e,t,n){let o,r=!1,c=function(e){if(Array.isArray(e)&&!r)for(let a=0;a<e.length;a++){if(e[a][n]===t){o=e[a],r=!0;break}e[a].children&&c(e[a].children)}};return c(e),o}function r(e,t){for(const n in e){if(e[n].children){let o=r(e[n].children,t);if(void 0!==o){const t=e[n].children.findIndex((e=>e.meta.menu));return-1!==t?o.concat({path:e[n].children[t].path,name:e[n].title}):o.concat({path:e[n].path,name:e[n].title})}}if(e[n].path===t)return[{path:"",name:e[n].title}]}}n.d(t,{VL:function(){return o},Nz:function(){return r},Xb:function(){return c}});const c={set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;window.localStorage.setItem(e,JSON.stringify({value:t,expires:n}))},get(e){const t=window.localStorage.getItem(e);if(t){const n=JSON.parse(t);return-1!==n.expires&&n.expires<Date.now()?(c.remove(e),-1):n.value}return null},remove(e){window.localStorage.removeItem(e)}}},717:function(e,t,n){var o={"./elements":[6032,9,32],"./elements/":[6032,9,32],"./elements/index":[6032,9,32],"./elements/index.tsx":[6032,9,32],"./home":[8788,9,676,294,221,113],"./home/":[8788,9,676,294,221,113],"./home/components/box":[3690,9,690],"./home/components/box/":[3690,9,690],"./home/components/box/index":[3690,9,690],"./home/components/box/index.scss":[9399,9,399],"./home/components/box/index.tsx":[3690,9,690],"./home/components/newTrend":[1135,9,676,294,221,133],"./home/components/newTrend/":[1135,9,676,294,221,133],"./home/components/newTrend/components/elements":[2387,9,294,221,387],"./home/components/newTrend/components/elements/":[2387,9,294,221,387],"./home/components/newTrend/components/elements/index":[2387,9,294,221,387],"./home/components/newTrend/components/elements/index.scss":[6957,9,957],"./home/components/newTrend/components/elements/index.tsx":[2387,9,294,221,387],"./home/components/newTrend/index":[1135,9,676,294,221,133],"./home/components/newTrend/index.scss":[2034,9,34],"./home/components/newTrend/index.tsx":[1135,9,676,294,221,133],"./home/components/statistics":[620,9,620],"./home/components/statistics/":[620,9,620],"./home/components/statistics/index":[620,9,620],"./home/components/statistics/index.scss":[3443,9,443],"./home/components/statistics/index.tsx":[620,9,620],"./home/index":[8788,9,676,294,221,113],"./home/index.scss":[1407,9,407],"./home/index.tsx":[8788,9,676,294,221,113],"./layout":[9598,9,598],"./layout/":[9598,9,598],"./layout/index":[9598,9,598],"./layout/index.tsx":[9598,9,598],"./login":[3177,9,676,599],"./login/":[3177,9,676,599],"./login/assets/bg01.png":[9839,1,839],"./login/assets/bg02.png":[8244,1,244],"./login/assets/bg03.png":[460,1,460],"./login/index":[3177,9,676,599],"./login/index.scss":[3242,9,242],"./login/index.tsx":[3177,9,676,599],"./notFound":[8204,9,676,873],"./notFound/":[8204,9,676,873],"./notFound/index":[8204,9,676,873],"./notFound/index.scss":[1229,9,229],"./notFound/index.tsx":[8204,9,676,873]};function r(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(r,16|t[1])}))}r.keys=function(){return Object.keys(o)},r.id=717,e.exports=r},4654:function(){}},function(e){e.O(0,[676,426,592,981],(function(){return t=5133,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.da8e4e72c8.js.map