"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[26],{1222:function(e,n,a){a.d(n,{Z:function(){return o}});var l=a(24082),r=a(58489),t=a(77504),i=a(17856),o=function(e){var n=e.loading,a=e.error,o=e.nodata,s=e.children;return(0,i.jsxs)("div",{className:"app-wrapper",children:[n&&(0,i.jsx)("div",{className:"app-wrapper__loading",children:(0,i.jsx)(l.Z,{})}),a&&!n&&(0,i.jsxs)("div",{className:"app-wrapper__error",children:[(0,i.jsx)(t.Z,{}),(0,i.jsx)("p",{style:{color:"#00000040",margin:"0"},children:"\u52a0\u8f7d\u5931\u8d25"})]}),!n&&!a&&o&&(0,i.jsx)("div",{className:"app-wrapper__nodata",children:(0,i.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE})}),!n&&!a&&!o&&s]})}},61026:function(e,n,a){a.r(n),a.d(n,{default:function(){return B}});var l=a(59469),r=a(45308),t=a(33374),i=a(44855),o=(a(78431),a(6897)),s=a(87183),c=a(67507),d=a(67191),u=a(98843),p=a(10036),m=a(13381),f=a(41324),h=a(27367),g=a(76483),x=a(73380),j=a(39746),b=a(1222),Z=a(24687),v=a(19530),y=a(39924),C=a(70437),w=a(56365),N=a(29072),V=a(20884),I=a(48836),F=a(89648),S=a.n(F),k=(a(45149),a(17856)),_=function(e){var n=e.value,a=e.onChange,r=e.options,t=void 0===r?{}:r,o=(0,i.useRef)(null),s=(0,i.useRef)(null),c=(0,i.useCallback)((function(){if(!s.current){var e=(0,l.Z)({mode:"code",onChange:function(){var e;a&&a(null===(e=s.current)||void 0===e?void 0:e.get())}},t);s.current=new(S())(o.current,e,n)}}),[a,t,n]);return(0,i.useEffect)((function(){c()}),[c]),(0,i.useEffect)((function(){return function(){s.current&&s.current.destroy()}}),[s]),(0,k.jsx)("div",{ref:o,className:"app-json-editor"})},q=I.Z.widgetTypesConfiguration,E=I.Z.widgetConfiguration,A=I.Z.baseConfiguration,P=o.Z.TextArea,O=s.Z.TabPane,T=c.Z.Option,M=d.Z.Panel,B=function(e){var n=e.screen,a=e.modifyScreen,I=e.currentWidgetId,F=e.currentWidget,S=e.modifyLargeScreenElement,B=e.currentPage,D=e.setRightFlag,J=e.rightFlag,L=e.currentWidgetGroupId,R=e.showOrHideLargeScreenElement,U=e.changeLargeScreenElement,W=(0,i.useState)("1"),G=(0,t.Z)(W,2),H=G[0],K=G[1],z=u.Z.useForm(),Q=(0,t.Z)(z,1)[0],X=u.Z.useForm(),Y=(0,t.Z)(X,1)[0],$=u.Z.useForm(),ee=(0,t.Z)($,1)[0],ne=u.Z.useForm(),ae=(0,t.Z)(ne,1)[0],le=u.Z.useForm(),re=(0,t.Z)(le,1)[0];(0,i.useEffect)((function(){F.configureValue&&Q.setFieldsValue(F.configureValue),F.coordinateValue&&ee.setFieldsValue(F.coordinateValue),F.dataValue&&ae.setFieldsValue(F.dataValue),F.linkageIds&&re.setFieldsValue(F.linkageIds.split(","))}),[F]);var te=function(e,n){return Object.prototype.toString.call(e)==n},ie=function(e,n,a,l){if(l){var t=JSON.parse(JSON.stringify(F));t[l][n]=a,e&&e(I,L,t)}else e&&e((0,r.Z)({},n,a))},oe=function(e,n,a,l){var t=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return(0,k.jsxs)(k.Fragment,{children:["Input"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(o.Z,{allowClear:!0,disabled:e.disabled,onBlur:function(n){return t&&ie(a,e.name,n.target.value,l)},placeholder:e.placeholder})}),"InputNumber"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(p.Z,{disabled:e.disabled,min:e.min,max:e.max,onBlur:function(n){return t&&ie(a,e.name,n.target.value?Number(n.target.value):0,l)},style:{width:"100%"},placeholder:e.placeholder})}),"TextArea"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(P,{allowClear:!0,disabled:e.disabled,onBlur:function(n){return t&&ie(a,e.name,n.target.value,l)},rows:8,placeholder:e.placeholder})}),"Switch"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,valuePropName:"checked",rules:[{required:e.require}],children:(0,k.jsx)(m.Z,{disabled:e.disabled||"useInterface"===e.name&&!L,onChange:function(n){return t&&ie(a,e.name,n,l)}})}),"Slider"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(f.Z,{min:e.min||0,max:e.max||100,disabled:e.disabled,onAfterChange:function(n){return t&&ie(a,e.name,n,l)}})}),"Select"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(c.Z,{allowClear:!0,disabled:e.disabled,onChange:function(n){return t&&ie(a,e.name,n,l)},placeholder:e.placeholder,children:e.options.map((function(e){return(0,k.jsx)(T,{value:e.code,children:e.name},e.code)}))})}),"SketchPicker"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,children:(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(g.Z,{span:12,children:(0,k.jsx)(u.Z.Item,{noStyle:!0,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(o.Z,{allowClear:!0,disabled:e.disabled,onBlur:function(n){return t&&ie(a,e.name,n.target.value,l)},placeholder:e.placeholder})})}),(0,k.jsx)(g.Z,{span:11,offset:1,children:(0,k.jsx)(u.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return(0,k.jsxs)("div",{className:"color-wrapper",style:{background:n.getFieldValue(e.name),width:"100%"},children:["\u83b7\u53d6\u989c\u8272",(0,k.jsx)("div",{className:"color",children:(0,k.jsx)(j.AI,{color:n.getFieldValue(e.name),onChangeComplete:function(i){n.setFieldsValue((0,r.Z)({},e.name,"rgba(".concat(i.rgb.r,",").concat(i.rgb.g,",").concat(i.rgb.b,",").concat(i.rgb.a,")"))),t?ie(a,e.name,"rgba(".concat(i.rgb.r,",").concat(i.rgb.g,",").concat(i.rgb.b,",").concat(i.rgb.a,")"),l):n.setFieldValue(e.name,"rgba(".concat(i.rgb.r,",").concat(i.rgb.g,",").concat(i.rgb.b,",").concat(i.rgb.a,")"))}})})]})}})})]})}),"JsonEdit"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(u.Z.Item,{shouldUpdate:!0,noStyle:!0,children:(0,k.jsx)(_,{value:n.getFieldValue(e.name),onChange:function(r){return t?ie(a,e.name,r,l):n.setFieldValue(e.name,r)}})})})]})},se=function e(n,a,l,r){var t=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return n.map((function(n,i){if(te(n,"[object Object]")){var o=void 0!==n.relationFields?n.relationFields.split(","):[];return(0,k.jsx)("div",{children:o.length?(0,k.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:!0,children:function(e){var i=e.getFieldValue;if(o.every((function(e){return n.relationValues.includes(String(i(e)))})))return oe(n,a,l,r,t)}}):oe(n,a,l,r,t)},i)}if(te(n,"[object Array]"))return(0,k.jsx)("div",{children:n.map((function(n,i){var o=void 0!==n.relationFields?n.relationFields.split(","):[];return(0,k.jsx)(d.Z,{children:void 0===n.relationFields?(0,k.jsx)(M,{header:n.name,children:e(n.list,a,l,r,t)},n+i):(0,k.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:!0,children:function(s){var c=s.getFieldValue;if(o.every((function(e){return n.relationValues.includes(String(c(e)))})))return(0,k.jsx)(d.Z,{children:(0,k.jsx)(M,{header:n.name,children:e(n.list,a,l,r,t)},n+i)},i)}})},i)}))},i)}))},ce=function(e,n,a){var l;e.stopPropagation(),e.preventDefault(),null===(l=document.querySelector("#js-content-menu"))||void 0===l||l.setAttribute("style","display: none"),n!==I&&U(n,a)},de=function(e,n,a){e.stopPropagation(),e.preventDefault(),R(n,a)},ue=(0,i.useMemo)((function(){var e=[];if(L){var n=B.widgets.findIndex((function(e){return e.id===L}));if(-1!==n&&B.widgets[n].dataValue&&B.widgets[n].dataValue.params)for(var a in B.widgets[n].dataValue.params)e.push(a)}return e}),[L,B]);(0,i.useEffect)((function(){K("1")}),[I]);var pe=(0,i.useMemo)((function(){if(!B.widgets)return false;if(I===L){var e=B.widgets.findIndex((function(e){return e.id===L}));if(-1!==e&&B.widgets[e].widgets.some((function(e){return"form"===e.type})))return!0}return false}),[B,I,L]);return(0,k.jsxs)("div",{className:"app-screen-disign__body--right",style:{right:J?0:-400},children:[(0,k.jsx)("div",{onClick:function(){return D(!J)},className:"operation",children:J?(0,k.jsx)(w.Z,{}):(0,k.jsx)(N.Z,{})}),(0,k.jsxs)(s.Z,{className:"custom-tabs",activeKey:H,onChange:function(e){return K(e)},destroyInactiveTabPane:!0,children:[(0,k.jsx)(O,{tab:"\u56fe\u5c42\u7ba1\u7406",style:{position:"relative"},children:(0,k.jsx)(b.Z,{loading:!1,error:!1,nodata:Boolean(B&&B.widgets&&!B.widgets.length),children:(0,k.jsx)("div",{className:"app-screen-disign__layer",children:function e(n,a){return n.map((function(n){return n.widgets?(0,k.jsxs)("div",{className:"app-screen-disign__layer",children:[(0,k.jsxs)("div",{onContextMenu:function(e){ce(e,n.id,n.id),(0,V._u)(e)},onClick:function(e){return ce(e,n.id,n.id)},className:"header ".concat(n.id===I?"is-active":""),children:[(0,k.jsx)("span",{onClick:function(e){return de(e,n.id)},className:"show",children:"block"===n.configureValue.styleDisplay?(0,k.jsx)(Z.Z,{}):(0,k.jsx)(v.Z,{})}),(0,k.jsx)("span",{className:"file",children:(0,k.jsx)(y.Z,{})}),(0,k.jsx)("span",{className:"label",children:n.label})]}),e(n.widgets,n.id)]},n.id):(0,k.jsx)("div",{className:"app-screen-disign__layer--item",children:(0,k.jsxs)("div",{onContextMenu:function(e){ce(e,n.id,a),(0,V._u)(e)},onClick:function(e){return ce(e,n.id,a)},className:"header ".concat(n.id===I?"is-active":""),children:[(0,k.jsx)("span",{onClick:function(e){return de(e,n.id,a)},className:"show",children:"block"===n.configureValue.styleDisplay?(0,k.jsx)(Z.Z,{}):(0,k.jsx)(v.Z,{})}),(0,k.jsx)("span",{className:"file",children:(0,k.jsx)(C.Z,{})}),(0,k.jsx)("span",{className:"label",children:n.label})]})},n.id)}))}(B.widgets||[])})})},"1"),(0,k.jsx)(O,{tab:"\u9879\u76ee\u914d\u7f6e",children:(0,k.jsx)(u.Z,{preserve:!0,form:Y,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",initialValues:n,children:se(A.page.configure||[],Y,a,"")})},"2"),I&&!I.includes(",")&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(O,{tab:"\u914d\u7f6e",children:(0,k.jsx)(u.Z,{form:Q,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",children:q[F.code]?se(q[F.code].configure||[],Q,S,"configureValue",!0):q[F.type]?se(q[F.type].configure||[],Q,S,"configureValue",!0):null})},"3"),q[F.code]&&q[F.code].data||q[F.type]&&q[F.type].data?(0,k.jsx)(O,{tab:"\u6570\u636e",children:(0,k.jsxs)(u.Z,{preserve:!0,form:ae,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",onFinish:function(e){var n=JSON.parse(JSON.stringify(F));n.dataValue=e,E[n.code]&&(n.dataValue=(0,l.Z)((0,l.Z)({},E[n.code].dataValue),e),S(I,L,n))},children:[q[F.code]?se(q[F.code].data||[],ae,S,"dataValue",!1):q[F.type]?se(q[F.type].data||[],ae,S,"dataValue",!1):null,"form"===F.type?(0,k.jsx)(u.Z.Item,{label:"\u63a5\u53e3\u5b57\u6bb5",name:"paramName",tooltip:"\u4ece\u7ec4\u7ec4\u4ef6\u7684\u53c2\u6570\u4e2d\u9009\u62e9",children:(0,k.jsx)(c.Z,{placeholder:"\u8bf7\u9009\u62e9",children:ue.map((function(e){return(0,k.jsx)(T,{children:e},e)}))})}):null,(0,k.jsx)(u.Z.Item,{wrapperCol:{offset:6,span:18},children:(0,k.jsx)(x.Z,{type:"primary",htmlType:"submit",block:!0,children:"\u4fdd\u5b58"})})]})},"4"):null,(0,k.jsx)(O,{tab:"\u5750\u6807",children:(0,k.jsx)(u.Z,{preserve:!0,form:ee,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",children:se(A.coordinate.configure||[],ee,S,"coordinateValue",!0)})},"5")]}),pe?(0,k.jsx)(O,{tab:"\u8054\u52a8",children:(0,k.jsx)(u.Z,{form:re,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",children:(0,k.jsx)(u.Z.Item,{label:"\u8054\u52a8\u7ec4\u4ef6",name:"linkageIds",children:(0,k.jsx)(c.Z,{onChange:function(e){return S(I,L,(0,l.Z)((0,l.Z)({},F),{},{linkageIds:e.join(",")}))},mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u8054\u52a8\u7ec4\u4ef6",children:B&&B.widgets?B.widgets.map((function(e){if(e.id!==L)return(0,k.jsx)(T,{value:e.id,children:e.label},e.id)})):null})})})},"6"):null]})]})}},78431:function(e,n,a){a.r(n),n.default={}}}]);