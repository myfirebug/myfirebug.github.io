"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[757,492],{79757:function(e,n,s){s.r(n),s.d(n,{default:function(){return g}});var c=s(59469),i=s(44855),a=s(31969),l=s(70866),t=s(27217),r=s(61577),d=s(21400),o=s(43049),u=s(48836),p=s(54662),m=s(25666),h=function(e){var n=e.children,s=(0,i.useRef)(document.createElement("div"));return(0,i.useEffect)((function(){return document.body.appendChild(s.current),function(){document.body.removeChild(s.current)}}),[]),m.createPortal(n,s.current)},x=s(20884),f=(s(21492),s(78274)),j=s(17856),N=u.Z.widgetConfiguration,g=function(e){var n=e.addLargeScreenElement,s=e.currentPageId,u=e.pastPage,m=e.futurePage,g=e.currentWidgetId,b=e.currentWidget,k=e.undoLargeScreen,C=e.redoLargeScreen,_=e.modifyLargeScreenElement,w=e.currentWidgetGroupId,Z=e.delLargeScreenElement,v=e.copyLargeScreenElement,y=e.group,E=e.cancelGroup,L=e.currentPage,I=e.topLargescreenElement,P=e.bottomLargescreenElement,S=e.upLargescreenElement,V=e.downLargescreenElement,M=(0,f.k6)(),O=function(e){s?N[e]?n((0,c.Z)({id:(0,x.M8)(),linkageIds:""},N[e])):a.ZP.info("\u8be5\u7ec4\u4ef6\u6b63\u5728\u5f00\u53d1\u4e2d..."):a.ZP.error("\u8bf7\u5148\u6dfb\u52a0\u9875\u9762\u54e6")},W=(0,i.useCallback)((function(){u.length&&k()}),[u.length,k]),G=(0,i.useCallback)((function(){m.length&&C()}),[m.length,C]),J=(0,i.useCallback)((function(e){g&&!g.includes(",")&&(Z(),a.ZP.success("\u5220\u9664\u6210\u529f"))}),[g]),K=(0,i.useCallback)((function(e){g&&!g.includes(",")&&(v(),a.ZP.success("\u590d\u5236\u6210\u529f"))}),[g]),R=(0,i.useCallback)((function(e){g&&g.includes(",")&&(y(),a.ZP.success("\u5206\u7ec4\u6210\u529f"))}),[g]),B=(0,i.useCallback)((function(e){g&&w===g&&(E(),a.ZP.success("\u53d6\u6d88\u5206\u7ec4\u6210\u529f"))}),[g]),D=(0,i.useCallback)((function(e){if(g){var n=JSON.parse(JSON.stringify(b));switch(e){case"top":n.coordinateValue.top=n.coordinateValue.top-1;break;case"left":n.coordinateValue.left=n.coordinateValue.left-1;break;case"bottom":n.coordinateValue.top=n.coordinateValue.top+1;break;default:n.coordinateValue.left=n.coordinateValue.left+1}_(g,w,n)}}),[g,b,_]),H=function(e,n){l.Z.confirm({title:"\u60a8\u786e\u5b9a\u8981".concat(e,"?"),icon:(0,j.jsx)(r.Z,{}),content:"\u6e29\u99a8\u63d0\u793a",onOk:function(){n&&n()}})};(0,i.useEffect)((function(){var e=function(e){if(e.preventDefault(),e.stopPropagation(),e.ctrlKey)switch(e.keyCode){case 90:e.altKey?G():W();break;case 37:D("left");break;case 38:D("top");break;case 39:D("right");break;case 40:D("bottom")}else if(46===e.keyCode)H("\u5220\u9664",J)};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}),[W,G,D,J,K,g,H]);var T=(0,i.useMemo)((function(){if(!L.widgets)return false;var e=L.widgets.findIndex((function(e){return e.id===w}));if(-1!==e&&w!==g){if(L.widgets[e].widgets.findIndex((function(e){return e.id===g}))>0)return!0}else if(L.widgets.findIndex((function(e){return e.id===g}))>0)return!0;return false}),[L,w,g]),q=(0,i.useMemo)((function(){if(!L.widgets)return false;var e=L.widgets.findIndex((function(e){return e.id===w}));if(-1!==e&&w!==g){if(L.widgets[e].widgets.findIndex((function(e){return e.id===g}))!=L.widgets[e].widgets.length-1)return!0}else if(L.widgets.findIndex((function(e){return e.id===g}))!==L.widgets.length-1)return!0;return false}),[L,w,g]);return(0,j.jsxs)("div",{className:"app-screen-disign__header",children:[(0,j.jsx)(h,{children:(0,j.jsxs)("ul",{className:"app-content-menu",id:"js-content-menu",children:[(0,j.jsxs)("li",{onClick:K,className:"app-content-menu__item ".concat(g&&!g.includes(",")?"":"is-disabled"),children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7bc"}),(0,j.jsx)("span",{className:"name",children:"\u590d\u5236\u56fe\u5c42"})]}),(0,j.jsxs)("li",{onClick:function(){return H("\u5220\u9664",J)},className:"app-content-menu__item is-border ".concat(g&&!g.includes(",")?"":"is-disabled"),children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7c3"}),(0,j.jsx)("span",{className:"name",children:"\u5220\u9664\u56fe\u5c42"}),(0,j.jsx)("span",{children:"delete"})]}),(0,j.jsxs)("li",{onClick:function(){T&&S()},className:"app-content-menu__item ".concat(T?"":"is-disabled"),children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7ef"}),(0,j.jsx)("span",{className:"name",children:"\u4e0a\u79fb\u4e00\u5c42"}),(0,j.jsx)("span",{children:"alt+\u2191"})]}),(0,j.jsxs)("li",{onClick:function(){q&&V()},className:"app-content-menu__item ".concat(q?"":"is-disabled"),children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7f1"}),(0,j.jsx)("span",{className:"name",children:"\u4e0b\u79fb\u4e00\u5c42"}),(0,j.jsx)("span",{children:"alt+\u2193"})]}),(0,j.jsxs)("li",{onClick:function(){T&&I()},className:"app-content-menu__item ".concat(T?"":"is-disabled"),children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue786"}),(0,j.jsx)("span",{className:"name",children:"\u7f6e\u9876\u56fe\u5c42"}),(0,j.jsx)("span",{children:"ctrl+shfit+\u2191"})]}),(0,j.jsxs)("li",{onClick:function(){q&&P()},className:"app-content-menu__item is-border ".concat(q?"":"is-disabled"),children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue742"}),(0,j.jsx)("span",{className:"name",children:"\u7f6e\u5e95\u56fe\u5c42"}),(0,j.jsx)("span",{children:"ctrl+shfit+\u2193"})]}),(0,j.jsxs)("li",{onClick:R,className:"app-content-menu__item  ".concat(w||!g.includes(",")?"is-disabled":""),children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue83f"}),(0,j.jsx)("span",{className:"name",children:"\u5206\u7ec4"})]}),(0,j.jsxs)("li",{onClick:B,className:"app-content-menu__item  ".concat(w&&w===g?"":"is-disabled"),children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue632"}),(0,j.jsx)("span",{className:"name",children:"\u62c6\u5206"})]})]})}),(0,j.jsx)("ul",{className:"app-screen-disign__header--left",children:p.R.map((function(e,n){return(0,j.jsxs)("li",{className:"".concat(s?"":"is-disabled"),onClick:function(){e.datas||O(e.widgetName)},children:[(0,j.jsx)("span",{className:"app-icon",dangerouslySetInnerHTML:{__html:e.icon}}),(0,j.jsx)("p",{children:e.name}),e.datas&&e.datas.length?(0,j.jsx)("div",{className:"elements",children:e.datas.map((function(n,s){return(0,j.jsxs)("div",{onClick:function(){n.widgetName&&("form"===e.type&&w||"form"!==e.type)&&O(n.widgetName)},children:[(0,j.jsx)("div",{className:"img",children:n.src?(0,j.jsx)("img",{src:n.src}):(0,j.jsx)(d.Z,{})}),(0,j.jsx)("div",{className:"name",title:n.name,children:n.name})]},s)}))}):""]},e.type)}))}),(0,j.jsxs)("div",{className:"app-screen-disign__header--center",children:[(0,j.jsxs)("ul",{className:"shortcuts-group",children:[(0,j.jsx)("li",{onClick:R,className:"".concat(w||!g.includes(",")?"is-disabled":""),children:(0,j.jsxs)(t.Z,{title:"\u5206\u7ec4",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue83f"}),(0,j.jsx)("p",{children:"\u5206\u7ec4"})]})}),(0,j.jsx)("li",{onClick:B,className:"".concat(w&&w===g?"":"is-disabled"),children:(0,j.jsxs)(t.Z,{title:"\u62c6\u5206",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue632"}),(0,j.jsx)("p",{children:"\u62c6\u5206"})]})})]}),(0,j.jsxs)("ul",{className:"shortcuts-group",children:[(0,j.jsx)("li",{onClick:K,className:"".concat(g&&!g.includes(",")?"":"is-disabled"),children:(0,j.jsxs)(t.Z,{title:"\u590d\u5236",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7bc"}),(0,j.jsx)("p",{children:"\u590d\u5236"})]})}),(0,j.jsx)("li",{onClick:function(){return H("\u5220\u9664",J)},className:"".concat(g&&!g.includes(",")?"":"is-disabled"),children:(0,j.jsxs)(t.Z,{title:"\u5220\u9664(ctrl+delete)",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7c3"}),(0,j.jsx)("p",{children:"\u5220\u9664"})]})})]}),(0,j.jsxs)("ul",{className:"shortcuts-group",children:[(0,j.jsx)("li",{onClick:function(){return D("top")},className:"".concat(!g||g.includes(",")?"is-disabled":""),children:(0,j.jsxs)(t.Z,{title:"\u4e0a\u79fb(ctrl+\u2191)",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7ef"}),(0,j.jsx)("p",{children:"\u4e0a\u79fb"})]})}),(0,j.jsx)("li",{onClick:function(){return D("bottom")},className:"".concat(!g||g.includes(",")?"is-disabled":""),children:(0,j.jsxs)(t.Z,{title:"\u4e0b\u79fb(ctrl+\u2193)",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7f1"}),(0,j.jsx)("p",{children:"\u4e0b\u79fb"})]})}),(0,j.jsx)("li",{onClick:function(){return D("left")},className:"".concat(!g||g.includes(",")?"is-disabled":""),children:(0,j.jsxs)(t.Z,{title:"\u5de6\u79fb(ctrl+\u2190)",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7f0"}),(0,j.jsx)("p",{children:"\u5de6\u79fb"})]})}),(0,j.jsx)("li",{onClick:function(){return D("right")},className:"".concat(!g||g.includes(",")?"is-disabled":""),children:(0,j.jsxs)(t.Z,{title:"\u53f3\u79fb(ctrl+\u2192)",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue7ee"}),(0,j.jsx)("p",{children:"\u53f3\u79fb"})]})})]}),(0,j.jsxs)("ul",{className:"shortcuts-group",children:[(0,j.jsx)("li",{className:"".concat(s?"":"is-disabled"),children:(0,j.jsxs)(t.Z,{title:"\u4fdd\u5b58(ctrl+s)",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue791"}),(0,j.jsx)("p",{children:"\u4fdd\u5b58"})]})}),(0,j.jsx)("li",{onClick:function(){s&&M.push("/frame/preview?pageId=".concat(s))},className:"".concat(s?"":"is-disabled"),children:(0,j.jsxs)(t.Z,{title:"\u9884\u89c8(ctrl+p)",placement:"bottom",children:[(0,j.jsx)("span",{className:"app-icon",children:"\ue78f"}),(0,j.jsx)("p",{children:"\u9884\u89c8"})]})})]})]}),(0,j.jsx)("ul",{className:"app-screen-disign__header--right",children:(0,j.jsx)("li",{onClick:function(){return M.goBack()},children:(0,j.jsx)(o.Z,{})})})]})}},21492:function(e,n,s){s.r(n),n.default={}}}]);