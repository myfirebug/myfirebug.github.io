(self.webpackChunkmain=self.webpackChunkmain||[]).push([[535,444,536],{78243:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var r=t(52447),o=t(44855),a=t(7885),s=t(63748),i=t(10401),c=t(15879),l=(t(56536),t(25162)),u=t(65216),d=t(62343),f=t(17856),m={saveUserInfo:function(e){return function(n){n(function(e){return{type:l.fN,data:e}}(e))}}},p=(0,i.connect)((function(e){return{counter:e.counter,userinfo:e.userinfo}}),m)((function(e){var n=e.saveUserInfo,t=(e.userinfo,(0,c.k6)()),i=a.l0.useForm(),l=(0,r.Z)(i,1)[0],m=(0,o.useCallback)((function(){t.replace("/frame/home")}),[t]);return(0,o.useEffect)((function(){d.Z.getItem("token")&&m()}),[m]),(0,f.jsx)("div",{className:"app-login",children:(0,f.jsxs)("div",{className:"app-login__form",children:[(0,f.jsxs)("div",{className:"header",children:[(0,f.jsx)("div",{className:"logo"}),(0,f.jsx)("h2",{className:"title",children:"\u5927\u5c4f\u7ba1\u7406\u7cfb\u7edf"})]}),(0,f.jsx)("div",{className:"body",children:(0,f.jsxs)(a.l0,{name:"basic-login",form:l,initialValues:{remember:!0,agreement:!0},onFinish:function(e){u.Z.login(e).then((function(e){e&&(n(e),d.Z.setItem("token",e.token),m())}))},autoComplete:"off",children:[(0,f.jsx)(a.l0.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:(0,f.jsx)(a.II,{size:"large",prefix:(0,f.jsx)(s.UserOutlined,{className:"site-form-item-icon"}),placeholder:"\u8d26\u6237"})}),(0,f.jsx)(a.l0.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:(0,f.jsx)(a.II.Password,{size:"large",prefix:(0,f.jsx)(s.LockOutlined,{className:"site-form-item-icon"}),placeholder:"\u5bc6\u7801"})}),(0,f.jsx)(a.l0.Item,{children:(0,f.jsx)(a.zx,{type:"primary",htmlType:"submit",block:!0,size:"large",children:"\u767b\u5f55"})}),(0,f.jsx)(a.l0.Item,{name:"agreement",valuePropName:"checked",children:(0,f.jsxs)(a.XZ,{className:"agreement",children:["\u5df2\u9605\u8bfb\u5e76\u540c\u610f",(0,f.jsx)("span",{children:"\u300a\u7528\u6237\u4f7f\u7528\u534f\u8bae\u300b"}),"\u53ca",(0,f.jsx)("span",{children:"\u300a\u7528\u6237\u9690\u79c1\u534f\u8bae\u300b"})]})})]})})]})})}))},65216:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var r=t(59469),o=t(37091),a=t.n(o),s={development:{default:"http://172.19.20.12:9905",geo:"http://geo.datav.aliyun.com/areas_v3/bound/",local:window.location.href.split("#")[0]},test:{default:"http://172.19.20.12:9905",geo:"http://geo.datav.aliyun.com/areas_v3/bound/",local:"http://geo.datav.aliyun.com/"},production:{default:"http://192.168.200.7:9905",geo:"http://geo.datav.aliyun.com/areas_v3/bound/",local:"https://myfirebug.github.io"}},i=t(29162),c=t.n(i),l=t(7885),u=t(56012),d="production",f=[],m=0,p=function(e){for(var n=0,t=f.length;n<t;n++)if(f[n]===e){f.splice(n,1);break}},h=function(e){var n=document.getElementById("js_loading");e&&m--,m<=0&&n&&(n.style.display="none")};function g(e){var n,t=function(e){return(0,r.Z)((0,r.Z)({},e),{},{url:e.url||"",method:e.method||"post",params:e.params,loading:"boolean"!==typeof e.loading||e.loading,servicePrefix:e.servicePrefix||"default",data:e.data,responseType:e.responseType||"json"})}(e);return function(e){if(e){m++;var n=document.getElementById("js_loading");e&&n&&(n.style.display="fixed")}}(t.loading),t.servicePrefix&&(n=t.servicePrefix,a().defaults.baseURL=s[d][n]),new Promise((function(e,n){a()(t).then((function(n){h(t.loading),e(n)})).catch((function(e){h(t.loading),n(e)}))}))}function v(e){return g((0,r.Z)((0,r.Z)({},e),{},{method:"get"}))}function x(e){return g((0,r.Z)((0,r.Z)({},e),{},{method:"post"}))}a().defaults.timeout=6e4,a().defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",a().defaults.withCredentials=!0,a().interceptors.request.use((function(e){var n,t;"object"===typeof e.headers&&(e.headers.Authorization="Bearer ".concat(null===(t=u.Z.getState().userinfo)||void 0===t?void 0:t.token));return e.cancelToken=new(a().CancelToken)((function(e){n=e})),"function"===typeof n&&function(e,n){for(var t=0,r=f.length;t<r;t++)if(f[t]===e)return void n(e);f.push(e)}("".concat(e.url,"?").concat(c().stringify(e.params),"&method=").concat(e.method),n),e}),(function(e){return Promise.reject(e)})),a().interceptors.response.use((function(e){var n=e.config,t=e.status,r=e.data,o=r.code,a=r.message,s=r.data;if(n&&p("".concat(n.url,"?").concat(c().stringify(n.params),"&method=").concat(n.method)),200===t)return void 0===o?Promise.resolve(e.data):0!==o?(l.yw.error(a||"\u83b7\u53d6\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458"),Promise.resolve(s)):Promise.resolve(s);var i=new Error("\u8bf7\u6c42\u51fa\u73b0\u5f02\u5e38, HTTP \u72b6\u6001\u7801\u4e0d\u4e3a 200");return Promise.reject(i)}),(function(e){var n=e.config,t=e.message,r=e.response.status;switch(n&&p("".concat(n.url,"?").concat(c().stringify(n.params),"&method=").concat(n.method)),t&&p("".concat(t)),r){case 401:default:break;case 403:window.sessionStorage.clear(),l.yw.error("token\u5931\u6548");break;case 404:l.yw.error("\u63a5\u53e3\u4e0d\u5b58\u5728");break;case 500:l.yw.error("\u670d\u52a1\u5668\u9519\u8bef")}return Promise.reject({data:null,code:r,message:"\u5931\u8d25",success:!1})}));var y={getGeo:function(e){return v({url:"/geo/areas_v3/bound/".concat(e.field,".json"),loading:!0,servicePrefix:"local"})},login:function(e){return x({url:"/login",loading:!0,data:e,servicePrefix:"local"})},report:function(e){return v({url:"/report-list",loading:!0,data:e,servicePrefix:"local"})},reportDelete:function(e){return x({url:"/report-delete",loading:!0,data:e,servicePrefix:"local"})}}},56536:function(e,n,t){"use strict";t.r(n),n.default={}},30046:function(){}}]);