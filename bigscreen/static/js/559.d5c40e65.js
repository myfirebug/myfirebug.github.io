(self.webpackChunkmain=self.webpackChunkmain||[]).push([[559,431],{61026:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return w}});var a=l(59469),t=l(45308),r=l(52447),i=l(44855),o=(l(78431),l(7885)),s=l(20176),d=l(63748),c=l(20884),u=l(99026),p=l(89648),m=l.n(p),f=(l(45149),l(17856)),h=function(e){var n=e.value,l=e.onChange,t=e.options,r=void 0===t?{}:t,o=(0,i.useRef)(null),s=(0,i.useRef)(null),d=(0,i.useCallback)((function(){if(!s.current){var e=(0,a.Z)({mode:"code",onChange:function(){var e;l&&l(null===(e=s.current)||void 0===e?void 0:e.get())}},r);s.current=new(m())(o.current,e,n)}}),[l,r,n]);return(0,i.useEffect)((function(){d()}),[d]),(0,i.useEffect)((function(){return function(){s.current&&s.current.destroy()}}),[s]),(0,f.jsx)("div",{ref:o,className:"app-json-editor"})},g=u.Z.widgetTypesConfiguration,b=u.Z.widgetConfiguration,x=u.Z.baseConfiguration,j=o.II.TextArea,v=o.mQ.TabPane,y=o.Ph.Option,C=o.UO.Panel,w=function(e){var n=e.screen,l=e.modifyScreen,u=e.currentWidgetId,p=e.currentWidget,m=e.modifyLargeScreenElement,w=e.currentPage,I=e.setRightFlag,V=e.rightFlag,N=e.currentWidgetGroupId,F=e.showOrHideLargeScreenElement,k=e.changeLargeScreenElement,S=(0,i.useState)("1"),O=(0,r.Z)(S,2),q=O[0],Z=O[1],E=o.l0.useForm(),P=(0,r.Z)(E,1)[0],A=o.l0.useForm(),_=(0,r.Z)(A,1)[0],J=o.l0.useForm(),T=(0,r.Z)(J,1)[0],U=o.l0.useForm(),R=(0,r.Z)(U,1)[0],B=o.l0.useForm(),D=(0,r.Z)(B,1)[0];(0,i.useEffect)((function(){p.configureValue&&P.setFieldsValue(p.configureValue),p.coordinateValue&&T.setFieldsValue(p.coordinateValue),p.dataValue&&R.setFieldsValue(p.dataValue),p.linkageIds&&D.setFieldsValue({linkageIds:p.linkageIds.split(",")})}),[p]);var L=function(e,n){return Object.prototype.toString.call(e)==n},M=function(e,n,l,a){if(a){var r=JSON.parse(JSON.stringify(p));r[a][n]=l,e&&e(u,N,r)}else e&&e((0,t.Z)({},n,l))},W=function(e,n,l,a){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return(0,f.jsxs)(f.Fragment,{children:["Input"===e.componentName&&(0,f.jsx)(o.l0.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,f.jsx)(o.II,{allowClear:!0,disabled:e.disabled,onBlur:function(n){return r&&M(l,e.name,n.target.value,a)},placeholder:e.placeholder})}),"InputNumber"===e.componentName&&(0,f.jsx)(o.l0.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,f.jsx)(o.Rn,{disabled:e.disabled,min:e.min,max:e.max,onBlur:function(n){return r&&M(l,e.name,n.target.value?Number(n.target.value):0,a)},style:{width:"100%"},placeholder:e.placeholder})}),"TextArea"===e.componentName&&(0,f.jsx)(o.l0.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,f.jsx)(j,{allowClear:!0,disabled:e.disabled,onBlur:function(n){return r&&M(l,e.name,n.target.value,a)},rows:8,placeholder:e.placeholder})}),"Switch"===e.componentName&&(0,f.jsx)(o.l0.Item,{label:e.label,name:e.name,tooltip:e.tooltip,valuePropName:"checked",rules:[{required:e.require}],children:(0,f.jsx)(o.rs,{disabled:e.disabled||"useInterface"===e.name&&!N,onChange:function(n){return r&&M(l,e.name,n,a)}})}),"Slider"===e.componentName&&(0,f.jsx)(o.l0.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,f.jsx)(o.iR,{min:e.min||0,max:e.max||100,disabled:e.disabled,step:e.step||1,onAfterChange:function(n){return r&&M(l,e.name,n,a)}})}),"Select"===e.componentName&&(0,f.jsx)(o.l0.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,f.jsx)(o.Ph,{allowClear:!0,disabled:e.disabled,onChange:function(n){return r&&M(l,e.name,n,a)},placeholder:e.placeholder,children:e.options.map((function(e){return(0,f.jsx)(y,{value:e.code,children:e.name},e.code)}))})}),"SketchPicker"===e.componentName&&(0,f.jsx)(o.l0.Item,{label:e.label,children:(0,f.jsxs)(o.X2,{children:[(0,f.jsx)(o.JX,{span:12,children:(0,f.jsx)(o.l0.Item,{noStyle:!0,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,f.jsx)(o.II,{allowClear:!0,disabled:e.disabled,onBlur:function(n){return r&&M(l,e.name,n.target.value,a)},placeholder:e.placeholder})})}),(0,f.jsx)(o.JX,{span:11,offset:1,children:(0,f.jsx)(o.l0.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return(0,f.jsxs)("div",{className:"color-wrapper",style:{background:n.getFieldValue(e.name),width:"100%"},children:["\u83b7\u53d6\u989c\u8272",(0,f.jsx)("div",{className:"color",children:(0,f.jsx)(s.AI,{color:n.getFieldValue(e.name),onChangeComplete:function(i){n.setFieldsValue((0,t.Z)({},e.name,"rgba(".concat(i.rgb.r,",").concat(i.rgb.g,",").concat(i.rgb.b,",").concat(i.rgb.a,")"))),r?M(l,e.name,"rgba(".concat(i.rgb.r,",").concat(i.rgb.g,",").concat(i.rgb.b,",").concat(i.rgb.a,")"),a):n.setFieldValue(e.name,"rgba(".concat(i.rgb.r,",").concat(i.rgb.g,",").concat(i.rgb.b,",").concat(i.rgb.a,")"))}})})]})}})})]})}),"JsonEdit"===e.componentName&&(0,f.jsx)(o.l0.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,f.jsx)(o.l0.Item,{shouldUpdate:!0,noStyle:!0,children:(0,f.jsx)(h,{value:n.getFieldValue(e.name),onChange:function(t){return r?M(l,e.name,t,a):n.setFieldValue(e.name,t)}})})})]})},X=function e(n,l,a,t){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return n.map((function(n,i){if(L(n,"[object Object]")){var s=void 0!==n.relationFields?n.relationFields.split(","):[];return(0,f.jsx)("div",{children:s.length?(0,f.jsx)(o.l0.Item,{noStyle:!0,shouldUpdate:!0,children:function(e){var i=e.getFieldValue;if(s.every((function(e){return n.relationValues.includes(String(i(e)))})))return W(n,l,a,t,r)}}):W(n,l,a,t,r)},i)}if(L(n,"[object Array]"))return(0,f.jsx)("div",{children:n.map((function(n,i){var s=void 0!==n.relationFields?n.relationFields.split(","):[];return(0,f.jsx)(o.UO,{children:void 0===n.relationFields?(0,f.jsx)(C,{header:n.name,children:e(n.list,l,a,t,r)},n+i):(0,f.jsx)(o.l0.Item,{noStyle:!0,shouldUpdate:!0,children:function(d){var c=d.getFieldValue;if(s.every((function(e){return n.relationValues.includes(String(c(e)))})))return(0,f.jsx)(o.UO,{children:(0,f.jsx)(C,{header:n.name,children:e(n.list,l,a,t,r)},n+i)},i)}})},i)}))},i)}))},Q=function(e,n,l){var a;e.stopPropagation(),e.preventDefault(),null===(a=document.querySelector("#js-content-menu"))||void 0===a||a.setAttribute("style","display: none"),n!==u&&k(n,l)},z=function(e,n,l){e.stopPropagation(),e.preventDefault(),F(n,l)},G=(0,i.useMemo)((function(){var e=[];if(N){var n=w.widgets.findIndex((function(e){return e.id===N}));if(-1!==n&&w.widgets[n].dataValue&&w.widgets[n].dataValue.params)for(var l in w.widgets[n].dataValue.params)e.push(l)}return e}),[N,w]);(0,i.useEffect)((function(){Z(u?"1":"2")}),[u]);var H=(0,i.useMemo)((function(){if(!w.widgets)return false;if(u===N){var e=w.widgets.findIndex((function(e){return e.id===N}));if(-1!==e&&w.widgets[e].widgets.some((function(e){return"form"===e.type})))return!0}return false}),[w,u,N]);return(0,f.jsxs)("div",{className:"app-screen-disign__body--right",style:{right:V?0:-400},children:[(0,f.jsx)("div",{onClick:function(){return I(!V)},className:"operation",children:V?(0,f.jsx)(d.LeftOutlined,{}):(0,f.jsx)(d.RightOutlined,{})}),(0,f.jsxs)(o.mQ,{className:"custom-tabs",activeKey:q,onChange:function(e){return Z(e)},destroyInactiveTabPane:!0,children:[w&&w.widgets&&w.widgets.length?(0,f.jsx)(v,{tab:"\u56fe\u5c42\u7ba1\u7406",style:{position:"relative"},children:(0,f.jsx)("div",{className:"app-screen-disign__layer",children:function e(n,l){return n.map((function(n){return n.widgets?(0,f.jsxs)("div",{className:"app-screen-disign__layer",children:[(0,f.jsxs)("div",{onContextMenu:function(e){Q(e,n.id,n.id),(0,c._u)(e)},onClick:function(e){return Q(e,n.id,n.id)},className:"header ".concat(n.id===u?"is-active":""),children:[(0,f.jsx)("span",{onClick:function(e){return z(e,n.id)},className:"show",children:"block"===n.configureValue.styleDisplay?(0,f.jsx)(d.EyeOutlined,{}):(0,f.jsx)(d.EyeInvisibleOutlined,{})}),(0,f.jsx)("span",{className:"file",children:(0,f.jsx)(d.FolderOpenOutlined,{})}),(0,f.jsx)("span",{className:"label",children:n.label})]}),e(n.widgets,n.id)]},n.id):(0,f.jsx)("div",{className:"app-screen-disign__layer--item",children:(0,f.jsxs)("div",{onContextMenu:function(e){Q(e,n.id,l),(0,c._u)(e)},onClick:function(e){return Q(e,n.id,l)},className:"header ".concat(n.id===u?"is-active":""),children:[(0,f.jsx)("span",{onClick:function(e){return z(e,n.id,l)},className:"show",children:"block"===n.configureValue.styleDisplay?(0,f.jsx)(d.EyeOutlined,{}):(0,f.jsx)(d.EyeInvisibleOutlined,{})}),(0,f.jsx)("span",{className:"file",children:(0,f.jsx)(d.FolderOutlined,{})}),(0,f.jsx)("span",{className:"label",children:n.label})]})},n.id)}))}(w.widgets||[])})},"1"):null,(0,f.jsx)(v,{tab:"\u9879\u76ee\u914d\u7f6e",children:(0,f.jsx)(o.l0,{preserve:!0,form:_,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",initialValues:n,children:X(x.page.configure||[],_,l,"")})},"2"),u&&!u.includes(",")&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v,{tab:"\u914d\u7f6e",children:(0,f.jsx)(o.l0,{form:P,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",children:g[p.code]?X(g[p.code].configure||[],P,m,"configureValue",!0):g[p.type]?X(g[p.type].configure||[],P,m,"configureValue",!0):null})},"3"),g[p.code]&&g[p.code].data||g[p.type]&&g[p.type].data?(0,f.jsx)(v,{tab:"\u6570\u636e",children:(0,f.jsxs)(o.l0,{preserve:!0,form:R,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",onFinish:function(e){var n=JSON.parse(JSON.stringify(p));n.dataValue=e,b[n.code]&&(n.dataValue=(0,a.Z)((0,a.Z)({},b[n.code].dataValue),e),m(u,N,n))},children:[g[p.code]?X(g[p.code].data||[],R,m,"dataValue",!1):g[p.type]?X(g[p.type].data||[],R,m,"dataValue",!1):null,"form"===p.type?(0,f.jsx)(o.l0.Item,{label:"\u63a5\u53e3\u5b57\u6bb5",name:"paramName",tooltip:"\u4ece\u7ec4\u7ec4\u4ef6\u7684\u53c2\u6570\u4e2d\u9009\u62e9",children:(0,f.jsx)(o.Ph,{placeholder:"\u8bf7\u9009\u62e9",children:G.map((function(e){return(0,f.jsx)(y,{children:e},e)}))})}):null,(0,f.jsx)(o.l0.Item,{wrapperCol:{offset:6,span:18},children:(0,f.jsx)(o.zx,{type:"primary",htmlType:"submit",block:!0,children:"\u4fdd\u5b58"})})]})},"4"):null,(0,f.jsx)(v,{tab:"\u5750\u6807",children:(0,f.jsx)(o.l0,{preserve:!0,form:T,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",children:X(x.coordinate.configure||[],T,m,"coordinateValue",!0)})},"5")]}),H?(0,f.jsx)(v,{tab:"\u8054\u52a8",children:(0,f.jsx)(o.l0,{form:D,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",children:(0,f.jsx)(o.l0.Item,{label:"\u8054\u52a8\u7ec4\u4ef6",name:"linkageIds",children:(0,f.jsx)(o.Ph,{onChange:function(e){return m(u,N,(0,a.Z)((0,a.Z)({},p),{},{linkageIds:e.join(",")}))},mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u8054\u52a8\u7ec4\u4ef6",children:w&&w.widgets?w.widgets.map((function(e){if(e.id!==N)return(0,f.jsx)(y,{value:e.id,children:e.label},e.id)})):null})})})},"6"):null]})]})}},15155:function(e,n,l){var a=l(21048),t=l(34848);e.exports=function(e,n,l){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t(l)&&(r="leading"in l?!!l.leading:r,i="trailing"in l?!!l.trailing:i),a(e,n,{leading:r,maxWait:n,trailing:i})}},78431:function(e,n,l){"use strict";l.r(n),n.default={}}}]);