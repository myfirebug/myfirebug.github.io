(self.webpackChunkmain=self.webpackChunkmain||[]).push([[657],{96907:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(26234),o=n(38166),i=n(59469),a=n(52447),u=n(44855),c=n(68284),s={bordered:!0,pagination:{show:!0,pageSize:10,current:1},showHeader:!0,hasData:!0,tableLayout:void 0,dateValueType:"date",search:{span:6,collapseRender:void 0,labelWidth:100},options:{show:!0,density:!0,setting:!0},rowKey:"id"},d=n(10401),l=n(50792),f=n(7885),p=n(63748),h=n(15879),g=n(65216),m=n(47740),y=n(17856),v=function(e){var t=e.text,n=e.requestName,r=e.reload,o=e.params,i=e.callback,a=e.children;return(0,y.jsx)(f.gn,{title:"\u786e\u8ba4".concat(t,"\u5417?"),okText:"\u662f",cancelText:"\u5426",onConfirm:function(){if(!g.Z[n])return f.yw.error("\u8be5\u63a5\u53e3\u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5"),!1;g.Z[n](o).then((function(e){e&&(f.yw.success("".concat(t,"\u6210\u529f")),r&&r(),i&&i())}))},children:(0,y.jsx)("span",{className:"link",children:a||t})},"popconfirm")},x={getStrategy:l.A,getLargeScreenPages:m.Hc},b=(0,d.connect)((function(e){return{strategy:e.authorization.strategy}}),x)((function(e){e.strategy;var t=e.getStrategy,n=e.path,d=e.getLargeScreenPages;(0,u.useEffect)((function(){t(n)}),[n,t]);var l=(0,h.k6)(),m=(0,u.useRef)(),x=(0,u.useState)({visible:!1,type:"design",width:"100%",title:""}),b=(0,a.Z)(x,2),w=b[0],k=b[1],j=[{title:"\u5e8f\u53f7",dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u62a5\u8868\u540d\u79f0",dataIndex:"title",ellipsis:!0,tip:"\u6807\u9898\u8fc7\u957f\u4f1a\u81ea\u52a8\u6536\u7f29",fieldProps:{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}},{title:"\u62a5\u8868\u63cf\u8ff0",dataIndex:"description",ellipsis:!0,search:!1},{title:"\u5c4f\u5e55\u5c3a\u5bf8",dataIndex:"description",ellipsis:!0,search:!1,render:function(e,t,n,r,o){return(0,y.jsxs)(y.Fragment,{children:[t.width,"*",t.height]})}},{title:"\u5c4f\u5e55\u6bd4\u4f8b",dataIndex:"description",ellipsis:!0,search:!1,render:function(e,t,n,r,o){return(0,y.jsxs)(y.Fragment,{children:[t.horizontalNumber,"*",t.verticalNumber]})}},{title:"\u521b\u5efa\u65f6\u95f4",key:"createTime",dataIndex:"createTime",valueType:"dateTime",sorter:!0,hideInSearch:!0},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",valueType:"dateRange",hideInTable:!0,search:{transform:function(e){return{startTime:e[0],endTime:e[1]}}}},{title:"\u64cd\u4f5c",search:!1,render:function(e,t,n,r,o){var i;return(0,y.jsxs)("div",{className:"app-table__operation",children:[(0,y.jsx)("span",{onClick:function(){d({pages:t.pages,screen:{auxiliaryBorderColor:t.auxiliaryBorderColor,backgroundColor:t.backgroundColor,backgroundImage:t.backgroundImage,description:t.description,height:t.height,horizontalNumber:t.horizontalNumber,interval:t.interval,projectName:t.projectName,showAuxiliary:t.showAuxiliary,title:t.title,verticalNumber:t.verticalNumber,width:t.width}}),l.push("/frame/configuration?id=".concat(t.id))},className:"link",children:"\u7f16\u8f91"}),(0,y.jsx)(v,{text:"\u5220\u9664",requestName:"reportDelete",params:{ids:[t.id]},reload:null===(i=m.current)||void 0===i?void 0:i.reloadAndRest}),(0,y.jsx)("span",{onClick:function(){d({pages:t.pages,screen:{auxiliaryBorderColor:t.auxiliaryBorderColor,backgroundColor:t.backgroundColor,backgroundImage:t.backgroundImage,description:t.description,height:t.height,horizontalNumber:t.horizontalNumber,interval:t.interval,projectName:t.projectName,showAuxiliary:t.showAuxiliary,title:t.title,verticalNumber:t.verticalNumber,width:t.width}}),l.push("/frame/preview?id=".concat(t.id))},className:"link",children:"\u9884\u89c8"})]})}}],T=(0,u.useState)([]),C=(0,a.Z)(T,2),Z=C[0],N=C[1],I={onChange:function(e){N(e)}},P=function(){d(null),l.push("/frame/configuration")};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f.dy,{title:w.title,width:w.width,destroyOnClose:!0,headerStyle:{display:"none"},bodyStyle:{padding:0,background:"#535353"},onClose:function(){return k((function(e){return(0,i.Z)((0,i.Z)({},e),{},{visible:!1})}))},visible:w.visible}),(0,y.jsx)(c.QV,(0,i.Z)((0,i.Z)({},s),{},{columns:j,actionRef:m,headerTitle:"\u62a5\u8868\u7ba1\u7406",cardBordered:!0,search:{labelWidth:"auto"},request:(0,o.Z)((0,r.Z)().mark((function e(){var t=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:{},t.length>1?t[1]:void 0,t.length>2?t[2]:void 0,e.abrupt("return",g.Z.report());case 4:case"end":return e.stop()}}),e)}))),rowSelection:(0,i.Z)({},I),toolBarRender:function(){return[(0,y.jsx)(f.zx,{icon:(0,y.jsx)(p.PlusOutlined,{}),onClick:P,type:"primary",children:"\u6dfb\u52a0"},"button")]},tableAlertOptionRender:function(){var e;return(0,y.jsx)(f.T,{size:16,children:(0,y.jsx)(v,{text:"\u6279\u91cf\u5220\u9664",requestName:"reportDelete",params:{ids:[Z]},reload:null===(e=m.current)||void 0===e?void 0:e.reloadAndRest})})}}))]})}))},65216:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(59469),o=n(37091),i=n.n(o),a={development:{default:"http://172.19.20.12:9905",geo:"http://geo.datav.aliyun.com/areas_v3/bound/",local:window.location.href.split("#")[0]},test:{default:"http://172.19.20.12:9905",geo:"http://geo.datav.aliyun.com/areas_v3/bound/",local:"http://geo.datav.aliyun.com/"},production:{default:"http://192.168.200.7:9905",geo:"http://geo.datav.aliyun.com/areas_v3/bound/",local:"https://myfirebug.github.io"}},u=n(29162),c=n.n(u),s=n(7885),d=n(56012),l="production",f=[],p=0,h=function(e){for(var t=0,n=f.length;t<n;t++)if(f[t]===e){f.splice(t,1);break}},g=function(e){var t=document.getElementById("js_loading");e&&p--,p<=0&&t&&(t.style.display="none")};function m(e){var t,n=function(e){return(0,r.Z)((0,r.Z)({},e),{},{url:e.url||"",method:e.method||"post",params:e.params,loading:"boolean"!==typeof e.loading||e.loading,servicePrefix:e.servicePrefix||"default",data:e.data,responseType:e.responseType||"json"})}(e);return function(e){if(e){p++;var t=document.getElementById("js_loading");e&&t&&(t.style.display="fixed")}}(n.loading),n.servicePrefix&&(t=n.servicePrefix,i().defaults.baseURL=a[l][t]),new Promise((function(e,t){i()(n).then((function(t){g(n.loading),e(t)})).catch((function(e){g(n.loading),t(e)}))}))}function y(e){return m((0,r.Z)((0,r.Z)({},e),{},{method:"get"}))}function v(e){return m((0,r.Z)((0,r.Z)({},e),{},{method:"post"}))}i().defaults.timeout=6e4,i().defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",i().defaults.withCredentials=!0,i().interceptors.request.use((function(e){var t,n;"object"===typeof e.headers&&(e.headers.Authorization="Bearer ".concat(null===(n=d.Z.getState().userinfo)||void 0===n?void 0:n.token));return e.cancelToken=new(i().CancelToken)((function(e){t=e})),"function"===typeof t&&function(e,t){for(var n=0,r=f.length;n<r;n++)if(f[n]===e)return void t(e);f.push(e)}("".concat(e.url,"?").concat(c().stringify(e.params),"&method=").concat(e.method),t),e}),(function(e){return Promise.reject(e)})),i().interceptors.response.use((function(e){var t=e.config,n=e.status,r=e.data,o=r.code,i=r.message,a=r.data;if(t&&h("".concat(t.url,"?").concat(c().stringify(t.params),"&method=").concat(t.method)),200===n)return void 0===o?Promise.resolve(e.data):0!==o?(s.yw.error(i||"\u83b7\u53d6\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458"),Promise.resolve(a)):Promise.resolve(a);var u=new Error("\u8bf7\u6c42\u51fa\u73b0\u5f02\u5e38, HTTP \u72b6\u6001\u7801\u4e0d\u4e3a 200");return Promise.reject(u)}),(function(e){var t=e.config,n=e.message,r=e.response.status;switch(t&&h("".concat(t.url,"?").concat(c().stringify(t.params),"&method=").concat(t.method)),n&&h("".concat(n)),r){case 401:default:break;case 403:window.sessionStorage.clear(),s.yw.error("token\u5931\u6548");break;case 404:s.yw.error("\u63a5\u53e3\u4e0d\u5b58\u5728");break;case 500:s.yw.error("\u670d\u52a1\u5668\u9519\u8bef")}return Promise.reject({data:null,code:r,message:"\u5931\u8d25",success:!1})}));var x={getGeo:function(e){return y({url:"/geo/areas_v3/bound/".concat(e.field,".json"),loading:!0,servicePrefix:"local"})},login:function(e){return v({url:"/login",loading:!0,data:e,servicePrefix:"local"})},report:function(e){return y({url:"/report-list",loading:!0,data:e,servicePrefix:"local"})},reportDelete:function(e){return v({url:"/report-delete",loading:!0,data:e,servicePrefix:"local"})}}},47740:function(e,t,n){"use strict";n.d(t,{C4:function(){return w},FJ:function(){return u},Fk:function(){return b},Hc:function(){return o},JC:function(){return a},L9:function(){return h},UY:function(){return c},WX:function(){return p},h6:function(){return k},iK:function(){return y},ny:function(){return l},o9:function(){return x},qA:function(){return m},r0:function(){return j},ru:function(){return v},ss:function(){return s},x4:function(){return f},xk:function(){return g},xn:function(){return d},zG:function(){return i}});var r=n(25162),o=function(e){return function(t){t(function(e){return{type:r.OV,data:e}}(e))}},i=function(e,t){return function(n){n(function(e){return{type:r.zN,data:e}}(e)),t&&t()}},a=function(e,t){return function(n){n(function(e){return{type:r.m,id:e}}(e)),t&&t()}},u=function(e,t,n){return function(o){o(function(e,t){return{type:r.Vo,id:e,data:t}}(e,t)),n&&n()}},c=function(e,t){return function(n){n(function(e){return{type:r.zI,id:e}}(e)),t&&t()}},s=function(e,t){return function(n){n(function(e,t){return{type:r.WI,data:e,groupId:t}}(e,t))}},d=function(){return function(e){e({type:r.Kq})}},l=function(e,t){return function(n){n(function(e,t){return{type:r.bR,id:e,groupId:t}}(e,t))}},f=function(e,t,n){return function(o){o(function(e,t,n){return{type:r.CO,id:e,groupId:t,data:n}}(e,t,n))}},p=function(e,t){return function(n){n(function(e,t){return{type:r.gT,id:e,groupId:t}}(e,t))}},h=function(){return function(e){e({type:r.TQ})}},g=function(){return function(e){e({type:r.ZY})}},m=function(){return function(e){e({type:r.iZ})}},y=function(e){return function(t){t(function(e){return{type:r.t0,datas:e}}(e))}},v=function(){return function(e){e({type:r.oG})}},x=function(){return function(e){e({type:r.PY})}},b=function(){return function(e){e({type:r.S_})}},w=function(){return function(e){e({type:r.UQ})}},k=function(){return function(e){e({type:r.m9})}},j=function(){return function(e){e({type:r.xT})}}},30046:function(){}}]);