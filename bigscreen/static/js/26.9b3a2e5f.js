"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[26,431],{61026:function(e,n,l){l.r(n),l.d(n,{default:function(){return J}});var a=l(59469),r=l(45308),t=l(33374),i=l(44855),o=(l(78431),l(6897)),s=l(87183),c=l(67507),d=l(67191),u=l(98843),m=l(10036),p=l(13381),f=l(41324),h=l(27367),g=l(76483),b=l(73380),x=l(39746),j=l(24687),Z=l(19530),v=l(39924),y=l(70437),C=l(56365),w=l(29072),V=l(20884),N=l(12016),I=l(89648),F=l.n(I),k=(l(45149),l(17856)),S=function(e){var n=e.value,l=e.onChange,r=e.options,t=void 0===r?{}:r,o=(0,i.useRef)(null),s=(0,i.useRef)(null),c=(0,i.useCallback)((function(){if(!s.current){var e=(0,a.Z)({mode:"code",onChange:function(){var e;l&&l(null===(e=s.current)||void 0===e?void 0:e.get())}},t);s.current=new(F())(o.current,e,n)}}),[l,t,n]);return(0,i.useEffect)((function(){c()}),[c]),(0,i.useEffect)((function(){return function(){s.current&&s.current.destroy()}}),[s]),(0,k.jsx)("div",{ref:o,className:"app-json-editor"})},q=N.Z.widgetTypesConfiguration,A=N.Z.widgetConfiguration,_=N.Z.baseConfiguration,E=o.Z.TextArea,O=s.Z.TabPane,P=c.Z.Option,T=d.Z.Panel,J=function(e){var n=e.screen,l=e.modifyScreen,N=e.currentWidgetId,I=e.currentWidget,F=e.modifyLargeScreenElement,J=e.currentPage,B=e.setRightFlag,D=e.rightFlag,M=e.currentWidgetGroupId,U=e.showOrHideLargeScreenElement,L=e.changeLargeScreenElement,R=(0,i.useState)("1"),W=(0,t.Z)(R,2),G=W[0],H=W[1],K=u.Z.useForm(),z=(0,t.Z)(K,1)[0],Q=u.Z.useForm(),X=(0,t.Z)(Q,1)[0],Y=u.Z.useForm(),$=(0,t.Z)(Y,1)[0],ee=u.Z.useForm(),ne=(0,t.Z)(ee,1)[0],le=u.Z.useForm(),ae=(0,t.Z)(le,1)[0];(0,i.useEffect)((function(){I.configureValue&&z.setFieldsValue(I.configureValue),I.coordinateValue&&$.setFieldsValue(I.coordinateValue),I.dataValue&&ne.setFieldsValue(I.dataValue),I.linkageIds&&ae.setFieldsValue({linkageIds:I.linkageIds.split(",")})}),[I]);var re=function(e,n){return Object.prototype.toString.call(e)==n},te=function(e,n,l,a){if(a){var t=JSON.parse(JSON.stringify(I));t[a][n]=l,e&&e(N,M,t)}else e&&e((0,r.Z)({},n,l))},ie=function(e,n,l,a){var t=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return(0,k.jsxs)(k.Fragment,{children:["Input"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(o.Z,{allowClear:!0,disabled:e.disabled,onBlur:function(n){return t&&te(l,e.name,n.target.value,a)},placeholder:e.placeholder})}),"InputNumber"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(m.Z,{disabled:e.disabled,min:e.min,max:e.max,onBlur:function(n){return t&&te(l,e.name,n.target.value?Number(n.target.value):0,a)},style:{width:"100%"},placeholder:e.placeholder})}),"TextArea"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(E,{allowClear:!0,disabled:e.disabled,onBlur:function(n){return t&&te(l,e.name,n.target.value,a)},rows:8,placeholder:e.placeholder})}),"Switch"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,valuePropName:"checked",rules:[{required:e.require}],children:(0,k.jsx)(p.Z,{disabled:e.disabled||"useInterface"===e.name&&!M,onChange:function(n){return t&&te(l,e.name,n,a)}})}),"Slider"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(f.Z,{min:e.min||0,max:e.max||100,disabled:e.disabled,step:e.step||1,onAfterChange:function(n){return t&&te(l,e.name,n,a)}})}),"Select"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(c.Z,{allowClear:!0,disabled:e.disabled,onChange:function(n){return t&&te(l,e.name,n,a)},placeholder:e.placeholder,children:e.options.map((function(e){return(0,k.jsx)(P,{value:e.code,children:e.name},e.code)}))})}),"SketchPicker"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,children:(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(g.Z,{span:12,children:(0,k.jsx)(u.Z.Item,{noStyle:!0,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(o.Z,{allowClear:!0,disabled:e.disabled,onBlur:function(n){return t&&te(l,e.name,n.target.value,a)},placeholder:e.placeholder})})}),(0,k.jsx)(g.Z,{span:11,offset:1,children:(0,k.jsx)(u.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(){return(0,k.jsxs)("div",{className:"color-wrapper",style:{background:n.getFieldValue(e.name),width:"100%"},children:["\u83b7\u53d6\u989c\u8272",(0,k.jsx)("div",{className:"color",children:(0,k.jsx)(x.AI,{color:n.getFieldValue(e.name),onChangeComplete:function(i){n.setFieldsValue((0,r.Z)({},e.name,"rgba(".concat(i.rgb.r,",").concat(i.rgb.g,",").concat(i.rgb.b,",").concat(i.rgb.a,")"))),t?te(l,e.name,"rgba(".concat(i.rgb.r,",").concat(i.rgb.g,",").concat(i.rgb.b,",").concat(i.rgb.a,")"),a):n.setFieldValue(e.name,"rgba(".concat(i.rgb.r,",").concat(i.rgb.g,",").concat(i.rgb.b,",").concat(i.rgb.a,")"))}})})]})}})})]})}),"JsonEdit"===e.componentName&&(0,k.jsx)(u.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,rules:[{required:e.require}],children:(0,k.jsx)(u.Z.Item,{shouldUpdate:!0,noStyle:!0,children:(0,k.jsx)(S,{value:n.getFieldValue(e.name),onChange:function(r){return t?te(l,e.name,r,a):n.setFieldValue(e.name,r)}})})})]})},oe=function e(n,l,a,r){var t=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return n.map((function(n,i){if(re(n,"[object Object]")){var o=void 0!==n.relationFields?n.relationFields.split(","):[];return(0,k.jsx)("div",{children:o.length?(0,k.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:!0,children:function(e){var i=e.getFieldValue;if(o.every((function(e){return n.relationValues.includes(String(i(e)))})))return ie(n,l,a,r,t)}}):ie(n,l,a,r,t)},i)}if(re(n,"[object Array]"))return(0,k.jsx)("div",{children:n.map((function(n,i){var o=void 0!==n.relationFields?n.relationFields.split(","):[];return(0,k.jsx)(d.Z,{children:void 0===n.relationFields?(0,k.jsx)(T,{header:n.name,children:e(n.list,l,a,r,t)},n+i):(0,k.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:!0,children:function(s){var c=s.getFieldValue;if(o.every((function(e){return n.relationValues.includes(String(c(e)))})))return(0,k.jsx)(d.Z,{children:(0,k.jsx)(T,{header:n.name,children:e(n.list,l,a,r,t)},n+i)},i)}})},i)}))},i)}))},se=function(e,n,l){var a;e.stopPropagation(),e.preventDefault(),null===(a=document.querySelector("#js-content-menu"))||void 0===a||a.setAttribute("style","display: none"),n!==N&&L(n,l)},ce=function(e,n,l){e.stopPropagation(),e.preventDefault(),U(n,l)},de=(0,i.useMemo)((function(){var e=[];if(M){var n=J.widgets.findIndex((function(e){return e.id===M}));if(-1!==n&&J.widgets[n].dataValue&&J.widgets[n].dataValue.params)for(var l in J.widgets[n].dataValue.params)e.push(l)}return e}),[M,J]);(0,i.useEffect)((function(){H(N?"1":"2")}),[N]);var ue=(0,i.useMemo)((function(){if(!J.widgets)return false;if(N===M){var e=J.widgets.findIndex((function(e){return e.id===M}));if(-1!==e&&J.widgets[e].widgets.some((function(e){return"form"===e.type})))return!0}return false}),[J,N,M]);return(0,k.jsxs)("div",{className:"app-screen-disign__body--right",style:{right:D?0:-400},children:[(0,k.jsx)("div",{onClick:function(){return B(!D)},className:"operation",children:D?(0,k.jsx)(C.Z,{}):(0,k.jsx)(w.Z,{})}),(0,k.jsxs)(s.Z,{className:"custom-tabs",activeKey:G,onChange:function(e){return H(e)},destroyInactiveTabPane:!0,children:[J&&J.widgets&&J.widgets.length?(0,k.jsx)(O,{tab:"\u56fe\u5c42\u7ba1\u7406",style:{position:"relative"},children:(0,k.jsx)("div",{className:"app-screen-disign__layer",children:function e(n,l){return n.map((function(n){return n.widgets?(0,k.jsxs)("div",{className:"app-screen-disign__layer",children:[(0,k.jsxs)("div",{onContextMenu:function(e){se(e,n.id,n.id),(0,V._u)(e)},onClick:function(e){return se(e,n.id,n.id)},className:"header ".concat(n.id===N?"is-active":""),children:[(0,k.jsx)("span",{onClick:function(e){return ce(e,n.id)},className:"show",children:"block"===n.configureValue.styleDisplay?(0,k.jsx)(j.Z,{}):(0,k.jsx)(Z.Z,{})}),(0,k.jsx)("span",{className:"file",children:(0,k.jsx)(v.Z,{})}),(0,k.jsx)("span",{className:"label",children:n.label})]}),e(n.widgets,n.id)]},n.id):(0,k.jsx)("div",{className:"app-screen-disign__layer--item",children:(0,k.jsxs)("div",{onContextMenu:function(e){se(e,n.id,l),(0,V._u)(e)},onClick:function(e){return se(e,n.id,l)},className:"header ".concat(n.id===N?"is-active":""),children:[(0,k.jsx)("span",{onClick:function(e){return ce(e,n.id,l)},className:"show",children:"block"===n.configureValue.styleDisplay?(0,k.jsx)(j.Z,{}):(0,k.jsx)(Z.Z,{})}),(0,k.jsx)("span",{className:"file",children:(0,k.jsx)(y.Z,{})}),(0,k.jsx)("span",{className:"label",children:n.label})]})},n.id)}))}(J.widgets||[])})},"1"):null,(0,k.jsx)(O,{tab:"\u9879\u76ee\u914d\u7f6e",children:(0,k.jsx)(u.Z,{preserve:!0,form:X,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",initialValues:n,children:oe(_.page.configure||[],X,l,"")})},"2"),N&&!N.includes(",")&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(O,{tab:"\u914d\u7f6e",children:(0,k.jsx)(u.Z,{form:z,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",children:q[I.code]?oe(q[I.code].configure||[],z,F,"configureValue",!0):q[I.type]?oe(q[I.type].configure||[],z,F,"configureValue",!0):null})},"3"),q[I.code]&&q[I.code].data||q[I.type]&&q[I.type].data?(0,k.jsx)(O,{tab:"\u6570\u636e",children:(0,k.jsxs)(u.Z,{preserve:!0,form:ne,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",onFinish:function(e){var n=JSON.parse(JSON.stringify(I));n.dataValue=e,A[n.code]&&(n.dataValue=(0,a.Z)((0,a.Z)({},A[n.code].dataValue),e),F(N,M,n))},children:[q[I.code]?oe(q[I.code].data||[],ne,F,"dataValue",!1):q[I.type]?oe(q[I.type].data||[],ne,F,"dataValue",!1):null,"form"===I.type?(0,k.jsx)(u.Z.Item,{label:"\u63a5\u53e3\u5b57\u6bb5",name:"paramName",tooltip:"\u4ece\u7ec4\u7ec4\u4ef6\u7684\u53c2\u6570\u4e2d\u9009\u62e9",children:(0,k.jsx)(c.Z,{placeholder:"\u8bf7\u9009\u62e9",children:de.map((function(e){return(0,k.jsx)(P,{children:e},e)}))})}):null,(0,k.jsx)(u.Z.Item,{wrapperCol:{offset:6,span:18},children:(0,k.jsx)(b.Z,{type:"primary",htmlType:"submit",block:!0,children:"\u4fdd\u5b58"})})]})},"4"):null,(0,k.jsx)(O,{tab:"\u5750\u6807",children:(0,k.jsx)(u.Z,{preserve:!0,form:$,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",children:oe(_.coordinate.configure||[],$,F,"coordinateValue",!0)})},"5")]}),ue?(0,k.jsx)(O,{tab:"\u8054\u52a8",children:(0,k.jsx)(u.Z,{form:ae,labelCol:{span:6},wrapperCol:{span:18},autoComplete:"off",labelAlign:"left",children:(0,k.jsx)(u.Z.Item,{label:"\u8054\u52a8\u7ec4\u4ef6",name:"linkageIds",children:(0,k.jsx)(c.Z,{onChange:function(e){return F(N,M,(0,a.Z)((0,a.Z)({},I),{},{linkageIds:e.join(",")}))},mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u8054\u52a8\u7ec4\u4ef6",children:J&&J.widgets?J.widgets.map((function(e){if(e.id!==M)return(0,k.jsx)(P,{value:e.id,children:e.label},e.id)})):null})})})},"6"):null]})]})}},78431:function(e,n,l){l.r(n),n.default={}}}]);